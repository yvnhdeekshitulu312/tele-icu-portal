<app-suit-header [IsSwitchWard]="true" *ngIf="!fromScheduler"></app-suit-header>

<!--Container-->
<div class=" p-0">
    <div class="page-header sticky-top shadow-sm">
        <h2 class="page-heading">Future Appointments Worklist</h2>
        <div class="actions ms-auto gap-2 d-flex align-items-center">
            <button class="btn btn-danger-outline" *ngIf="sortedGroupedByAdmitDate?.length > 0 && !fromScheduler"
                (click)="cancelAllAppointmentsModal()">Cancel All Appointments</button>
            <button class="btn btn-danger-outline" (click)="clearViewScreen()">Clear</button>
            <button class="btn btn-main-outline" (click)="FetchPatientAppointmentsWorkList()">Search</button>
        </div>
    </div>

    <div class="bg-white mb-0 rounded-2">
        <div class="row gx-2 dischargeLegends_tokens mx-0 my-2">
            <div class="col-3 cursor-pointer" style="width: 20%;">
                <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center"
                    (click)="filterAppointmentStatus('C')">
                    <div class="count total_token d-flex align-items-center gap-2">
                        <h4 class="m-0 fw-bold newreq">{{Cancel}}</h4>
                        <p class="m-0 fs-6 fw-bold">Cancelled</p>
                    </div>
                </div>
            </div>
            <div class="col-3 cursor-pointer" style="width: 20%;">
                <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center"
                    (click)="filterAppointmentStatus('B')">
                    <div class="count total_token d-flex align-items-center gap-2">
                        <h4 class="m-0 fw-bold scheduled">{{Booked}}</h4>
                        <p class="m-0 fs-6 fw-bold">Booked</p>
                    </div>
                </div>
            </div>
              <div class="col-3 cursor-pointer" style="width: 20%;">
                <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center"
                    (click)="filterAppointmentStatus('G')">
                    <div class="count total_token d-flex align-items-center gap-2">
                        <h4 class="m-0 fw-bold scheduledVirtual">{{onlineCall}}</h4>
                        <p class="m-0 fs-6 fw-bold">Virtual Appointment</p>
                    </div>
                </div>
            </div>
            <div class="col-3 cursor-pointer" style="width: 20%;">
                <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center"
                    (click)="filterAppointmentStatus('V')">
                    <div class="count total_token d-flex align-items-center gap-2">
                        <h4 class="m-0 fw-bold Visited">{{Visited}}</h4>
                        <p class="m-0 fs-6 fw-bold">Visited</p>
                    </div>
                </div>
            </div>
            <div class="col-3 cursor-pointer" style="width: 20%;">
                <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center"
                    (click)="filterAppointmentStatus('A')">
                    <div class="count total_token d-flex align-items-center gap-2">
                        <h4 class="m-0 fw-bold scheduledAll">{{All}}</h4>
                        <p class="m-0 fs-6 fw-bold">All</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-0">
            <div class="col-12">
                <form [formGroup]="datesForm">
                    <div class="d-flex align-items-center bg-primary-20 p-2 justify-content-between">
                        <div class="d-flex align-items-center gap-3">
                            <div class="d-flex align-items-center gap-2">
                                <!-- <label for="" class="form-label text-nowrap">Date :</label> -->
                                <div class="d-flex align-items-center gap-2 justify-content-end">
                                    <button class="date_range_calendar p-0 position-relative" style="width: 227px;">
                                        <mat-date-range-input class="btn btn-main-outline" [formGroup]="datesForm"
                                            [rangePicker]="picker">
                                            <input matStartDate formControlName="fromdate">
                                            <input matEndDate formControlName="todate"
                                                (dateChange)="FetchPatientAppointmentsWorkList()">
                                        </mat-date-range-input>
                                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-date-range-picker #picker></mat-date-range-picker>
                                    </button>
                                </div>
                            </div>
                            <div class="dropdown primary-dropdown hoverServices w-25">
                                <button style="height: 2.1rem;"
                                    class="btn btn-main-outline d-flex align-items-center justify-content-between dropdown-toggle w-100">
                                    <span>
                                        <svg class="me-2" width="12" height="17" viewBox="0 0 12 17" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M6.00015 0.500766C8.77762 0.45442 10.7001 2.51758 10.7504 5.2977C10.804 8.23808 8.13741 10.82 6.46617 12.9966C6.22341 13.3114 5.73815 13.3011 5.51208 12.9659C5.11911 12.3836 4.64064 11.7882 4.14395 11.1702C2.72755 9.40752 1.20654 7.69043 1.25005 5.29788C1.30024 2.51913 3.2218 0.454933 6.00032 0.500943L6.00015 0.500766ZM6.00015 3.14664C7.41899 3.14664 8.56912 4.29677 8.56912 5.71561C8.56912 7.13445 7.41899 8.28471 6.00015 8.28471C4.58118 8.28471 3.43105 7.13432 3.43105 5.71561C3.43105 4.29677 4.58118 3.14664 6.00015 3.14664ZM9.45818 11.9057C11.6858 12.9 11.6858 14.8575 9.45818 15.8518C7.52185 16.7161 4.47851 16.7161 2.5418 15.8518C0.314193 14.8575 0.314193 12.9 2.5418 11.9057C2.86634 11.7608 3.22193 11.6404 3.59846 11.544C3.87409 11.8876 4.15513 12.2275 4.42971 12.5674C3.9135 12.6578 3.43171 12.7948 3.0205 12.9782C1.71696 13.5602 1.71696 14.1973 3.0205 14.7792C4.64231 15.503 7.35766 15.503 8.97954 14.7792C10.2831 14.1973 10.2831 13.5602 8.97954 12.9782C8.5872 12.8032 8.13071 12.6706 7.64132 12.5803C7.91374 12.2485 8.19013 11.9081 8.46064 11.5593C8.81521 11.653 9.15079 11.7684 9.45815 11.9058L9.45818 11.9057Z"
                                                fill="#8ECBD7" />
                                        </svg>
                                        {{lang === 'ar' ? datesForm.get("HospitalName2l")?.value :
                                        datesForm.get("HospitalName")?.value}}
                                    </span>
                                </button>
                                <div class="dropdown-menu end-0">
                                    <p *ngFor="let hl of locationList;let i=index" (click)="selectedHospital(hl)"
                                        class="dropdown-item border-0 py-2 cursor-pointer"> {{lang === 'ar' ? hl.Name2l
                                        : hl.Name}}</p>
                                </div>
                            </div>
                            <div class="CommanSearch__form ps-0 position-relative" *ngIf="!fromScheduler"
                                style="width: 28rem;">
                                <input type="text" class="form-control pe-5" placeholder="Specialisation"
                                    autocomplete="off" formControlName="Specialisation" aria-label="Specialisation"
                                    [matAutocomplete]="autoSpecialisation"
                                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchSpecItem($event)">
                                <mat-autocomplete #autoSpecialisation="matAutocomplete"
                                    (optionSelected)="selectSpecialisationItem($event)">
                                    <mat-option *ngFor="let item of listOfSpecialisation" [value]="item.Specialisation">
                                        {{item.Specialisation}}
                                    </mat-option>
                                </mat-autocomplete>
                                <svg class="me-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                    viewBox="0 0 25 24" fill="none">
                                    <g clip-path="url(#clip0_72_1908)">
                                        <path
                                            d="M11.0835 2.00003C16.0515 2.00003 20.0835 6.03203 20.0835 11C20.0835 15.968 16.0515 20 11.0835 20C6.1155 20 2.0835 15.968 2.0835 11C2.0835 6.03203 6.1155 2.00003 11.0835 2.00003ZM11.0835 18C14.9505 18 18.0835 14.867 18.0835 11C18.0835 7.13203 14.9505 4.00003 11.0835 4.00003C7.2155 4.00003 4.0835 7.13203 4.0835 11C4.0835 14.867 7.2155 18 11.0835 18ZM19.5685 18.071L22.3975 20.899L20.9825 22.314L18.1545 19.485L19.5685 18.071V18.071Z"
                                            fill="#368796" />
                                    </g>
                                </svg>
                                <span class="position-absolute" style="bottom: -1.1rem;" *ngIf="showSpecValidation">
                                    <div class="text-danger fs-8" *ngIf="showSpecValidation">
                                        Please select Specialisation</div>
                                </span>
                            </div>
                            <div class="CommanSearch__form ps-0 w-25 position-relative" *ngIf="!fromScheduler">
                                <input type="text" class="form-control pe-5" placeholder="Doctor" autocomplete="off"
                                    id="txtDoctor" formControlName="DoctorName" aria-label="Doctor"
                                    [matAutocomplete]="autoDoctor"
                                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchDoctor($event)">
                                <mat-autocomplete #autoDoctor="matAutocomplete" (optionSelected)="selectDocor($event)">
                                    <mat-option *ngFor="let item of listOfItems" [value]="item.EmpCodeName">
                                        {{item.EmpCodeName}}-{{item.SpecialityName}}
                                    </mat-option>
                                </mat-autocomplete>
                                <svg class="me-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                    viewBox="0 0 25 24" fill="none">
                                    <g clip-path="url(#clip0_72_1908)">
                                        <path
                                            d="M11.0835 2.00003C16.0515 2.00003 20.0835 6.03203 20.0835 11C20.0835 15.968 16.0515 20 11.0835 20C6.1155 20 2.0835 15.968 2.0835 11C2.0835 6.03203 6.1155 2.00003 11.0835 2.00003ZM11.0835 18C14.9505 18 18.0835 14.867 18.0835 11C18.0835 7.13203 14.9505 4.00003 11.0835 4.00003C7.2155 4.00003 4.0835 7.13203 4.0835 11C4.0835 14.867 7.2155 18 11.0835 18ZM19.5685 18.071L22.3975 20.899L20.9825 22.314L18.1545 19.485L19.5685 18.071V18.071Z"
                                            fill="#368796" />
                                    </g>
                                </svg>
                            </div>
                            <div class="d-flex align-items-center gap-2 w-25">
                                <!-- <label for="" class="form-label text-nowrap">SSN :</label> -->
                                <input type="text" formControlName="SSN" placeholder="ID No." class="form-control"
                                    (keydown.enter)="onEnterPress($event)" class="form-control"
                                    (keypress)="($event.charCode >= 48 && $event.charCode < 58)">
                            </div>
                            <div class="w-25 d-none">
                                <select name="" class="form-select pe-5" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="selectedStatusID" (change)="filterByStatus(0)">
                                    <option value="0">All</option>
                                    <option value="1">Confirmed by Call</option>
                                    <option value="2">Not Answered</option>
                                    <option value="3">Not Reachable</option>
                                    <!-- <option value="4">Virtual Confirmation</option> -->
                                    <!-- <option value="5">No Show</option> -->
                                    <option value="6">Confirmed by SMS</option>
                                    <option value="7">Wrong Number</option>
                                    <option value="8">Busy</option>
                                </select>
                            </div>
                            <div class="filter_Date position-relative">
                                <div class="d-flex align-items-center gap-2 fs-8">
                                    Filters
                                    <svg class="cursor-pointer" width="20" height="20" viewBox="0 0 24 25" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <rect x="2.75" y="3.27435" width="18.5" height="18.5" rx="3.25" stroke="#368796"
                                            stroke-width="1.5" />
                                        <circle cx="7.85547" cy="8.32605" r="1.375" fill="#368796" stroke="#368796"
                                            stroke-width="1.25" />
                                        <rect x="9.125" y="7.70105" width="7" height="1.25" rx="0.625" fill="#368796" />
                                        <circle cx="16.1445" cy="12.5243" r="1.375" fill="#4357BC" stroke="#4357BC"
                                            stroke-width="1.25" />
                                        <rect x="8.12988" y="11.8993" width="7" height="1.25" rx="0.625"
                                            fill="#4357BC" />
                                        <circle cx="7.875" cy="16.7227" r="1.375" fill="#368796" stroke="#368796"
                                            stroke-width="1.25" />
                                        <rect x="9.14453" y="16.0977" width="7" height="1.25" rx="0.625"
                                            fill="#368796" />
                                    </svg>
                                </div>
                                <div class="filter_dropdow end-0" style="left: unset;">
                                    <p class="m-0 p-2 cursor-pointer border-bottom d-flex align-items-center justify-content-between"
                                        (click)="filterByStatus(0)">
                                        All
                                        <span class="count">{{AllStatus}}</span>
                                    </p>
                                    <p class="m-0 p-2 cursor-pointer border-bottom d-flex align-items-center justify-content-between"
                                        (click)="filterByStatus(1)">
                                        Confirmed by Call
                                        <span class="count">{{ConfirmedbyCall}}</span>
                                    </p>
                                    <p class="m-0 p-2 cursor-pointer border-bottom d-flex align-items-center justify-content-between"
                                        (click)="filterByStatus(2)">
                                        Not Answered
                                        <span class="count">{{NotAnswered}}</span>
                                    </p>
                                    <p class="m-0 p-2 cursor-pointer border-bottom d-flex align-items-center justify-content-between"
                                        (click)="filterByStatus(3)">
                                        Not Reachable
                                        <span class="count">{{NotReachable}}</span>
                                    </p>
                                    <p class="m-0 p-2 cursor-pointer border-bottom d-flex align-items-center justify-content-between"
                                        (click)="filterByStatus(6)">
                                        Confirmed by SMS
                                        <span class="count">{{ConfirmedbySMS}}</span>
                                    </p>
                                    <p class="m-0 p-2 cursor-pointer border-bottom d-flex align-items-center justify-content-between"
                                        (click)="filterByStatus(7)">
                                        Wrong Number
                                        <span class="count">{{WrongNumber}}</span>
                                    </p>
                                    <p class="m-0 p-2 cursor-pointer border-bottom d-flex align-items-center justify-content-between"
                                        (click)="filterByStatus(8)">
                                        Busy
                                        <span class="count">{{Busy}}</span>
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="discharge_legends d-flex align-items-center gap-2 d-none">
                            <div class="d-flex align-items-center gap-1 newreq cursor-pointer"
                                (click)="filterAppointmentStatus('0')">
                                <span></span>
                                <p>Cancel</p>
                            </div>
                            <div class="d-flex align-items-center gap-1 scheduled cursor-pointer"
                                (click)="filterAppointmentStatus('1')">
                                <span></span>
                                <p>Booked</p>
                            </div>
                            <div class="d-flex align-items-center gap-1 scheduledAll cursor-pointer"
                                (click)="filterAppointmentStatus('2')">
                                <span></span>
                                <p>All</p>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div>

        <div class="p-2 appointment_worklist">
            <div class="nobulkprocess h-100 d-flex flex-column align-items-center justify-content-center"
                *ngIf="sortedGroupedByAdmitDatePaged.length === 0">
                <img style="height: 7rem;" src="assets/images/no-visits.svg" alt="">
                <p class="m-0 fs-6">No records found</p>
            </div>
            <div class="table-container" #scrollContainer (scroll)="onScrollAppointments($event)"
                style="height: 700px; overflow-y: auto;" *ngIf="!isInitialLoading">
                <div class="mb-3" *ngFor="let data of sortedGroupedByAdmitDatePaged">
                    <div class="card card-style-1 rounded group-date p-0 border-0 mt-1">
                        <div class="card-header rounded-top justify-content-start p-0 min-height-unset p-0">
                            <span class="d-block grp_date">{{ data.admitDate }}</span>
                        </div>
                        <div class="doc_card doctor_worklist mt-2 rounded-2 worklist_patientcard"
                            *ngFor="let item of data.items; let i=index">
                            <div class="row mx-0 gx-0" (click)="$event.preventDefault()">
                                <div class="col-md-3 p-1 position-relative" style="width: 25rem;">
                                    <div class="d-flex align-items-center h-100 cursor-pointer">
                                        <div class="patient-photo me-2">
                                            <img src="assets/images/icons/male.svg" alt="" class="position-relative"
                                                *ngIf="item.GenderID == '1'">
                                            <img src="assets/images/icons/female.svg" alt="" class="position-relative"
                                                *ngIf="item.GenderID == '2'">
                                        </div>
                                        <div class="">
                                            <p class="value fs-7 fw-bold w-100">{{item.PatientName}}</p>

                                            <div class="d-flex align-items-center gap-2">
                                                <p>{{item.Gender}} | {{item.FullAge}}| {{item.MaritalStatus}}</p>
                                                <p>ID No. : <span class="fw-bold">{{item.SSN}}</span></p>
                                            </div>
                                            <p>{{item.Nationality}} | Mobile : {{item.PatientMobileNo}}</p>

                                        </div>
                                    </div>

                                    <div class="visited text-center me-1 mt-2"
                                        *ngIf="item.VirtualConfirmStatus === '1'">
                                        <div class="custom_check active d-flex align-items-center">
                                            <svg width="15" height="15" viewBox="0 0 20 21" fill="none"
                                                xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                <path
                                                    d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                    fill="white" stroke="white" stroke-width="0.25"></path>
                                            </svg>
                                        </div>
                                        <p class="m-0 fs-8 fw-bold d-none">Visited</p>
                                    </div>

                                </div>
                                <div class="col pe-0">
                                    <div class="bg-white h-100 rounded-2">
                                        <div class="row mx-0 gx-2 p-1">
                                            <div class="col-3" style="width: 20%;">
                                                <label for="" class="form-label m-0 fw-bold">Doctor Name</label>
                                                <p class="cursor-pointer" (click)="$event.preventDefault()">
                                                    <span>{{item.DoctorFullName}}</span>
                                                </p>
                                            </div>
                                            <div class="col-2" style="width:12%;">
                                                <label for="" class="form-label m-0 fw-bold">Specialisation</label>
                                                <div class="custom_tooltip custom_tooltip_right">
                                                    <p class="text-truncate fs-8">{{item.DoctorSpecialty}}</p>
                                                </div>
                                            </div>
                                            <div class="col-2" style="width:13%;">
                                                <label for="" class="form-label m-0 fw-bold">Schedule Date</label>
                                                <div class="d-flex align-items-center gap-1">
                                                    <svg width="10" height="11" viewBox="0 0 10 11" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                            fill="#368796" />
                                                    </svg>
                                                    <p class="m-0 clr-dark-600 text-nowrap">
                                                        {{item.AppointmentDateTime?.split('
                                                        ')[0]}}</p>
                                                    <!-- <svg class="" width="10" height="11" viewBox="0 0 10 11" fill="none"
                                                                    xmlns="http://www.w3.org/2000/svg">
                                                                    <path
                                                                        d="M5.00634 10.5C6.2848 10.5 7.56331 10.0066 8.538 9.03255C10.4873 7.08447 10.4873 3.90922 8.538 1.96108C6.58867 0.0129498 3.41139 0.0129949 1.46202 1.96108C-0.487361 3.90917 -0.487316 7.08442 1.46202 9.03255C2.44936 10.0066 3.72785 10.5 5.00634 10.5ZM2.09493 2.59362C2.89243 1.79663 3.9557 1.39187 5.00634 1.39187C6.05698 1.39187 7.10764 1.79672 7.91774 2.59362C9.52537 4.20022 9.52537 6.80614 7.91774 8.41271C6.31012 10.0193 3.70253 10.0193 2.09493 8.41271C0.487305 6.80612 0.487305 4.20019 2.09493 2.59362Z"
                                                                        fill="#368796" />
                                                                    <path
                                                                        d="M3.42405 7.96996C3.53796 7.96996 3.66458 7.91939 3.75315 7.8308L5.39875 6.0471C5.47468 5.97121 5.51265 5.85738 5.51265 5.74347V3.35258C5.51265 3.1122 5.3101 2.90978 5.06957 2.90978C4.82913 2.90978 4.62657 3.1122 4.62657 3.35258V5.57899L3.09496 7.22355C2.93038 7.40064 2.94309 7.67895 3.12031 7.84343C3.20887 7.93193 3.31014 7.96988 3.42406 7.96988L3.42405 7.96996Z"
                                                                        fill="#368796" />
                                                                </svg>
                                                                <p class="m-0 clr-dark-600  text-nowrap">
                                                                    {{item.AppointmentDateTime?.split('
                                                                    ')[1]}}</p> -->
                                                </div>
                                            </div>
                                            <div class="col-2" *ngIf="item.PayerType!='SELF'" style="width:13%;">
                                                <label for="" class="form-label m-0 fw-bold">From|To Slot</label>
                                                <p class="text-truncate fs-8">{{item.FromSlot}}-{{item.ToSlot}}</p>
                                            </div>

                                            <div class="col-1" style="width: 10%;">
                                                <label for="" class="form-label m-0 fw-bold">Status</label>
                                                <p class="text-truncate fs-8">{{item.AppointmentStatus}}</p>
                                            </div>
                                            <div class="col-2" style="width:10%;">
                                                <label for=""
                                                    class="form-label m-0 fw-bold text-nowrap">{{langData?.DoctorAppointment?.PatientType}}</label>
                                                <p class="  fs-8">{{item?.CompanyName != '' &&
                                                    item?.CompanyName != undefined ? 'Insured' : 'Self'}}
                                                </p>
                                            </div>
                                            <div class="col-2"
                                                *ngIf="item.AppointmentStatus != 'Cancelled' && !item.isBeforeCurrentDay">
                                                <label for="" class="form-label m-0 fw-bold">Action</label>
                                                <div class="input-group"
                                                    *ngIf="['0', '1', '2','3', '4','5', '6','7', '8'].includes(item.Status)">
                                                    <select name="" class="form-select" [(ngModel)]="item.Status"
                                                        [disabled]="item.AppointmentStatus !== 'Booked' || item.VirtualConfirmStatus === '1'"
                                                        (change)="onItemActionsChange($event, item)">
                                                        <option value="0">Select</option>
                                                        <option value="1">Confirmed by Call</option>
                                                        <option value="2">Not Answered</option>
                                                        <option value="3">Not Reachable</option>
                                                        <!-- <option value="4">Virtual Confirmation</option> -->
                                                        <!-- <option value="5">No Show</option> -->
                                                        <option value="6">Confirmed by SMS</option>
                                                        <option value="7">Wrong Number</option>
                                                        <option value="8">Busy</option>

                                                    </select>
                                                </div>
                                            </div>
                                            <div style="width:3%;">
                                                 <span *ngIf="item.IsVitual==true" class="mx-3">
                          <svg width="20" height="20" viewBox="0 0 11 9" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path style="display: block !important;" d="M9.76029 1.65632C9.56029 1.54901 9.14078 1.43681 8.57005 1.83681L7.85297 2.34413C7.79931 0.827056 7.14078 0.231934 5.54078 0.231934H2.61395C0.945655 0.231934 0.296875 0.880714 0.296875 2.54901V6.45145C0.296875 7.5734 0.906631 8.76852 2.61395 8.76852H5.54078C7.14078 8.76852 7.79931 8.1734 7.85297 6.65632L8.57005 7.16364C8.87248 7.37828 9.1359 7.44657 9.34566 7.44657C9.52614 7.44657 9.66761 7.39291 9.76029 7.34413C9.96029 7.24169 10.2969 6.96364 10.2969 6.26608V2.73437C10.2969 2.03681 9.96029 1.75876 9.76029 1.65632ZM4.80907 4.19779C4.30663 4.19779 3.892 3.78803 3.892 3.28071C3.892 2.7734 4.30663 2.36364 4.80907 2.36364C5.31151 2.36364 5.72614 2.7734 5.72614 3.28071C5.72614 3.78803 5.31151 4.19779 4.80907 4.19779Z" fill="#DA0C81"/>
                                  </svg>
                        </span>
                                            </div>


                                        </div>
                                        <!-- <div class="row gx-2 mx-0 w-100 p-1" style="background-color: #e9e9e9;">
                                                       
                                                        
                                                    </div> -->
                                    </div>
                                </div>
                            </div>
                            <div
                                class="rounded-bottom row mx-0 gx-2 p-1 align-items-center border-top-primary-200 doctor_worklist_ChiefComplaints">
                                <div class="d-flex align-items-center justify-content-between">
                                    <div class="row w-100 gx-2 pe-4">
                                        <div class="d-flex align-items-center gap-2 w-max-content">
                                            <div class="d-flex align-items-center gap-1" *ngIf="item.InsuranceName!=''">
                                                <label for=""
                                                    class="form-label m-0 fw-bold text-nowrap">Insurance:</label>
                                                <p class=" fs-8">{{item.InsuranceName}}</p>
                                            </div>
                                            <div class="d-flex align-items-center gap-1">
                                                <label for="" class="form-label m-0 fw-bold text-nowrap">Booked
                                                    By:</label>
                                                <p class=" fs-8">{{item.BookedEmployeeName}}</p>
                                            </div>
                                            <div class="d-flex align-items-center gap-1">
                                                <label for="" class="form-label m-0 fw-bold text-nowrap">Booked
                                                    Date:</label>
                                                <p class=" fs-8 text-nowrap">{{item.BookingDate}}</p>
                                            </div>

                                        </div>

                                        <div class="d-flex align-items-center gap-2"
                                            *ngIf="item.VirtualConfirmStatusName">
                                            <div class="d-flex align-items-center gap-1">
                                                <label for="" class="form-label m-0 fw-bold text-nowrap">Action:</label>
                                                <p class=" fs-8">{{item.VirtualConfirmStatusName}}</p>
                                            </div>
                                            <div class="d-flex align-items-center gap-1"
                                                *ngIf="item.VirtualConfirmedByName">
                                                <label for="" class="form-label m-0 fw-bold text-nowrap">Action
                                                    Confirmed
                                                    By:</label>
                                                <p class=" fs-8">{{item.VirtualConfirmedByName}}</p>
                                            </div>
                                            <div class="d-flex align-items-center gap-1"
                                                *ngIf="item.VirtualConfirmedByName">
                                                <label for="" class="form-label m-0 fw-bold text-nowrap">Action
                                                    Confirmed
                                                    Date:</label>
                                                <p class=" fs-8">{{item.VirtualConfirmedDate}}</p>
                                            </div>
                                        </div>

                                        <div class="d-flex align-items-center gap-1 w-max-content"
                                            *ngIf="item.AppointmentStatus == 'Cancelled'">
                                            <label for="" class="form-label m-0 fw-bold text-nowrap">Cancel
                                                Reason:</label>
                                            <p class=" fs-8">{{item.CancelReason}}</p>
                                        </div>
                                        <div class="d-flex align-items-center gap-1 w-max-content"
                                            *ngIf="item.AppointmentStatus == 'Cancelled'">
                                            <label for="" class="form-label m-0 fw-bold text-nowrap">Cancel
                                                Date:</label>
                                            <div class="d-flex align-items-center gap-1">
                                                <svg class="width-unset" width="10" height="11" viewBox="0 0 10 11"
                                                    fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                        fill="#368796" />
                                                </svg>
                                                <p class="m-0 clr-dark-600 text-nowrap">
                                                    {{item.CancelDate?.split('
                                                    ')[0]}}</p>
                                                <svg class="width-unset" width="10" height="11" viewBox="0 0 10 11"
                                                    fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M5.00634 10.5C6.2848 10.5 7.56331 10.0066 8.538 9.03255C10.4873 7.08447 10.4873 3.90922 8.538 1.96108C6.58867 0.0129498 3.41139 0.0129949 1.46202 1.96108C-0.487361 3.90917 -0.487316 7.08442 1.46202 9.03255C2.44936 10.0066 3.72785 10.5 5.00634 10.5ZM2.09493 2.59362C2.89243 1.79663 3.9557 1.39187 5.00634 1.39187C6.05698 1.39187 7.10764 1.79672 7.91774 2.59362C9.52537 4.20022 9.52537 6.80614 7.91774 8.41271C6.31012 10.0193 3.70253 10.0193 2.09493 8.41271C0.487305 6.80612 0.487305 4.20019 2.09493 2.59362Z"
                                                        fill="#368796" />
                                                    <path
                                                        d="M3.42405 7.96996C3.53796 7.96996 3.66458 7.91939 3.75315 7.8308L5.39875 6.0471C5.47468 5.97121 5.51265 5.85738 5.51265 5.74347V3.35258C5.51265 3.1122 5.3101 2.90978 5.06957 2.90978C4.82913 2.90978 4.62657 3.1122 4.62657 3.35258V5.57899L3.09496 7.22355C2.93038 7.40064 2.94309 7.67895 3.12031 7.84343C3.20887 7.93193 3.31014 7.96988 3.42406 7.96988L3.42405 7.96996Z"
                                                        fill="#368796" />
                                                </svg>
                                                <p class="m-0 clr-dark-600  text-nowrap">
                                                    {{item.CancelDate?.split('
                                                    ')[1]}}</p>
                                            </div>
                                        </div>
                                        <div class="d-flex align-items-center gap-1 w-max-content"
                                            *ngIf="(item.AppointmentStatus == 'Cancelled'&&item.ActionType!='')">
                                            <label for="" class="form-label m-0 fw-bold text-nowrap">ActionType:</label>
                                            <p class=" fs-8">{{item.ActionType}}</p>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center gap-2 justify-content-end">
                                        <button class="btn btn-main-outline lh-1 fs-8"
                                            (click)="rescheduleAppointment(item)"
                                            *ngIf="['0', '1','4', '5'].includes(item.Status) && !item.isBeforeCurrentDay">Reschedule</button>
                                        <button class="btn btn-main-outline lh-1 fs-8"
                                            (click)="cancelAppointmentConfirmation(item)"
                                            *ngIf="['0','1', '4', '5'].includes(item.Status) && !item.isBeforeCurrentDay">Cancel
                                            Appointment</button>
                                        <div class="inline_legend fut_app_Cancel">
                                            <span class="legend fs-8 text-nowrap fut_app_Cancel"
                                                *ngIf="item.AppointmentStatus=='Cancelled'">{{item.AppointmentStatus}}</span>
                                        </div>
                                        <div class="inline_legend fut_app_Booked">
                                            <span class="legend fs-8 text-nowrap fut_app_Booked"
                                                *ngIf="item.AppointmentStatus=='Booked'">{{item.AppointmentStatus}}</span>
                                        </div>
                                        <div class="inline_legend fut_app_All">
                                            <span class="legend fs-8 text-nowrap fut_app_All"
                                                *ngIf="item.AppointmentStatus=='Visited'">{{item.AppointmentStatus}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="isInitialLoading" class="text-center p-4">
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <p class="mt-2">Loading appointments...</p>
                </div>

            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="action_remarks" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" style="width: 55%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Remarks</h5>
                <div class="d-flex gap-2 align-items-center justify-content-end">
                    <button class="btn btn-danger-outline" (click)="clearRemarks()">Clear</button>
                    <button class="btn btn-main-outline" (click)="updateAppointment()">Save</button>
                    <button type="button" class="btn-close ms-3" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="modal-body">
                <textarea class="form-control resize-none mb-2" id="remarks_text" cols="30" rows="3"></textarea>
                <div class="validation_err" *ngIf="showRemarksValidation">
                    <p class="m-0 mb-3 text-center fs-7">
                        Please Enter Remarks
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="saveMsg" data-bs-abackdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>Saved Successfully</p>
                <div class="modal-footer">
                    <a type="button" class="btn btn-main-outline" data-bs-dismiss="modal">Ok</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="cancelConfirmationMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p> {{langData?.DoctorAppointment?.AreyousureyouwanttocancelAppointment}} </p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="showCancelReasons()">{{langData?.common?.yes}}</a>
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.no}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="cancelReasons" tabindex="-1" aria-labelledby="cancelReasonsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cancelReasonsLabel">
                    {{langData?.DoctorAppointment?.ReasonForCancellation}}
                </h5>
                <div class="d-flex gap-2 align-items-center justify-content-end">
                    <button class="btn btn-danger-outline" (click)="clearReasons()">{{langData?.common?.Clear}}</button>
                    <button class="btn btn-main-outline"
                        (click)="cancelAppointment(selectedAppToCancel)">{{langData?.common?.Save}}</button>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <form [formGroup]="cancelForm">
                <div class="modal-body pb-5">
                    <div class="doctor_worklist mt-2 rounded-2 worklist_patientcard fut_app_scheduled">
                        <div class="row mx-0" (click)="$event.preventDefault()">
                            <div class="col-md-3" style="width: 25%;">
                                <div class="d-flex align-items-center h-100 cursor-pointer">
                                    <div class="patient-photo me-2">
                                        <img src="assets/images/icons/male.svg" alt="" class="position-relative"
                                            *ngIf="selectedAppToCancel?.GenderID == '1'">
                                        <img src="assets/images/icons/female.svg" alt="" class="position-relative"
                                            *ngIf="selectedAppToCancel?.GenderID == '2'">
                                    </div>
                                    <div class="">
                                        <p class="value fs-7 fw-bold w-100">{{selectedAppToCancel?.PatientName}}</p>
                                        <div class="d-flex align-items-center gap-2">
                                            <p>{{selectedAppToCancel?.Gender}} | {{selectedAppToCancel?.FullAge}}|
                                                {{selectedAppToCancel?.MaritalStatus}}</p>
                                            <p>ID No. : <span class="fw-bold">{{selectedAppToCancel?.SSN}}</span></p>
                                        </div>
                                        <p>{{selectedAppToCancel?.Nationality}} | Mobile :
                                            {{selectedAppToCancel?.PatientMobileNo}}</p>

                                    </div>
                                </div>
                            </div>
                            <div class="col pe-0">
                                <div class="bg-white h-100 p-1 rounded-2">
                                    <div class="row mx-0 gx-2">
                                        <div class="col-2">
                                            <label for="" class="form-label m-0 fw-bold">Doctor Name</label>
                                            <p class="cursor-pointer" (click)="$event.preventDefault()">
                                                <span>{{selectedAppToCancel?.DoctorFullName}}</span>
                                            </p>
                                        </div>
                                        <div class="col-2" style="width:12%;">
                                            <label for="" class="form-label m-0 fw-bold">Specialisation</label>
                                            <div class="custom_tooltip custom_tooltip_right">
                                                <p class="text-truncate fs-8">{{selectedAppToCancel?.DoctorSpecialty}}
                                                </p>
                                            </div>
                                        </div>
                                        <div class="col-2">
                                            <label for="" class="form-label m-0 fw-bold">Schedule Date</label>
                                            <div class="d-flex align-items-center gap-1">
                                                <svg width="10" height="11" viewBox="0 0 10 11" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                        fill="#368796" />
                                                </svg>
                                                <p class="m-0 clr-dark-600 text-nowrap">
                                                    {{selectedAppToCancel?.AppointmentDateTime?.split('
                                                    ')[0]}}</p>
                                                <svg class="" width="10" height="11" viewBox="0 0 10 11" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M5.00634 10.5C6.2848 10.5 7.56331 10.0066 8.538 9.03255C10.4873 7.08447 10.4873 3.90922 8.538 1.96108C6.58867 0.0129498 3.41139 0.0129949 1.46202 1.96108C-0.487361 3.90917 -0.487316 7.08442 1.46202 9.03255C2.44936 10.0066 3.72785 10.5 5.00634 10.5ZM2.09493 2.59362C2.89243 1.79663 3.9557 1.39187 5.00634 1.39187C6.05698 1.39187 7.10764 1.79672 7.91774 2.59362C9.52537 4.20022 9.52537 6.80614 7.91774 8.41271C6.31012 10.0193 3.70253 10.0193 2.09493 8.41271C0.487305 6.80612 0.487305 4.20019 2.09493 2.59362Z"
                                                        fill="#368796" />
                                                    <path
                                                        d="M3.42405 7.96996C3.53796 7.96996 3.66458 7.91939 3.75315 7.8308L5.39875 6.0471C5.47468 5.97121 5.51265 5.85738 5.51265 5.74347V3.35258C5.51265 3.1122 5.3101 2.90978 5.06957 2.90978C4.82913 2.90978 4.62657 3.1122 4.62657 3.35258V5.57899L3.09496 7.22355C2.93038 7.40064 2.94309 7.67895 3.12031 7.84343C3.20887 7.93193 3.31014 7.96988 3.42406 7.96988L3.42405 7.96996Z"
                                                        fill="#368796" />
                                                </svg>
                                                <p class="m-0 clr-dark-600  text-nowrap">
                                                    {{selectedAppToCancel?.AppointmentDateTime?.split('
                                                    ')[1]}}</p>
                                            </div>
                                        </div>
                                        <div class="col-2" *ngIf="selectedAppToCancel?.PayerType!='SELF'"
                                            style="width:12%;">
                                            <label for="" class="form-label m-0 fw-bold">From|To Slot</label>
                                            <p class="text-truncate fs-8">
                                                {{selectedAppToCancel?.FromSlot}}-{{selectedAppToCancel?.ToSlot}}</p>
                                        </div>

                                        <div class="col-1">
                                            <label for="" class="form-label m-0 fw-bold">Status</label>
                                            <p class="text-truncate fs-8">{{selectedAppToCancel?.AppointmentStatus}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row g-2 gy-3">
                        <div class="col-6 position-relative d-flex flex-column gap-2 align-items-start">
                            <label for="" class="form-label">{{langData?.DoctorAppointment?.Reasons}}</label>
                            <select class="form-select pe-5" id="CancelReasonID" formControlName="CancelReasonID"
                                (change)="onCancelReasonChange()">
                                <option dir="ltr" value="0" translate>{{langData?.common?.Select}}</option>
                                <option dir="ltr" *ngFor="let can of cancelResonsList" [value]="can.id">
                                    {{can.name}}
                                </option>
                            </select>
                            <span class="position-absolute" style="bottom: -1.1rem;" *ngIf="showReasonMandatoryMsg">
                                <div class="text-danger fs-8" *ngIf="showReasonMandatoryMsg">
                                    Select Cancel Reasons</div>
                            </span>
                        </div>
                        <div class="col-6 position-relative d-flex flex-column gap-2 align-items-start">
                            <label for="" class="form-label">{{langData?.DoctorAppointment?.ActionTaken}}</label>
                            <select class="form-select pe-5" id="ActionTypeID" formControlName="ActionTypeID"
                                (change)="onActionTypeChange()">
                                <option dir="ltr" value="0" translate>{{langData?.common?.Select}}</option>
                                <option dir="ltr" *ngFor="let act of actionTakenList" [value]="act.id">
                                    {{act.name}}
                                </option>
                            </select>
                            <span class="position-absolute" style="bottom: -1.1rem;"
                                *ngIf="showActionTakenMandatoryMsg">
                                <div class="text-danger fs-8" *ngIf="showActionTakenMandatoryMsg">
                                    {{langData?.DoctorAppointment?.SelectActionTaken}}</div>
                            </span>
                        </div>
                        <div class="col-12 position-relative d-flex gap-2 align-items-center">
                            <textarea name="" placeholder={{langData?.messages?.EnterRemarks}}
                                class="form-control resize-none" (change)="onRemarksChange()" formControlName="Remarks"
                                id="" cols="30" rows="3"></textarea>
                            <span class="position-absolute" style="bottom: -1.1rem;" *ngIf="showRemarksMandatoryMsg">
                                <div class="text-danger fs-8" *ngIf="showRemarksMandatoryMsg">
                                    {{langData?.DoctorAppointment?.EnterCancelRemarks}}</div>
                            </span>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="cancelAllReasons" tabindex="-1" aria-labelledby="cancelAllReasonsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cancelAllReasonsLabel">
                    {{langData?.DoctorAppointment?.ReasonForCancellation}}
                </h5>
                <div class="d-flex gap-2 align-items-center justify-content-end">
                    <button class="btn btn-danger-outline" (click)="clearReasons()">{{langData?.common?.Clear}}</button>
                    <button class="btn btn-main-outline" (click)="cancelAllAppointment()">Cancel All</button>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <form [formGroup]="cancelForm">
                <div class="modal-body pb-5">
                    <div class="row g-2 gy-3">
                        <div class="col-6 position-relative d-flex flex-column gap-2 align-items-start">
                            <label for="" class="form-label">{{langData?.DoctorAppointment?.Reasons}}</label>
                            <select class="form-select pe-5" id="CancelReasonID" formControlName="CancelReasonID"
                                (change)="onCancelReasonChange()">
                                <option dir="ltr" value="0" translate>{{langData?.common?.Select}}</option>
                                <option dir="ltr" *ngFor="let can of cancelResonsList" [value]="can.id">
                                    {{can.name}}
                                </option>
                            </select>
                            <span class="position-absolute" style="bottom: -1.1rem;" *ngIf="showReasonMandatoryMsg">
                                <div class="text-danger fs-8" *ngIf="showReasonMandatoryMsg">
                                    Select Cancel Reasons</div>
                            </span>
                        </div>
                        <div class="col-6 position-relative d-flex flex-column gap-2 align-items-start">
                            <label for="" class="form-label">{{langData?.DoctorAppointment?.ActionTaken}}</label>
                            <select class="form-select pe-5" id="ActionTypeID" formControlName="ActionTypeID"
                                (change)="onActionTypeChange()">
                                <option dir="ltr" value="0" translate>{{langData?.common?.Select}}</option>
                                <option dir="ltr" *ngFor="let act of actionTakenList" [value]="act.id">
                                    {{act.name}}
                                </option>
                            </select>
                            <span class="position-absolute" style="bottom: -1.1rem;"
                                *ngIf="showActionTakenMandatoryMsg">
                                <div class="text-danger fs-8" *ngIf="showActionTakenMandatoryMsg">
                                    {{langData?.DoctorAppointment?.SelectActionTaken}}</div>
                            </span>
                        </div>
                        <div class="col-12 position-relative d-flex gap-2 align-items-center">
                            <textarea name="" placeholder={{langData?.messages?.EnterRemarks}}
                                class="form-control resize-none" (change)="onRemarksChange()" formControlName="Remarks"
                                id="" cols="30" rows="3"></textarea>
                            <span class="position-absolute" style="bottom: -1.1rem;" *ngIf="showRemarksMandatoryMsg">
                                <div class="text-danger fs-8" *ngIf="showRemarksMandatoryMsg">
                                    {{langData?.DoctorAppointment?.EnterCancelRemarks}}</div>
                            </span>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal" id="appointmentSaveMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>{{appSaveMsg}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
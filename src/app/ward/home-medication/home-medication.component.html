<div>
    <app-wardheader-summary *ngIf="homeMedicationEnable"></app-wardheader-summary>
    <div class="fitfordischarge_prev_medication">
        <div class="border p-2 rounded-2 my-2" *ngIf="homeMedicationEnable">
            <div class="row g-2 border-bottom py-2">
                <div class="w-max-content">
                    <label for="" class="form-label text-nowrap">Clinic Visit After</label>
                    <div class="d-flex align-items-center gap-2 w-100">
                        <select name="" class="form-select" style="width: 6rem;" id="ClinicVisitAfterDays"
                            [attr.disabled]="clinicalVisitAfter ? '' : null">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                        </select>
                        <div class="custom_check d-flex align-items-center gap-2" [class.active]="clinicalVisitAfter"
                            (click)="clinicalVisitAfterClick()">
                            <svg style="min-width: 1rem;" width="16" height="16" viewBox="0 0 20 21" fill="none"
                                xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                <path
                                    d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                    fill="white" stroke="white" stroke-width="0.25"></path>
                            </svg>
                            <p class="text-nowrap m-0 fs-7">N/A</p>
                        </div>
                    </div>
                </div>
                <div class="col-6 d-flex" *ngIf="!clinicalVisitAfter">
                    <div class="row g-2 align-items-center w-100">
                        <div class="col-2">
                            <label for=""
                                class="form-label text-nowrap m-0">{{langData?.Advice?.RefertoLocation}}</label>
                            <select name="" class="form-select" [ngModel]="locationValue"
                                (change)="locationChange($event)">
                                <option value="0">{{langData?.appointment?.select}}</option>
                                <option *ngFor="let hl of locationList;let i=index" value="{{hl.HospitalID}}">
                                    {{hl.Name}}</option>
                            </select>
                        </div>
                        <div class="col">
                            <label for="" class="form-label text-nowrap m-0">{{langData?.Ward?.Specialization}}</label>
                            <div class="input_dropdown position-relative">
                                <input type="text" class="form-control" id="Specialization" placeholder="Specialization"
                                    aria-label="Specialization" [matAutocomplete]="autoMed11"
                                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchSpecItem($event)">
                                <mat-autocomplete #autoMed11="matAutocomplete" (optionSelected)="onSpecItemSelected($event)">
                                    <mat-option *ngFor="let item of SpecializationList"
                                        [value]="item.name">
                                        {{item.name}}
                                    </mat-option>
                                </mat-autocomplete>
                            </div>
                        </div>
                        <div class="col">
                            <label for="" class="form-label text-nowrap m-0">{{langData?.SHO?.Doctor}}</label>
                            <div class="input_dropdown position-relative">
                                <input type="text" class="form-control" id="Doctor" placeholder="Doctor"
                                    aria-label="Doctor" [matAutocomplete]="autoMed12"
                                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchDocItem($event)">
                                <mat-autocomplete #autoMed12="matAutocomplete">
                                    <mat-option *ngFor="let item of listOfSpecItems"
                                        (onSelectionChange)="onDocItemSelected(item)"
                                        [value]="item.EmpNo + '-' + item.Fullname">
                                        {{item.EmpNo}}-{{item.Fullname}}
                                    </mat-option>
                                </mat-autocomplete>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-2">
                    <label for="" class="form-label text-nowrap m-0 w-100">Home Medication</label>
                    <div id="" class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-center">
                        <button [class]="homeMedication ? 'btn selected' : 'btn'"
                            (click)="toggleHomeMedication('1')">N/A</button>
                        <button [class]="!homeMedication ? 'btn selected' : 'btn'"
                            (click)="toggleHomeMedication('0')">Yes</button>
                    </div>
                </div>
                <div class="col-6">
                    <form class="d-flex align-items-center gap-1" [formGroup]="sickLeaveDateForm">                        
                        <label for="" class="form-label text-nowrap m-0">Sick Leave Days</label>
                        <!-- <input type="text" class="form-control" formControlName="sickLeaveDays" /> -->
                         <div class="custom_check d-flex align-items-center gap-2" [class.active]="enableSickLeave"
                            (click)="enableSickLeave=!enableSickLeave">
                            <svg style="min-width: 1rem;" width="16" height="16" viewBox="0 0 20 21" fill="none"
                                xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                <path
                                    d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                    fill="white" stroke="white" stroke-width="0.25"></path>
                            </svg>
                            <p class="text-nowrap m-0 fs-7"></p>
                        </div>
                         <div class="d-flex align-items-center afterlabel col-2">
                            <input type="text" maxlength="3" formControlName="sickLeaveDays"
                                (change)="calcSickLeaveDates($event)" id="Sickleavefor"
                                class="form-control pe-6">
                            <label for="" class="form-label label_sm">{{langData?.common?.Days}}</label>
                        </div>
                        <div style="width: auto;">
                            <button class="vitals date_range_calendar p-0 position-relative w-100">
                                <mat-date-range-input class="btn btn-main-outline" [rangePicker]="picker1" [min]="getminDate()">
                                    <input matStartDate formControlName="sickfromdate">
                                    <input matEndDate formControlName="sicktodate" (dateChange)="calculateSickDays()">
                                </mat-date-range-input>
                                <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-date-range-picker #picker1></mat-date-range-picker>
                            </button>
                        </div>
                    </form>
                </div>
                <div class="col d-flex align-items-center justify-content-end">
                    <button class="btn btn-main-outline min-width-unset"
                        *ngIf="homeNAMedicationEnable && !dischargeIntimationRiased"
                        (click)="UpdatePatientFitForDischarge()">Save</button>
                    <button class="btn btn-danger-outline" *ngIf="dischargeIntimationRiased"
                        (click)="deleteRequestConfirmation()">Cancel Discharge</button>
                </div>
            </div>
            <div class="p-2 rounded-2 my-2" *ngIf="homeMedicationEnable && !clinicalVisitAfter">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Specialization</th>
                            <th>Doctor</th>
                            <th>Location</th>
                            <th>AppointmentDate</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container *ngFor="let item of referralList; let i = index">
                            <tr>
                                <td>{{item.specializationName}}</td>
                                <td>{{item.doctorName}}</td>
                                <td>{{item.hospitalName}}</td>
                                <td>{{item.appointmentDate}}</td>
                                <td>
                                    <div class="d-flex align-items-end h-100 justify-content-end gap-1"
                                    (click)="openAppointment(item)" *ngIf="!item.ScheduleID">
                                        <button class="btn btn-main-outline">+ Book Appointment </button>
                                    </div>
                                </td>
                                <td>
                                    <svg class="cursor-pointer" *ngIf="item.showDelete" (click)="deleteItem(item)" width="16" height="16" viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M7 16.9971C7.26522 16.9971 7.51957 16.8917 7.70711 16.7042C7.89464 16.5166 8 16.2623 8 15.9971V9.99707C8 9.73185 7.89464 9.4775 7.70711 9.28996C7.51957 9.10243 7.26522 8.99707 7 8.99707C6.73478 8.99707 6.48043 9.10243 6.29289 9.28996C6.10536 9.4775 6 9.73185 6 9.99707V15.9971C6 16.2623 6.10536 16.5166 6.29289 16.7042C6.48043 16.8917 6.73478 16.9971 7 16.9971ZM17 4.99707H13V3.99707C13 3.20142 12.6839 2.43836 12.1213 1.87575C11.5587 1.31314 10.7956 0.99707 10 0.99707H8C7.20435 0.99707 6.44129 1.31314 5.87868 1.87575C5.31607 2.43836 5 3.20142 5 3.99707V4.99707H1C0.734784 4.99707 0.48043 5.10243 0.292893 5.28996C0.105357 5.4775 0 5.73185 0 5.99707C0 6.26229 0.105357 6.51664 0.292893 6.70418C0.48043 6.89171 0.734784 6.99707 1 6.99707H2V17.9971C2 18.7927 2.31607 19.5558 2.87868 20.1184C3.44129 20.681 4.20435 20.9971 5 20.9971H13C13.7956 20.9971 14.5587 20.681 15.1213 20.1184C15.6839 19.5558 16 18.7927 16 17.9971V6.99707H17C17.2652 6.99707 17.5196 6.89171 17.7071 6.70418C17.8946 6.51664 18 6.26229 18 5.99707C18 5.73185 17.8946 5.4775 17.7071 5.28996C17.5196 5.10243 17.2652 4.99707 17 4.99707ZM7 3.99707C7 3.73185 7.10536 3.4775 7.29289 3.28996C7.48043 3.10243 7.73478 2.99707 8 2.99707H10C10.2652 2.99707 10.5196 3.10243 10.7071 3.28996C10.8946 3.4775 11 3.73185 11 3.99707V4.99707H7V3.99707ZM14 17.9971C14 18.2623 13.8946 18.5166 13.7071 18.7042C13.5196 18.8917 13.2652 18.9971 13 18.9971H5C4.73478 18.9971 4.48043 18.8917 4.29289 18.7042C4.10536 18.5166 4 18.2623 4 17.9971V6.99707H14V17.9971ZM11 16.9971C11.2652 16.9971 11.5196 16.8917 11.7071 16.7042C11.8946 16.5166 12 16.2623 12 15.9971V9.99707C12 9.73185 11.8946 9.4775 11.7071 9.28996C11.5196 9.10243 11.2652 8.99707 11 8.99707C10.7348 8.99707 10.4804 9.10243 10.2929 9.28996C10.1054 9.4775 10 9.73185 10 9.99707V15.9971C10 16.2623 10.1054 16.5166 10.2929 16.7042C10.4804 16.8917 10.7348 16.9971 11 16.9971Z" fill="#FF6868"/>
                                    </svg>
                                </td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="border p-1 rounded-2" *ngIf="homeMedicationEnable">
            <div class="row g-2">
                <form [formGroup]="dischargeRequestForm">
                    <div class="row gx-2 p-2 pt-0">
                        <div class="col-md-3">
                            <label for="" class="form-label" required>Request Type</label>
                            <select class="form-select pe-5" id="RequestType" [attr.disabled]="true"
                                formControlName="RequestType">
                                <option dir="ltr" value="0" translate>{{langData?.common?.Select}}</option>
                                <option dir="ltr" value="1">Discharge</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="" class="form-label" required>Discharge Status</label>
                            <select class="form-select pe-5" id="DischargeStatusID" formControlName="DischargeStatusID">
                                <option dir="ltr" value="0" translate>{{langData?.common?.Select}}</option>
                                <option dir="ltr" *ngFor="let sta of dischargeStatus" [value]="sta.id">
                                    {{sta.name}}
                                </option>
                            </select>
                            <span class="bottom-0"
                                *ngIf="(isDisReqSubmitted && this.dischargeRequestForm.get('DischargeStatusID')?.value ==='0')">
                                <div class="text-danger fs-8">
                                    Please select Discharge Status</div>
                            </span>
                        </div>
                        <div class="col-md-3">
                            <label for="" class="form-label" required>Discharge Reason</label>
                            <select class="form-select pe-5" id="DischargeStatusID" formControlName="DischargeReasonID">
                                <option dir="ltr" value="0" translate>{{langData?.common?.Select}}</option>
                                <option dir="ltr" *ngFor="let rea of dischargeReasons" [value]="rea.id">
                                    {{rea.name}}
                                </option>
                            </select>
                            <span class="bottom-0"
                                *ngIf="(isDisReqSubmitted && this.dischargeRequestForm.get('DischargeReasonID')?.value ==='0')">
                                <div class="text-danger fs-8">
                                    Please select Discharge Reason</div>
                            </span>
                        </div>
                        <div class="col-md-2" style="width: 11%">
                            <label for="" class="form-label text-nowrap">Discharge Date :</label>
                            <mat-form-field appearance="fill">
                                <mat-label translate>dd-MMM-yyyy</mat-label>
                                <input matInput class="" formControlName="DischargeDate" [matDatepicker]="DischargeDate"
                                    (click)="DischargeDate.open()">
                                <mat-datepicker-toggle matSuffix [for]="DischargeDate">
                                </mat-datepicker-toggle>
                                <mat-datepicker #DischargeDate></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <label for="" class="form-label text-nowrap">Time :</label>
                            <input type="time" formControlName="DischargeTime" class="form-control">
                        </div>
                        <div class="col-md-12">
                            <label for="" class="form-label">Remarks</label>
                            <textarea name="" class="form-control resize-none" formControlName="Remarks" id="" cols="30"
                                rows="4"></textarea>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="mt-3" *ngIf="homeMedicationEnable && !homeNAMedicationEnable">
            <div class="card card-style-1">
                <div class="card-header py-1 justify-content-between">
                    <!-- <h5 class="card-heading">Previous Medication</h5> -->
                    <div class="d-flex align-items-center justify-content-end gap-2">
                        <div class="filter_Date position-relative">
                            <div class="d-flex align-items-center gap-2 fs-8">
                                Filters
                                <svg class="cursor-pointer" width="18" height="18" viewBox="0 0 24 25"
                                    fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="2.75" y="3.27435" width="18.5" height="18.5" rx="3.25"
                                        stroke="#368796" stroke-width="1.5" />
                                    <circle cx="7.85547" cy="8.32605" r="1.375" fill="#368796"
                                        stroke="#368796" stroke-width="1.25" />
                                    <rect x="9.125" y="7.70105" width="7" height="1.25" rx="0.625"
                                        fill="#368796" />
                                    <circle cx="16.1445" cy="12.5243" r="1.375" fill="#4357BC"
                                        stroke="#4357BC" stroke-width="1.25" />
                                    <rect x="8.12988" y="11.8993" width="7" height="1.25" rx="0.625"
                                        fill="#4357BC" />
                                    <circle cx="7.875" cy="16.7227" r="1.375" fill="#368796"
                                        stroke="#368796" stroke-width="1.25" />
                                    <rect x="9.14453" y="16.0977" width="7" height="1.25" rx="0.625"
                                        fill="#368796" />
                                </svg>
                            </div>
                            <div class="filter_dropdow" >
                                <p class="m-0 p-2 cursor-pointer border-bottom"
                                    (click)="showPreviousMedications('T')">{{langData?.common?.Today}}</p>
                                <p class="m-0 p-2 cursor-pointer border-bottom"
                                    (click)="showPreviousMedications('W')">{{langData?.common?.Thisweek}}
                                </p>
                                <p class="m-0 p-2 cursor-pointer border-bottom"
                                    (click)="showPreviousMedications('M')">{{langData?.common?.ThisMonth}}
                                </p>
                                <p class="m-0 p-2 cursor-pointer border-bottom"
                                    (click)="showPreviousMedications('3M')">
                                    {{langData?.common?.ThreeMonths}}</p>
                                <p class="m-0 p-2 cursor-pointer border-bottom"
                                    (click)="showPreviousMedications('6M')">{{langData?.common?.SixMonths}}
                                </p>
                                
                            </div>
                        </div>
                        <form class="d-flex align-items-center gap-1" [formGroup]="viewPreviousMedicationForm"
                            (keydown.enter)="$event.preventDefault()">
                            <label for="" class="form-label m-0 text-nowrap">Prescription Date</label>
                            <select class="form-select pe-5" formControlName="PrescriptionID"
                                (change)="filterPreviousMedications($event)">
                                <option value="0" selected translate>Select Prescription</option>
                                <option *ngFor="let visit of PatientVisitsList" [value]="visit.PrescriptionID">
                                    {{visit.PrescriptionCreateDate}} - {{visit.DoctorName}}
                                </option>
                            </select>
                            <button class="date_range_calendar position-relative p-0" style="width: 510px;">
                                <mat-date-range-input class="btn btn-main-outline" [rangePicker]="picker">
                                    <input matStartDate formControlName="fromdate">
                                    <input matEndDate formControlName="todate" (dateChange)="fetchPreviousMedication()">
                                </mat-date-range-input>
                                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-date-range-picker #picker></mat-date-range-picker>
                            </button>
                            <button class="btn btn-main-outline mx-2"
                                (click)="fetchPreviousMedication()">{{langData?.common?.Search}}</button>
                            <button class="btn btn-main-outline min-width-unset"
                                *ngIf="(doctorDetails[0]?.IsDoctor === true||doctorDetails[0]?.IsRODoctor === true)"
                                (click)="PrescribePreviousMedication()">{{langData?.prescriptions?.Prescribe}}</button>
                        </form>
                    </div>
                </div>
                <div class="p-3 d-none">
                    <div class="row g-2 mx-0 px-2 mb-2">
                        <div class="col-lg-4 col-5 pre_medication_left">
                            <div class="border rounded">
                                <div class="bg-primary-50 p-2 rounded-top d-flex align-items-center"
                                    style="height: 3.5rem;">
                                    <h6 class="clr-primary-600 m-0">Previous Medications</h6>
                                </div>
                                <div class="d-flex flex-column gap-2 prescriptiondate_height p-2">
                                    <div class="border p-2 pb-1 rounded-2 cursor-pointer prescriptiondate"
                                        [class.active]="prescriptiondate.selected"
                                        *ngFor="let prescriptiondate of filteredpreviousMedicationList; let i = index"
                                        (click)="showPrevMedDetails(prescriptiondate)">
                                        <div class="row mx-0 g-2 w-100">
                                            <div class="col-md-2">
                                                <p class="form-label fw-bold fs-8">{{langData?.prescriptions?.PresNo}}
                                                </p>
                                                <p class="">{{prescriptiondate?.PrescriptionNO}} </p>
                                            </div>
                                            <div class="col-md-4">
                                                <p class="form-label fw-bold fs-8">{{langData?.common?.Doctor}}</p>
                                                <p class="">{{prescriptiondate?.DoctorName}}</p>
                                            </div>
                                            <!-- <div class="col-md-3">
                                                <p class="form-label fw-bold fs-8">{{langData?.common?.VisitDate}}</p>
                                                <p class="">{{prescriptiondate?.VisitDate}}</p>
                                            </div> -->
                                            <div class="col-md-3">
                                                <p class="form-label fw-bold fs-8">{{langData?.prescriptions?.PresDate}}
                                                </p>
                                                <p class="">{{prescriptiondate?.PrescriptionCreateDate}} </p>
                                            </div>
                                            <div class="col-md-2 ps-2">
                                                <p class="form-label fw-bold fs-8">Type</p>
                                                <p class="">{{prescriptiondate?.PatientType == "2" ? "IP" : "OP"
                                                    }}</p>
                                            </div>
                                            <div class="col">
                                                <div class="custom_check text-end">
                                                    <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                        <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                        <path
                                                            d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                            fill="white" stroke="white" stroke-width="0.25"></path>
                                                    </svg>
                                                </div>
                                            </div>
                                            <!-- <div class="row g-2 w-100 bottom_prescriptiondate pb-2 mx-0">
                                                <div class="col-md-3">
                                                    <p class="form-label fw-bold fs-8">{{langData?.casesheet?.patient_type}}</p>
                                                    <p class="">{{prescriptiondate?.PatientType == "2" ? "IP" : "OP"
                                                        }}</p>
                                                </div>
                                                <div class="col-md-4">
                                                    <p class="form-label fw-bold fs-8">{{langData?.common?.Doctor}}</p>
                                                    <p class="">{{prescriptiondate?.DoctorName}}</p>
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-8 col-7 pre_medication_right">
                            <div class="border rounded">
                                <div class="bg-primary-50 p-2 rounded-top" style="height: 3.5rem;">
                                    <div class="row mx-0 g-2 w-100">
                                        <div class="col-1">
                                            <p class="form-label fw-bold fs-8 m-0">Pres No</p>
                                            <p class="">{{this.previousMedicationListDetails[0]?.PrescriptionNO}}</p>
                                        </div>
                                        <div class="col">
                                            <p class="form-label fw-bold fs-8 m-0">Visit Date</p>
                                            <p class="">{{this.previousMedicationListDetails[0]?.VisitDate}}</p>
                                        </div>
                                        <div class="col">
                                            <p class="form-label fw-bold fs-8 m-0">Pres Date</p>
                                            <p class="">
                                                {{this.previousMedicationListDetails[0]?.PrescriptionCreateDate}}
                                            </p>
                                        </div>
                                        <div class="col">
                                            <p class="form-label fw-bold fs-8 m-0">Patient Type</p>
                                            <p class="">{{this.previousMedicationListDetails[0]?.PatientType == "2" ?
                                                "InPatient" : "OutPatient"}}</p>
                                        </div>
                                        <div class="col">
                                            <p class="form-label fw-bold fs-8 m-0">Doctor</p>
                                            <p class="">{{this.previousMedicationListDetails[0]?.DoctorName}}</p>
                                        </div>
                                        <div class="col">
                                            <p class="form-label fw-bold fs-8 m-0">Home Medication</p>
                                            <p class="color-highlight px-4">
                                                {{this.previousMedicationListDetails[0]?.isDischargeMedication=="True"?"Yes":"No"}}
                                            </p>
                                        </div>
                                        <div class="col mt-1">
                                            <div class="custom_check text-center"
                                                [class.active]="previousMedicationListDetails?.selectall"
                                                (click)="selectallPresc(previousMedicationListDetails)">
                                                <svg width="16" height="16" viewBox="0 0 20 21" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                    <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                    <path
                                                        d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                        fill="white" stroke="white" stroke-width="0.25"></path>
                                                </svg>
                                                <p class="text-nowrap">Select All</p>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="prescriptiondate_right_height">
                                    <div class="m-2 p-1 pt-0 rounded-2" [class]="view.divColor"
                                        *ngFor="let view of previousMedicationListDetails;let i = index">
                                        <div class="row p-2 gx-2 border-bottom">
                                            <div class="col-2">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                    {{langData?.prescriptions?.DrugCode}}</p>
                                                <p class="">{{view.ItemCode}} </p>
                                            </div>
                                            <div class="col-4">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                    {{langData?.prescriptions?.drugNameLabel}}</p>
                                                <p class="color-highlight my-2">{{view.GenericItemName}}</p>
                                            </div>
                                            <div class="col-3">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">Strength / Dosage</p>
                                                <p class="">{{view.Quantity}} {{view.QtyUOM}} /
                                                    {{view.Dose}} {{view.DoseUoM}} </p>
                                            </div>
                                            <div class="col-3">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">Frequency</p>
                                                <p class="">{{view.Frequency}}</p>
                                            </div>
                                        </div>
                                        <div class="row p-2 gx-2">
                                            <div class="col-2">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                    {{langData?.prescriptions?.Route}}</p>
                                                <p class="">{{view.AdmRoute}}</p>
                                            </div>
                                            <div class="col-4">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">Doctor Name</p>
                                                <p class="">{{view.DoctorName}}</p>
                                            </div>
                                            <div class="col-3">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                    {{langData?.prescriptions?.DiscontinueRemarks}}
                                                </p>
                                                <p class="">{{view.DiscontinuingRemarks}}</p>
                                            </div>
                                        </div>

                                        <div
                                            class="bottom_legend_bg d-flex align-items-center justify-content-between rounded-2">
                                            <div class="row w-100 p-2 gx-2 mx-0">
                                                <div class="col-2">
                                                    <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                        {{langData?.prescriptions?.startDate}}</p>
                                                    <p class="">{{view.StartFrom}}</p>
                                                </div>
                                                <div class="col-4 d-flex">
                                                    <div class="col-6">
                                                        <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                            {{langData?.prescriptions?.endDate}}</p>
                                                        <p class="">{{view.EndDatetime}}</p>
                                                    </div>
                                                    <div class="col-6">
                                                        <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                            {{langData?.common?.Duration}}</p>
                                                        <p class="">{{view.Duration}} {{view.DurationUOM}}</p>
                                                    </div>
                                                </div>
                                                <!-- <div *ngIf="view.expanded" class="row card_item_div mx-0 gx-3 gy-1 w-100 align-items-start p-0"> -->
                                                <div class="col-3">
                                                    <p class="fs-8 clr-dark-600 form-label fw-bold">Prescription Type
                                                    </p>
                                                    <p class="">{{view.isDischargeMedication == 'True' ? 'Home
                                                        Medication' :
                                                        'Medication' }}</p>
                                                </div>
                                                <div class="col-2">
                                                    <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                        {{langData?.common?.Status}}</p>
                                                    <p class="">{{view.StatusName}}</p>
                                                </div>
                                                <div class="col-1">
                                                    <div class="custom_check" [class.active]="view.isChecked"
                                                        (click)="onNewPreviousMedicationSelected(!view.isChecked, i, view)">
                                                        <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                            <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                            <path
                                                                d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                                fill="white" stroke="white" stroke-width="0.25"></path>
                                                        </svg>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-2 med_history"
                                            *ngIf="selectedHistoryItem?.ItemID === view.ItemID">
                                            <table class="table m-0">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Strength/Dosage</th>
                                                        <th>Start Date</th>
                                                        <th>End Date</th>
                                                        <th>Doctor</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let item of medicineHistory; let i = index">
                                                        <td>{{item.ItemName}}</td>
                                                        <td>{{item.Strength}} {{item.StrengthUOM}} {{item.Dose}}
                                                            {{item.DoseUoM}}</td>
                                                        <td>{{item.StartFrom}}</td>
                                                        <td>{{item.EndDateTime}}</td>
                                                        <td>{{item.Doctorname}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- New UI For Previous Medication -->
                <div class="row p-2 mx-0 g-2" *ngIf="!showPrevMedFiltersData">
                    <div class="col-lg-3 col-5 pre_medication_left">
                        <div class="border rounded">
                            <div class="bg-primary-50 p-2 py-1 rounded-top d-flex align-items-center"
                                style="height: 2.5rem;">
                                <h6 class="clr-primary-600 m-0">Previous Medication Details</h6>
                            </div>
                            <div class="d-flex flex-column gap-2 prescriptiondate_height p-2">
                                <div class="border p-2 pb-1 rounded-2 cursor-pointer prescriptiondate"
                                    [class.active]="prescriptiondate.selected"
                                    *ngFor="let prescriptiondate of filteredpreviousMedicationList; let i = index"
                                    (click)="showPrevMedDetails(prescriptiondate)">
                                    <div class="row mx-0 g-2 w-100">
                                        <div class="col-4">
                                            <p class="form-label fw-bold fs-8 clr-grey">
                                                {{langData?.prescriptions?.PresNo}}</p>
                                            <p class="clr-primary-600">{{prescriptiondate?.PrescriptionNO}} </p>
                                        </div>
                                        <!-- <div class="col-md-3">
                                            <p class="form-label fw-bold fs-8 clr-grey">{{langData?.common?.VisitDate}}</p>
                                            <p class="">{{prescriptiondate?.VisitDate}}</p>
                                        </div> -->
                                        <div class="col-4">
                                            <p class="form-label fw-bold fs-8 clr-grey">
                                                {{langData?.prescriptions?.PresDate}}</p>
                                            <p class="clr-primary-600">{{prescriptiondate?.PrescriptionCreateDate}} </p>
                                        </div>
                                        <div class="col-4">
                                            <p class="form-label fw-bold fs-8 clr-grey">Type</p>
                                            <p class="clr-primary-600">{{prescriptiondate?.PatientType == "2" ? "IP" :
                                                "OP" }} <span class="color-highlight">{{prescriptiondate?.isDischargeMedication !== 'False' ? ' - Home-Medication' : '' }}</span>
                                            </p> 
                                        </div>
                                        <!-- <div class="col">
                                            <div class="custom_check text-end">
                                                <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                    <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                    <path
                                                        d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                        fill="white" stroke="white" stroke-width="0.25"></path>
                                                </svg>
                                            </div>
                                        </div> -->
                                        <div class="col-12 d-flex align-items-center gap-2">
                                            <p class="form-label fw-bold fs-8 clr-grey m-0">
                                                {{langData?.common?.Doctor}}:</p>
                                            <p class="clr-primary-600">{{prescriptiondate?.DoctorName}}</p>
                                        </div>
                                        <div class="col-12 d-flex align-items-center gap-2">
                                            <p class="form-label m-0 fw-bold fs-8 clr-grey m-0">Location:</p>
                                            <p class="clr-primary-600">{{this.previousMedicationListDetails[0]?.HospitalName}}</p>
                                        </div>
                                        <!-- <div class="row g-2 w-100 bottom_prescriptiondate pb-2 mx-0">
                                            <div class="col-md-3">
                                                <p class="form-label fw-bold fs-8">{{langData?.casesheet?.patient_type}}</p>
                                                <p class="">{{prescriptiondate?.PatientType == "2" ? "IP" : "OP"
                                                    }}</p>
                                            </div>
                                            <div class="col-md-4">
                                                <p class="form-label fw-bold fs-8">{{langData?.common?.Doctor}}</p>
                                                <p class="">{{prescriptiondate?.DoctorName}}</p>
                                            </div>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9 col-7 pre_medication_right">
                        <div class="border rounded h-100">
                            <div class="bg-primary-50 p-2 py-1 rounded-top" style="height: 2.5rem;">
                                <div class="row mx-0 g-2 w-100">
                                    <div class="col">
                                        <p class="form-label clr-grey fw-bold fs-8 m-0">Pres No</p>
                                        <p class="text-nowrap clr-primary-600">
                                            {{this.previousMedicationListDetails[0]?.PrescriptionNO}}</p>
                                    </div>
                                    <div class="col">
                                        <p class="form-label clr-grey fw-bold fs-8 m-0">Visit Date</p>
                                        <p class="text-nowrap clr-primary-600">
                                            {{this.previousMedicationListDetails[0]?.VisitDate}}</p>
                                    </div>
                                    <div class="col">
                                        <p class="form-label clr-grey fw-bold fs-8 m-0">Pres Date</p>
                                        <p class="text-nowrap clr-primary-600">
                                            {{this.previousMedicationListDetails[0]?.PrescriptionCreateDate}}
                                        </p>
                                    </div>
                                    <div class="col">
                                        <p class="form-label clr-grey fw-bold fs-8 m-0">Patient Type</p>
                                        <p class="text-nowrap clr-primary-600">
                                            {{this.previousMedicationListDetails[0]?.PatientType == "2" ?
                                            "InPatient" : "OutPatient"}}</p>
                                    </div>
                                    <div class="col-4">
                                        <p class="form-label clr-grey fw-bold fs-8 m-0">Doctor</p>
                                        <p class="clr-primary-600">{{this.previousMedicationListDetails[0]?.DoctorName}}
                                        </p>
                                    </div>                                    
                                    <div class="col d-flex align-items-center justify-content-end">
                                        <div class="custom_check text-center d-flex gap-1 align-items-center"
                                            [class.active]="previousMedicationListDetails?.selectall"
                                            (click)="selectallPresc(previousMedicationListDetails)">
                                            <svg width="16" height="16" viewBox="0 0 20 21" fill="none"
                                                xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                <path
                                                    d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                    fill="white" stroke="white" stroke-width="0.25"></path>
                                            </svg>
                                            <p class="text-nowrap">Select All</p>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="previousMedication_table">
                                <div class="bg-primary-100 p-2 px-3">
                                    <div class="row gx-1">
                                        <div class="" style="width: 6%;">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">
                                                {{langData?.prescriptions?.DrugCode}}</p>
                                        </div>
                                        <div class="col-3">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">
                                                {{langData?.prescriptions?.drugNameLabel}}</p>
                                        </div>
                                        <div class="" style="width: 11%;">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">Strength / Dosage</p>
                                        </div>
                                        <!-- <div class="col-2">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">Frequency</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">{{langData?.common?.Duration}}</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">{{langData?.prescriptions?.Route}}</p>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                            <div class="prescriptiondate_right_height">
                                <div class="m-1 p-1 rounded-2" [class]="view.divColor"
                                    *ngFor="let view of previousMedicationListDetails;let i = index">
                                    <div class="row gx-2 align-items-start">
                                        <div cclass="" style="width: 6%;">
                                            <p class="">{{view.ItemCode}} </p>
                                        </div>
                                        <div class="col-3">
                                            <p class="">{{view.GenericItemName}}</p>
                                        </div>
                                        <div class="" style="width: 11%;">
                                            <p class="">{{view.Strength}} {{view.StrengthUoM}} /
                                                {{view.Dose}} {{view.DoseUoM}} </p>
                                        </div>
                                        <div class="col-4">
                                            <div class="row gx-1">
                                                <div class="col-3 border-end">
                                                    <p class="">{{view.Frequency}}</p>
                                                </div>
                                                <div class="col-2 border-end">
                                                    <p class="">{{view.Duration}} {{view.DurationUOM}}</p>
                                                </div>
                                                <div class="col-4 border-end">
                                                    <p class="">{{view.AdmRoute}}</p>
                                                </div>
                                                <div class="col-3">                                                   
                                                    <p class="fw-bold clr-danger-200">{{view.StatusName}}</p>
                                                </div>
                                            </div>
                                            <div class="my-1">
                                                <div class="d-flex align-items-center gap-2">
                                                    <p class="">{{view.StartFrom}}</p>
                                                    <svg width="12" height="6" viewBox="0 0 12 6" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M0 4.36008H9.30057L5.58038 0.639893" stroke="#357D83"
                                                            stroke-width="1.5" />
                                                    </svg>
                                                    <p class="">{{view.EndDatetime}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <!-- Actions -->
                                            <div class="d-flex align-items-center justify-content-end gap-2">
                                                <div class="d-flex align-items-center justify-content-end gap-1">

                                                    <div class="cursor-pointer" (click)="showMedicineHistory(view)">
                                                        <svg width="20" height="20" viewBox="0 0 22 20" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M11.6775 0.478333C8.04972 0.478333 4.89313 2.54786 3.37403 5.57158L3.04441 4.98169V4.9815C2.94679 4.80119 2.80096 4.65129 2.62337 4.54884C2.44578 4.4462 2.24301 4.39468 2.03809 4.4003C1.64572 4.40901 1.28707 4.62418 1.09475 4.96619C0.902441 5.30821 0.904767 5.72633 1.10095 6.06605L2.62803 8.79036V8.79056C2.76747 9.04213 2.99929 9.2296 3.27449 9.31386C3.5495 9.39811 3.84658 9.37216 4.10301 9.24163L6.81859 7.85342C7.0936 7.72753 7.30528 7.49474 7.40482 7.20909C7.50436 6.92343 7.48306 6.60968 7.34594 6.34012C7.20863 6.07053 6.96751 5.86854 6.67816 5.78082C6.38863 5.69309 6.07588 5.72717 5.81226 5.87532L5.7255 5.91871C6.97271 3.9886 9.16351 2.69974 11.6775 2.69974C15.5917 2.69974 18.7311 5.80249 18.7311 9.6408C18.7311 13.4479 15.6411 16.5318 11.7726 16.5819C11.4781 16.5865 11.1974 16.7079 10.9924 16.9194C10.7873 17.1309 10.6748 17.4152 10.6792 17.7098C10.6839 18.0043 10.8053 18.285 11.017 18.49C11.2285 18.6951 11.5128 18.8076 11.8073 18.803C16.8505 18.7375 20.9521 14.655 20.9521 9.6408C20.9521 4.58573 16.7759 0.47861 11.6774 0.47861L11.6775 0.478333ZM11.773 4.07028C11.4784 4.07493 11.1978 4.19636 10.9929 4.40784C10.7878 4.61952 10.6753 4.90383 10.6798 5.19818V9.64055C10.6796 9.97792 10.8329 10.2973 11.0963 10.5082L13.8728 12.7294C14.1826 12.9773 14.6013 13.0412 14.9712 12.8967C15.3409 12.7522 15.6055 12.4214 15.6653 12.0291C15.725 11.6365 15.5708 11.242 15.261 10.9941L12.9009 9.10277V5.19823C12.9055 4.89766 12.7884 4.60814 12.5757 4.3955C12.3633 4.18304 12.0735 4.06568 11.773 4.07033L11.773 4.07028Z"
                                                                fill="#368796" stroke="white" stroke-width="0.5" />
                                                        </svg>
                                                    </div>
                                                    <div class="custom_check" [class.active]="view.isChecked"
                                                        (click)="onNewPreviousMedicationSelected(!view.isChecked, i, view)">
                                                        <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                            <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                            <path
                                                                d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                                fill="white" stroke="white" stroke-width="0.25"></path>
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="custom_tooltip custom_tooltip_left px-2"
                                                    (click)="showViewMorePrevMed(view)">
                                                    <svg width="4" height="14" viewBox="0 0 4 14" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <circle cx="1.99994" cy="1.96503" r="1.51752" fill="#368796" />
                                                        <circle cx="1.99994" cy="6.99994" r="1.51752" fill="#368796" />
                                                        <circle cx="1.99994" cy="12.0351" r="1.51752" fill="#368796" />
                                                    </svg>
                                                    <div class="tooltip" style="right: -0.4rem;">
                                                        <p>View More</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row gx-2 align-items-start" [class.d-none]="!view.viewMorePrevMed">
                                        <div class="col-4">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">Remarks:</p>
                                            <p class="">{{view.Remarks}}</p>
                                        </div>
                                        <div class="col-4">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">
                                                {{langData?.prescriptions?.DiscontinueRemarks}}:</p>
                                            <p class="">{{view.DiscontinuingRemarks}}</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">Prescription Type</p>
                                            <p class="">{{view.isDischargeMedication == 'True' ? 'Home Medication' :
                                                'Medication' }}</p>
                                        </div>
                                       
                                    </div>

                                    <!-- <div class="bottom_legend_bg align-items-center justify-content-between rounded-2">
                                        <div class="row w-100 p-2 gx-2 mx-0">
                                            <div class="col-2">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                    {{langData?.prescriptions?.startDate}}</p>
                                                <p class="">{{view.StartFrom}}</p>
                                            </div>
                                            <div class="col-4 d-flex">
                                                <div class="col-6">
                                                    <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                        {{langData?.prescriptions?.endDate}}</p>
                                                    <p class="">{{view.EndDatetime}}</p>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">Prescription Type</p>
                                                <p class="">{{view.isDischargeMedication == 'True' ? 'Home Medication' :
                                                    'Medication' }}</p>
                                            </div>
                                            <div class="col-2">
                                                <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                    {{langData?.common?.Status}}</p>
                                                <p class="">{{view.StatusName}}</p>
                                            </div>
                                        </div>                                        
                                    </div> -->
                                    <div class="row p-2 gx-2 border-bottom" [class.d-none]="!view.viewMorePrevMed"
                                        *ngFor="let issued of filterIssuedItems(view);let i = index">
                                        <div class="col-2">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                Prescribed Item Code</p>
                                            <p class="">{{issued.PrescriptionItemCode}} </p>
                                        </div>
                                        <div class="col-4">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                Prescribed Item Name</p>
                                            <p class="color-highlight my-2">{{issued.PrescriptionItemName}}</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">Issued Item Code</p>
                                            <p class="">{{issued.ItemCode}} </p>
                                        </div>
                                        <div class="col-3">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">Issued Item Name</p>
                                            <p class="">{{issued.ItemName}}</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">Issued Qty</p>
                                            <p class="">{{issued.IssueQty}} {{issued.IssueUom}}</p>
                                        </div>
                                    </div>
                                    <div class="mt-2 med_history" *ngIf="selectedHistoryItem?.ItemID === view.ItemID">
                                        <table class="table m-0">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Strength/Dosage</th>
                                                    <th>Start Date</th>
                                                    <th>End Date</th>
                                                    <th>Doctor</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of medicineHistory; let i = index">
                                                    <td>{{item.ItemName}}</td>
                                                    <td>{{item.Strength}} {{item.StrengthUOM}} {{item.Dose}}
                                                        {{item.DoseUoM}}</td>
                                                    <td>{{item.StartFrom}}</td>
                                                    <td>{{item.EndDateTime}}</td>
                                                    <td>{{item.Doctorname}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div
                    class="legend border-top d-flex flex-wrap mx-0 align-items-center gap-2 p-3 pb-0 bg-color-1 rounded-2">
                    <div class="d-flex align-items-center">
                        <span class="inactive"></span>
                        <label for="" class="form-label text-nowrap mb-0 ms-1">{{langData?.common?.InActive}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="activelegend"></span>
                        <label for="" class="form-label text-nowrap mb-0 ms-1">{{langData?.common?.Active}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="medicationhold"></span>
                        <label for=""
                            class="form-label text-nowrap mb-0 ms-1">{{langData?.prescriptions?.MedicationHold}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="completed"></span>
                        <label for=""
                            class="form-label text-nowrap mb-0 ms-1">{{langData?.prescriptions?.Completed}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="discontinued"></span>
                        <label for=""
                            class="form-label text-nowrap mb-0 ms-1">Discontinue</label>
                    </div>
                </div>
                    </div>
                </div>
                <div *ngIf="showPrevMedFiltersData">
                    <div class="">
                        <div class="border rounded h-100">
                            <div class="previousMedication_table">
                                <div class="bg-primary-100 p-2 px-3">
                                    <div class="row gx-1">
                                        <div class="" style="width: 6%;">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">
                                                {{langData?.prescriptions?.DrugCode}}</p>
                                        </div>
                                        <div class="col-3">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">
                                                {{langData?.prescriptions?.drugNameLabel}}</p>
                                        </div>
                                        <div class="" style="width: 11%;">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">Strength / Dosage</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="prescriptiondate_right_height">
                                <div class="m-1 p-1 rounded-2" [class]="view.divColor"
                                    *ngFor="let view of previousMedicationListDetailsFilterData;let i = index">
                                    <div class="row gx-2 align-items-start">
                                        <div cclass="" style="width: 6%;">
                                            <p class="">{{view.ItemCode}} </p>
                                        </div>
                                        <div class="col-3">
                                            <p class="">{{view.GenericItemName}}</p>
                                        </div>
                                        <div class="" style="width: 11%;">
                                            <p class="">{{view.Strength}} {{view.StrengthUoM}} /
                                                {{view.Dose}} {{view.DoseUoM}} </p>
                                        </div>
                                        <div class="col-4">
                                            <div class="row gx-1">
                                                <div class="col-3 border-end">
                                                    <p class="">{{view.Frequency}}</p>
                                                </div>
                                                <div class="col-2 border-end">
                                                    <p class="">{{view.Duration}} {{view.DurationUOM}}</p>
                                                </div>
                                                <div class="col-4 border-end">
                                                    <p class="">{{view.AdmRoute}}</p>
                                                </div>
                                                <div class="col-3">                                                   
                                                    <p class="fw-bold clr-danger-200">{{view.StatusName}}</p>
                                                </div>
                                            </div>
                                            <div class="my-1">
                                                <div class="d-flex align-items-center gap-2">
                                                    <p class="">{{view.StartFrom}}</p>
                                                    <svg width="12" height="6" viewBox="0 0 12 6" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M0 4.36008H9.30057L5.58038 0.639893" stroke="#357D83"
                                                            stroke-width="1.5" />
                                                    </svg>
                                                    <p class="">{{view.EndDatetime}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <!-- Actions -->
                                            <div class="d-flex align-items-center justify-content-end gap-2">
                                                <div class="d-flex align-items-center justify-content-end gap-1">

                                                    <div class="cursor-pointer" (click)="showMedicineHistory(view)">
                                                        <svg width="20" height="20" viewBox="0 0 22 20" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M11.6775 0.478333C8.04972 0.478333 4.89313 2.54786 3.37403 5.57158L3.04441 4.98169V4.9815C2.94679 4.80119 2.80096 4.65129 2.62337 4.54884C2.44578 4.4462 2.24301 4.39468 2.03809 4.4003C1.64572 4.40901 1.28707 4.62418 1.09475 4.96619C0.902441 5.30821 0.904767 5.72633 1.10095 6.06605L2.62803 8.79036V8.79056C2.76747 9.04213 2.99929 9.2296 3.27449 9.31386C3.5495 9.39811 3.84658 9.37216 4.10301 9.24163L6.81859 7.85342C7.0936 7.72753 7.30528 7.49474 7.40482 7.20909C7.50436 6.92343 7.48306 6.60968 7.34594 6.34012C7.20863 6.07053 6.96751 5.86854 6.67816 5.78082C6.38863 5.69309 6.07588 5.72717 5.81226 5.87532L5.7255 5.91871C6.97271 3.9886 9.16351 2.69974 11.6775 2.69974C15.5917 2.69974 18.7311 5.80249 18.7311 9.6408C18.7311 13.4479 15.6411 16.5318 11.7726 16.5819C11.4781 16.5865 11.1974 16.7079 10.9924 16.9194C10.7873 17.1309 10.6748 17.4152 10.6792 17.7098C10.6839 18.0043 10.8053 18.285 11.017 18.49C11.2285 18.6951 11.5128 18.8076 11.8073 18.803C16.8505 18.7375 20.9521 14.655 20.9521 9.6408C20.9521 4.58573 16.7759 0.47861 11.6774 0.47861L11.6775 0.478333ZM11.773 4.07028C11.4784 4.07493 11.1978 4.19636 10.9929 4.40784C10.7878 4.61952 10.6753 4.90383 10.6798 5.19818V9.64055C10.6796 9.97792 10.8329 10.2973 11.0963 10.5082L13.8728 12.7294C14.1826 12.9773 14.6013 13.0412 14.9712 12.8967C15.3409 12.7522 15.6055 12.4214 15.6653 12.0291C15.725 11.6365 15.5708 11.242 15.261 10.9941L12.9009 9.10277V5.19823C12.9055 4.89766 12.7884 4.60814 12.5757 4.3955C12.3633 4.18304 12.0735 4.06568 11.773 4.07033L11.773 4.07028Z"
                                                                fill="#368796" stroke="white" stroke-width="0.5" />
                                                        </svg>
                                                    </div>
                                                    <div class="custom_check" [class.active]="view.isChecked"
                                                        (click)="onNewPreviousMedicationSelected(!view.isChecked, i, view)">
                                                        <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                                            <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                                            <path
                                                                d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                                fill="white" stroke="white" stroke-width="0.25"></path>
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="custom_tooltip custom_tooltip_left px-2"
                                                    (click)="showViewMorePrevMed(view)">
                                                    <svg width="4" height="14" viewBox="0 0 4 14" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <circle cx="1.99994" cy="1.96503" r="1.51752" fill="#368796" />
                                                        <circle cx="1.99994" cy="6.99994" r="1.51752" fill="#368796" />
                                                        <circle cx="1.99994" cy="12.0351" r="1.51752" fill="#368796" />
                                                    </svg>
                                                    <div class="tooltip" style="right: -0.4rem;">
                                                        <p>View More</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row gx-2 align-items-start" [class.d-none]="!view.viewMorePrevMed">
                                        <div class="col-4">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">
                                                {{langData?.prescriptions?.DiscontinueRemarks}}:</p>
                                            <p class="">{{view.DiscontinuingRemarks}}</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 m-0 clr-primary-600 form-label fw-bold">Prescription Type</p>
                                            <p class="">{{view.isDischargeMedication == 'True' ? 'Home Medication' :
                                                'Medication' }}</p>
                                        </div>                                       
                                    </div>
                                    <div class="row p-2 gx-2 border-bottom" [class.d-none]="!view.viewMorePrevMed"
                                        *ngFor="let issued of filterIssuedItems(view);let i = index">
                                        <div class="col-2">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                Prescribed Item Code</p>
                                            <p class="">{{issued.PrescriptionItemCode}} </p>
                                        </div>
                                        <div class="col-4">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">
                                                Prescribed Item Name</p>
                                            <p class="color-highlight my-2">{{issued.PrescriptionItemName}}</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">Issued Item Code</p>
                                            <p class="">{{issued.ItemCode}} </p>
                                        </div>
                                        <div class="col-3">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">Issued Item Name</p>
                                            <p class="">{{issued.ItemName}}</p>
                                        </div>
                                        <div class="col-2">
                                            <p class="fs-8 clr-dark-600 form-label fw-bold">Issued Qty</p>
                                            <p class="">{{issued.IssueQty}} {{issued.IssueUom}}</p>
                                        </div>
                                    </div>
                                    <div class="mt-2 med_history" *ngIf="selectedHistoryItem?.ItemID === view.ItemID">
                                        <table class="table m-0">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Strength/Dosage</th>
                                                    <th>Start Date</th>
                                                    <th>End Date</th>
                                                    <th>Doctor</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of medicineHistory; let i = index">
                                                    <td>{{item.ItemName}}</td>
                                                    <td>{{item.Strength}} {{item.StrengthUOM}} {{item.Dose}}
                                                        {{item.DoseUoM}}</td>
                                                    <td>{{item.StartFrom}}</td>
                                                    <td>{{item.EndDateTime}}</td>
                                                    <td>{{item.Doctorname}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div
                    class="legend border-top d-flex flex-wrap mx-0 align-items-center gap-2 p-3 pb-0 bg-color-1 rounded-2">
                    <div class="d-flex align-items-center">
                        <span class="inactive"></span>
                        <label for="" class="form-label text-nowrap mb-0 ms-1">{{langData?.common?.InActive}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="activelegend"></span>
                        <label for="" class="form-label text-nowrap mb-0 ms-1">{{langData?.common?.Active}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="medicationhold"></span>
                        <label for=""
                            class="form-label text-nowrap mb-0 ms-1">{{langData?.prescriptions?.MedicationHold}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="completed"></span>
                        <label for=""
                            class="form-label text-nowrap mb-0 ms-1">{{langData?.prescriptions?.Completed}}</label>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="discontinued"></span>
                        <label for=""
                            class="form-label text-nowrap mb-0 ms-1">Discontinue</label>
                    </div>
                </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-3 card card-style-1" *ngIf="(doctorDetails[0]?.IsDoctor === true || this.doctorDetails[0].IsRODoctor === true) && !homeNAMedicationEnable">
            <div class="accordion-item border-0 rounded-4">
                <div class="card-header card-3d-header d-flex align-items-center justify-content-between"
                    data-bs-toggle="collapse" aria-expanded="true" aria-controls="collapseOne">
                    <div class="d-flex align-items-center gap-2">
                        <h2 class="card-heading"> Medication </h2>

                        <div class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-start">
                            <button class="btn fs-7" [class.selected]="GenericBrandtoggleValue === 'Generic'"
                                (click)="toggleGenericBrand('Generic')" class="btn selected">Generic</button>
                            <button class="btn fs-7" [class.selected]="GenericBrandtoggleValue === 'Brand'"
                                (click)="toggleGenericBrand('Brand')">Brand</button>
                        </div>
                    </div>

                    <div class="d-flex align-items-center justify-content-end gap-2">
                        <div class="cursor-pointer custom_tooltip clear_svg">
                            <svg (click)="ClearPrescriptionItems()" width="18" height="21"
                                viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M16.647 10.0809V8.97505C16.647 8.195 16.3371 7.4469 15.7856 6.89532C15.234 6.34375 14.4859 6.03387 13.7058 6.03387H10.7647V1.91623C10.7647 1.4482 10.5787 0.999337 10.2478 0.66839C9.91685 0.337443 9.46799 0.15152 8.99996 0.15152C8.53193 0.15152 8.08307 0.337443 7.75213 0.66839C7.42118 0.999337 7.23526 1.4482 7.23526 1.91623V6.03387H4.29408C3.51403 6.03387 2.76593 6.34375 2.21435 6.89532C1.66278 7.4469 1.3529 8.195 1.3529 8.97505V10.0809L0.176433 19.4927C0.163041 19.6581 0.213567 19.8223 0.317609 19.9515C0.374196 20.014 0.443158 20.0641 0.520119 20.0985C0.59708 20.1329 0.680359 20.151 0.764668 20.1515H17.2353C17.3196 20.151 17.4028 20.1329 17.4798 20.0985C17.5568 20.0641 17.6257 20.014 17.6823 19.9515C17.7864 19.8223 17.8369 19.6581 17.8235 19.4927L16.647 10.0809ZM15.7858 18.975L15.4623 17.1103C15.4492 17.0342 15.4212 16.9613 15.3799 16.896C15.3386 16.8307 15.2849 16.7741 15.2217 16.7295C15.1586 16.6849 15.0873 16.6532 15.0119 16.6362C14.9365 16.6192 14.8585 16.6172 14.7823 16.6303C14.6285 16.6569 14.4915 16.7434 14.4015 16.8709C14.3569 16.9341 14.3252 17.0054 14.3082 17.0808C14.2912 17.1562 14.2892 17.2342 14.3023 17.3103L14.5917 18.975H12.7482L11.9341 13.5927C11.9057 13.4431 11.8204 13.3103 11.6962 13.2223C11.5719 13.1343 11.4184 13.0979 11.2679 13.1208C11.1173 13.1436 10.9815 13.224 10.889 13.3449C10.7965 13.4658 10.7544 13.6179 10.7717 13.7692L11.5588 18.975H4.61761L4.88232 16.088C4.88942 16.0107 4.88124 15.9329 4.85825 15.8588C4.83525 15.7847 4.79789 15.7158 4.74829 15.6562C4.6987 15.5965 4.63783 15.5473 4.56919 15.5111C4.50054 15.475 4.42545 15.4527 4.3482 15.4456C4.27095 15.4385 4.19306 15.4467 4.11897 15.4697C4.04488 15.4927 3.97605 15.5301 3.9164 15.5797C3.85675 15.6293 3.80746 15.6901 3.77133 15.7588C3.7352 15.8274 3.71295 15.9025 3.70584 15.9798L3.43055 18.975H1.43526L2.47055 10.7398H15.5411L16.5647 18.975H15.7858Z"
                                    fill="#EB6247" />
                            </svg>
                            <div class="tooltip">
                                <p>{{langData?.common?.Clear}}</p>
                            </div>
                        </div>
                        <div [class]="(this.medicationsForm.get('Remarks')?.value === '' || this.medicationsForm.get('Remarks')?.value === undefined) ? 'remark_svg cursor-pointer custom_tooltip' : 'remark_svg cursor-pointer custom_tooltip active'"
                            
                            (click)="medicationRemarksPopup(this.medicationsForm.get('ItemName')?.value , medRem)">
                            <svg width="20" height="20" viewBox="0 0 24 25" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M11.3035 13.0436L13.6501 17.1209H15.6449L13.122 12.897C13.9237 12.7014 14.5155 12.3347 14.8968 11.7969C15.288 11.2494 15.4835 10.6432 15.4835 9.97823C15.4835 9.41114 15.3465 8.8979 15.0729 8.43822C14.8088 7.9787 14.403 7.61212 13.8554 7.33834C13.3177 7.06457 12.6577 6.9276 11.8753 6.9276H8.35541V17.1209H10.0273V13.0436H11.3035ZM11.8753 11.7089H10.0273V8.29156H11.8753C12.5109 8.29156 12.9853 8.44315 13.298 8.74631C13.611 9.03964 13.7674 9.45023 13.7674 9.97823C13.7674 10.5062 13.606 10.9267 13.2834 11.2395C12.9704 11.5526 12.5013 11.7089 11.8753 11.7089Z"
                                    fill="#B0B4B5" />
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M23 12.0243C23 18.0995 18.075 23.0243 12 23.0243C5.92499 23.0243 1 18.0995 1 12.0243C1 5.94917 5.92499 1.02432 12 1.02432C18.075 1.02432 23 5.94917 23 12.0243ZM21.7778 12.0243C21.7778 17.4245 17.4 21.8021 12 21.8021C6.59996 21.8021 2.22222 17.4245 2.22222 12.0243C2.22222 6.62414 6.59996 2.24654 12 2.24654C17.4 2.24654 21.7778 6.62414 21.7778 12.0243Z"
                                    fill="#B0B4B5" />
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M11.3035 13.0436L13.6501 17.1209H15.6449L13.122 12.897C13.9237 12.7014 14.5155 12.3347 14.8968 11.7969C15.288 11.2494 15.4835 10.6432 15.4835 9.97823C15.4835 9.41114 15.3465 8.8979 15.0729 8.43822C14.8088 7.9787 14.403 7.61212 13.8554 7.33834C13.3177 7.06457 12.6577 6.9276 11.8753 6.9276H8.35541V17.1209H10.0273V13.0436H11.3035ZM11.8753 11.7089H10.0273V8.29156H11.8753C12.5109 8.29156 12.9853 8.44315 13.298 8.74631C13.611 9.03964 13.7674 9.45023 13.7674 9.97823C13.7674 10.5062 13.606 10.9267 13.2834 11.2395C12.9704 11.5526 12.5013 11.7089 11.8753 11.7089Z"
                                    stroke="#B0B4B5" stroke-width="0.5" />
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M23 12.0243C23 18.0995 18.075 23.0243 12 23.0243C5.92499 23.0243 1 18.0995 1 12.0243C1 5.94917 5.92499 1.02432 12 1.02432C18.075 1.02432 23 5.94917 23 12.0243ZM21.7778 12.0243C21.7778 17.4245 17.4 21.8021 12 21.8021C6.59996 21.8021 2.22222 17.4245 2.22222 12.0243C2.22222 6.62414 6.59996 2.24654 12 2.24654C17.4 2.24654 21.7778 6.62414 21.7778 12.0243Z"
                                    stroke="#B0B4B5" stroke-width="0.5" />
                            </svg>
                            <div class="tooltip">
                                <p>{{langData?.Diagnosis?.Remarks}}</p>
                            </div>
                        </div>
                        <div class="modal fade" id="medication_remark" tabindex="-1"
                            aria-labelledby="medicationRemarksLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" style="width: 35%;">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="medicationRemarksLabel">
                                            {{langData?.prescriptions?.Remarksfor}}
                                            {{remarksForSelectedMedName}}</h5>
                                        <div
                                            class="d-flex gap-2 align-items-center justify-content-end">
                                            <button
                                                class="btn btn-danger-outline">{{langData?.common?.Clear}}</button>
                                            <button class="btn btn-main-outline" data-bs-dismiss="modal"
                                                (click)="saveMedicationRemarks(medRem.value)">{{langData?.common?.Save}}</button>
                                            <button type="button" class="btn-close ms-3"
                                                data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                    </div>
                                    <div class="modal-body">
                                        <textarea name="" placeholder="" #medRem
                                            class="form-control resize-none mb-2" id="medRem" cols="30"
                                            rows="3"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="" *ngIf="!isEditmode">
                            <button class="btn btn-main-outline"
                                (click)="AddPrescriptionItemsToTable()">
                                <svg class="me-1" width="17" height="16" viewBox="0 0 17 16" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M17.0009 3.55613C17.0009 5.52013 15.4088 7.11225 13.4448 7.11225C11.4808 7.11225 9.88867 5.52013 9.88867 3.55613C9.88867 1.59213 11.4808 0 13.4448 0C15.4088 0 17.0009 1.59213 17.0009 3.55613ZM15.3483 3.99384C15.2934 4.23312 15.0548 4.38248 14.8156 4.32745L11.8748 3.65139C11.6355 3.5964 11.4862 3.35783 11.5412 3.11859C11.5962 2.87935 11.8347 2.72995 12.074 2.78498L15.0147 3.46105C15.254 3.51603 15.4034 3.7546 15.3483 3.99384Z"
                                        fill="#368796" />
                                    <path
                                        d="M5.78962 1.44253C5.50179 0.761618 4.53924 0.692936 4.1526 1.32572L1.12869 6.27426C0.779874 6.84511 1.16988 7.57389 1.85018 7.62243L7.12499 7.9988C7.80527 8.04734 8.3002 7.38173 8.04056 6.76745L5.78962 1.44253Z"
                                        fill="#368796" />
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M14.0605 13.4951C15.3954 12.8726 15.9731 11.2858 15.3505 9.95075C14.728 8.61578 13.1411 8.03822 11.8062 8.66072L6.97174 10.915C5.63673 11.5376 5.05917 13.1244 5.68167 14.4594C6.30421 15.7944 7.89104 16.372 9.22606 15.7495L14.0605 13.4951ZM11.6413 13.6423L13.6847 12.6894C14.5747 12.2744 14.9598 11.2165 14.5448 10.3265C14.1298 9.43649 13.0719 9.05145 12.1819 9.46645L10.1384 10.4193L11.6413 13.6423Z"
                                        fill="#368796" />
                                </svg>
                                {{langData?.common?.Add}}</button>
                        </div>
                        <div class="" *ngIf="isEditmode">
                            <button class="btn btn-main-outline"
                                (click)="EditPrescriptionItemsToTable()">{{langData?.common?.Update}}</button>
                        </div>
                        <button class="btn btn-main-outline min-width-unset"
                            (click)="saveAllPrescription()">Save</button>
                    </div>
                </div>
                <div class="p-2 medicationsForm" #medicationFormContainer>
                    <form [formGroup]="medicationsForm" (keydown.enter)="$event.preventDefault()">
                        <div class="medicationsForm d-flex align-items-start gap-2">
                            <!-- <div class="col-4 d-none">
                                <div class="row mx-0 align-items-center">
                                    <label for="" class="form-label ps-0">Drug Name</label>
                                    <div class="d-flex align-items-center p-0">
                                        <div class="input-group col ps-0">
                                            <input type="text"
                                                [class]="(isMedicationFormSubmitted && this.medicationsForm.get('ItemName')?.value == '') ? 'form-control border-danger-300' : 'form-control'"
                                                placeholder={{langData?.prescriptions?.drugNameLabel}}
                                                aria-label="Drug Name" formControlName="ItemName"
                                                [matAutocomplete]="autoMed"
                                                (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchItem($event)">
                                            <mat-autocomplete #autoMed="matAutocomplete">
                                                <mat-option *ngFor="let item of listOfItems"
                                                    (onSelectionChange)="onItemSelected(item)"
                                                    [value]="item.DisplayName.trim()">
                                                    {{item.DisplayName}}
                                                </mat-option>
                                            </mat-autocomplete>
                                            <button class="btn btn-secondary-fill btn-icon" type="button"
                                                id="button-addon2">
                                                <img src="assets/images/icons/icon-search.svg" alt="">
                                            </button>
                                        </div>
                                        <div class="validation_err">
                                            <span class="text-danger"
                                                *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('ItemName')?.value == ''">
                                                <p class="m-0" *ngIf="this.medicationsForm.get('ItemName')?.value == ''"
                                                    translate>{{langData?.messages?.DrugNameisrequired}}</p>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                            <div class="col-3">
                                <div class="d-flex align-items-center gap-2">
                                    <div class="CommanSearch__form bg-white ps-2 w-100">
                                        <svg id="button-addon2" width="20" height="20" viewBox="0 0 24 25" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M10.8609 2.49805C15.7521 2.49805 19.7218 6.46772 19.7218 11.3589C19.7218 16.2501 15.7521 20.2198 10.8609 20.2198C5.96968 20.2198 2 16.2501 2 11.3589C2 6.46772 5.96968 2.49805 10.8609 2.49805ZM10.8609 18.2507C14.6681 18.2507 17.7527 15.1662 17.7527 11.3589C17.7527 7.55072 14.6681 4.46713 10.8609 4.46713C7.05267 4.46713 3.96909 7.55072 3.96909 11.3589C3.96909 15.1662 7.05267 18.2507 10.8609 18.2507ZM19.2147 18.3206L22 21.1049L20.6069 22.498L17.8226 19.7128L19.2147 18.3206Z"
                                                fill="#368796" />
                                        </svg>
                                        <input type="text"
                                            [class]="(isMedicationFormSubmitted && this.medicationsForm.get('ItemName')?.value == '') ? 'CommonSearch__input ps-0 form-control border-danger-300' : 'CommonSearch__input ps-0 form-control'"
                                            placeholder={{langData?.prescriptions?.drugNameLabel}}
                                            aria-label="Drug Name" formControlName="ItemName"
                                            [matAutocomplete]="autoMed"
                                            (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchItem($event)">
                                        <mat-autocomplete #autoMed="matAutocomplete">
                                            <mat-option *ngFor="let item of listOfItems"
                                                (onSelectionChange)="onItemSelected(item)"
                                                [value]="item.DisplayName.trim()">
                                                {{item.DisplayName}}
                                            </mat-option>
                                        </mat-autocomplete>
                                    </div>
                                    <div class="sub_tooltip position-relative custom_tooltip custom_tooltip_left">                                                
                                        <div class="tooltip">
                                            <p id="ItemName" for="ItemName" class="form-label m-0">{{this.medicationsForm.get('ItemName')?.value}}</p>
                                        </div>
                                    </div>
                                    <div class="sub_tooltip position-relative custom_tooltip custom_tooltip_left">           
                                        <button class="btn btn-icon-3d"
                                            (click)="fetchSubstituteItems(this.medicationsForm.get('ItemId')?.value)"><img
                                                src="assets/images/icons/rx-orders/icon-S.svg"
                                                alt=""></button>
                                        <div class="tooltip">
                                            <p>{{langData?.prescriptions?.Substitute}} </p>
                                        </div>
                                    </div>
                                    <div class="medication_dropdown d-none">
                                        <div class="bg-primary-50 medication_dropdown_header p-2 d-flex align-items-center justify-content-between">
                                            <h5 class="clr-primary-600 m-0 h6">Suggestions</h5>
                                            <button type="button" aria-label="Close" class="btn-close"></button>
                                        </div>
                                        <div class="medication_dropdown_body p-2">
                                            <div class="row gx-3">
                                                <div class="col-5 border-end">
                                                    <div class="drug_list d-flex flex-column gap-1">
                                                        <div class="drug_item d-flex align-items-center justify-content-between p-2 active">
                                                            <p class="clr-primary-600 m-0 fs-7">Nexium</p>
                                                            <div class="drug_type d-flex align-items-center gap-1">
                                                                <span class="">Tab</span>
                                                                <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M16.2714 3.55613C16.2714 5.52013 14.6793 7.11225 12.7153 7.11225C10.7513 7.11225 9.15918 5.52013 9.15918 3.55613C9.15918 1.59213 10.7513 0 12.7153 0C14.6793 0 16.2714 1.59213 16.2714 3.55613ZM14.6189 3.99384C14.5639 4.23312 14.3253 4.38248 14.0861 4.32745L11.1453 3.65139C10.906 3.5964 10.7567 3.35783 10.8117 3.11859C10.8667 2.87935 11.1052 2.72995 11.3445 2.78498L14.2852 3.46105C14.5245 3.51603 14.6739 3.7546 14.6189 3.99384Z" fill="#4357BC"/>
                                                                    <path d="M5.06012 1.44253C4.7723 0.761618 3.80975 0.692936 3.42311 1.32572L0.399202 6.27426C0.050382 6.84511 0.440391 7.57389 1.12069 7.62243L6.39549 7.9988C7.07578 8.04734 7.57071 7.38173 7.31106 6.76745L5.06012 1.44253Z" fill="#4357BC"/>
                                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.331 13.4952C14.666 12.8727 15.2436 11.2858 14.621 9.95076C13.9985 8.61579 12.4116 8.03823 11.0767 8.66073L6.24225 10.9151C4.90723 11.5376 4.32968 13.1244 4.95218 14.4594C5.57472 15.7944 7.16155 16.372 8.49657 15.7495L13.331 13.4952ZM10.9118 13.6423L12.9552 12.6894C13.8452 12.2744 14.2303 11.2165 13.8153 10.3265C13.4003 9.4365 12.3424 9.05146 11.4524 9.46646L9.40894 10.4193L10.9118 13.6423Z" fill="#4357BC"/>
                                                                </svg>                                                                                                                                                                                                          
                                                            </div>
                                                        </div>
                                                        <div class="drug_item d-flex align-items-center justify-content-between p-2 active">
                                                            <p class="clr-primary-600 m-0 fs-7">Nexium</p>
                                                            <div class="drug_type d-flex align-items-center gap-1">
                                                                <span class="">Syrup</span>
                                                                <svg width="8" height="16" viewBox="0 0 8 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M5.78883 2.98419V2.63014C6.0923 2.54584 6.31148 2.25922 6.31148 1.93888V0.724974C6.31148 0.320337 5.99115 0 5.58651 0H2.97323C2.5686 0 2.24826 0.320337 2.24826 0.724974V1.93888C2.24826 2.27608 2.46744 2.54584 2.77091 2.63014V2.98419L1.32097 4.48472C1.00063 4.82192 0.832031 5.24341 0.832031 5.69863V14.4152C0.832031 15.2919 1.54014 16 2.41686 16H6.12602C7.00274 16 7.71085 15.2919 7.71085 14.4152V5.71549C7.71085 5.26027 7.54225 4.82192 7.22192 4.50158L5.78883 2.98419ZM3.12497 0.893572H5.43477V1.77028H3.12497V0.893572ZM1.96164 5.10853L3.52961 3.47313C3.61391 3.38883 3.64763 3.28767 3.64763 3.16965V2.66386H4.91212V3.16965C4.91212 3.28767 4.96269 3.38883 5.03013 3.47313L6.5981 5.10853C6.74984 5.27713 6.83414 5.47945 6.83414 5.71549V6.71022H1.7256V5.71549C1.7256 5.47945 1.8099 5.27713 1.96164 5.10853ZM6.83414 7.58693V12.3246H1.7256V7.58693H6.83414ZM6.14288 15.1233H2.43372C2.04594 15.1233 1.7256 14.8029 1.7256 14.4152V13.2181H6.851V14.4152C6.83414 14.8198 6.53066 15.1233 6.14288 15.1233Z" fill="#4357BC"/>
                                                                    <path d="M3.00721 10.4023H3.83334V11.2285C3.83334 11.3128 3.90078 11.3802 3.98508 11.3802H4.57517C4.65947 11.3802 4.72691 11.3128 4.72691 11.2285V10.4023H5.55305C5.63734 10.4023 5.70478 10.3349 5.70478 10.2506V9.66049C5.70478 9.57619 5.63734 9.50876 5.55305 9.50876H4.72691V8.68262C4.72691 8.59832 4.65947 8.53088 4.57517 8.53088H3.98508C3.90078 8.53088 3.83334 8.59832 3.83334 8.68262V9.52562H3.00721C2.92291 9.52562 2.85547 9.59306 2.85547 9.67735V10.2674C2.85547 10.3349 2.92291 10.4023 3.00721 10.4023Z" fill="#4357BC"/>
                                                                </svg>                                                                                                                                     
                                                            </div>
                                                        </div>
                                                        <div class="drug_item d-flex align-items-center justify-content-between p-2">
                                                            <p class="clr-primary-600 m-0 fs-7">Nexium</p>
                                                            <div class="drug_type d-flex align-items-center gap-1">
                                                                <span class="">Injection</span>
                                                                <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M0.398701 0.78106L4.19346 4.57582L3.84736 4.89675C3.58305 5.14222 3.43201 5.48197 3.43201 5.84705C3.42569 6.2121 3.57042 6.55186 3.82855 6.80367L9.85107 12.7318L9.2092 13.3737C9.03932 13.5435 9.03932 13.8268 9.2092 13.9967C9.37909 14.1666 9.66234 14.1666 9.83222 13.9967L11.286 12.5429L13.4947 14.7581L13.0354 15.2175C12.8655 15.3873 12.8655 15.6706 13.0354 15.8405C13.2053 16.0104 13.4885 16.0104 13.6584 15.8405L16.1441 13.3547C16.314 13.1848 16.314 12.9015 16.1441 12.7317C16.056 12.6436 15.9427 12.5994 15.8356 12.5994C15.7287 12.5994 15.6091 12.6436 15.5272 12.7317L15.0049 13.2539L12.7961 11.0451L14.2435 9.59131C14.4134 9.42142 14.4134 9.13817 14.2435 8.96829C14.1554 8.88018 14.0421 8.83607 13.9351 8.83607C13.8281 8.83607 13.7086 8.88018 13.6267 8.96829L13.0414 9.55351L7.04419 3.65067C6.78621 3.39901 6.45263 3.26678 6.11907 3.26678C5.79181 3.26678 5.47086 3.38636 5.21289 3.62552L4.84164 3.97162L1.02801 0.157989C0.939904 0.0698866 0.826646 0.0320896 0.713394 0.0320896C0.600141 0.0320896 0.486883 0.0762076 0.398783 0.164311C0.229031 0.334458 0.229031 0.61128 0.398916 0.781295L0.398701 0.78106ZM14.3758 13.8769L14.1179 14.1349L11.909 11.926L12.167 11.6681L14.3758 13.8769ZM6.41516 4.27341L12.4063 10.1762L10.4743 12.1083L7.98845 9.6603C8.01992 9.64147 8.95757 8.70999 8.95757 8.70999C9.12745 8.54011 9.12745 8.25685 8.95757 8.08697C8.86946 7.99887 8.75621 7.95475 8.64915 7.95475C8.53589 7.95475 8.42263 7.99887 8.34072 8.08697C8.34072 8.08697 7.4094 9.02461 7.39042 9.06243L6.21993 7.91079C6.25773 7.89196 7.20169 6.95418 7.20169 6.95418C7.37158 6.78429 7.37158 6.50104 7.20169 6.33116C7.11359 6.24306 7.00033 6.20526 6.88708 6.20526C6.77382 6.20526 6.66057 6.24938 6.57247 6.33116C6.57247 6.33116 5.63484 7.28147 5.60965 7.31926L4.45167 6.17392C4.36357 6.09214 4.31945 5.97888 4.31945 5.85299C4.31945 5.73341 4.36976 5.62016 4.45786 5.53838L5.81087 4.26715C5.98102 4.10346 6.24534 4.10978 6.41522 4.27334L6.41516 4.27341Z" fill="#4357BC"/>
                                                                </svg>                                                                    
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-7">
                                                    <div class="dosage_count d-flex flex-column">
                                                        <div class="dosage_row">
                                                            <div class="count text-center p-2 active">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">20</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">20</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">20</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">20</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">20</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                        </div>
                                                        <div class="dosage_row">
                                                            <div class="count text-center p-2 active">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">40</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">40</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">40</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">40</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                            <div class="count text-center p-2">
                                                                <div class="pb-1 border-bottom">
                                                                    <h6 class="m-0 lh-1">40</h6>
                                                                    <p class="m-0 fs-8 lh-1">mg</p>
                                                                </div>
                                                                <p class="pt-1 days d-flex align-items-center justify-content-center">30 <span>Days</span></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-1">
                                    <div class="d-flex align-items-center gap-2 position-relative">
                                        <div class="d-flex align-items-end">
                                            <div class=" me-3" >
                                                <div class="afterlabel_form d-flex align-items-end gap-2">
                                                    <input type="text" appTwoDigitDecimaNumber style="height: 1.7rem;width: 4rem;"
                                                        formControlName="Strength"
                                                        [class]="(isMedicationFormSubmitted && this.medicationsForm.get('Strength')?.value == '') ? 'form-control border-danger-300 text-center' : 'form-control text-center'"
                                                        placeholder="">
                                                        <!-- <label id="StrengthUoM" for="StrengthUoM" class="form-label m-0">5</label> -->
                                                        <div class="custom_tooltip custom_tooltip_left d-flex">
                                                            <label id="StrengthUoM" for="StrengthUoM" class="form-label m-0 mini w-auto"></label>
                                                            <div class="tooltip">
                                                                <p id="StrengthUoM" for="StrengthUoM" class="form-label m-0">{{this.medicationsForm.get('Strength')?.value}} {{this.medicationsForm.get('StrengthUoM')?.value}}</p>
                                                            </div>
                                                        </div>
                                                </div>
                                                <div class="validation_err">
                                                    <span class="text-danger"
                                                        *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('Strength')?.value == ''">
                                                        <p class="m-0"
                                                            *ngIf="this.medicationsForm.get('Strength')?.value == ''"
                                                            translate>
                                                            {{langData?.messages?.Strengthisrequired}}</p>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="weight_field merge_field">
                                                <div class="afterlabel_form d-flex align-items-end gap-1">
                                                    <input type="text" formControlName="IssueUOMValue" (change)="CalculateQuantity()" style="height: 1.7rem;width: 4rem;"
                                                    [class]="(isMedicationFormSubmitted && this.medicationsForm.get('Strength')?.value == '') ? 'form-control border-danger-300 text-center' : 'form-control text-center'"
                                                    placeholder="">
                                                    <!-- <label id="Dosage" for="Dosage" class="form-label m-0">5</label> -->
                                                    <div class="custom_tooltip custom_tooltip_left d-flex">
                                                        <label id="Dosage" for="Dosage" class="form-label m-0 mini w-auto"></label>
                                                        <div class="tooltip">
                                                            <p id="Dosage" for="Dosage" class="form-label m-0">{{this.medicationsForm.get('IssueUOMValue')?.value}} {{this.medicationsForm.get('Dosage')?.value}}</p>
                                                        </div>
                                                    </div>
                                                    <svg style="width: 4rem;" (click)="openTaperingPopup()" class="cursor-pointer" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 18 17" fill="none">
                                                        <path d="M3.16669 13.5024H6.70002C6.80969 13.503 6.91841 13.482 7.01994 13.4406C7.12147 13.3991 7.21382 13.338 7.29169 13.2607L13.0584 7.48574L15.425 5.16908C15.5031 5.09161 15.5651 4.99944 15.6074 4.89789C15.6497 4.79634 15.6715 4.68742 15.6715 4.57741C15.6715 4.4674 15.6497 4.35848 15.6074 4.25693C15.5651 4.15538 15.5031 4.06321 15.425 3.98574L11.8917 0.410744C11.8142 0.332637 11.7221 0.270642 11.6205 0.228335C11.519 0.186027 11.41 0.164246 11.3 0.164246C11.19 0.164246 11.0811 0.186027 10.9795 0.228335C10.878 0.270642 10.7858 0.332637 10.7084 0.410744L8.35835 2.76908L2.57502 8.54408C2.49779 8.62195 2.43668 8.71429 2.39521 8.81582C2.35374 8.91735 2.33272 9.02607 2.33335 9.13575V12.6691C2.33335 12.8901 2.42115 13.1021 2.57743 13.2583C2.73371 13.4146 2.94567 13.5024 3.16669 13.5024ZM11.3 2.17741L13.6584 4.53574L12.475 5.71908L10.1167 3.36074L11.3 2.17741ZM4.00002 9.47741L8.94169 4.53574L11.3 6.89408L6.35835 11.8357H4.00002V9.47741ZM16.5 15.1691H1.50002C1.27901 15.1691 1.06705 15.2569 0.910765 15.4132C0.754484 15.5694 0.666687 15.7814 0.666687 16.0024C0.666687 16.2234 0.754484 16.4354 0.910765 16.5917C1.06705 16.7479 1.27901 16.8357 1.50002 16.8357H16.5C16.721 16.8357 16.933 16.7479 17.0893 16.5917C17.2456 16.4354 17.3334 16.2234 17.3334 16.0024C17.3334 15.7814 17.2456 15.5694 17.0893 15.4132C16.933 15.2569 16.721 15.1691 16.5 15.1691Z" fill="#FFAD0E" />
                                                    </svg>  
                                                </div>
                                            </div>
                                        </div>   
                                        <div class="taperingPopup d-none flex-column rounded-2 border-primary-200 p-0"
                                            id="divTapering">
                                            <div
                                                class="bg-primary-50 d-flex align-items-center justify-content-between rounded-top p-2">
                                                <h5 class="fs-7 clr-primary-600 m-0" translate>
                                                    Tapering</h5>
                                                <div
                                                    class="ms-auto d-flex align-items-center gap-2">
                                                    <button class="btn btn-main-outline"
                                                        (click)="saveTapering()">Save</button>
                                                    <button class="btn btn-danger-outline"
                                                        (click)="clearTapering()">Clear</button>
                                                    <button type="button" (click)="closeTapering()"
                                                        class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                            </div>
                                            <div class="p-2">
                                                <form [formGroup]="medicationSchedulesForm">
                                                    <div formArrayName="items">
                                                        <div class="row mx-0 align-items-start">
                                                            <table class="table m-0">
                                                                <thead class="trans_head">
                                                                    <tr>
                                                                        <th>Dose</th>
                                                                        <th>Schedule Time</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr *ngFor="let al of medicationScheduleitems.controls;let i=index"
                                                                        [formGroupName]="i">
                                                                        <td style="width: 30%;">
                                                                            <input type="text"
                                                                                formControlName="Dose"
                                                                                class="form-control">
                                                                        </td>
                                                                        <td style="width: 40%;">
                                                                            <input type="text"
                                                                                formControlName="ScheduleTime"
                                                                                class="form-control">
                                                                        </td>

                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>

                                                    </div>
                                                </form>

                                            </div>
                                        </div>                                       
                                    </div>
                                </div>
                            </div>
                            
                            <!-- <div class="col-3">
                                <div class="d-flex flex-column pe-2">
                                    <label for="" class="form-label">{{langData?.prescriptions?.StrengthDosage}}</label>
                                    <div class="d-flex gx-1 align-items-center">
                                        <div class="col">
                                            <div class="d-flex align-items-center">
                                                <input type="text" appTwoDigitDecimaNumber formControlName="Strength"
                                                    [class]="(isMedicationFormSubmitted && this.medicationsForm.get('Strength')?.value == '') ? 'form-control me-2 border-danger-300' : 'form-control me-2'"
                                                    placeholder="">
                                                <label id="StrengthUoM" for="StrengthUoM" class="form-label"></label>
                                            </div>
                                            <div class="validation_err">
                                                <span class="text-danger"
                                                    *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('Strength')?.value == ''">
                                                    <p class="m-0"
                                                        *ngIf="this.medicationsForm.get('Strength')?.value == ''"
                                                        translate>
                                                        {{langData?.messages?.Strengthisrequired}}</p>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="d-flex align-items-center">
                                                <input type="text" formControlName="IssueUOMValue"
                                                    [class]="(isMedicationFormSubmitted && this.medicationsForm.get('Strength')?.value == '') ? 'form-control me-2 border-danger-300' : 'form-control me-2'"
                                                    placeholder="">
                                                <label id="Dosage" for="Dosage" class="form-label me-2"></label>
                                            </div>
                                        </div>
                                        <div class="sub_tooltip position-relative">
                                            <button class="btn btn-icon-3d" (click)="openTaperingPopup()"><img
                                                    src="assets/images/icons/rx-orders/icon-note.svg" alt=""></button>
            
                                            <div class="taperingPopup d-none flex-column rounded-2 border-primary-200 p-0"
                                                id="divTapering">
                                                <div
                                                    class="bg-primary-50 d-flex align-items-center justify-content-between rounded-top p-2">
                                                    <h5 class="fs-7 clr-primary-600 m-0" translate>
                                                        Tapering</h5>
                                                    <div class="ms-auto d-flex align-items-center gap-2">
                                                        <button class="btn btn-main-outline"
                                                            (click)="saveTapering()">Save</button>
                                                        <button class="btn btn-danger-outline"
                                                            (click)="clearTapering()">Clear</button>
                                                        <button type="button" (click)="closeTapering()"
                                                            class="btn-close" data-bs-dismiss="modal"
                                                            aria-label="Close"></button>
                                                    </div>
                                                </div>
                                                <div class="p-2">

                                                    <form [formGroup]="medicationSchedulesForm">
                                                        <div formArrayName="items">
                                                            <div class="row mx-0 align-items-start">
                                                                <table class="table m-0">
                                                                    <thead class="trans_head">
                                                                        <tr>
                                                                            <th>Dose</th>
                                                                            <th>Schedule Time</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr *ngFor="let al of medicationScheduleitems.controls;let i=index"
                                                                            [formGroupName]="i">
                                                                            <td style="width: 30%;">
                                                                                <input type="text"
                                                                                    formControlName="Dose"
                                                                                    class="form-control">
                                                                            </td>
                                                                            <td style="width: 40%;">
                                                                                <input type="text"
                                                                                    formControlName="ScheduleTime"
                                                                                    class="form-control">
                                                                            </td>

                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>

                                                        </div>
                                                    </form>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <!-- <div class="col-2">
                                <label for="" class="form-label">{{langData?.prescriptions?.Route}}</label>
                                <select
                                    [class]="(isMedicationFormSubmitted && this.medicationsForm.get('AdmRouteId')?.value == '') ? 'form-select pe-4 border-danger-300' : 'form-select pe-4'"
                                    formControlName="AdmRouteId" (change)="onRouteChange($event)">
                                    <option dir="ltr" *ngIf="AdmRoutesList?.length > 1" value="" translate>
                                        {{langData?.common?.Select}}</option>
                                    <option dir="ltr" *ngFor="let route of AdmRoutesList"
                                        [value]="this.itemSelected == 'false' ?route.Id : route.RouteID">
                                        {{this.itemSelected == 'false' ? route.Names : route.RouteName}}
                                    </option>
                                </select>
                                <div class="validation_err">
                                    <span class="text-danger"
                                        *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('AdmRouteId')?.value == ''">
                                        <p class="m-0" *ngIf="this.medicationsForm.get('AdmRouteId')?.value == ''"
                                            translate>{{langData?.messages?.Routeisrequired}}</p>
                                    </span>
                                </div>
                            </div> -->
                            <div class="route_dropdown">
                                <div class="dropdown custom_dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        {{getRouteName(medicationsForm.get("AdmRouteId")?.value)}}
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li class="dropdown-item" >Select Route</li>                                                        
                                        <li class="dropdown-item" *ngFor="let route of AdmRoutesList" (click)="setRouteIdValue(route)">
                                            {{itemSelected == 'false' ? route.Names : route.RouteName}}
                                        </li>                                                        
                                    </ul>
                                </div>
                                <div class="validation_err">
                                    <span class="text-danger"
                                        *ngIf="isMedicationFormSubmitted && medicationsForm.get('AdmRouteId')?.value == ''">
                                        <p class="m-0"
                                            *ngIf="medicationsForm.get('AdmRouteId')?.value == ''"
                                            translate>{{langData?.messages?.Routeisrequired}}</p>
                                    </span>
                                </div>
                            </div>
                            <!-- <div class="col-3">
                                <label for="" class="form-label">{{langData?.prescriptions?.frequency}}</label>
                                <select
                                    [class]="(isMedicationFormSubmitted && this.medicationsForm.get('FrequencyId')?.value == '') ? 'form-select pe-4 border-danger-300' : 'form-select pe-4'"
                                    formControlName="FrequencyId" (change)="onFrequencyChange($event)">
                                    <option dir="ltr" value="" selected translate>
                                        {{langData?.common?.Select}}</option>
                                    <option dir="ltr" *ngFor="let freq of drugFrequenciesList"
                                        [value]="freq.FrequencyID">
                                        {{freq.Frequency}}
                                    </option>
                                </select>
                                <div class="validation_err">
                                    <span class="text-danger"
                                        *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('FrequencyId')?.value == ''">
                                        <p class="m-0" *ngIf="this.medicationsForm.get('FrequencyId')?.value == ''"
                                            translate>{{langData?.messages?.Frequencyisrequired}}
                                        </p>
                                    </span>
                                </div>
                            </div> -->
                            <div class="freq_dropdown">
                                <div class="dropdown custom_dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        {{getFrequencyName(medicationsForm.get("FrequencyId")?.value)}}
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li class="dropdown-item">Select Frequency</li>                                                        
                                        <li class="dropdown-item" *ngFor="let freq of drugFrequenciesList" (click)="setFrequencyValue(freq)">
                                            {{freq.Frequency}}
                                        </li>                                                        
                                    </ul>
                                </div>
                                <div class="validation_err">
                                    <span class="text-danger"
                                        *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('FrequencyId')?.value == ''">
                                        <p class="m-0"
                                            *ngIf="this.medicationsForm.get('FrequencyId')?.value == ''"
                                            translate>{{langData?.messages?.Frequencyisrequired}}
                                        </p>
                                    </span>
                                </div>
                            </div>
                            <div class="">
                                <div class="medication_scheduledate d-flex align-items-center">
                                    <div class="merger_date d-flex pe-1 border-end">
                                        <mat-form-field appearance="fill">
                                            <mat-label translate>dd-MMM-yyyy</mat-label>
                                            <input matInput class="" formControlName="ScheduleStartDate"
                                                [matDatepicker]="ScheduleStartDate"
                                                (click)="ScheduleStartDate.open()">
                                            <mat-datepicker-toggle matSuffix [for]="ScheduleStartDate">
                                            </mat-datepicker-toggle>
                                            <mat-datepicker #ScheduleStartDate></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                    <div class="validation_err">
                                        <span class="text-danger"
                                            *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('ScheduleStartDate')?.value == ''">
                                            <p class="m-0"
                                                *ngIf="this.medicationsForm.get('ScheduleStartDate')?.value == ''"
                                                translate>
                                                {{langData?.messages?.ScheduleStartDateisrequired}}
                                            </p>
                                        </span>
                                    </div>
                                    <div class="input_selct_merge d-flex durationofillness position-relative">
                                        <input type="text"
                                        [class]="(isMedicationFormSubmitted && this.medicationsForm.get('DurationValue')?.value == '') ? 'form-control ps-1 pe-0 border-danger-300' : 'form-control ps-1 pe-0'"
                                        appTwoDigitDecimaNumber maxlength="2" 
                                        formControlName="DurationValue"
                                        (keyup)="CalculateQuantity();" placeholder="">

                                        <div class="dropdown custom_dropdown">
                                            <button class="btn btn-secondary dropdown-toggle" type="button"
                                                data-bs-toggle="dropdown" aria-expanded="false">
                                                {{getDurationName(medicationsForm.get("DurationId")?.value)}}                                                          
                                            </button>
                                            <ul class="dropdown-menu end-0">
                                                <li class="dropdown-item" *ngFor="let dur of durationList" (click)="setDurationValue(dur)">
                                                    {{dur.Names}}
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="validation_err" style="bottom: -1.2rem;">
                                            <span class="text-danger text-nowrap"
                                                *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('DurationId')?.value == ''">
                                                <p class="m-0"
                                                    *ngIf="this.medicationsForm.get('DurationId')?.value == ''"
                                                    translate>
                                                    {{langData?.messages?.DurationTypeisrequired}}
                                                </p>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="med_qty d-flex">
                                <input type="text"
                                [class]="(isMedicationFormSubmitted && this.medicationsForm.get('Quantity')?.value == '') ? 'form-control border-danger-300' : 'form-control px-0 text-center'"
                                formControlName="Quantity" readonly>
                                <label id="QuantityUOM" for="IssueUOM" class="form-label d-flex align-items-end ms-1 mb-0"></label>
                            </div>
                            <div class="col">
                                <div class="dropdown custom_dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        {{getPatientInstructionName(medicationsForm.get("medInstructionId")?.value)}}                                                         
                                    </button>
                                    <ul class="dropdown-menu end-0">
                                        <li class="dropdown-item" *ngFor="let instr of medicationInstructions" (click)="setPatientInstructionsValue(instr)">
                                            {{instr.name}}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col">
                                <div class="dropdown custom_dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        {{getDiagnosisMappingName(medicationsForm.get("DiagnosisId")?.value)}}                                                        
                                    </button>
                                    <ul class="dropdown-menu end-0" style="width: 30rem;">
                                        <li class="dropdown-item" *ngFor="let dis of visitDiagnosis" (click)="setDiagnosisMappingValue(dis)">
                                            {{dis.DiseaseName}}
                                        </li>
                                    </ul>
                                </div>
                                <div class="validation_err">
                                    <span class="text-danger"
                                        *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('DiagnosisId')?.value == ''">
                                        <p class="m-0"
                                            *ngIf="this.medicationsForm.get('DiagnosisId')?.value == ''"
                                            translate>Diagnosis is required
                                        </p>
                                    </span>
                                </div>

                                


                            </div>
                            <div class="w-100" *ngIf="isPRN" >
                                <div class="dropdown custom_dropdown">
                                    <button class="btn btn-secondary dropdown-toggle" type="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        Select                                                          
                                    </button>
                                    <ul class="dropdown-menu end-0">
                                        <li class="dropdown-item">Anxiety</li>
                                        <li class="dropdown-item">Chest Pain</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="p-2 rounded bg-primary-50">
                            <div class="row mx-0 g-2 align-items-end justify-content-between">
                                <div class="col-2">
                                    <label for=""
                                        class="form-label">{{langData?.prescriptions?.ScheduleStartDate}}</label>
                                    <div class="d-flex align-items-center">
                                        <mat-form-field appearance="fill">
                                            <mat-label translate>dd-MMM-yyyy</mat-label>
                                            <input matInput class="" formControlName="ScheduleStartDate"
                                                [matDatepicker]="ScheduleStartDate" (click)="ScheduleStartDate.open()">
                                            <mat-datepicker-toggle matSuffix [for]="ScheduleStartDate">
                                            </mat-datepicker-toggle>
                                            <mat-datepicker #ScheduleStartDate></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                    <div class="validation_err">
                                        <span class="text-danger"
                                            *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('ScheduleStartDate')?.value == ''">
                                            <p class="m-0"
                                                *ngIf="this.medicationsForm.get('ScheduleStartDate')?.value == ''"
                                                translate>
                                                {{langData?.messages?.ScheduleStartDateisrequired}}
                                            </p>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="row gx-1 align-items-end">
                                        <div class="col">
                                            <label for="" class="form-label">{{langData?.common?.Duration}}</label>
                                            <input type="text"
                                                [class]="(isMedicationFormSubmitted && this.medicationsForm.get('DurationValue')?.value == '') ? 'form-control border-danger-300' : 'form-control'"
                                                appTwoDigitDecimaNumber maxlength="2" formControlName="DurationValue"
                                                (keyup)="CalculateQuantity();" placeholder="">
                                            <div class="validation_err">
                                                <span class="text-danger"
                                                    *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('DurationValue')?.value == ''">
                                                    <p class="m-0"
                                                        *ngIf="this.medicationsForm.get('DurationValue')?.value == ''"
                                                        translate>
                                                        {{langData?.messages?.Durationisrequired}}</p>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <select class="form-select pe-4" formControlName="DurationId"
                                                (change)="onDurationChange($event)">
                                                <option dir="ltr" value="" translate>
                                                    {{langData?.common?.Select}}</option>
                                                <option dir="ltr" *ngFor="let dur of durationList" [value]="dur.Id">
                                                    {{dur.Names}}
                                                </option>
                                            </select>
                                            <div class="validation_err">
                                                <span class="text-danger"
                                                    *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('DurationId')?.value == ''">
                                                    <p class="m-0"
                                                        *ngIf="this.medicationsForm.get('DurationId')?.value == ''"
                                                        translate>
                                                        {{langData?.messages?.DurationTypeisrequired}}
                                                    </p>
                                                </span>
                                            </div>
                                        </div>

                                        <div class="col">
                                            <label for="" class="form-label">{{langData?.prescriptions?.Qty}}</label>
                                            <div class="d-flex align-items-center gap-2">
                                                <input type="text"
                                                    [class]="(isMedicationFormSubmitted && this.medicationsForm.get('Quantity')?.value == '') ? 'form-control border-danger-300' : 'form-control'"
                                                    formControlName="Quantity" readonly>
                                                <label id="QuantityUOM" for="IssueUOM" class="form-label"></label>
                                            </div>
                                            <div class="validation_err">
                                                <span class="text-danger"
                                                    *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('Quantity')?.value == ''">
                                                    <p class="m-0"
                                                        *ngIf="this.medicationsForm.get('Quantity')?.value == ''"
                                                        translate>{{langData?.messages?.Qtyisrequired}}
                                                    </p>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <label for=""
                                        class="form-label">{{langData?.prescriptions?.QtyInstructions}}</label>
                                    <select class="form-select pe-4" formControlName="medInstructionId"
                                        (change)="onPresInstrChange($event)">
                                        <option dir="ltr" value="" selected translate>
                                            {{langData?.common?.Select}}</option>
                                        <option dir="ltr" *ngFor="let instr of medicationInstructions"
                                            [value]="instr.id">
                                            {{instr.name}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col">
                                    <div class="dropdown custom_dropdown">
                                        <button class="btn btn-secondary dropdown-toggle" type="button"
                                            data-bs-toggle="dropdown" aria-expanded="false">
                                            {{getDiagnosisMappingName(medicationsForm.get("DiagnosisId")?.value)}}                                                        
                                        </button>
                                        <ul class="dropdown-menu end-0" style="width: 30rem;">
                                            <li class="dropdown-item" *ngFor="let dis of visitDiagnosis" (click)="setDiagnosisMappingValue(dis)">
                                                {{dis.DiseaseName}}
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="validation_err">
                                        <span class="text-danger"
                                            *ngIf="isMedicationFormSubmitted && this.medicationsForm.get('DiagnosisId')?.value == ''">
                                            <p class="m-0"
                                                *ngIf="this.medicationsForm.get('DiagnosisId')?.value == ''"
                                                translate>Diagnosis is required
                                            </p>
                                        </span>
                                    </div>
                                </div>
                                <div class="col" *ngIf="isPRN">
                                    <label for="" class="form-label"
                                        *ngIf="isPRN">{{langData?.prescriptions?.PRNReason}}</label>
                                    <select name="" id="" class="form-select" formControlName="PRNReason" *ngIf="isPRN"
                                        (change)="onPRNTypeChange($event)">
                                        <option value="0">Select</option>
                                        <option value="1">Anxiety</option>
                                        <option value="2">Chest Pain</option>
                                    </select>
                                </div>
                                <div class="col">
                                    <div class="d-flex align-items-center gap-2 justify-content-end">
                                        <div class="cursor-pointer custom_tooltip clear_svg">
                                            <svg (click)="ClearPrescriptionItems()" width="18" height="21"
                                                viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M16.647 10.0809V8.97505C16.647 8.195 16.3371 7.4469 15.7856 6.89532C15.234 6.34375 14.4859 6.03387 13.7058 6.03387H10.7647V1.91623C10.7647 1.4482 10.5787 0.999337 10.2478 0.66839C9.91685 0.337443 9.46799 0.15152 8.99996 0.15152C8.53193 0.15152 8.08307 0.337443 7.75213 0.66839C7.42118 0.999337 7.23526 1.4482 7.23526 1.91623V6.03387H4.29408C3.51403 6.03387 2.76593 6.34375 2.21435 6.89532C1.66278 7.4469 1.3529 8.195 1.3529 8.97505V10.0809L0.176433 19.4927C0.163041 19.6581 0.213567 19.8223 0.317609 19.9515C0.374196 20.014 0.443158 20.0641 0.520119 20.0985C0.59708 20.1329 0.680359 20.151 0.764668 20.1515H17.2353C17.3196 20.151 17.4028 20.1329 17.4798 20.0985C17.5568 20.0641 17.6257 20.014 17.6823 19.9515C17.7864 19.8223 17.8369 19.6581 17.8235 19.4927L16.647 10.0809ZM15.7858 18.975L15.4623 17.1103C15.4492 17.0342 15.4212 16.9613 15.3799 16.896C15.3386 16.8307 15.2849 16.7741 15.2217 16.7295C15.1586 16.6849 15.0873 16.6532 15.0119 16.6362C14.9365 16.6192 14.8585 16.6172 14.7823 16.6303C14.6285 16.6569 14.4915 16.7434 14.4015 16.8709C14.3569 16.9341 14.3252 17.0054 14.3082 17.0808C14.2912 17.1562 14.2892 17.2342 14.3023 17.3103L14.5917 18.975H12.7482L11.9341 13.5927C11.9057 13.4431 11.8204 13.3103 11.6962 13.2223C11.5719 13.1343 11.4184 13.0979 11.2679 13.1208C11.1173 13.1436 10.9815 13.224 10.889 13.3449C10.7965 13.4658 10.7544 13.6179 10.7717 13.7692L11.5588 18.975H4.61761L4.88232 16.088C4.88942 16.0107 4.88124 15.9329 4.85825 15.8588C4.83525 15.7847 4.79789 15.7158 4.74829 15.6562C4.6987 15.5965 4.63783 15.5473 4.56919 15.5111C4.50054 15.475 4.42545 15.4527 4.3482 15.4456C4.27095 15.4385 4.19306 15.4467 4.11897 15.4697C4.04488 15.4927 3.97605 15.5301 3.9164 15.5797C3.85675 15.6293 3.80746 15.6901 3.77133 15.7588C3.7352 15.8274 3.71295 15.9025 3.70584 15.9798L3.43055 18.975H1.43526L2.47055 10.7398H15.5411L16.5647 18.975H15.7858Z"
                                                    fill="#EB6247" />
                                            </svg>
                                            <div class="tooltip">
                                                <p>{{langData?.common?.Clear}}</p>
                                            </div>
                                        </div>
                                        <div [class]="(this.medicationsForm.get('Remarks')?.value === '' || this.medicationsForm.get('Remarks')?.value === undefined) ? 'remark_svg cursor-pointer custom_tooltip' : 'remark_svg cursor-pointer custom_tooltip active'"
                                            
                                            (click)="medicationRemarksPopup(this.medicationsForm.get('ItemName')?.value , medRem)">
                                            <svg width="20" height="20" viewBox="0 0 24 25" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                    d="M11.3035 13.0436L13.6501 17.1209H15.6449L13.122 12.897C13.9237 12.7014 14.5155 12.3347 14.8968 11.7969C15.288 11.2494 15.4835 10.6432 15.4835 9.97823C15.4835 9.41114 15.3465 8.8979 15.0729 8.43822C14.8088 7.9787 14.403 7.61212 13.8554 7.33834C13.3177 7.06457 12.6577 6.9276 11.8753 6.9276H8.35541V17.1209H10.0273V13.0436H11.3035ZM11.8753 11.7089H10.0273V8.29156H11.8753C12.5109 8.29156 12.9853 8.44315 13.298 8.74631C13.611 9.03964 13.7674 9.45023 13.7674 9.97823C13.7674 10.5062 13.606 10.9267 13.2834 11.2395C12.9704 11.5526 12.5013 11.7089 11.8753 11.7089Z"
                                                    fill="#B0B4B5" />
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                    d="M23 12.0243C23 18.0995 18.075 23.0243 12 23.0243C5.92499 23.0243 1 18.0995 1 12.0243C1 5.94917 5.92499 1.02432 12 1.02432C18.075 1.02432 23 5.94917 23 12.0243ZM21.7778 12.0243C21.7778 17.4245 17.4 21.8021 12 21.8021C6.59996 21.8021 2.22222 17.4245 2.22222 12.0243C2.22222 6.62414 6.59996 2.24654 12 2.24654C17.4 2.24654 21.7778 6.62414 21.7778 12.0243Z"
                                                    fill="#B0B4B5" />
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                    d="M11.3035 13.0436L13.6501 17.1209H15.6449L13.122 12.897C13.9237 12.7014 14.5155 12.3347 14.8968 11.7969C15.288 11.2494 15.4835 10.6432 15.4835 9.97823C15.4835 9.41114 15.3465 8.8979 15.0729 8.43822C14.8088 7.9787 14.403 7.61212 13.8554 7.33834C13.3177 7.06457 12.6577 6.9276 11.8753 6.9276H8.35541V17.1209H10.0273V13.0436H11.3035ZM11.8753 11.7089H10.0273V8.29156H11.8753C12.5109 8.29156 12.9853 8.44315 13.298 8.74631C13.611 9.03964 13.7674 9.45023 13.7674 9.97823C13.7674 10.5062 13.606 10.9267 13.2834 11.2395C12.9704 11.5526 12.5013 11.7089 11.8753 11.7089Z"
                                                    stroke="#B0B4B5" stroke-width="0.5" />
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                    d="M23 12.0243C23 18.0995 18.075 23.0243 12 23.0243C5.92499 23.0243 1 18.0995 1 12.0243C1 5.94917 5.92499 1.02432 12 1.02432C18.075 1.02432 23 5.94917 23 12.0243ZM21.7778 12.0243C21.7778 17.4245 17.4 21.8021 12 21.8021C6.59996 21.8021 2.22222 17.4245 2.22222 12.0243C2.22222 6.62414 6.59996 2.24654 12 2.24654C17.4 2.24654 21.7778 6.62414 21.7778 12.0243Z"
                                                    stroke="#B0B4B5" stroke-width="0.5" />
                                            </svg>
                                            <div class="tooltip">
                                                <p>{{langData?.Diagnosis?.Remarks}}</p>
                                            </div>
                                        </div>
                                        <div class="modal fade" id="medication_remark" tabindex="-1"
                                            aria-labelledby="medicationRemarksLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" style="width: 35%;">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="medicationRemarksLabel">
                                                            {{langData?.prescriptions?.Remarksfor}}
                                                            {{remarksForSelectedMedName}}</h5>
                                                        <div
                                                            class="d-flex gap-2 align-items-center justify-content-end">
                                                            <button
                                                                class="btn btn-danger-outline">{{langData?.common?.Clear}}</button>
                                                            <button class="btn btn-main-outline" data-bs-dismiss="modal"
                                                                (click)="saveMedicationRemarks(medRem.value)">{{langData?.common?.Save}}</button>
                                                            <button type="button" class="btn-close ms-3"
                                                                data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                    </div>
                                                    <div class="modal-body">
                                                        <textarea name="" placeholder="" #medRem
                                                            class="form-control resize-none mb-2" id="medRem" cols="30"
                                                            rows="3"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="" *ngIf="!isEditmode">
                                            <button class="btn btn-main-outline"
                                                (click)="AddPrescriptionItemsToTable()">
                                                <svg class="me-1" width="17" height="16" viewBox="0 0 17 16" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                        d="M17.0009 3.55613C17.0009 5.52013 15.4088 7.11225 13.4448 7.11225C11.4808 7.11225 9.88867 5.52013 9.88867 3.55613C9.88867 1.59213 11.4808 0 13.4448 0C15.4088 0 17.0009 1.59213 17.0009 3.55613ZM15.3483 3.99384C15.2934 4.23312 15.0548 4.38248 14.8156 4.32745L11.8748 3.65139C11.6355 3.5964 11.4862 3.35783 11.5412 3.11859C11.5962 2.87935 11.8347 2.72995 12.074 2.78498L15.0147 3.46105C15.254 3.51603 15.4034 3.7546 15.3483 3.99384Z"
                                                        fill="#368796" />
                                                    <path
                                                        d="M5.78962 1.44253C5.50179 0.761618 4.53924 0.692936 4.1526 1.32572L1.12869 6.27426C0.779874 6.84511 1.16988 7.57389 1.85018 7.62243L7.12499 7.9988C7.80527 8.04734 8.3002 7.38173 8.04056 6.76745L5.78962 1.44253Z"
                                                        fill="#368796" />
                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                        d="M14.0605 13.4951C15.3954 12.8726 15.9731 11.2858 15.3505 9.95075C14.728 8.61578 13.1411 8.03822 11.8062 8.66072L6.97174 10.915C5.63673 11.5376 5.05917 13.1244 5.68167 14.4594C6.30421 15.7944 7.89104 16.372 9.22606 15.7495L14.0605 13.4951ZM11.6413 13.6423L13.6847 12.6894C14.5747 12.2744 14.9598 11.2165 14.5448 10.3265C14.1298 9.43649 13.0719 9.05145 12.1819 9.46645L10.1384 10.4193L11.6413 13.6423Z"
                                                        fill="#368796" />
                                                </svg>
                                                {{langData?.common?.Add}}</button>
                                        </div>
                                        <div class="" *ngIf="isEditmode">
                                            <button class="btn btn-main-outline"
                                                (click)="EditPrescriptionItemsToTable()">{{langData?.common?.Update}}</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->

                        <!-- Table-->
                        <div class=" mt-3">
                            <div class="medication_drug overflow-hidden">
                                <div class="bg-primary-50 p-2 medication_drug_header card_item_div row gx-2 mx-0 align-items-start mx-0">
                                    <div class="col-4">
                                        <p class="clr-primary-600 m-0">{{langData?.prescriptions?.drugNameLabel}}</p>
                                    </div>
                                    <div class="col-1" style="width:10%;">
                                        <p class="clr-primary-600 m-0"> {{langData?.prescriptions?.StrengthDosage}}</p>
                                    </div>
                                    <div class="col-1">
                                        <p class="clr-primary-600 m-0"> {{langData?.prescriptions?.Route}}</p>
                                    </div>
                                    <div class="col-1">
                                        <p class="clr-primary-600 m-0"> {{langData?.prescriptions?.frequency}}</p>
                                    </div>
                                    <div class="col-2">
                                        <p class="clr-primary-600 m-0"> {{langData?.prescriptions?.ScheduleStartDate}}</p>
                                    </div>
                                    <div class="col">
                                        <p class="clr-primary-600 m-0">{{langData?.common?.Duration}}</p>
                                    </div>
                                    <div class="col-1">
                                        <p class="clr-primary-600 m-0">{{langData?.prescriptions?.Qty}}</p>
                                    </div>
                                    <div class="col">
                                        <p class="clr-primary-600 m-0"></p>
                                    </div>
                                </div>
                                <div class="medication_drug_body">
                                    <div class="card_item_div_wrapper" *ngFor="let med of selectedItemsList;let i=index">
                                        <div class="d-flex flex-nowrap p-2">
                                            <div [class]="med.Class">
                                                <div class="card_item icon" *ngIf="med.lexicomAlertIcon != ''">
                                                    <div class="cursor-pointer custom_tooltip del_svg"
                                                        (click)="showLexicomAlerts(med)">
                                                        <img style="height: 1.5rem;" class="me-2"
                                                            src="{{'data:image/jpg;base64,' + med.lexicomAlertIcon}}">
                                                    </div>
                                                </div>
                                                <div class="col-4" (click)="disableControls(med)">
                                                    <p class="text-wrap">{{med.ItemName}}</p>
                                                </div>
                                                <div class="col-1" style="width:10%;">
                                                    <p>{{med.Strength}} {{med.Dosage}}</p>
                                                </div>
                                                <div class="col-1">
                                                    <p *ngIf="!med.displayRouteDropdown" (click)="toggleRouteDropdown(med)">{{med.Route}}</p>
                                                    <select class="form-select py-1 fs-8 pe-4 "
                                                        *ngIf="med.displayRouteDropdown"
                                                        (change)="onRouteRowChange($event, med)">
                                                        <option dir="ltr" *ngFor="let route of AdmRoutesListGridRow"
                                                            [value]="route.RouteID"
                                                            [selected]="med.AdmRouteId === route.RouteID">
                                                            {{route.RouteName}}
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="col-1">
                                                    <p *ngIf="!med.displayDropdown" (click)="toggleDropdown(med)">{{med.Frequency}}</p>
                                                    <select class="form-select py-1 fs-8 pe-4 "
                                                        *ngIf="med.displayDropdown"
                                                        (change)="onFrequencyRowChange($event, med)">
                                                        <option dir="ltr" *ngFor="let freq of drugFrequenciesList"
                                                            [value]="freq.FrequencyID"
                                                            [selected]="med.FrequencyId === freq.FrequencyID">
                                                            {{freq.Frequency}}
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="col-2">
                                                    <div class="d-flex align-items-center gap-1">
                                                        <p *ngIf="!med.displayStartDateDropdown" (click)="toggledisplayStartDateDropdown(med)"> {{med.ScheduleStartDate}}</p>
                                                        <mat-form-field appearance="fill" style="width:9rem"
                                                            *ngIf="med.displayStartDateDropdown">
                                                            <mat-label translate>dd-MMM-yyyy</mat-label>
                                                            <input matInput class=""
                                                                [matDatepicker]="ScheduleStartDateGrid"
                                                                formControlName="ScheduleStartDate"
                                                                (click)="ScheduleStartDateGrid.open()"
                                                                (dateChange)="onDateRowChange($event, med)">
                                                            <mat-datepicker-toggle matSuffix
                                                                [for]="ScheduleStartDateGrid">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #ScheduleStartDateGrid></mat-datepicker>
                                                        </mat-form-field>
                                                        <svg width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M0 4.36009H9.30057L5.58038 0.639908" stroke="#357D83" stroke-width="1.5"/>
                                                        </svg>      
                                                        <p>{{med.ScheduleEndDate?.split(' ')[0]}}</p>                                              
                                                    </div>
                                                </div>
                                                <div class="col med_duration">
                                                    <p *ngIf="!med.displayDuration" (click)="toggleDuraion(med)">{{med.Duration}}</p>
                                                    <div *ngIf="med.displayDuration">
                                                        <div class="d-flex align-items-center gap-2">
                                                            <div class="" style="width:2rem">
                                                                <input type="text" class="form-control px-1"
                                                                    appTwoDigitDecimaNumber maxlength="2"
                                                                    [value]="med.DurationValue" placeholder=""
                                                                    (change)="onDurationTextRowChange($event, med)">
        
                                                            </div>
                                                            <div class="" >
                                                                <select class="form-select pe-4" style="width: 6rem;"
                                                                    (change)="onDurationSelectRowChange($event, med)">
                                                                    <option dir="ltr"
                                                                        *ngFor="let dur of durationList"
                                                                        [value]="dur.Id"
                                                                        [selected]="med.DurationId === dur.Id">
                                                                        {{dur.Names}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-1">
                                                    <p>{{med.Quantity}} {{med.IssueUoM}}</p>
                                                </div>
                                                <div class="col">
                                                    <div class="d-flex gap-2 align-items-center justify-content-end">
                                                        <div style="width: 1rem;" class="text-center cursor-pointer custom_tooltip custom_tooltip_left"
                                                            id="viewMore_toggle" (click)="maximizeSelectedDrugItems(med)">
                                                            <svg width="17" height="17" viewBox="0 0 4 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <circle cx="1.99994" cy="1.96497" r="1.51752" fill="#368796"/>
                                                                <circle cx="1.99994" cy="7" r="1.51752" fill="#368796"/>
                                                                <circle cx="1.99994" cy="12.035" r="1.51752" fill="#368796"/>
                                                            </svg>                                                            
                                                            <div class="tooltip" (click)="showItemViewMore(med)">
                                                                <p id="viewMore_toggle_a">
                                                                    {{langData?.prescriptions?.ViewMore}}</p>
                                                            </div>
                                                            <!-- <a class="fs-8 btn btn-main-outline text-nowrap btn-sm" id="viewMore_toggle_a" onclick="viewmoreless()">View More</a> -->
                                                        </div>
                                                        <div style="width: 1.2rem;" class="cursor-pointer custom_tooltip custom_tooltip_left edit_svg"
                                                            (click)="EditPrescriptionItem(med)">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="20"
                                                                height="20" viewBox="0 0 18 17" fill="none">
                                                                <path
                                                                    d="M3.16669 13.5024H6.70002C6.80969 13.503 6.91841 13.482 7.01994 13.4406C7.12147 13.3991 7.21382 13.338 7.29169 13.2607L13.0584 7.48574L15.425 5.16908C15.5031 5.09161 15.5651 4.99944 15.6074 4.89789C15.6497 4.79634 15.6715 4.68742 15.6715 4.57741C15.6715 4.4674 15.6497 4.35848 15.6074 4.25693C15.5651 4.15538 15.5031 4.06321 15.425 3.98574L11.8917 0.410744C11.8142 0.332637 11.7221 0.270642 11.6205 0.228335C11.519 0.186027 11.41 0.164246 11.3 0.164246C11.19 0.164246 11.0811 0.186027 10.9795 0.228335C10.878 0.270642 10.7858 0.332637 10.7084 0.410744L8.35835 2.76908L2.57502 8.54408C2.49779 8.62195 2.43668 8.71429 2.39521 8.81582C2.35374 8.91735 2.33272 9.02607 2.33335 9.13575V12.6691C2.33335 12.8901 2.42115 13.1021 2.57743 13.2583C2.73371 13.4146 2.94567 13.5024 3.16669 13.5024ZM11.3 2.17741L13.6584 4.53574L12.475 5.71908L10.1167 3.36074L11.3 2.17741ZM4.00002 9.47741L8.94169 4.53574L11.3 6.89408L6.35835 11.8357H4.00002V9.47741ZM16.5 15.1691H1.50002C1.27901 15.1691 1.06705 15.2569 0.910765 15.4132C0.754484 15.5694 0.666687 15.7814 0.666687 16.0024C0.666687 16.2234 0.754484 16.4354 0.910765 16.5917C1.06705 16.7479 1.27901 16.8357 1.50002 16.8357H16.5C16.721 16.8357 16.933 16.7479 17.0893 16.5917C17.2456 16.4354 17.3334 16.2234 17.3334 16.0024C17.3334 15.7814 17.2456 15.5694 17.0893 15.4132C16.933 15.2569 16.721 15.1691 16.5 15.1691Z"
                                                                    fill="#FFAD0E" />
                                                            </svg>
                                                            <div class="tooltip">
                                                                <p>{{langData?.prescriptions?.Edit}}</p>
                                                            </div>
                                                        </div>
                                                        <div style="width: 1.4rem;" class="cursor-pointer custom_tooltip custom_tooltip_left del_svg"
                                                            (click)="DeletePrescriptionItem(i, med)"
                                                            *ngIf="med.PrescriptionItemStatusNew != '1'">
                                                            <svg width="23" height="22" viewBox="0 0 23 22" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path
                                                                    d="M20.0995 6.16917H20.0261C15.177 5.68334 10.337 5.5 5.5428 5.98584L3.6728 6.16917C3.58184 6.17866 3.48989 6.17003 3.40228 6.14377C3.31467 6.11751 3.23314 6.07414 3.16239 6.01618C3.09164 5.95822 3.03308 5.8868 2.9901 5.80607C2.94712 5.72534 2.92056 5.63689 2.91197 5.54584C2.8753 5.16084 3.1503 4.83084 3.52614 4.79417L5.39614 4.61084C10.2728 4.11584 15.2136 4.30834 20.1636 4.79417C20.5395 4.83084 20.8145 5.17 20.7778 5.54584C20.764 5.71605 20.6864 5.87477 20.5607 5.99032C20.4349 6.10586 20.2702 6.16973 20.0995 6.16917Z"
                                                                    fill="#EB6247" />
                                                                <path
                                                                    d="M8.64147 5.24333C8.6048 5.24333 8.56813 5.24333 8.5223 5.23416C8.34445 5.20211 8.18627 5.10159 8.08172 4.95419C7.97717 4.80679 7.93459 4.62427 7.96313 4.44583L8.1648 3.24499C8.31147 2.36499 8.51313 1.14583 10.649 1.14583H13.0506C15.1956 1.14583 15.3973 2.41083 15.5348 3.25416L15.7365 4.44583C15.8006 4.82166 15.544 5.17916 15.1773 5.23416C14.8015 5.29833 14.444 5.04166 14.389 4.67499L14.1873 3.48333C14.059 2.68583 14.0315 2.52999 13.0598 2.52999H10.6581C9.68647 2.52999 9.66813 2.65833 9.53063 3.47416L9.3198 4.66583C9.29369 4.82694 9.2111 4.97351 9.08683 5.07931C8.96255 5.18512 8.80468 5.24325 8.64147 5.24333ZM14.7923 20.856H8.9073C5.70813 20.856 5.5798 19.0868 5.47897 17.6568L4.88313 8.42599C4.85563 8.05016 5.14897 7.72016 5.5248 7.69266C5.9098 7.67433 6.23063 7.95849 6.25813 8.33433L6.85397 17.5652C6.9548 18.9585 6.99147 19.481 8.9073 19.481H14.7923C16.7173 19.481 16.754 18.9585 16.8456 17.5652L17.4415 8.33433C17.469 7.95849 17.799 7.67433 18.1748 7.69266C18.5506 7.72016 18.844 8.041 18.8165 8.42599L18.2206 17.6568C18.1198 19.0868 17.9915 20.856 14.7923 20.856Z"
                                                                    fill="#EB6247" />
                                                                <path
                                                                    d="M13.3714 15.8125H10.3189C9.94311 15.8125 9.63144 15.5008 9.63144 15.125C9.63144 14.7492 9.94311 14.4375 10.3189 14.4375H13.3714C13.7473 14.4375 14.0589 14.7492 14.0589 15.125C14.0589 15.5008 13.7473 15.8125 13.3714 15.8125ZM14.1414 12.1458H9.55811C9.18227 12.1458 8.87061 11.8342 8.87061 11.4583C8.87061 11.0825 9.18227 10.7708 9.55811 10.7708H14.1414C14.5173 10.7708 14.8289 11.0825 14.8289 11.4583C14.8289 11.8342 14.5173 12.1458 14.1414 12.1458Z"
                                                                    fill="#EB6247" />
                                                            </svg>
                                                            <div class="tooltip">
                                                                <p>{{langData?.Diagnosis?.Delete}}</p>
                                                            </div>
                                                        </div>
                                                        <div style="width: 1.4rem;" class="cursor-pointer custom_tooltip custom_tooltip_left discontinue_svg"
                                                            data-bs-toggle="modal" data-bs-target="#discontinue_remarks"
                                                            (click)="selectedDiscontinuedItem(med)">
                                                            <svg *ngIf="med.PrescriptionID != ''" width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path
                                                                    d="M12 2C6.48421 2 2 6.48421 2 12C2 17.5158 6.48421 22 12 22C17.5158 22 22 17.5158 22 12C22 6.48421 17.5158 2 12 2ZM18.5474 17.5368L15.6211 14.6105L14.6316 15.6L17.5579 18.5263C16.0632 19.7895 14.1263 20.5684 12 20.5684C7.26316 20.5895 3.41053 16.7368 3.41053 12C3.41053 9.89474 4.18947 7.95789 5.45263 6.46316L8.37895 9.38947L9.36842 8.4L6.46316 5.45263C7.95789 4.18947 9.89474 3.41053 12 3.41053C16.7368 3.41053 20.5895 7.26316 20.5895 12C20.5895 14.1053 19.8105 16.0421 18.5474 17.5368Z"
                                                                    fill="#EB6247" />
                                                                <path
                                                                    d="M11.8316 7.62103L7.62103 11.8316C6.37893 13.0737 6.37893 15.1158 7.62103 16.3579C8.86314 17.6 10.9052 17.6 12.1473 16.3579L16.3579 12.1473C17.6 10.9052 17.6 8.86314 16.3579 7.62103C15.1158 6.37893 13.0947 6.37893 11.8316 7.62103ZM15.621 11.4105L13.5158 13.5158L10.4842 10.4842L12.5895 8.37893C13.4316 7.53682 14.8 7.53682 15.6421 8.37893C16.4631 9.22103 16.4631 10.5895 15.621 11.4105Z"
                                                                    fill="#43A9BC" />
                                                                <path
                                                                    d="M13.1368 8.92629L12.2526 9.8105C12.0421 10.021 12.0421 10.3368 12.2526 10.5473C12.4631 10.7579 12.7789 10.7579 12.9895 10.5473L13.8737 9.66313C14 9.53682 14.2105 9.53682 14.3368 9.66313C14.5474 9.87366 14.8631 9.87366 15.0737 9.66313C15.2842 9.45261 15.2842 9.13682 15.0737 8.92629C14.5474 8.39998 13.6631 8.39998 13.1368 8.92629Z"
                                                                    fill="#368796" />
                                                            </svg>
                                                            <div *ngIf="med.PrescriptionID != ''" class="tooltip">
                                                                <p>{{langData?.prescriptions?.Discontinue}}</p>
                                                            </div>
                                                        </div>
                                                        <div class="modal fade" id="discontinue_remarks" tabindex="-1"
                                                            aria-labelledby="discontinueRemarksLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered"
                                                                style="width: 35%;">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="discontinueRemarksLabel">
                                                                            {{langData?.prescriptions?.Remarksfor}}
                                                                            {{remarksForSelectedDiscontinuedItemName}}</h5>
                                                                        <div
                                                                            class="d-flex gap-2 align-items-center justify-content-end">
                                                                            <button
                                                                                class="btn btn-danger-outline">{{langData?.common?.Clear}}</button>
                                                                            <button class="btn btn-main-outline"
                                                                                data-bs-dismiss="modal"
                                                                                (click)="discontinuePrescriptionItem(remarksForSelectedDiscontinuedItemId, discontinueRem, 'med')">Save</button>
                                                                            <button type="button" class="btn-close ms-3"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <!-- <label for="" class="form-label">Remarks</label> -->
                                                                        <textarea name="" placeholder="" #discontinueRem
                                                                            class="form-control resize-none mb-2"
                                                                            id="discontinueRem" cols="30"
                                                                            rows="3"></textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="cursor-pointer custom_tooltip discontinue_svg"
                                                            data-bs-toggle="modal" data-bs-target="#hold_remarks"
                                                            (click)="selectedHoldItem(med)"
                                                            *ngIf="selectedCard.PatientType == '2' && med.PrescriptionID != ''">
                                                            <!-- Yellow hand -->
                                                            <svg *ngIf="med.HoldStatus == '2'" width="16" height="21"
                                                                viewBox="0 0 16 21" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path
                                                                    d="M15.1308 14.3294C15.1308 17.2927 12.9079 19.8194 10.0687 20.0826C8.48333 20.2302 6.96213 19.7317 5.79181 18.6833C4.90819 17.8939 4.26848 16.9204 3.58811 15.8891C3.43834 15.6602 3.2843 15.4291 3.13025 15.1981C2.41137 14.139 1.6604 13.0008 1.05492 11.7984C0.928685 11.548 0.868779 11.3512 0.868779 11.1929C0.868779 10.9661 0.967196 10.75 1.13836 10.6067C1.46143 10.3371 1.94924 10.3799 2.21882 10.7008L5.06224 14.0919C5.19917 14.2567 5.42596 14.3166 5.62707 14.2438C5.82818 14.1711 5.96297 13.9785 5.96297 13.7646V3.61471C5.96297 3.22959 6.20046 2.89155 6.52781 2.81239C6.77385 2.75248 7.0092 2.80383 7.19748 2.95145C7.38361 3.09694 7.49059 3.31517 7.49059 3.55266V9.41066C7.49059 9.69094 7.71952 9.91987 7.9998 9.91987C8.28007 9.91987 8.509 9.69094 8.509 9.41066V1.57574C8.509 1.19063 8.74649 0.854725 9.07597 0.773424C9.31988 0.715657 9.55737 0.764866 9.74564 0.912492C9.92964 1.06012 10.0366 1.27835 10.0366 1.5137V9.41066C10.0366 9.69094 10.2655 9.91987 10.5458 9.91987C10.8261 9.91987 11.0572 9.69094 11.0572 9.41066V2.53425C11.0572 2.29676 11.162 2.07853 11.3481 1.93304C11.5364 1.78328 11.7739 1.73407 12.0178 1.79397C12.3452 1.87314 12.5848 2.20904 12.5848 2.59415V9.91987C12.5848 10.2001 12.8116 10.4291 13.094 10.4291C13.3764 10.4291 13.6032 10.2001 13.6032 9.91987V5.58948C13.6032 5.38409 13.6824 5.19153 13.8257 5.04818C14.0097 4.86418 14.275 4.7893 14.5382 4.84279C14.8377 4.90697 15.1308 5.30707 15.1308 5.64939V14.3294Z"
                                                                    fill="#F7BF08" />
                                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                                    d="M5.06224 14.0919C5.19917 14.2567 5.42596 14.3166 5.62707 14.2438C5.82818 14.1711 5.96297 13.9785 5.96297 13.7646V3.61471C5.96297 3.22959 6.20046 2.89155 6.52781 2.81239C6.77385 2.75248 7.0092 2.80383 7.19748 2.95145C7.38361 3.09694 7.49059 3.31517 7.49059 3.55266V9.41066C7.49059 9.69094 7.71952 9.91987 7.9998 9.91987C8.28007 9.91987 8.509 9.69094 8.509 9.41066V1.57574C8.509 1.19063 8.74649 0.854725 9.07597 0.773424C9.31988 0.715657 9.55737 0.764866 9.74564 0.912492C9.92964 1.06012 10.0366 1.27835 10.0366 1.5137V9.41066C10.0366 9.69094 10.2655 9.91987 10.5458 9.91987C10.8261 9.91987 11.0572 9.69094 11.0572 9.41066V2.53425C11.0572 2.29676 11.162 2.07853 11.3481 1.93304C11.5364 1.78328 11.7739 1.73407 12.0178 1.79397C12.3452 1.87314 12.5848 2.20904 12.5848 2.59415V9.91987C12.5848 10.2001 12.8116 10.4291 13.094 10.4291C13.3764 10.4291 13.6032 10.2001 13.6032 9.91987V5.58948C13.6032 5.38409 13.6824 5.19153 13.8257 5.04818C14.0097 4.86418 14.275 4.7893 14.5382 4.84279C14.8377 4.90697 15.1308 5.30707 15.1308 5.64939V14.3294C15.1308 17.2927 12.9079 19.8194 10.0687 20.0826C8.48333 20.2302 6.96213 19.7317 5.79181 18.6833C4.9143 17.8993 4.27733 16.9338 3.60221 15.9105L3.58811 15.8891C3.43839 15.6603 3.28439 15.4293 3.13039 15.1983L3.13025 15.1981C2.41137 14.139 1.6604 13.0008 1.05492 11.7984C0.928685 11.548 0.868779 11.3512 0.868779 11.1929C0.868779 10.9661 0.967196 10.75 1.13836 10.6067C1.46143 10.3371 1.94924 10.3799 2.21882 10.7008L5.06224 14.0919ZM0.768279 11.9427C0.633873 11.6761 0.547852 11.4257 0.547852 11.1929C0.547852 10.8743 0.685899 10.567 0.9323 10.3606L0.932744 10.3602C1.39099 9.97787 2.08074 10.0375 2.46455 10.4944L2.46474 10.4946L5.30905 13.8868C5.3583 13.9461 5.44214 13.9695 5.51791 13.942C5.59158 13.9154 5.64205 13.8438 5.64205 13.7646V3.61471C5.64205 3.11166 5.95351 2.62118 6.45221 2.50049C6.79107 2.41808 7.12778 2.48899 7.3955 2.6989C7.65902 2.90506 7.81152 3.21632 7.81152 3.55266V9.41066C7.81152 9.5137 7.89676 9.59894 7.9998 9.59894C8.10283 9.59894 8.18807 9.5137 8.18807 9.41066V1.57574C8.18807 1.07056 8.50114 0.584711 8.99909 0.461842L9.00201 0.461122C9.33553 0.382129 9.67427 0.44871 9.94367 0.659942L9.94508 0.66105L9.94648 0.662174C10.2046 0.869287 10.3575 1.17876 10.3575 1.5137V9.41066C10.3575 9.5137 10.4428 9.59894 10.5458 9.59894C10.6506 9.59894 10.7362 9.51195 10.7362 9.41066V2.53425C10.7362 2.20022 10.8848 1.88843 11.1494 1.68103C11.4192 1.46699 11.7591 1.40014 12.0938 1.48217C12.5902 1.60251 12.9057 2.08876 12.9057 2.59415V9.91987C12.9057 10.0238 12.9897 10.1081 13.094 10.1081C13.1983 10.1081 13.2823 10.0238 13.2823 9.91987V5.58948C13.2823 5.30022 13.3944 5.02566 13.5988 4.82125C13.8634 4.55663 14.2398 4.45466 14.6021 4.52829L14.6038 4.52863L14.6054 4.52899C14.8591 4.58334 15.0678 4.76425 15.2055 4.95188C15.3457 5.14288 15.4517 5.39349 15.4517 5.64939V14.3294C15.4517 17.4481 13.1126 20.1228 10.0983 20.4021C8.42534 20.5579 6.81565 20.0312 5.57799 18.9227C4.66918 18.1107 4.01247 17.1152 3.34507 16.1035L3.31954 16.0648C3.17092 15.8376 3.01792 15.6081 2.864 15.3773C2.14491 14.3179 1.38378 13.165 0.768279 11.9427Z"
                                                                    fill="#F7BF08" />
                                                            </svg>
                                                            <!-- Green hand -->
                                                            <svg *ngIf="med.HoldStatus == '' || med.HoldStatus == '0'"
                                                                width="16" height="21" viewBox="0 0 16 21" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path
                                                                    d="M15.249 14.3294C15.249 17.2927 13.026 19.8194 10.1869 20.0826C8.60149 20.2302 7.08029 19.7317 5.90998 18.6833C5.02635 17.8939 4.38664 16.9204 3.70627 15.8891C3.55651 15.6602 3.40246 15.4291 3.24842 15.1981C2.52954 14.139 1.77856 13.0008 1.17308 11.7984C1.04685 11.548 0.986944 11.3512 0.986944 11.1929C0.986944 10.9661 1.08536 10.75 1.25652 10.6067C1.57959 10.3371 2.0674 10.3799 2.33698 10.7008L5.1804 14.0919C5.31733 14.2567 5.54412 14.3166 5.74523 14.2438C5.94635 14.1711 6.08114 13.9785 6.08114 13.7646V3.61471C6.08114 3.22959 6.31862 2.89155 6.64597 2.81239C6.89202 2.75248 7.12736 2.80383 7.31564 2.95145C7.50178 3.09694 7.60876 3.31517 7.60876 3.55266V9.41066C7.60876 9.69094 7.83768 9.91987 8.11796 9.91987C8.39824 9.91987 8.62717 9.69094 8.62717 9.41066V1.57574C8.62717 1.19063 8.86465 0.854725 9.19414 0.773424C9.43804 0.715657 9.67553 0.764866 9.86381 0.912492C10.0478 1.06012 10.1548 1.27835 10.1548 1.5137V9.41066C10.1548 9.69094 10.3837 9.91987 10.664 9.91987C10.9443 9.91987 11.1753 9.69094 11.1753 9.41066V2.53425C11.1753 2.29676 11.2802 2.07853 11.4663 1.93304C11.6546 1.78328 11.8921 1.73407 12.136 1.79397C12.4633 1.87314 12.703 2.20904 12.703 2.59415V9.91987C12.703 10.2001 12.9297 10.4291 13.2122 10.4291C13.4946 10.4291 13.7214 10.2001 13.7214 9.91987V5.58948C13.7214 5.38409 13.8005 5.19153 13.9439 5.04818C14.1279 4.86418 14.3932 4.7893 14.6563 4.84279C14.9559 4.90697 15.249 5.30707 15.249 5.64939V14.3294Z"
                                                                    fill="#43BC94" />
                                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                                    d="M5.1804 14.0919C5.31733 14.2567 5.54412 14.3166 5.74523 14.2438C5.94635 14.1711 6.08114 13.9785 6.08114 13.7646V3.61471C6.08114 3.22959 6.31862 2.89155 6.64597 2.81239C6.89202 2.75248 7.12736 2.80383 7.31564 2.95145C7.50178 3.09694 7.60876 3.31517 7.60876 3.55266V9.41066C7.60876 9.69094 7.83768 9.91987 8.11796 9.91987C8.39824 9.91987 8.62717 9.69094 8.62717 9.41066V1.57574C8.62717 1.19063 8.86465 0.854725 9.19414 0.773424C9.43804 0.715657 9.67553 0.764866 9.86381 0.912492C10.0478 1.06012 10.1548 1.27835 10.1548 1.5137V9.41066C10.1548 9.69094 10.3837 9.91987 10.664 9.91987C10.9443 9.91987 11.1753 9.69094 11.1753 9.41066V2.53425C11.1753 2.29676 11.2802 2.07853 11.4663 1.93304C11.6546 1.78328 11.8921 1.73407 12.136 1.79397C12.4633 1.87314 12.703 2.20904 12.703 2.59415V9.91987C12.703 10.2001 12.9297 10.4291 13.2122 10.4291C13.4946 10.4291 13.7214 10.2001 13.7214 9.91987V5.58948C13.7214 5.38409 13.8005 5.19153 13.9439 5.04818C14.1279 4.86418 14.3932 4.7893 14.6563 4.84279C14.9559 4.90697 15.249 5.30707 15.249 5.64939V14.3294C15.249 17.2927 13.026 19.8194 10.1869 20.0826C8.60149 20.2302 7.08029 19.7317 5.90998 18.6833C5.03246 17.8993 4.39549 16.9338 3.72037 15.9105L3.70627 15.8891C3.55655 15.6603 3.40256 15.4293 3.24856 15.1983L3.24842 15.1981C2.52954 14.139 1.77856 13.0008 1.17308 11.7984C1.04685 11.548 0.986944 11.3512 0.986944 11.1929C0.986944 10.9661 1.08536 10.75 1.25652 10.6067C1.57959 10.3371 2.0674 10.3799 2.33698 10.7008L5.1804 14.0919ZM0.886443 11.9427C0.752037 11.6761 0.666016 11.4257 0.666016 11.1929C0.666016 10.8743 0.804063 10.567 1.05046 10.3606L1.05091 10.3602C1.50915 9.97787 2.1989 10.0375 2.58272 10.4944L2.5829 10.4946L5.42721 13.8868C5.47646 13.9461 5.56031 13.9695 5.63608 13.942C5.70974 13.9154 5.76021 13.8438 5.76021 13.7646V3.61471C5.76021 3.11166 6.07167 2.62118 6.57037 2.50049C6.90924 2.41808 7.24595 2.48899 7.51366 2.6989C7.77718 2.90506 7.92968 3.21632 7.92968 3.55266V9.41066C7.92968 9.5137 8.01493 9.59894 8.11796 9.59894C8.22099 9.59894 8.30624 9.5137 8.30624 9.41066V1.57574C8.30624 1.07056 8.61931 0.584711 9.11725 0.461842L9.12017 0.461122C9.4537 0.382129 9.79243 0.44871 10.0618 0.659942L10.0632 0.66105L10.0646 0.662174C10.3228 0.869287 10.4757 1.17876 10.4757 1.5137V9.41066C10.4757 9.5137 10.561 9.59894 10.664 9.59894C10.7688 9.59894 10.8544 9.51195 10.8544 9.41066V2.53425C10.8544 2.20022 11.0029 1.88843 11.2676 1.68103C11.5374 1.46699 11.8773 1.40014 12.212 1.48217C12.7083 1.60251 13.0239 2.08876 13.0239 2.59415V9.91987C13.0239 10.0238 13.1079 10.1081 13.2122 10.1081C13.3165 10.1081 13.4004 10.0238 13.4004 9.91987V5.58948C13.4004 5.30022 13.5125 5.02566 13.7169 4.82125C13.9816 4.55663 14.358 4.45466 14.7203 4.52829L14.7219 4.52863L14.7236 4.52899C14.9772 4.58334 15.186 4.76425 15.3237 4.95188C15.4639 5.14288 15.5699 5.39349 15.5699 5.64939V14.3294C15.5699 17.4481 13.2308 20.1228 10.2165 20.4021C8.54351 20.5579 6.93381 20.0312 5.69615 18.9227C4.78735 18.1107 4.13063 17.1152 3.46323 16.1035L3.43771 16.0648C3.28909 15.8376 3.13609 15.6081 2.98217 15.3773C2.26308 14.3179 1.50194 13.165 0.886443 11.9427Z"
                                                                    fill="#43BC94" />
                                                            </svg>
                                                            <!-- Red hand -->
                                                            <svg *ngIf="med.HoldStatus == '1'" width="16" height="21"
                                                                viewBox="0 0 16 21" fill="none"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <path
                                                                    d="M15.1308 14.3294C15.1308 17.2927 12.9079 19.8194 10.0687 20.0826C8.48333 20.2302 6.96213 19.7317 5.79181 18.6833C4.90819 17.8939 4.26848 16.9204 3.58811 15.8891C3.43834 15.6602 3.2843 15.4291 3.13025 15.1981C2.41137 14.139 1.6604 13.0008 1.05492 11.7984C0.928685 11.548 0.868779 11.3512 0.868779 11.1929C0.868779 10.9661 0.967196 10.75 1.13836 10.6067C1.46143 10.3371 1.94924 10.3799 2.21882 10.7008L5.06224 14.0919C5.19917 14.2567 5.42596 14.3166 5.62707 14.2438C5.82818 14.1711 5.96297 13.9785 5.96297 13.7646V3.61471C5.96297 3.22959 6.20046 2.89155 6.52781 2.81239C6.77385 2.75248 7.0092 2.80383 7.19748 2.95145C7.38361 3.09694 7.49059 3.31517 7.49059 3.55266V9.41066C7.49059 9.69094 7.71952 9.91987 7.9998 9.91987C8.28007 9.91987 8.509 9.69094 8.509 9.41066V1.57574C8.509 1.19063 8.74649 0.854725 9.07597 0.773424C9.31988 0.715657 9.55737 0.764866 9.74564 0.912492C9.92964 1.06012 10.0366 1.27835 10.0366 1.5137V9.41066C10.0366 9.69094 10.2655 9.91987 10.5458 9.91987C10.8261 9.91987 11.0572 9.69094 11.0572 9.41066V2.53425C11.0572 2.29676 11.162 2.07853 11.3481 1.93304C11.5364 1.78328 11.7739 1.73407 12.0178 1.79397C12.3452 1.87314 12.5848 2.20904 12.5848 2.59415V9.91987C12.5848 10.2001 12.8116 10.4291 13.094 10.4291C13.3764 10.4291 13.6032 10.2001 13.6032 9.91987V5.58948C13.6032 5.38409 13.6824 5.19153 13.8257 5.04818C14.0097 4.86418 14.275 4.7893 14.5382 4.84279C14.8377 4.90697 15.1308 5.30707 15.1308 5.64939V14.3294Z"
                                                                    fill="#EB6247" />
                                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                                    d="M5.06224 14.0919C5.19917 14.2567 5.42596 14.3166 5.62707 14.2438C5.82818 14.1711 5.96297 13.9785 5.96297 13.7646V3.61471C5.96297 3.22959 6.20046 2.89155 6.52781 2.81239C6.77385 2.75248 7.0092 2.80383 7.19748 2.95145C7.38361 3.09694 7.49059 3.31517 7.49059 3.55266V9.41066C7.49059 9.69094 7.71952 9.91987 7.9998 9.91987C8.28007 9.91987 8.509 9.69094 8.509 9.41066V1.57574C8.509 1.19063 8.74649 0.854725 9.07597 0.773424C9.31988 0.715657 9.55737 0.764866 9.74564 0.912492C9.92964 1.06012 10.0366 1.27835 10.0366 1.5137V9.41066C10.0366 9.69094 10.2655 9.91987 10.5458 9.91987C10.8261 9.91987 11.0572 9.69094 11.0572 9.41066V2.53425C11.0572 2.29676 11.162 2.07853 11.3481 1.93304C11.5364 1.78328 11.7739 1.73407 12.0178 1.79397C12.3452 1.87314 12.5848 2.20904 12.5848 2.59415V9.91987C12.5848 10.2001 12.8116 10.4291 13.094 10.4291C13.3764 10.4291 13.6032 10.2001 13.6032 9.91987V5.58948C13.6032 5.38409 13.6824 5.19153 13.8257 5.04818C14.0097 4.86418 14.275 4.7893 14.5382 4.84279C14.8377 4.90697 15.1308 5.30707 15.1308 5.64939V14.3294C15.1308 17.2927 12.9079 19.8194 10.0687 20.0826C8.48333 20.2302 6.96213 19.7317 5.79181 18.6833C4.9143 17.8993 4.27733 16.9338 3.60221 15.9105L3.58811 15.8891C3.43839 15.6603 3.28439 15.4293 3.13039 15.1983L3.13025 15.1981C2.41137 14.139 1.6604 13.0008 1.05492 11.7984C0.928685 11.548 0.868779 11.3512 0.868779 11.1929C0.868779 10.9661 0.967196 10.75 1.13836 10.6067C1.46143 10.3371 1.94924 10.3799 2.21882 10.7008L5.06224 14.0919ZM0.768279 11.9427C0.633873 11.6761 0.547852 11.4257 0.547852 11.1929C0.547852 10.8743 0.685899 10.567 0.9323 10.3606L0.932744 10.3602C1.39099 9.97787 2.08074 10.0375 2.46455 10.4944L2.46474 10.4946L5.30905 13.8868C5.3583 13.9461 5.44214 13.9695 5.51791 13.942C5.59158 13.9154 5.64205 13.8438 5.64205 13.7646V3.61471C5.64205 3.11166 5.95351 2.62118 6.45221 2.50049C6.79107 2.41808 7.12778 2.48899 7.3955 2.6989C7.65902 2.90506 7.81152 3.21632 7.81152 3.55266V9.41066C7.81152 9.5137 7.89676 9.59894 7.9998 9.59894C8.10283 9.59894 8.18807 9.5137 8.18807 9.41066V1.57574C8.18807 1.07056 8.50114 0.584711 8.99909 0.461842L9.00201 0.461122C9.33553 0.382129 9.67427 0.44871 9.94367 0.659942L9.94508 0.66105L9.94648 0.662174C10.2046 0.869287 10.3575 1.17876 10.3575 1.5137V9.41066C10.3575 9.5137 10.4428 9.59894 10.5458 9.59894C10.6506 9.59894 10.7362 9.51195 10.7362 9.41066V2.53425C10.7362 2.20022 10.8848 1.88843 11.1494 1.68103C11.4192 1.46699 11.7591 1.40014 12.0938 1.48217C12.5902 1.60251 12.9057 2.08876 12.9057 2.59415V9.91987C12.9057 10.0238 12.9897 10.1081 13.094 10.1081C13.1983 10.1081 13.2823 10.0238 13.2823 9.91987V5.58948C13.2823 5.30022 13.3944 5.02566 13.5988 4.82125C13.8634 4.55663 14.2398 4.45466 14.6021 4.52829L14.6038 4.52863L14.6054 4.52899C14.8591 4.58334 15.0678 4.76425 15.2055 4.95188C15.3457 5.14288 15.4517 5.39349 15.4517 5.64939V14.3294C15.4517 17.4481 13.1126 20.1228 10.0983 20.4021C8.42534 20.5579 6.81565 20.0312 5.57799 18.9227C4.66918 18.1107 4.01247 17.1152 3.34507 16.1035L3.31954 16.0648C3.17092 15.8376 3.01792 15.6081 2.864 15.3773C2.14491 14.3179 1.38378 13.165 0.768279 11.9427Z"
                                                                    fill="#EB6247" />
                                                            </svg>
                                                            <div class="tooltip">
                                                                <p>{{langData?.prescriptions?.Hold}}</p>
                                                            </div>
                                                        </div>
                                                        <div class="modal fade" id="hold_remarks" tabindex="-1"
                                                            aria-labelledby="holdRemarksLabel" aria-hidden="true">
                                                            <div class="modal-dialog modal-dialog-centered"
                                                                style="width: 35%;">
                                                                <div class="modal-content">
                                                                    <div class="modal-header">
                                                                        <h5 class="modal-title"
                                                                            id="discontinueRemarksLabel">
                                                                            {{langData?.prescriptions?.Remarksfor}}
                                                                            {{remarksForSelectedHoldItemName}}</h5>
                                                                        <div
                                                                            class="d-flex gap-2 align-items-center justify-content-end">
                                                                            <button class="btn btn-danger-outline"
                                                                                (click)="clearHoldReason(holdRem)">{{langData?.common?.Clear}}</button>
                                                                            <button class="btn btn-main-outline"
                                                                                data-bs-dismiss="modal"
                                                                                (click)="holdPrescriptionItem(remarksForSelectedHoldItemId, holdRem,holdBtnName)">{{holdBtnName}}</button>
                                                                            <button type="button" class="btn-close ms-3"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-body">
                                                                        <!-- <label for="" class="form-label">Remarks</label> -->
                                                                        <select class="form-select pe-5"
                                                                            (change)="selectedHoldReasonEvent($event)">
                                                                            <option value="0"
                                                                                [selected]="selectedHoldReason == '0'"
                                                                                translate>
                                                                                {{langData?.prescriptions?.SelectHoldReason}}
                                                                            </option>
                                                                            <option *ngFor="let hold of holdMasterList"
                                                                                [value]="hold.Id"
                                                                                [selected]="hold.Id == selectedHoldReason">
                                                                                {{hold.Names}}
                                                                            </option>
                                                                        </select>
                                                                        <textarea name="" placeholder="" #holdRem
                                                                            class="form-control resize-none mb-2"
                                                                            id="holdRem" cols="30" rows="3"></textarea>
                                                                    </div>
                                                                    <div class="validation_err"
                                                                        *ngIf="holdReasonValidation">
                                                                        <p class="m-0 mb-3 text-center fs-7">
                                                                            {{langData?.prescriptions?.Pleaseselectholdreasonandenterremarks}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="card_item">
                                                    <p>{{med.PresType}}</p>
                                                </div> -->
                                            </div>
                                        </div>

                                        <div class="expandable row align-items-center card_item_div gx-3 mx-0 px-2 pb-2" [class.d-none]="med.viewMore === false">
                                            <div class="w-max-content d-flex align-items-center gap-1">
                                                <p class="clr-primary-600">Diagnosis:</p>
                                                <p>{{med.DiagnosisName}}</p>
                                            </div>
                                            <div class="w-max-content d-flex align-items-center gap-1">
                                                <p class="clr-primary-600">{{langData?.SHO?.Instruction}}:</p>
                                                <p>{{med.PresInstr}}</p>
                                            </div>
                                            <div class="w-max-content d-flex align-items-center gap-1">
                                                <p class="clr-primary-600">{{langData?.Diagnosis?.Remarks}}</p>
                                                <p>{{med.Remarks}}</p>
                                            </div>
                                            <div class="card_item ms-auto d-flex align-items-center gap-1">
                                                <p class="clr-primary-600">QOH</p>
                                                <label for="" class="form-label text-nowrap m-0">
                                                    <span [class]="med.QOH == '0' ? 'qoh_animate d-inline-flex' : ''">{{med.QOH}}</span>
                                                </label>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <div class="card-3d p-2 m-0 mb-3 d-flex flex-nowrap medication_table_div d-none"
                                *ngFor="let med of selectedItemsList;let i=index">
                                <div [class]="med.Class">
                                    <div class="card_item twox">
                                        <p class="clr-primary-600 mb-1">
                                            {{langData?.prescriptions?.drugNameLabel}}</p>
                                        <p class="text-wrap">{{med.ItemName}}</p>
                                    </div>
                                    <div class="card_item">
                                        <p class="clr-primary-600 mb-1">
                                            {{langData?.prescriptions?.StrengthDosage}}</p>
                                        <p>{{med.Strength}} {{med.Dosage}}</p>
                                    </div>
                                    <div class="card_item">
                                        <p class="clr-primary-600 mb-1">
                                            {{langData?.prescriptions?.Route}}</p>
                                        <p *ngIf="!med.displayRouteDropdown" (click)="toggleRouteDropdown(med)">
                                            {{med.Route}}</p>
                                        <select class="form-select py-1 fs-8 pe-4 " *ngIf="med.displayRouteDropdown"
                                            (change)="onRouteRowChange($event, med)">
                                            <option dir="ltr" *ngFor="let route of AdmRoutesListGridRow"
                                                [value]="route.RouteID" [selected]="med.AdmRouteId === route.RouteID">
                                                {{route.RouteName}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="card_item twox">
                                        <p class="clr-primary-600 mb-1">
                                            {{langData?.prescriptions?.frequency}}
                                        </p>
                                        <p *ngIf="!med.displayDropdown" (click)="toggleDropdown(med)">
                                            {{med.Frequency}}</p>
                                        <select class="form-select py-1 fs-8 pe-4 " *ngIf="med.displayDropdown"
                                            (change)="onFrequencyRowChange($event, med)">
                                            <option dir="ltr" *ngFor="let freq of drugFrequenciesList"
                                                [value]="freq.FrequencyID"
                                                [selected]="med.FrequencyId === freq.FrequencyID">
                                                {{freq.Frequency}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="card_item twox">
                                        <p class="clr-primary-600 mb-1 text-nowrap">
                                            {{langData?.prescriptions?.ScheduleStartDate}}</p>
                                        <p *ngIf="!med.displayStartDateDropdown"
                                            (click)="toggledisplayStartDateDropdown(med)">
                                            {{med.ScheduleStartDate}}</p>
                                        <mat-form-field appearance="fill" *ngIf="med.displayStartDateDropdown">
                                            <mat-label translate>dd-MMM-yyyy</mat-label>
                                            <input matInput class="" [matDatepicker]="ScheduleStartDateGrid"
                                                formControlName="ScheduleStartDate"
                                                (click)="ScheduleStartDateGrid.open()"
                                                (dateChange)="onDateRowChange($event, med)">
                                            <mat-datepicker-toggle matSuffix [for]="ScheduleStartDateGrid">
                                            </mat-datepicker-toggle>
                                            <mat-datepicker #ScheduleStartDateGrid></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                    <div class="card_item med_duration">
                                        <p class="clr-primary-600 mb-1">{{langData?.common?.Duration}}
                                        </p>
                                        <p *ngIf="!med.displayDuration" (click)="toggleDuraion(med)">
                                            {{med.Duration}}</p>
                                        <div *ngIf="med.displayDuration">
                                            <div class="d-flex">
                                                <div class="">
                                                    <input type="text" class="form-control" appTwoDigitDecimaNumber
                                                        maxlength="2" [value]="med.DurationValue" placeholder=""
                                                        (change)="onDurationTextRowChange($event, med)">

                                                </div>
                                                <div class="">
                                                    <select class="form-select pe-4"
                                                        (change)="onDurationSelectRowChange($event, med)">
                                                        <option dir="ltr" *ngFor="let dur of durationList"
                                                            [value]="dur.Id" [selected]="med.DurationId === dur.Id">
                                                            {{dur.Names}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card_item">
                                        <p class="clr-primary-600 mb-1">
                                            {{langData?.prescriptions?.Qty}}</p>
                                        <p>{{med.Quantity}} {{med.IssueUoM}}</p>
                                    </div>
                                    <div class="card_item">
                                        <p class="clr-primary-600 mb-1">
                                            QOH</p>
                                        <label for="" class="form-label text-nowrap"><span
                                                [class]="med.QOH == '0' ? 'qoh_animate d-inline-flex' : ''">{{
                                                med.QOH
                                                }}</span></label>
                                    </div>
                                    <div class="card_item">
                                        <p class="clr-primary-600 mb-1">{{langData?.SHO?.Instruction}}
                                        </p>
                                        <p>{{med.PresInstr}}</p>
                                    </div>
                                    <div class="card_item">
                                        <p class="clr-primary-600 mb-1">{{langData?.SHO?.Type}}</p>
                                        <p>{{med.PresType}}</p>
                                    </div>
                                    <div class="card_item">
                                        <p class="clr-primary-600 mb-1">
                                            {{langData?.prescriptions?.PRNReason}}
                                        </p>
                                        <p>{{med.PRNType}}</p>
                                    </div>
                                    <div class="card_item twox">
                                        <p class="clr-primary-600 mb-1">{{langData?.Diagnosis?.Remarks}}
                                        </p>
                                        <p>{{med.Remarks}}</p>
                                    </div>
                                    <div class="card_item twox">
                                        <p class="clr-primary-600 mb-1 text-nowrap">
                                            {{langData?.prescriptions?.endDate}}</p>
                                        <p>{{med.EndDate}}</p>
                                    </div>
                                    <div class="card_item twox">
                                        <p class="clr-primary-600">Diagnosis:</p>
                                        <p>{{med.DiagnosisName}}</p>
                                    </div>
                                </div>
                                <div class="d-flex gap-2 align-items-end">
                                    <div class="text-center cursor-pointer custom_tooltip" id="viewMore_toggle"
                                        (click)="maximizeSelectedDrugItems(med)">
                                        <svg width="23" height="6" viewBox="0 0 23 6" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <circle cx="2.5" cy="2.70496" r="2.5" fill="#368796" />
                                            <circle cx="11.5" cy="2.70496" r="2.5" fill="#368796" />
                                            <circle cx="20.5" cy="2.70496" r="2.5" fill="#368796" />
                                        </svg>
                                        <div class="tooltip">
                                            <p id="viewMore_toggle_a">
                                                {{langData?.prescriptions?.ViewMore}}</p>
                                        </div>
                                    </div>
                                    <div class="cursor-pointer custom_tooltip edit_svg"
                                        (click)="EditPrescriptionItem(med)">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 20 20" fill="none">
                                            <path
                                                d="M3.24641 7.75089H10.7338C10.9417 7.75089 11.1076 7.58202 11.1076 7.37647C11.1076 7.17092 10.939 7.00205 10.7338 7.00205H3.24641C3.03843 7.00205 2.87251 7.17092 2.87251 7.37647C2.87251 7.58189 3.04115 7.75089 3.24641 7.75089Z"
                                                fill="#368796" />
                                            <path
                                                d="M10.7338 9.62546H3.24648C3.04122 9.62546 2.87258 9.45375 2.87258 9.24833C2.87258 9.04278 3.0385 8.87391 3.24648 8.87391H10.7365C10.9417 8.87391 11.1077 9.04563 11.1077 9.25105C11.1077 9.45659 10.9417 9.62546 10.7338 9.62546Z"
                                                fill="#368796" />
                                            <path
                                                d="M3.24641 11.5004H6.98919C7.19717 11.5004 7.36308 11.3315 7.36308 11.1259C7.36308 10.9204 7.19445 10.7515 6.98919 10.7515L3.24641 10.7517C3.03843 10.7517 2.87251 10.9205 2.87251 11.1261C2.87251 11.3315 3.04115 11.5004 3.24641 11.5004Z"
                                                fill="#368796" />
                                            <path
                                                d="M6.98919 13.6039H3.24641C3.04115 13.6039 2.87251 13.435 2.87251 13.2296C2.87251 13.024 3.03843 12.8552 3.24641 12.8552L6.98919 12.855C7.19445 12.855 7.36308 13.0239 7.36308 13.2295C7.36308 13.435 7.19717 13.6039 6.98919 13.6039Z"
                                                fill="#368796" />
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M18.4324 6.98513C17.6706 6.2223 16.4308 6.2223 15.669 6.98513L14.4856 8.17023L14.4854 2.87497C14.4854 1.84176 13.6448 1.00013 12.6132 1.00013L5.49517 1C5.39681 1 5.30117 1.0394 5.23089 1.10977L1.10962 5.23384C1.03934 5.30421 1 5.39999 1 5.49849V17.1252C1 18.1584 1.84059 19 2.87221 19H12.61C13.6418 19 14.4822 18.1582 14.4822 17.1252L14.4823 13.7048L18.4293 9.75228C18.7975 9.38357 19 8.8908 19 8.37007C19.0027 7.84376 18.8006 7.35384 18.4324 6.98513ZM5.11869 2.27812V3.99822C5.11869 4.61759 4.61548 5.12423 3.99426 5.12423H2.27942L5.11869 2.27812ZM13.735 17.1251C13.735 17.7445 13.2318 18.2511 12.6105 18.2511L2.87242 18.2512C2.25391 18.2512 1.74799 17.7473 1.74799 17.1252V5.87578H3.9941C5.02586 5.87578 5.86631 5.03401 5.86631 4.00094V1.74883H12.6073C13.2258 1.74883 13.7317 2.25274 13.7317 2.87483V8.92158L9.13272 13.53L9.12851 13.5357L9.1243 13.5413C9.09907 13.5694 9.07926 13.6004 9.06244 13.6342C9.06102 13.6385 9.05891 13.6427 9.05681 13.6469C9.05471 13.6511 9.0526 13.6553 9.05118 13.6595C9.04979 13.6622 9.04708 13.6664 9.04708 13.6664C9.04708 13.6664 9.04422 13.6707 9.04277 13.6736L7.92675 17.0263C7.88171 17.1615 7.91549 17.3107 8.0167 17.4092C8.08697 17.4795 8.18262 17.5189 8.28098 17.5189C8.32032 17.5189 8.35967 17.5134 8.39901 17.4992L11.747 16.3817L11.7507 16.3796C11.7541 16.3776 11.7568 16.3761 11.7611 16.3761C11.7653 16.3747 11.7688 16.3726 11.7724 16.3704C11.7759 16.3683 11.7794 16.3662 11.7836 16.3648C11.8201 16.348 11.8539 16.3254 11.882 16.3L11.8836 16.2986L11.8876 16.2958L11.8932 16.2916L13.7318 14.4505L13.7317 17.1248L13.735 17.1251ZM10.9378 15.8668L8.87442 16.5565L9.5632 14.4903L10.9378 15.8668ZM11.6294 15.5008L9.92583 13.7948L14.8174 8.89637L16.521 10.6023L11.6294 15.5008ZM17.9013 9.22012L17.0494 10.0732L15.3458 8.36721L16.1977 7.51416C16.6671 7.04409 17.4318 7.04409 17.9013 7.51416C18.1289 7.74213 18.2526 8.04617 18.2526 8.36721C18.2553 8.6881 18.1289 8.99215 17.9013 9.22012Z"
                                                fill="#368796" />
                                            <path
                                                d="M3.24641 7.75089H10.7338C10.9417 7.75089 11.1076 7.58202 11.1076 7.37647C11.1076 7.17092 10.939 7.00205 10.7338 7.00205H3.24641C3.03843 7.00205 2.87251 7.17092 2.87251 7.37647C2.87251 7.58189 3.04115 7.75089 3.24641 7.75089Z"
                                                stroke="#368796" stroke-width="0.5" />
                                            <path
                                                d="M10.7338 9.62546H3.24648C3.04122 9.62546 2.87258 9.45375 2.87258 9.24833C2.87258 9.04278 3.0385 8.87391 3.24648 8.87391H10.7365C10.9417 8.87391 11.1077 9.04563 11.1077 9.25105C11.1077 9.45659 10.9417 9.62546 10.7338 9.62546Z"
                                                stroke="#368796" stroke-width="0.5" />
                                            <path
                                                d="M3.24641 11.5004H6.98919C7.19717 11.5004 7.36308 11.3315 7.36308 11.1259C7.36308 10.9204 7.19445 10.7515 6.98919 10.7515L3.24641 10.7517C3.03843 10.7517 2.87251 10.9205 2.87251 11.1261C2.87251 11.3315 3.04115 11.5004 3.24641 11.5004Z"
                                                stroke="#368796" stroke-width="0.5" />
                                            <path
                                                d="M6.98919 13.6039H3.24641C3.04115 13.6039 2.87251 13.435 2.87251 13.2296C2.87251 13.024 3.03843 12.8552 3.24641 12.8552L6.98919 12.855C7.19445 12.855 7.36308 13.0239 7.36308 13.2295C7.36308 13.435 7.19717 13.6039 6.98919 13.6039Z"
                                                stroke="#368796" stroke-width="0.5" />
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M18.4324 6.98513C17.6706 6.2223 16.4308 6.2223 15.669 6.98513L14.4856 8.17023L14.4854 2.87497C14.4854 1.84176 13.6448 1.00013 12.6132 1.00013L5.49517 1C5.39681 1 5.30117 1.0394 5.23089 1.10977L1.10962 5.23384C1.03934 5.30421 1 5.39999 1 5.49849V17.1252C1 18.1584 1.84059 19 2.87221 19H12.61C13.6418 19 14.4822 18.1582 14.4822 17.1252L14.4823 13.7048L18.4293 9.75228C18.7975 9.38357 19 8.8908 19 8.37007C19.0027 7.84376 18.8006 7.35384 18.4324 6.98513ZM5.11869 2.27812V3.99822C5.11869 4.61759 4.61548 5.12423 3.99426 5.12423H2.27942L5.11869 2.27812ZM13.735 17.1251C13.735 17.7445 13.2318 18.2511 12.6105 18.2511L2.87242 18.2512C2.25391 18.2512 1.74799 17.7473 1.74799 17.1252V5.87578H3.9941C5.02586 5.87578 5.86631 5.03401 5.86631 4.00094V1.74883H12.6073C13.2258 1.74883 13.7317 2.25274 13.7317 2.87483V8.92158L9.13272 13.53L9.12851 13.5357L9.1243 13.5413C9.09907 13.5694 9.07926 13.6004 9.06244 13.6342C9.06102 13.6385 9.05891 13.6427 9.05681 13.6469C9.05471 13.6511 9.0526 13.6553 9.05118 13.6595C9.04979 13.6622 9.04708 13.6664 9.04708 13.6664C9.04708 13.6664 9.04422 13.6707 9.04277 13.6736L7.92675 17.0263C7.88171 17.1615 7.91549 17.3107 8.0167 17.4092C8.08697 17.4795 8.18262 17.5189 8.28098 17.5189C8.32032 17.5189 8.35967 17.5134 8.39901 17.4992L11.747 16.3817L11.7507 16.3796C11.7541 16.3776 11.7568 16.3761 11.7611 16.3761C11.7653 16.3747 11.7688 16.3726 11.7724 16.3704C11.7759 16.3683 11.7794 16.3662 11.7836 16.3648C11.8201 16.348 11.8539 16.3254 11.882 16.3L11.8836 16.2986L11.8876 16.2958L11.8932 16.2916L13.7318 14.4505L13.7317 17.1248L13.735 17.1251ZM10.9378 15.8668L8.87442 16.5565L9.5632 14.4903L10.9378 15.8668ZM11.6294 15.5008L9.92583 13.7948L14.8174 8.89637L16.521 10.6023L11.6294 15.5008ZM17.9013 9.22012L17.0494 10.0732L15.3458 8.36721L16.1977 7.51416C16.6671 7.04409 17.4318 7.04409 17.9013 7.51416C18.1289 7.74213 18.2526 8.04617 18.2526 8.36721C18.2553 8.6881 18.1289 8.99215 17.9013 9.22012Z"
                                                stroke="#368796" stroke-width="0.5" />
                                        </svg>
                                        <div class="tooltip">
                                            <p>{{langData?.prescriptions?.Edit}}</p>
                                        </div>
                                    </div>
                                    <div class="cursor-pointer custom_tooltip del_svg"
                                        (click)="DeletePrescriptionItem(i, med)"
                                        *ngIf="med.PrescriptionItemStatusNew != '1'">
                                        <svg width="23" height="22" viewBox="0 0 23 22" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M20.0995 6.16917H20.0261C15.177 5.68334 10.337 5.5 5.5428 5.98584L3.6728 6.16917C3.58184 6.17866 3.48989 6.17003 3.40228 6.14377C3.31467 6.11751 3.23314 6.07414 3.16239 6.01618C3.09164 5.95822 3.03308 5.8868 2.9901 5.80607C2.94712 5.72534 2.92056 5.63689 2.91197 5.54584C2.8753 5.16084 3.1503 4.83084 3.52614 4.79417L5.39614 4.61084C10.2728 4.11584 15.2136 4.30834 20.1636 4.79417C20.5395 4.83084 20.8145 5.17 20.7778 5.54584C20.764 5.71605 20.6864 5.87477 20.5607 5.99032C20.4349 6.10586 20.2702 6.16973 20.0995 6.16917Z"
                                                fill="#EB6247" />
                                            <path
                                                d="M8.64147 5.24333C8.6048 5.24333 8.56813 5.24333 8.5223 5.23416C8.34445 5.20211 8.18627 5.10159 8.08172 4.95419C7.97717 4.80679 7.93459 4.62427 7.96313 4.44583L8.1648 3.24499C8.31147 2.36499 8.51313 1.14583 10.649 1.14583H13.0506C15.1956 1.14583 15.3973 2.41083 15.5348 3.25416L15.7365 4.44583C15.8006 4.82166 15.544 5.17916 15.1773 5.23416C14.8015 5.29833 14.444 5.04166 14.389 4.67499L14.1873 3.48333C14.059 2.68583 14.0315 2.52999 13.0598 2.52999H10.6581C9.68647 2.52999 9.66813 2.65833 9.53063 3.47416L9.3198 4.66583C9.29369 4.82694 9.2111 4.97351 9.08683 5.07931C8.96255 5.18512 8.80468 5.24325 8.64147 5.24333ZM14.7923 20.856H8.9073C5.70813 20.856 5.5798 19.0868 5.47897 17.6568L4.88313 8.42599C4.85563 8.05016 5.14897 7.72016 5.5248 7.69266C5.9098 7.67433 6.23063 7.95849 6.25813 8.33433L6.85397 17.5652C6.9548 18.9585 6.99147 19.481 8.9073 19.481H14.7923C16.7173 19.481 16.754 18.9585 16.8456 17.5652L17.4415 8.33433C17.469 7.95849 17.799 7.67433 18.1748 7.69266C18.5506 7.72016 18.844 8.041 18.8165 8.42599L18.2206 17.6568C18.1198 19.0868 17.9915 20.856 14.7923 20.856Z"
                                                fill="#EB6247" />
                                            <path
                                                d="M13.3714 15.8125H10.3189C9.94311 15.8125 9.63144 15.5008 9.63144 15.125C9.63144 14.7492 9.94311 14.4375 10.3189 14.4375H13.3714C13.7473 14.4375 14.0589 14.7492 14.0589 15.125C14.0589 15.5008 13.7473 15.8125 13.3714 15.8125ZM14.1414 12.1458H9.55811C9.18227 12.1458 8.87061 11.8342 8.87061 11.4583C8.87061 11.0825 9.18227 10.7708 9.55811 10.7708H14.1414C14.5173 10.7708 14.8289 11.0825 14.8289 11.4583C14.8289 11.8342 14.5173 12.1458 14.1414 12.1458Z"
                                                fill="#EB6247" />
                                        </svg>
                                        <div class="tooltip">
                                            <p>{{langData?.Diagnosis?.Delete}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" data-bs-abackdrop="static" data-bs-keyboard="false" id="cannotPrescribeStatMedMsg"
    tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>Cannot be prescribe STAT medication</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="savePrescriptionMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">              
                <p>Saved Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="validatePrescriptionMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>{{langData?.prescriptions?.PleaseeditMedicationdetailsthensave}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="NoQohMsgModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>{{prescriptionValidationMsg}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        (click)="fetchSubstituteItems(this.medicationsForm.get('ItemId')?.value)"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="prescriptionValidationMsgModalYesNo"
    tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>{{prescriptionValidationMsg}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="accept()">{{langData?.common?.yes}}</a>
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="decline()">{{langData?.common?.no}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal favouriteInvestigations" data-bs-abackdrop="static" data-bs-keyboard="false" id="modalSubstituteItems"
    tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width:70%">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>{{langData?.prescriptions?.SubstituteItems}}</h5>
                <div class="ms-auto d-flex align-items-center">
                    <button class="btn btn-main-outline mx-2"
                        (click)="loadSubstituteItem()">{{langData?.common?.Select}}</button>
                    <button type="button" class="btn-close ms-2" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>

            <div class="modal-body p-0">
                <div class="validation_err" *ngIf="showSubstituteSelectValidationMsg">
                    <p class="fs-7 m-0 mb-3 text-center">
                        {{langData?.prescriptions?.Pleaseselectatleastoneitemtoproceed}}</p>
                </div>
                <form class="Substitute_table px-3">
                    <div class="" *ngFor="let sub of substituteItems; let i = index">
                        <div class="table-cards_left card_item_div mt-3 p-2">
                            <div class="row mx-0 g-2 w-100">
                                <div class="col-md-1 d-flex">
                                    <div class="custom_check d-flex align-items-center gap-2"
                                        [class.active]="sub.selected" (click)="selectSubstituteItem(sub)">
                                        <svg width="19" height="19" viewBox="0 0 20 21" fill="none"
                                            xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                            <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                            <path
                                                d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                fill="white" stroke="white" stroke-width="0.25"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <p class="clr-primary-600 text-nowrap">{{langData?.prescriptions?.ItemName}}</p>
                                    <p class="text-break">{{sub.DisplayName}}</p>
                                </div>
                                <div class="col-md-2">
                                    <p class="clr-primary-600 text-nowrap">{{langData?.prescriptions?.GenericName}}</p>
                                    <p class="text-break">{{sub.GenericName}}</p>
                                </div>
                                <div class="col-md-2">
                                    <p class="clr-primary-600 text-nowrap">{{langData?.prescriptions?.GenericQuantity}}
                                    </p>
                                    <p class="text-break">{{sub.GenericQuantity}}</p>
                                </div>
                                <div class="col-md-2">
                                    <p class="clr-primary-600 text-nowrap">{{langData?.prescriptions?.GenericUOM}}</p>
                                    <p class="text-break">{{sub.GenericUOMName}}</p>
                                </div>
                                <div class="col-md-1">
                                    <p class="clr-primary-600 text-nowrap">{{langData?.Diagnosis?.Code}}</p>
                                    <p class="text-break">{{sub.ItemCode}}</p>
                                </div>
                                <div class="col-md-1 d-flex align-items-center justify-content-end">

                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="errorMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>{{errorMessages}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- <div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="deleteDisReqYesNo" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" style="width: 35%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="discontinueRemarksLabel">Remarks for Discharge Cancellation</h5>
                <div class="d-flex gap-2 align-items-center justify-content-end">
                    <button class="btn btn-danger-outline">{{langData?.common?.Clear}}</button>
                    <button class="btn btn-main-outline" data-bs-dismiss="modal" (click)="deleteRequest()">Save</button>
                    <button type="button" class="btn-close ms-3" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <textarea name="" placeholder="" class="form-control resize-none mb-2" id="dischargeCancelRemarks" (keyup)="dischargeCancelRemarksEntered()"
                        cols="30" rows="3"></textarea>
                    <div class="validation_err" *ngIf="dischargeRemarksValidation">
                        <p class="m-0 mb-3 text-center fs-7">
                            Please enter Remarks
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

<div class="modal fade" id="deleteDisReqYesNo" tabindex="-1" aria-labelledby="deleteDisReqYesNo" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 35%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Remarks for Discharge Cancellation</h5>
                <div class="d-flex align-items-center">
                    <button class="btn btn-danger-outline"
                        (click)="clearDischargeCancelRemarks()">{{langData?.common?.Clear}}</button>
                    <button class="btn btn-main-outline ms-2"
                        (click)="deleteRequest()">{{langData?.common?.Save}}</button>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="modal-body">
                <div class="row g-2">
                    <textarea name="" placeholder={{langData?.messages?.EnterRemarks}}
                        class="form-control resize-none mt-3" id="justificationremarks"
                        [(ngModel)]="dischargeCancelRemarks" cols="30" rows="3"></textarea>
                    <span class="position-absolute bottom-0">
                        <div class="text-danger" *ngIf="dischargeRemarksValidation">
                            {{langData?.messages?.remarksisrequired}}</div>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="modalMedication"
    tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width:99%">
        <div class="modal-content">
            <div class="modal-header">               
                <div class="ms-auto d-flex align-items-center">
                    <button type="button" class="btn-close ms-2" data-bs-dismiss="modal" aria-label="Close" (click)="close()"></button>
                </div>
            </div>
            <div class="modal-body p-0">
                <app-doctorappointment *ngIf="isOpenAppointment" (savedappointment)="saveddata($event)"
                 [readonly]="true" [selectedDischargeDetails]="selectedDischargeDetails"></app-doctorappointment>
            </div>
        </div>
    </div>
</div>
<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="noPrescriptionSelected" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>{{langData?.prescriptions?.PleaseselectPrescriptionandthensave}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
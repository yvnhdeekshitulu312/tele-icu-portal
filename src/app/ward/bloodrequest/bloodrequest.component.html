<app-generic-close *ngIf="readonly" [isPrint]="data?.fromEHR"></app-generic-close>
<div class="card card-style-1" [class.divdisabled]="data?.fromEHR">
    <div class="card-header justify-content-between" style="height: 45px; min-height: 45px;">
        <div class="d-flex align-items-center">
            <h2 class="card-heading">Blood Request </h2>
            <div class="ms-3 d-flex align-items-center d-none" *ngIf="selectedView.PatientType != '2'">
                <label for="" class="form-label me-2 m-0">SSN</label>
                <input type="text" class="form-control w-auto">
            </div>
            <div class="ms-3 d-flex align-items-center d-none" *ngIf="selectedView.PatientType != '2'">
                <svg class="me-2" width="30" height="31" viewBox="0 0 24 25" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M20.4312 14.7041C20.4312 14.2992 20.7596 13.9707 21.1647 13.9707C21.5696 13.9707 21.8982 14.2989 21.8982 14.7041V17.632C21.8982 18.1191 21.6998 18.5608 21.3801 18.8806C21.0603 19.2005 20.6186 19.3987 20.1315 19.3987H17.2033C16.7984 19.3987 16.4698 19.0703 16.4698 18.6652C16.4698 18.2603 16.7982 17.9318 17.2033 17.9318L20.1312 17.9319C20.2132 17.9319 20.2883 17.8979 20.3427 17.8436C20.3973 17.789 20.431 17.7142 20.431 17.6321L20.4309 14.7042L20.4312 14.7041ZM5.45691 16.4165H5.87794L5.8781 12.7846H7.34472V16.4168H9.41429V12.7846H10.8809V16.4168H12.9505V12.7846H14.4171V16.4168H16.4866V12.7846H17.9533V16.4168H18.3928C18.6453 16.4168 18.8512 16.2109 18.8512 15.9584V12.7846H22.2665C22.6715 12.7846 23 12.4564 23 12.0512C23 11.6463 22.6716 11.3177 22.2665 11.3177H1.73345C1.32853 11.3177 1 11.6461 1 12.0512C1 12.4561 1.32838 12.7846 1.73345 12.7846H4.99797V15.9584C4.99845 16.2107 5.20421 16.4165 5.45687 16.4165H5.45691ZM5.87811 9.85122V7.6858H5.45708C5.20459 7.6858 4.99867 7.89172 4.99867 8.1442V9.85139L5.87811 9.85155V9.85122ZM9.41429 9.85122V7.6858H7.34473V9.85122H9.41429ZM12.9506 9.85122V7.6858H10.881V9.85122H12.9506ZM16.4868 9.85122V7.6858H14.4172V9.85122H16.4868ZM18.8514 9.85122V8.14404C18.8514 7.89155 18.6454 7.68563 18.3929 7.68563H17.9534V9.85106H18.8514L18.8514 9.85122ZM6.79789 17.9324C7.20281 17.9324 7.53134 18.2608 7.53134 18.6658C7.53134 19.0708 7.20296 19.3993 6.79789 19.3993L3.87001 19.3991C3.3829 19.3991 2.94124 19.2008 2.62139 18.8811C2.30155 18.5612 2.10334 18.1196 2.10334 17.6325V14.7043C2.10334 14.2993 2.43172 13.9708 2.8368 13.9708C3.24172 13.9708 3.57025 14.299 3.57025 14.7043V17.6321C3.57025 17.7141 3.60425 17.7892 3.65855 17.8437C3.71317 17.8983 3.78793 17.932 3.87027 17.932H6.79786L6.79789 17.9324ZM3.66067 9.39831C3.66067 9.80323 3.33229 10.1318 2.92721 10.1318C2.52229 10.1318 2.19376 9.80354 2.19376 9.39831L2.19392 6.47043C2.19392 5.98332 2.39227 5.54166 2.71197 5.22181C3.03181 4.90197 3.47347 4.70376 3.96059 4.70376H6.88847C7.29339 4.70376 7.62192 5.03214 7.62192 5.43722C7.62192 5.84214 7.29354 6.17067 6.88847 6.17067L3.96071 6.17051C3.8787 6.17051 3.80361 6.20451 3.74899 6.25881C3.69437 6.31343 3.66069 6.38819 3.66069 6.47053L3.66067 9.39831ZM17.2936 6.17022C16.8886 6.17022 16.5601 5.84183 16.5601 5.43676C16.5601 5.03184 16.8885 4.70331 17.2936 4.70331H20.2214C20.7086 4.70331 21.1502 4.90166 21.4701 5.22136C21.7899 5.5412 21.9881 5.98286 21.9881 6.46998V9.39785C21.9881 9.80277 21.6597 10.1313 21.2547 10.1313C20.8497 10.1313 20.5212 9.80309 20.5212 9.39785L20.5214 6.47043C20.5214 6.38841 20.4874 6.31333 20.4331 6.25887C20.3784 6.20424 20.3037 6.17057 20.2215 6.17057H17.2936L17.2936 6.17022Z"
                        fill="#368796" />
                </svg>
                <p>Scan Patient</p>
            </div>
        </div>
        <div class="actions ms-auto d-flex gap-2">
            <button class="btn btn-main-fill" *ngIf="!fromCaseSheet && !readonly" (click)="navigatetoBedBoard()">Beds Board</button>
            <button class="btn btn-main-outline d-none">Print</button>
            <button class="btn btn-main-outline" *ngIf="!readonly" (click)="openViewBloodRequestsPopup()">View</button>
            <button class="btn btn-main-outline" (click)="saveBloodRequest()" *ngIf="!endofEpisode && !readonly">Save</button>
            <button class="btn btn-danger-outline" *ngIf="!readonly" (click)="clearBloodRequestForm()">Clear</button>
            <button class="btn btn-danger-outline" *ngIf="!readonly && enableDelete" (click)="deleteBloodOrderConfirmation()">Delete</button>
        </div>
    </div>
    <div class="pb-3">
        <!-- Patient Card Latest -->
        <div class="doctor_worklist worklist_patientcard mx-3 bb_st_pc d-none" *ngIf="selectedView.PatientType == '2'">
            <!-- <div class="patient_card"> -->
            <div class="d-flex flex-wrap mx-0 gx-2 border-bottom p-2">
               

                <div class="col-lg-3 col-md-4">
                    <div class="d-flex align-items-center">
                        <div class="patient-photo me-3 mb-3">
                            <img src="assets/images/icons/female.svg" alt="" class="position-relative">
                        </div>
                        <div class="mt-1">
                            <p class="value fs-7 fw-bold w-100">{{selectedView.PatientName}}</p>
                            <div class="d-flex align-items-center gap-2 mt-1">
                                <p>{{selectedView.Gender}} | {{selectedView.FullAge}}</p>
                                <p>SSN : <span class="fw-bold">{{selectedView.SSN}}</span></p>
                            </div>
                            <p class="m-0 fs-8 mt-1">{{selectedView.Nationality}}</p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-9 col-md-8" style="min-height:100%;">
                    <div class="bg-white h-100 p-1 rounded-2">
                        <div class="row mx-0 pb-2 position-relative">
                            <!-- <div class="detail">
                                    <p class="label">{{langData?.common?.SSN}}</p>
                                    <p class="ssn_number color-highlight">{{selectedView.SSN}}</p>
                                </div> -->
                            <div class="col-2">
                                <p class="label"> {{langData?.Ward?.DoctorName}} </p>
                                <p class="color-highlight">{{selectedView.DoctorName}}</p>
                            </div>
                            <div class="col-2">
                                <p class="label"> {{langData?.common?.MobileNo}} </p>
                                <p>{{selectedView.MobileNo}}</p>
                            </div>
                            <div class="col-2">
                                <p class="label">{{langData?.Ward?.Approval}}</p>
                                <p>{{selectedView.ApprovalDays}}</p>
                            </div>
                            <div class="col-2">
                                <p class="label">{{langData?.Ward?.AdmissionDate}} </p>
                                <p>{{selectedView.AdmitDate}}</p>
                            </div>
                            <div class="col">
                                <p class="label">{{langData?.common?.Payer}}</p>
                                <p> {{selectedView.PayerName}} </p>
                            </div>
                            <div class="col-2">
                                <p class="label">{{langData?.common?.ExpDischargeDate}} </p>
                                <p>{{selectedView.ExptDisChargeDate}}</p>
                            </div>
                            <div
                                class="d-flex gap-2 align-items-center justify-content-end position-absolute end-0 eep_pos">
                                <button class="btn btn-icon-3d ms-3 patient_collapse_btn" id="isdetailShow"
                                    *ngIf="!isdetailShow" data-bs-toggle="collapse" (click)="isdetailShows()"><img
                                        src="assets/images/icons/arrow-down.svg" alt=""></button>
                                <button class="btn btn-icon-3d ms-3 patient_collapse_btn" id="isdetaislhide"
                                    *ngIf="isdetailShow" data-bs-toggle="collapse" (click)="isdetailHide()"><img
                                        src="assets/images/icons/icon-arrow-up.svg" alt=""></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 mt-2">
                    <ng-container *ngIf="isdetailShow">
                        <div class="py-2 bg-white p-1 row mx-0 gap-2 border-bottom-primary-200 align-items-center">
                            <div class="w-max-content border-end px-3">
                                <div class="d-flex align-items-center gap-2 bp-s">
                                    <svg width="39" height="39" viewBox="0 0 39 39" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                        <path
                                            d="M27.1542 20.7441C26.9619 20.8364 26.7522 20.8848 26.5397 20.8862C26.3263 20.8845 26.1158 20.8345 25.9233 20.74V24.3524C25.9233 24.6364 25.8129 24.9088 25.6164 25.1096C25.42 25.3104 25.1534 25.4232 24.8755 25.4232H22.3084C22.0306 25.4232 21.764 25.3104 21.5675 25.1096C21.3709 24.9088 21.2605 24.6364 21.2605 24.3524V21.3495C20.8808 21.736 20.4712 22.0907 20.0356 22.41V24.3564C20.0356 24.9728 20.275 25.5638 20.7011 26C21.1272 26.4362 21.7053 26.6817 22.3084 26.6828H24.8755C25.4795 26.6828 26.0589 26.4378 26.4861 26.0016C26.9134 25.5654 27.1536 24.9736 27.1542 24.3564V20.7441Z"
                                            fill="#368796"></path>
                                        <path
                                            d="M26.5389 15.2294C25.5883 15.2294 24.8169 16.6333 24.8169 17.9987C24.8169 19.364 25.5884 20.581 26.5389 20.581C27.4894 20.581 28.2628 19.3619 28.2628 17.9987C28.2629 16.6353 27.4913 15.2294 26.5389 15.2294Z"
                                            fill="#368796"></path>
                                        <path
                                            d="M17.0413 13.5555C17.0413 13.5555 15.7329 11.4221 13.6272 11.4221C13.0211 11.4333 12.4272 11.5988 11.8993 11.9037C9.62054 13.137 9.85315 16.6986 11.7959 19.6243C12.638 18.9922 13.673 18.6875 14.7152 18.7648C15.7574 18.8419 16.7384 19.2961 17.4826 20.0457C18.2265 20.7951 18.6849 21.7912 18.7752 22.8548C23.5297 20.2927 25.4702 13.6713 22.1815 11.9037C21.6533 11.6027 21.0602 11.4407 20.4555 11.4323C18.3497 11.4221 17.0414 13.5555 17.0414 13.5555H17.0413Z"
                                            fill="#368796"></path>
                                        <path
                                            d="M14.3936 19.0392C13.3056 19.0392 12.2622 19.4808 11.4929 20.2668C10.7237 21.0529 10.2915 22.119 10.2915 23.2306C10.2915 24.3423 10.7237 25.4083 11.4929 26.1945C12.2622 26.9805 13.3056 27.4221 14.3936 27.4221C15.4815 27.4221 16.5248 26.9805 17.2942 26.1945C18.0634 25.4083 18.4956 24.3423 18.4956 23.2306C18.4956 22.119 18.0634 21.0529 17.2942 20.2668C16.5248 19.4808 15.4815 19.0392 14.3936 19.0392ZM14.3936 26.3756C13.5773 26.375 12.7948 26.0432 12.2179 25.4532C11.6411 24.8631 11.3172 24.0631 11.3175 23.229C11.3179 22.3951 11.6423 21.5954 12.2197 21.0058C12.7971 20.4162 13.58 20.0852 14.3962 20.0853C15.2125 20.0855 15.9952 20.417 16.5723 21.0067C17.1494 21.5965 17.4736 22.3964 17.4736 23.2305C17.4726 24.0647 17.1476 24.8643 16.5702 25.454C15.9928 26.0435 15.21 26.375 14.3936 26.3756H14.3936Z"
                                            fill="#368796"></path>
                                        <path
                                            d="M17.1755 23.2302C17.1755 22.4758 16.8822 21.7523 16.3601 21.2188C15.8381 20.6854 15.13 20.3857 14.3917 20.3857C13.6534 20.3857 12.9454 20.6853 12.4233 21.2188C11.9012 21.7522 11.6079 22.4758 11.6079 23.2302C11.6079 23.9846 11.9013 24.708 12.4233 25.2415C12.9454 25.775 13.6534 26.0746 14.3917 26.0746C15.13 26.0746 15.838 25.775 16.3601 25.2415C16.8822 24.7081 17.1755 23.9846 17.1755 23.2302ZM14.3918 24.0428H14.3917C14.1076 24.0697 13.8311 23.9396 13.6661 23.7017C13.5014 23.4636 13.4732 23.1537 13.5926 22.8889C13.7119 22.624 13.9604 22.4443 14.2446 22.4175V21.3061C14.2441 21.2659 14.2594 21.227 14.287 21.1984C14.3147 21.1698 14.3524 21.1538 14.3917 21.1538C14.4316 21.1532 14.47 21.1689 14.4985 21.1975C14.5269 21.2262 14.5429 21.2653 14.5429 21.3061V22.4256C14.7388 22.4641 14.9133 22.5765 15.032 22.7405L15.5272 22.4946H15.5271C15.6007 22.458 15.6895 22.4888 15.726 22.5637C15.7603 22.6396 15.7296 22.7296 15.6563 22.7668L15.1652 23.0147C15.185 23.0849 15.1957 23.1573 15.1971 23.2301C15.1986 23.4481 15.1144 23.6577 14.9634 23.8116C14.8123 23.9657 14.6071 24.0511 14.3937 24.0489L14.3918 24.0428Z"
                                            fill="#368796"></path>
                                        <path
                                            d="M14.8973 23.2298C14.8973 23.5136 14.672 23.7438 14.3942 23.7438C14.1164 23.7438 13.8911 23.5136 13.8911 23.2298C13.8911 22.9459 14.1164 22.7157 14.3942 22.7157C14.672 22.7157 14.8973 22.9459 14.8973 23.2298Z"
                                            fill="#368796"></path>
                                    </svg>
                                    <div>
                                        <p class="m-0 fs-7 text-nowrap">BP</p>
                                        <p class="m-0 fs-7 text-nowrap">120/80</p>
                                    </div>
                                </div>
                            </div>
                            <div class="w-max-content border-end px-3">
                                <div class="d-flex align-items-center gap-2 temp">
                                    <svg width="39" height="39" viewBox="0 0 39 39" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                        <path
                                            d="M22.0465 21.9345C21.7733 21.6706 21.5 21.4787 21.177 21.3109V12.2689C21.177 11.2616 20.3075 10.4221 19.2642 10.4221C18.2208 10.4221 17.3513 11.2616 17.3513 12.2689V21.3109C17.0533 21.4789 16.7551 21.6947 16.4818 21.9345C14.9416 23.4214 14.9416 25.8198 16.4818 27.3069C18.0219 28.7939 20.5061 28.7939 22.0463 27.3069C23.5868 25.8198 23.5868 23.4213 22.0464 21.9345H22.0465ZM19.1401 27.139C17.7737 27.139 16.6559 26.0598 16.6559 24.7406C16.6559 24.5726 16.8049 24.4528 16.954 24.4528C17.103 24.4528 17.252 24.5967 17.252 24.7406C17.252 25.724 18.0966 26.5394 19.1151 26.5394C19.2891 26.5394 19.4132 26.6833 19.4132 26.8272C19.4133 26.971 19.3141 27.139 19.1401 27.139H19.1401ZM20.4071 13.1563H19.2643V14.6433H20.4071V15.1229H19.2643V16.6099H20.4071V17.0895H19.2643V18.5765H20.4071V19.0561H19.2643V20.0873H18.2955V12.2206C18.2955 11.7168 18.7425 11.2852 19.2643 11.2852V12.6524H20.4071V13.1563Z"
                                            fill="#368796"></path>
                                    </svg>
                                    <div>
                                        <p class="m-0 fs-7 text-nowrap">Temp</p>
                                        <p class="m-0 fs-7 text-nowrap">38 C</p>
                                    </div>
                                </div>
                            </div>
                            <div class="w-max-content border-end px-3">
                                <div class="d-flex align-items-center gap-2 bp-s">
                                    <svg width="39" height="39" viewBox="0 0 39 39" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M28.2642 19.9221C28.2642 24.8927 24.2347 28.9221 19.2642 28.9221C14.2936 28.9221 10.2642 24.8927 10.2642 19.9221C10.2642 14.9516 14.2936 10.9221 19.2642 10.9221C24.2347 10.9221 28.2642 14.9516 28.2642 19.9221ZM24.8999 25.8535C23.4326 27.2481 21.4483 28.1039 19.2642 28.1039C14.7455 28.1039 11.0823 24.4408 11.0823 19.9221C11.0823 17.7903 11.8976 15.8489 13.2335 14.3928C13.252 14.457 13.2866 14.5176 13.3372 14.5682L16.963 18.194L15.4228 19.7455C15.3171 19.8521 15.2575 19.996 15.2568 20.1461V23.1164L13.7059 24.6674C13.6523 24.7206 13.6097 24.7839 13.5806 24.8536C13.5516 24.9233 13.5366 24.9981 13.5366 25.0737C13.5366 25.1492 13.5516 25.2241 13.5806 25.2938C13.6097 25.3635 13.6523 25.4268 13.7059 25.48C13.7591 25.5337 13.8224 25.5763 13.8921 25.6053C13.9619 25.6344 14.0367 25.6493 14.1122 25.6493C14.1878 25.6493 14.2626 25.6344 14.3323 25.6053C14.4021 25.5763 14.4654 25.5337 14.5186 25.48L16.0695 23.9291H19.0398C19.1899 23.9285 19.3338 23.8688 19.4404 23.7631L20.9919 22.2229L24.5141 25.7452C24.6187 25.8498 24.7659 25.8859 24.8999 25.8535ZM25.2011 25.552C25.2333 25.4181 25.1972 25.2711 25.0927 25.1666L21.5725 21.6465L24.1505 19.0874C24.417 18.8216 24.6284 18.5058 24.7726 18.1581C24.9169 17.8105 24.9912 17.4378 24.9912 17.0614C24.9912 16.685 24.9169 16.3123 24.7726 15.9647C24.6284 15.617 24.417 15.3013 24.1505 15.0355C23.8847 14.769 23.5689 14.5575 23.2212 14.4133C22.8736 14.269 22.5009 14.1948 22.1245 14.1948C21.7481 14.1948 21.3754 14.269 21.0278 14.4133C20.6801 14.5575 20.3644 14.769 20.0985 15.0355L17.5394 17.6134L13.9157 13.9897C13.8652 13.9392 13.8048 13.9046 13.7407 13.8861C15.1962 12.5534 17.1352 11.7403 19.2642 11.7403C23.7829 11.7403 27.446 15.4034 27.446 19.9221C27.446 22.1034 26.5924 24.0852 25.2011 25.552ZM16.4015 20.3808L17.7721 19.0032L18.5711 19.8021L17.712 20.6612C17.6584 20.7144 17.6158 20.7777 17.5868 20.8475C17.5577 20.9172 17.5427 20.992 17.5427 21.0676C17.5427 21.1431 17.5577 21.2179 17.5868 21.2877C17.6158 21.3574 17.6584 21.4207 17.712 21.4739C17.7652 21.5275 17.8285 21.5701 17.8983 21.5992C17.968 21.6282 18.0428 21.6432 18.1184 21.6432C18.1939 21.6432 18.2687 21.6282 18.3385 21.5992C18.4082 21.5701 18.4715 21.5275 18.5247 21.4739L19.3838 20.6148L20.1828 21.4138L18.8051 22.7845H16.4015V20.3808ZM18.3492 18.4232L19.1496 19.2236L21.7182 16.6551C21.8259 16.5473 21.9721 16.4868 22.1245 16.4868C22.2769 16.4868 22.4231 16.5473 22.5308 16.6551C22.6386 16.7628 22.6992 16.909 22.6992 17.0614C22.6992 17.2138 22.6386 17.36 22.5308 17.4678L19.9623 20.0363L20.7628 20.8367L23.3378 18.2747C23.6411 17.9492 23.8062 17.5188 23.7983 17.074C23.7905 16.6292 23.6103 16.2048 23.2957 15.8902C22.9812 15.5756 22.5568 15.3954 22.112 15.3876C21.6672 15.3797 21.2367 15.5449 20.9112 15.8481L18.3492 18.4232Z"
                                            fill="#368796"></path>
                                    </svg>
                                    <div>
                                        <p class="m-0 fs-7 text-nowrap">Allergy</p>
                                        <p class="m-0 fs-7 text-nowrap"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="w-max-content border-end px-3">
                                <div class="d-flex align-items-center gap-2 bp-s">
                                    <svg width="39" height="39" viewBox="0 0 39 39" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                        <path
                                            d="M12.1554 18.5362C13.2228 18.5362 14.0881 17.6709 14.0881 16.6035C14.0881 15.5362 13.2231 14.672 12.1554 14.672C11.0894 14.672 10.2239 15.5364 10.2239 16.6035C10.2239 17.6707 11.0894 18.5362 12.1554 18.5362ZM30.7642 19.5747C30.7642 18.0449 29.5231 16.804 27.9933 16.804H20.1708V22.4179H29.4416V25.1266H30.7639L30.7631 19.5746L30.7642 19.5747ZM14.0878 19.1781H19.3777V16.8042H16.8267C15.4309 16.8044 14.2802 17.837 14.0878 19.1781ZM9.08641 13.3168H7.76416V25.1273H9.08641V22.4184H19.3777V19.9717L9.08641 19.9719V13.3168Z"
                                            fill="#368796"></path>
                                    </svg>
                                    <div>
                                        <p class="m-0 fs-7 text-nowrap clr-primary-600">Bed No.</p>
                                        <p class="m-0 fs-7 text-nowrap">{{selectedView.Bed}}</p>
                                    </div>
                                </div>
                            </div>

                            <div class="w-max-content border-end px-3">
                                <div class="d-flex align-items-center gap-2 bp-s">
                                    <img src="assets/images/icons/height.svg" alt="">
                                    <div>
                                        <p class="m-0 fs-7 text-nowrap">{{langData?.common?.Height}} </p>
                                        <p class="m-0 text-nowrap">{{selectedView.Height}} Cm(s)</p>
                                    </div>
                                </div>
                            </div>
                            <div class="w-max-content border-end px-3">
                                <div class="d-flex align-items-center gap-2 bp-s">
                                    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="39" height="38" viewBox="0 0 39 38" fill="none">
                                            <circle cx="19.5" cy="19" r="19" fill="#DAEEF1"></circle>
                                            <path d="M25.4627 9H13.5373C12.7465 9 11.9882 9.31411 11.4292 9.87328C10.87 10.4323 10.5559 11.1906 10.5559 11.9814V26.0186C10.5559 26.8094 10.87 27.5677 11.4292 28.1267C11.9882 28.6859 12.7465 29 13.5373 29H25.4627C26.2535 29 27.0118 28.6859 27.5708 28.1267C28.13 27.5677 28.4441 26.8094 28.4441 26.0186V11.9814C28.4441 11.1906 28.13 10.4323 27.5708 9.87328C27.0118 9.31411 26.2535 9 25.4627 9ZM25.1496 16.312L22.3621 18.3094L19.9397 20.0387C19.8135 20.1286 19.6624 20.1768 19.5075 20.1768C19.3525 20.1768 19.2014 20.1286 19.0751 20.0387L16.6528 18.3094L13.8504 16.312C13.715 16.2155 13.6158 16.0764 13.5686 15.9171C13.5213 15.7578 13.5287 15.5871 13.5896 15.4324C14.1642 13.7875 15.3985 12.4564 16.9955 11.7593C18.5925 11.0622 20.4076 11.0622 22.0046 11.7593C23.6016 12.4564 24.8359 13.7875 25.4106 15.4324C25.4715 15.5871 25.4788 15.7578 25.4315 15.9171C25.3843 16.0764 25.2851 16.2155 25.1496 16.312ZM23.7857 15.4549L22.0342 16.7145C21.5361 16.2451 20.9163 15.925 20.2454 15.7903V14.9629C20.2454 14.6965 20.1033 14.4505 19.8727 14.3174C19.6421 14.1843 19.3579 14.1843 19.1274 14.3174C18.8968 14.4505 18.7547 14.6966 18.7547 14.9629V15.7903C18.0837 15.925 17.464 16.2451 16.9659 16.7145L15.2143 15.4549C15.7259 14.3631 16.6346 13.5078 17.7553 13.0635C18.8759 12.6191 20.1241 12.6191 21.2448 13.0635C22.3655 13.5079 23.2741 14.3632 23.7857 15.4549ZM18.2178 17.6014C18.5981 17.3502 19.044 17.2161 19.4999 17.2161C19.9558 17.2161 20.4016 17.3501 20.782 17.6014L19.4999 18.5182L18.2178 17.6014Z" fill="#368796"></path>
                                        </svg> -->
                                    <svg width="39" height="38" viewBox="0 0 19 21" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_9441_21695)">
                                            <path
                                                d="M9.18476 18.8205C14.0279 18.8205 17.954 14.8944 17.954 10.0513C17.954 5.20816 14.0279 1.28204 9.18476 1.28204C4.34165 1.28204 0.415527 5.20816 0.415527 10.0513C0.415527 14.8944 4.34165 18.8205 9.18476 18.8205Z"
                                                fill="#DAEEF1" />
                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M5.9054 4.55127H12.4644C12.8993 4.55127 13.3164 4.72403 13.6238 5.03157C13.9314 5.33903 14.1041 5.7561 14.1041 6.19104V13.9115C14.1041 14.3464 13.9314 14.7635 13.6238 15.071C13.3164 15.3785 12.8993 15.5513 12.4644 15.5513H5.9054C5.47046 15.5513 5.05339 15.3785 4.74594 15.071C4.43838 14.7635 4.26562 14.3464 4.26562 13.9115V6.19104C4.26562 5.7561 4.43838 5.33903 4.74594 5.03157C5.05339 4.72403 5.47046 4.55127 5.9054 4.55127ZM10.759 9.67144L12.2922 8.57287C12.3667 8.51979 12.4212 8.44329 12.4472 8.35567C12.4732 8.26806 12.4692 8.17417 12.4357 8.08909C12.1196 7.18439 11.4408 6.45229 10.5624 6.06888C9.68406 5.68548 8.68576 5.68548 7.80741 6.06888C6.92906 6.45229 6.25019 7.18439 5.93416 8.08909C5.90066 8.17417 5.89659 8.26806 5.92261 8.35567C5.94857 8.44329 6.00313 8.51979 6.0776 8.57287L7.61892 9.67144L8.95118 10.6226C9.02065 10.672 9.10375 10.6985 9.189 10.6985C9.2742 10.6985 9.3573 10.672 9.42671 10.6226L10.759 9.67144ZM10.5787 8.79425L11.542 8.10146C11.2606 7.50103 10.7609 7.03061 10.1445 6.78619C9.52814 6.54177 8.84163 6.54177 8.2253 6.78619C7.60891 7.03056 7.10913 7.50097 6.82775 8.10146L7.79113 8.79425C8.06508 8.53608 8.40591 8.36002 8.77496 8.28593V7.83086C8.77496 7.6844 8.85312 7.54904 8.97995 7.47584C9.10672 7.40263 9.26303 7.40263 9.38986 7.47584C9.5167 7.54904 9.59485 7.68434 9.59485 7.83086V8.28593C9.96384 8.36002 10.3047 8.53608 10.5787 8.79425ZM9.18483 9.07013C8.93408 9.07013 8.68884 9.14388 8.47967 9.28204L9.18483 9.78628L9.88998 9.28204C9.68076 9.14383 9.43557 9.07013 9.18483 9.07013ZM12.9351 11.1235H12.2293V14.6935H12.9351V11.1235ZM8.37558 11.1235H9.36909L10.1198 13.5785H10.1288L10.8391 11.1235H11.8326V14.6935H11.1718V12.1635H11.1628L10.3761 14.6935H9.83213L9.04542 12.1885H9.03643V14.6935H8.37558V11.1235ZM6.85564 12.5685H6.14086V11.7335H6.8017C6.86463 11.7335 6.92457 11.7401 6.98152 11.7535C7.04146 11.7635 7.0939 11.7835 7.13886 11.8135C7.18382 11.8435 7.21978 11.8851 7.24675 11.9385C7.27373 11.9918 7.28721 12.0601 7.28721 12.1435C7.28721 12.2935 7.24675 12.4018 7.16583 12.4685C7.08491 12.5351 6.98152 12.5685 6.85564 12.5685ZM6.94555 11.1235H5.43506V14.6935H6.99051C7.13436 14.6935 7.27373 14.6735 7.40859 14.6335C7.54645 14.5935 7.66783 14.5318 7.77273 14.4485C7.88062 14.3651 7.96604 14.2585 8.02897 14.1285C8.09191 13.9951 8.12338 13.8385 8.12338 13.6585C8.12338 13.4351 8.07393 13.2451 7.97503 13.0885C7.87912 12.9285 7.73227 12.8168 7.53447 12.7535C7.67832 12.6768 7.78622 12.5785 7.85814 12.4585C7.93307 12.3385 7.97053 12.1885 7.97053 12.0085C7.97053 11.8418 7.94506 11.7018 7.89411 11.5885C7.84616 11.4751 7.77722 11.3851 7.68731 11.3185C7.5974 11.2485 7.48951 11.1985 7.36364 11.1685C7.23776 11.1385 7.0984 11.1235 6.94555 11.1235ZM6.8961 14.0835H6.14086V13.1035H6.90959C7.06244 13.1035 7.18531 13.1435 7.27822 13.2235C7.37113 13.3001 7.41758 13.4301 7.41758 13.6135C7.41758 13.7068 7.4026 13.7835 7.37263 13.8435C7.34565 13.9035 7.30819 13.9518 7.26024 13.9885C7.21229 14.0218 7.15684 14.0468 7.0939 14.0635C7.03097 14.0768 6.96503 14.0835 6.8961 14.0835Z"
                                                fill="#368796" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_9441_21695">
                                                <rect width="18" height="20" fill="white"
                                                    transform="translate(0.18457 0.0512695)" />
                                            </clipPath>
                                        </defs>
                                    </svg>
                                    <div>
                                        <p class="m-0 fs-7 text-nowrap">{{langData?.common?.Weight}} </p>
                                        <p class="m-0 text-nowrap">{{selectedView.Weight}} Kg(s)</p>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="detail">
                                    <p class="label">{{langData?.common?.Height}} </p>
                                    <p>{{selectedView.Height}} Cm(s)</p>
                                </div>
                                <div class="detail">
                                    <p class="label"> {{langData?.common?.Weight}} </p>
                                    <p>{{selectedView.Weight}} Kg(s)</p>
                                </div> -->
                        </div>
                    </ng-container>
                </div>
            </div>
            <!-- </div> -->
        </div>
        <div class="m-2" *ngIf="!fromCaseSheet">
            <app-wardheader-summary ></app-wardheader-summary>
        </div>
        <form class="px-2 mt-2 bloodRequestForm_height" [formGroup]="bloodRequestForm">
            <div class="border-primary-200 bg-primary-20 p-2 rounded-2 mt-2">
                <div class="row gy-3 mx-0">
                    <div class="col-lg-2 col-md-4">
                        <label for="" class="form-label">Date Time</label>
                        <input type="text" [attr.disabled]="true" class="form-control" formControlName="currentdate">
                    </div>
                    <div class="col-lg-2 col-md-4 position-relative">
                        <label for="" class="form-label">Blood Group</label>
                        <select class="form-select pe-5" formControlName="BloodGroupID">
                            <option dir="ltr" value="" translate>
                                {{langData?.common?.Select}}</option>
                            <option dir="ltr" *ngFor="let bg of bloodGroupsMaster" [value]="bg.Id">
                                {{bg.Names}}
                            </option>
                        </select>
                        <!-- <div class="validation_err">
                            <span class="text-danger"
                                *ngIf="isBloodRequestFormSubmitted && this.bloodRequestForm.get('BloodGroupID')?.value == ''">
                                <p class="m-0" *ngIf="this.bloodRequestForm.get('BloodGroupID')?.value == ''" translate>
                                    Blood Group is required</p>
                            </span>
                        </div> -->
                    </div>
                    <div class="col-lg-2 col-md-4">
                        <label for="" class="form-label">Patient Blood Group</label>
                        <input type="text" class="form-control">
                    </div>
                    <div class="col-lg-2 col-md-4">
                        <label for="" class="form-label w-100">Type of Request</label>
                        <!-- <div class="d-flex align-items-center mt-2">
                            <div class="d-flex align-items-center me-2">
                                <input type="radio" class="form-check-input me-2 m-0">
                                <label for="" class="form-label m-0">Routine</label>
                            </div>
                            <div class="d-flex align-items-center">
                                <input type="radio" class="form-check-input me-2 m-0">
                                <label for="" class="form-label m-0">STAT</label>
                            </div>
                        </div> -->
                        <div class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-start">
                            <button [class]="routine" (click)="changeRequestType('routine')">Routine</button>
                            <button [class]="stat" (click)="changeRequestType('stat')">STAT</button>
                            <button [class]="emergency" (click)="changeRequestType('emergency')">Emergency</button>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4">
                        <div class="mb-2">
                            <label for="" class="form-label w-100">Type of Transfusion</label>
                            <!-- <div class="d-flex align-items-center">
                                <div class="d-flex align-items-center me-2">
                                    <input type="radio" class="form-check-input me-2 m-0">
                                    <label for="" class="form-label m-0">Surgery</label>
                                </div>
                                <div class="d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2 m-0">
                                    <label for="" class="form-label m-0">Therapeutic</label>
                                </div>
                            </div> -->
                            <div class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-start">
                                <button [class]="surgery" (click)="changeTransfusionType('surgery')">Surgery</button>
                                <button [class]="therapeutic"
                                    (click)="changeTransfusionType('therapeutic')">Therapeutic</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 position-relative">
                        <label for="" class="form-label">Indication for Transfusion</label>
                        <select class="form-select pe-5 me-2" formControlName="TransfusionID">
                            <option dir="ltr" value="" translate>
                                {{langData?.common?.Select}}</option>
                            <option dir="ltr" *ngFor="let trans of indicationTransfusionMaster" [value]="trans.id">
                                {{trans.name}}
                            </option>
                        </select>
                        <!-- <div class="validation_err">
                            <span class="text-danger"
                                *ngIf="isBloodRequestFormSubmitted && this.bloodRequestForm.get('TransfusionID')?.value == ''">
                                <p class="m-0" *ngIf="this.bloodRequestForm.get('TransfusionID')?.value == ''"
                                    translate>Transfusion Indication is required</p>
                            </span>
                        </div> -->
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <label for="" class="form-label">Transfusion Message</label>
                        <textarea name="" class="form-control resize-none" id="" rows="2"></textarea>
                    </div>
                    <div class="col-lg-4 col-md-6 d-flex flex-column">
                        <label for="" class="form-label">Clinical Diagnosis</label>
                        <textarea [readonly]="true" name="" class="form-control resize-none h-100" id="" formControlName="Diagnosis"
                            rows="2"></textarea>
                    </div>
                </div>
            </div>

            <div class="mt-3">
                <div class="card card-style-1">
                    <div class="card-header justify-content-start">
                        <!-- <h2 class="card-heading">Blood Counts</h2> -->
                        <h6 class="m-0 clr-primary-600">Blood Counts</h6>
                    </div>
                    <div class="p-3">
                        <div class="row g-2 gx-5">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center afterlabel">
                                    <label for="" class="form-label w-25 me-2">HB</label>
                                    <input type="text" class="form-control" formControlName="HB">
                                    <label for="" class="form-label m-0 label_sm">gm/dl</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center afterlabel">
                                    <label for="" class="form-label w-25 me-2">aPTT</label>
                                    <input type="text" class="form-control" formControlName="aptt">
                                    <label for="" class="form-label m-0 label_sm">sec</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center afterlabel">
                                    <label for="" class="form-label w-25 me-2">Platelets</label>
                                    <input type="text" class="form-control" formControlName="Platelets">
                                    <label for="" class="form-label m-0 label_sm">/cu mm</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center afterlabel">
                                    <label for="" class="form-label w-25 me-2">PT</label>
                                    <input type="text" class="form-control" formControlName="pt">
                                    <label for="" class="form-label m-0 label_sm">sec</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center afterlabel">
                                    <label for="" class="form-label w-25 me-2">W.B.C</label>
                                    <input type="text" class="form-control" formControlName="wbc">
                                    <label for="" class="form-label m-0 label_sm">/cu mm</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label for="" class="form-label w-25 me-2">Others</label>
                                    <input type="text" class="form-control" formControlName="others">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center afterlabel">
                                    <label for="" class="form-label w-25 me-2">R.B.C</label>
                                    <input type="text" class="form-control" formControlName="RBC">
                                    <label for="" class="form-label m-0 label_sm">/cu mm</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label for="" class="form-label w-25 me-2">PCV</label>
                                    <input type="text" class="form-control" formControlName="pcv">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label for="" class="form-label w-25 me-2">HCT</label>
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label for="" class="form-label w-25 me-2">MCV</label>
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label for="" class="form-label w-25 me-2">MCH</label>
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label for="" class="form-label w-25 me-2">INR</label>
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <div class="row g-2">
                    <div class="col-lg-5">
                        <div class="card card-style-1 h-100">
                            <div class="card-header justify-content-start">
                                <!-- <h2 class="card-heading">Earlier Detects</h2> -->
                                <h6 class="m-0 clr-primary-600">Earlier Detects</h6>
                            </div>
                            <div class="p-3">
                                <div class="d-flex align-items-center input-group me-2 w-50">
                                    <!-- <input type="text" placeholder="Search" class="form-control" autocomplete="off"
                                        role="combobox"> -->
                                    <input type="text" class="form-control" placeholder="Search" aria-label="Search"
                                        formControlName="earlierDetectsName" [matAutocomplete]="autoEarlierDetects"
                                        (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchEarlierDetects($event)">
                                    <mat-autocomplete #autoEarlierDetects="matAutocomplete">
                                        <mat-option *ngFor="let item of earlierDetectsData"
                                            (onSelectionChange)="onEarlierDetectsSelected(item)"
                                            [value]="item.name.trim()">
                                            {{item.name}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <button type="button" id="button-addon2" class="btn btn-secondary-fill btn-icon">
                                        <img src="assets/images/icons/icon-search.svg" alt="">
                                    </button>
                                </div>
                                <div class="mt-3">
                                    <table class="table m-0">
                                        <thead>
                                            <tr>
                                                <th style="width:80%">Name</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of selectedEarlierDetects">
                                                <td>{{item.Component}}</td>
                                                <td>
                                                    <div class="del_svg cursor-pointer custom_tooltip">
                                                        <svg width="23" height="22" viewBox="0 0 23 22" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M20.0995 6.16917H20.0261C15.177 5.68334 10.337 5.5 5.5428 5.98584L3.6728 6.16917C3.58184 6.17866 3.48989 6.17003 3.40228 6.14377C3.31467 6.11751 3.23314 6.07414 3.16239 6.01618C3.09164 5.95822 3.03308 5.8868 2.9901 5.80607C2.94712 5.72534 2.92056 5.63689 2.91197 5.54584C2.8753 5.16084 3.1503 4.83084 3.52614 4.79417L5.39614 4.61084C10.2728 4.11584 15.2136 4.30834 20.1636 4.79417C20.5395 4.83084 20.8145 5.17 20.7778 5.54584C20.764 5.71605 20.6864 5.87477 20.5607 5.99032C20.4349 6.10586 20.2702 6.16973 20.0995 6.16917Z"
                                                                fill="#EB6247"></path>
                                                            <path
                                                                d="M8.64147 5.24333C8.6048 5.24333 8.56813 5.24333 8.5223 5.23416C8.34445 5.20211 8.18627 5.10159 8.08172 4.95419C7.97717 4.80679 7.93459 4.62427 7.96313 4.44583L8.1648 3.24499C8.31147 2.36499 8.51313 1.14583 10.649 1.14583H13.0506C15.1956 1.14583 15.3973 2.41083 15.5348 3.25416L15.7365 4.44583C15.8006 4.82166 15.544 5.17916 15.1773 5.23416C14.8015 5.29833 14.444 5.04166 14.389 4.67499L14.1873 3.48333C14.059 2.68583 14.0315 2.52999 13.0598 2.52999H10.6581C9.68647 2.52999 9.66813 2.65833 9.53063 3.47416L9.3198 4.66583C9.29369 4.82694 9.2111 4.97351 9.08683 5.07931C8.96255 5.18512 8.80468 5.24325 8.64147 5.24333ZM14.7923 20.856H8.9073C5.70813 20.856 5.5798 19.0868 5.47897 17.6568L4.88313 8.42599C4.85563 8.05016 5.14897 7.72016 5.5248 7.69266C5.9098 7.67433 6.23063 7.95849 6.25813 8.33433L6.85397 17.5652C6.9548 18.9585 6.99147 19.481 8.9073 19.481H14.7923C16.7173 19.481 16.754 18.9585 16.8456 17.5652L17.4415 8.33433C17.469 7.95849 17.799 7.67433 18.1748 7.69266C18.5506 7.72016 18.844 8.041 18.8165 8.42599L18.2206 17.6568C18.1198 19.0868 17.9915 20.856 14.7923 20.856Z"
                                                                fill="#EB6247"></path>
                                                            <path
                                                                d="M13.3714 15.8125H10.3189C9.94311 15.8125 9.63144 15.5008 9.63144 15.125C9.63144 14.7492 9.94311 14.4375 10.3189 14.4375H13.3714C13.7473 14.4375 14.0589 14.7492 14.0589 15.125C14.0589 15.5008 13.7473 15.8125 13.3714 15.8125ZM14.1414 12.1458H9.55811C9.18227 12.1458 8.87061 11.8342 8.87061 11.4583C8.87061 11.0825 9.18227 10.7708 9.55811 10.7708H14.1414C14.5173 10.7708 14.8289 11.0825 14.8289 11.4583C14.8289 11.8342 14.5173 12.1458 14.1414 12.1458Z"
                                                                fill="#EB6247"></path>
                                                        </svg>
                                                        <div class="tooltip">
                                                            <p>Delete</p>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-7">
                        <div class="card card-style-1">
                            <div class="card-header justify-content-start">
                                <!-- <h2 class="card-heading">Selected Blood / Components</h2> -->
                                <h6 class="m-0 clr-primary-600">Selected Blood / Components</h6>
                            </div>
                            <div class="p-3">
                                <div class="d-flex align-items-center input-group me-2 w-50">
                                    <!-- <input type="text" placeholder="Search" class="form-control" autocomplete="off"
                                        role="combobox"> -->
                                    <input type="text" class="form-control" placeholder="Search" aria-label="Search"
                                        formControlName="bloodCompName" [matAutocomplete]="autoBloodComponents">
                                    <mat-autocomplete #autoBloodComponents="matAutocomplete">
                                        <mat-option *ngFor="let item of bloodComponentsData"
                                            (onSelectionChange)="onBloodComponentsSelected($event, item)"
                                            [value]="item.Component">
                                            {{item.Component}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <button type="button" id="button-addon2" class="btn btn-secondary-fill btn-icon">
                                        <img src="assets/images/icons/icon-search.svg" alt="">
                                    </button>
                                </div>
                                <div class="mt-3">
                                    <table class="table m-0">
                                        <thead>
                                            <tr>
                                                <th>Component</th>
                                                <th>Units</th>
                                                <th>Volume(ml)</th>
                                                <th>Req.DateTime</th>
                                                <th>Remarks</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of selectedBloodComponents; let i=index">
                                                <td>{{item.Component}}</td>
                                                <td>
                                                    <select class="form-control" [(ngModel)]="item.Qty" style="width: 60px;" [ngModelOptions]="{standalone: true}">
                                                        <option value="1">1</option>
                                                        <option value="2">2</option>
                                                        <option value="3">3</option>
                                                        <option value="4">4</option>
                                                        <option value="5">5</option>
                                                        <option value="6">6</option>
                                                        <option value="7">7</option>
                                                        <option value="8">8</option>
                                                        <option value="9">9</option>
                                                        <option value="10">10</option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <input numbersOnly type="text" (blur)="onBlurBcVolume(i, $event, item)"
                                                        [value]="item.Volume" class="form-control" [disabled]="IsAdult">
                                                </td>
                                                <td>
                                                    <!-- <input type="date" class="form-control"> -->
                                                    <div class="d-flex align-items-center">
                                                        <mat-form-field appearance="fill">
                                                            <mat-label translate>dd-MMM-yyyy</mat-label>
                                                            <input matInput class=""
                                                                (dateChange)="onReqDateChange(i, $event, item)"
                                                                [value]="item.RDT" [matDatepicker]="ReqDateTime"
                                                                [min]="admitDate"
                                                                (click)="ReqDateTime.open()">
                                                            <mat-datepicker-toggle matSuffix [for]="ReqDateTime">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #ReqDateTime></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>
                                                </td>
                                                <td>
                                                    <textarea name="" rows="1" (blur)="onBlurBcRMRK(i, $event, item)" [value]="item.RMK"
                                                        class="form-control resize-none min-height-unset"></textarea>
                                                </td>
                                                <td>
                                                    <div class="del_svg cursor-pointer custom_tooltip" (click)="deleteItem(i)">
                                                        <svg width="23" height="22" viewBox="0 0 23 22" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M20.0995 6.16917H20.0261C15.177 5.68334 10.337 5.5 5.5428 5.98584L3.6728 6.16917C3.58184 6.17866 3.48989 6.17003 3.40228 6.14377C3.31467 6.11751 3.23314 6.07414 3.16239 6.01618C3.09164 5.95822 3.03308 5.8868 2.9901 5.80607C2.94712 5.72534 2.92056 5.63689 2.91197 5.54584C2.8753 5.16084 3.1503 4.83084 3.52614 4.79417L5.39614 4.61084C10.2728 4.11584 15.2136 4.30834 20.1636 4.79417C20.5395 4.83084 20.8145 5.17 20.7778 5.54584C20.764 5.71605 20.6864 5.87477 20.5607 5.99032C20.4349 6.10586 20.2702 6.16973 20.0995 6.16917Z"
                                                                fill="#EB6247"></path>
                                                            <path
                                                                d="M8.64147 5.24333C8.6048 5.24333 8.56813 5.24333 8.5223 5.23416C8.34445 5.20211 8.18627 5.10159 8.08172 4.95419C7.97717 4.80679 7.93459 4.62427 7.96313 4.44583L8.1648 3.24499C8.31147 2.36499 8.51313 1.14583 10.649 1.14583H13.0506C15.1956 1.14583 15.3973 2.41083 15.5348 3.25416L15.7365 4.44583C15.8006 4.82166 15.544 5.17916 15.1773 5.23416C14.8015 5.29833 14.444 5.04166 14.389 4.67499L14.1873 3.48333C14.059 2.68583 14.0315 2.52999 13.0598 2.52999H10.6581C9.68647 2.52999 9.66813 2.65833 9.53063 3.47416L9.3198 4.66583C9.29369 4.82694 9.2111 4.97351 9.08683 5.07931C8.96255 5.18512 8.80468 5.24325 8.64147 5.24333ZM14.7923 20.856H8.9073C5.70813 20.856 5.5798 19.0868 5.47897 17.6568L4.88313 8.42599C4.85563 8.05016 5.14897 7.72016 5.5248 7.69266C5.9098 7.67433 6.23063 7.95849 6.25813 8.33433L6.85397 17.5652C6.9548 18.9585 6.99147 19.481 8.9073 19.481H14.7923C16.7173 19.481 16.754 18.9585 16.8456 17.5652L17.4415 8.33433C17.469 7.95849 17.799 7.67433 18.1748 7.69266C18.5506 7.72016 18.844 8.041 18.8165 8.42599L18.2206 17.6568C18.1198 19.0868 17.9915 20.856 14.7923 20.856Z"
                                                                fill="#EB6247"></path>
                                                            <path
                                                                d="M13.3714 15.8125H10.3189C9.94311 15.8125 9.63144 15.5008 9.63144 15.125C9.63144 14.7492 9.94311 14.4375 10.3189 14.4375H13.3714C13.7473 14.4375 14.0589 14.7492 14.0589 15.125C14.0589 15.5008 13.7473 15.8125 13.3714 15.8125ZM14.1414 12.1458H9.55811C9.18227 12.1458 8.87061 11.8342 8.87061 11.4583C8.87061 11.0825 9.18227 10.7708 9.55811 10.7708H14.1414C14.5173 10.7708 14.8289 11.0825 14.8289 11.4583C14.8289 11.8342 14.5173 12.1458 14.1414 12.1458Z"
                                                                fill="#EB6247"></path>
                                                        </svg>
                                                        <div class="tooltip">
                                                            <p>Delete</p>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <div class="row g-2">
                    <div class="col-md-4">
                        <div class="border-primary-200 p-3 rounded-2 h-100">
                            <div class="d-flex">
                                <div [class]="sampleCollected" (click)="changeSampleCollected()">
                                    <!-- <img class="me-1" src="assets/images/icons/toast-success.svg" alt=""> -->
                                    <div class="custom_check d-flex align-items-center gap-2"
                                        [class.active]="isSampleCollected" (click)="selectSampleCollected()">
                                        <svg width="19" height="19" viewBox="0 0 20 21" fill="none"
                                            xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                            <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                            <path
                                                d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                fill="white" stroke="white" stroke-width="0.25"></path>
                                        </svg>
                                    </div>
                                    <label for="" class="form-label m-0">Sample Collected</label>
                                </div>
                            </div>
                            <div class="d-flex flex-column mt-2">
                                <label for="" class="form-label">Sample Collected Date</label>
                                <!-- <input type="date" class="form-control"> -->
                                <div class="d-flex align-items-center">
                                    <mat-form-field appearance="fill">
                                        <mat-label translate>dd-MMM-yyyy</mat-label>
                                        <input matInput class="" formControlName="SampleCollectedDateTime" [min]="admitDate"
                                            [matDatepicker]="SampleCollectedDate" (click)="SampleCollectedDate.open()">
                                        <mat-datepicker-toggle matSuffix [for]="SampleCollectedDate">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #SampleCollectedDate></mat-datepicker>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="d-flex flex-column mt-2">
                                <label for="" class="form-label">Remarks</label>
                                <textarea name="" class="form-control resize-none h-100" id="" rows="3"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="border-primary-200 p-3 rounded-2 h-100">
                            <div class="d-flex align-items-center">
                                <label for="" class="form-label me-2">History of Transfusion</label>
                                <!-- <div class="d-flex align-items-center gap-2">
                                    <div class="d-flex align-items-center gap-2">
                                        <input type="radio" class="form-check-input m-0">
                                        <label for="" class="form-label">Yes</label>
                                    </div>
                                    <div class="d-flex align-items-center gap-2">
                                        <input type="radio" class="form-check-input m-0">
                                        <label for="" class="form-label">No</label>
                                    </div>
                                </div> -->
                                <div class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-start">
                                    <button [class]="transfusionHistoryYes"
                                        (click)="changeTransfusionHistory('Yes')">Yes</button>
                                    <button [class]="transfusionHistoryNo"
                                        (click)="changeTransfusionHistory('No')">No</button>
                                </div>
                            </div>
                            <div class="d-flex flex-column mt-2">
                                <label for="" class="form-label">Transfusion Date</label>
                                <!-- <input type="date" class="form-control"> -->
                                <div class="d-flex align-items-center">
                                    <mat-form-field appearance="fill">
                                        <mat-label translate>dd-MMM-yyyy</mat-label>
                                        <input matInput class="" formControlName="TransfusionDateTime" 
                                            [matDatepicker]="TransfusionDate" (click)="TransfusionDate.open()">
                                        <mat-datepicker-toggle matSuffix [for]="TransfusionDate">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #TransfusionDate></mat-datepicker>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="border-primary-200 p-3 rounded-2 h-100">
                            <div class="d-flex align-items-center">
                                <label for="" class="form-label m-0 me-2">History of Transfusion reaction</label>
                                <!-- <div class="d-flex align-items-center gap-2">
                                    <div class="d-flex align-items-center gap-2">
                                        <input type="radio" class="form-check-input m-0">
                                        <label for="" class="form-label m-0">Yes</label>
                                    </div>
                                    <div class="d-flex align-items-center gap-2">
                                        <input type="radio" class="form-check-input m-0">
                                        <label for="" class="form-label m-0">No</label>
                                    </div>
                                </div> -->
                                <div class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-start">
                                    <button [class]="transfusionHistoryReactionYes"
                                        (click)="changeTransfusionHistoryReaction('Yes')">Yes</button>
                                    <button [class]="transfusionHistoryReactionNo"
                                        (click)="changeTransfusionHistoryReaction('No')">No</button>
                                </div>
                            </div>
                            <div class="d-flex flex-column mt-2">
                                <label for="" class="form-label">Reaction Date</label>
                                <!-- <input type="date" class="form-control"> -->
                                <div class="d-flex align-items-center">
                                    <mat-form-field appearance="fill">
                                        <mat-label translate>dd-MMM-yyyy</mat-label>
                                        <input matInput class="" formControlName="ReactionDate" [min]="admitDate"
                                            [matDatepicker]="ReactionDate" (click)="ReactionDate.open()">
                                        <mat-datepicker-toggle matSuffix [for]="ReactionDate">
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #ReactionDate></mat-datepicker>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="d-flex flex-column mt-2">
                                <label for="" class="form-label">Reaction</label>
                                <textarea name="" class="form-control resize-none h-100" id="" rows="3"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <div class="row g-2">
                    <div class="col-4 position-relative">
                        <label for="" class="form-label">Witness Nurse</label>
                        <div class="d-flex align-items-center input-group me-2">
                            <!-- <input type="text" placeholder="Search" class="form-control" autocomplete="off" formControlName="WitnessNurse1ID"
                                role="combobox"> -->
                            <input type="text" class="form-control px-2" placeholder="Search" aria-label="Search"
                                [matAutocomplete]="autoWitnessNurse" formControlName="WitnessNurse1Name"
                                (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchWitnessNurse($event)">
                            <mat-autocomplete #autoWitnessNurse="matAutocomplete">
                                <mat-option *ngFor="let item of witnessNurseData"
                                    (onSelectionChange)="onWitnessNurseSelected(item, 'nurse1')"
                                    [value]="item.EmpNo + '-' +item.Fullname">
                                    {{item.EmpNo}}-{{item.Fullname}}
                                </mat-option>
                            </mat-autocomplete>
                            <button type="button" id="button-addon2" class="btn btn-secondary-fill btn-icon">
                                <img src="assets/images/icons/icon-search.svg" alt="">
                            </button>
                        </div>
                        <!-- <div class="validation_err" *ngIf="selectedView.PatientType != '1'">
                            <span class="text-danger"
                                *ngIf="isBloodRequestFormSubmitted && this.bloodRequestForm.get('WitnessNurse1ID')?.value == ''">
                                <p class="m-0" *ngIf="this.bloodRequestForm.get('WitnessNurse1ID')?.value == ''"
                                    translate>Witness Nurse 1 is required</p>
                            </span>
                        </div> -->
                        <div class="row mx-0 g-2">
                            <div class="col-6">
                                <label for="" class="form-label">Date</label>
                                <mat-form-field appearance="fill">
                                    <mat-label translate>dd-MMM-yyyy</mat-label>
                                    <input matInput class="" formControlName="WitnessNurse1Date"
                                        [matDatepicker]="date1">
                                    <mat-datepicker-toggle matSuffix [for]="date1">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #date1></mat-datepicker>
                                </mat-form-field>
                            </div>
                            <div class="col-6">
                                <label for="" class="form-label">Time</label>
                                <input type="time" class="form-control" formControlName="WitnessNurse1Time">
                            </div>
                            <div class="col-12">
                                <div class="signature_box active text-end ms-auto">
                                    <div class="position-relative">
                                        <app-signature #Sign1Ref *ngIf="showSignature" (base64Signature)="base64Signature1($event)" [imageToDisplay]="base64StringSig1"></app-signature>
                                        <svg (click)="clearW1Signature()" class="delicon cursor-pointer" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M19.2499 6.16919H19.1765C14.3274 5.68335 9.48736 5.50002 4.6932 5.98585L2.82319 6.16919C2.73223 6.17868 2.64028 6.17004 2.55267 6.14378C2.46506 6.11752 2.38353 6.07416 2.31278 6.01619C2.24203 5.95823 2.18347 5.88682 2.14049 5.80609C2.09751 5.72536 2.07095 5.63691 2.06236 5.54585C2.02569 5.16085 2.3007 4.83085 2.67653 4.79419L4.54653 4.61085C9.4232 4.11585 14.364 4.30835 19.314 4.79419C19.6899 4.83085 19.9649 5.17002 19.9282 5.54585C19.9144 5.71606 19.8368 5.87478 19.7111 5.99033C19.5853 6.10588 19.4206 6.16975 19.2499 6.16919Z" fill="#EB6247"/>
                                            <path d="M7.79186 5.24331C7.75519 5.24331 7.71852 5.24331 7.67269 5.23415C7.49484 5.2021 7.33666 5.10158 7.23211 4.95418C7.12756 4.80678 7.08498 4.62426 7.11353 4.44581L7.31519 3.24498C7.46186 2.36498 7.66352 1.14581 9.79936 1.14581H12.201C14.346 1.14581 14.5477 2.41081 14.6852 3.25415L14.8869 4.44581C14.951 4.82165 14.6944 5.17915 14.3277 5.23415C13.9519 5.29831 13.5944 5.04165 13.5394 4.67498L13.3377 3.48331C13.2094 2.68581 13.1819 2.52998 12.2102 2.52998H9.80852C8.83686 2.52998 8.81853 2.65831 8.68103 3.47415L8.47019 4.66581C8.44408 4.82693 8.3615 4.97349 8.23722 5.0793C8.11294 5.1851 7.95507 5.24324 7.79186 5.24331ZM13.9427 20.856H8.05769C4.85852 20.856 4.73019 19.0868 4.62936 17.6568L4.03353 8.42598C4.00603 8.05015 4.29936 7.72015 4.67519 7.69265C5.06019 7.67431 5.38103 7.95848 5.40853 8.33431L6.00436 17.5651C6.10519 18.9585 6.14186 19.481 8.05769 19.481H13.9427C15.8677 19.481 15.9044 18.9585 15.996 17.5651L16.5919 8.33431C16.6194 7.95848 16.9494 7.67431 17.3252 7.69265C17.701 7.72015 17.9944 8.04098 17.9669 8.42598L17.371 17.6568C17.2702 19.0868 17.1419 20.856 13.9427 20.856Z" fill="#EB6247"/>
                                            <path d="M12.5218 15.8125H9.46933C9.0935 15.8125 8.78183 15.5008 8.78183 15.125C8.78183 14.7491 9.0935 14.4375 9.46933 14.4375H12.5218C12.8977 14.4375 13.2093 14.7491 13.2093 15.125C13.2093 15.5008 12.8977 15.8125 12.5218 15.8125ZM13.2918 12.1458H8.7085C8.33266 12.1458 8.021 11.8341 8.021 11.4583C8.021 11.0825 8.33266 10.7708 8.7085 10.7708H13.2918C13.6677 10.7708 13.9793 11.0825 13.9793 11.4583C13.9793 11.8341 13.6677 12.1458 13.2918 12.1458Z" fill="#EB6247"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-4 position-relative">
                        <label for="" class="form-label">Witness Nurse 2</label>
                        <div class="d-flex align-items-center input-group me-2">
                            <!-- <input type="text" placeholder="Search" class="form-control" autocomplete="off" formControlName="WitnessNurse2ID"
                                role="combobox"> -->
                            <input type="text" class="form-control px-2" placeholder="Search" aria-label="Search"
                                [matAutocomplete]="autoWitnessNurse2" formControlName="WitnessNurse2Name"
                                (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchWitnessNurse($event)">
                            <mat-autocomplete #autoWitnessNurse2="matAutocomplete">
                                <mat-option *ngFor="let item of witnessNurseData"
                                    (onSelectionChange)="onWitnessNurseSelected(item, 'nurse2')"
                                    [value]="item.EmpNo + '-' +item.Fullname">
                                    {{item.EmpNo}}-{{item.Fullname}}
                                </mat-option>
                            </mat-autocomplete>
                            <button type="button" id="button-addon2" class="btn btn-secondary-fill btn-icon">
                                <img src="assets/images/icons/icon-search.svg" alt="">
                            </button>
                        </div>
                        <!-- <div class="validation_err" *ngIf="selectedView.PatientType != '1'">
                            <span class="text-danger"
                                *ngIf="isBloodRequestFormSubmitted && this.bloodRequestForm.get('WitnessNurse2ID')?.value == ''">
                                <p class="m-0" *ngIf="this.bloodRequestForm.get('WitnessNurse2ID')?.value == ''"
                                    translate>Witness Nurse 2 is required</p>
                            </span>
                        </div> -->
                         <div class="row mx-0 g-2">
                            <div class="col-6">
                                <label for="" class="form-label">Date</label>
                                <mat-form-field appearance="fill">
                                    <mat-label translate>dd-MMM-yyyy</mat-label>
                                    <input matInput class="" formControlName="WitnessNurse2Date"
                                        [matDatepicker]="date2">
                                    <mat-datepicker-toggle matSuffix [for]="date2">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #date2></mat-datepicker>
                                </mat-form-field>
                            </div>
                            <div class="col-6">
                                <label for="" class="form-label">Time</label>
                                <input type="time" class="form-control" formControlName="WitnessNurse2Time">
                            </div>
                            <div class="col-12">
                                <div class="signature_box active text-end ms-auto">
                                    <div class="position-relative">
                                        <app-signature #Sign2Ref *ngIf="showSignature" (base64Signature)="base64Signature2($event)" [imageToDisplay]="base64StringSig2"></app-signature>
                                        <svg (click)="clearW2Signature()" class="delicon cursor-pointer" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M19.2499 6.16919H19.1765C14.3274 5.68335 9.48736 5.50002 4.6932 5.98585L2.82319 6.16919C2.73223 6.17868 2.64028 6.17004 2.55267 6.14378C2.46506 6.11752 2.38353 6.07416 2.31278 6.01619C2.24203 5.95823 2.18347 5.88682 2.14049 5.80609C2.09751 5.72536 2.07095 5.63691 2.06236 5.54585C2.02569 5.16085 2.3007 4.83085 2.67653 4.79419L4.54653 4.61085C9.4232 4.11585 14.364 4.30835 19.314 4.79419C19.6899 4.83085 19.9649 5.17002 19.9282 5.54585C19.9144 5.71606 19.8368 5.87478 19.7111 5.99033C19.5853 6.10588 19.4206 6.16975 19.2499 6.16919Z" fill="#EB6247"/>
                                            <path d="M7.79186 5.24331C7.75519 5.24331 7.71852 5.24331 7.67269 5.23415C7.49484 5.2021 7.33666 5.10158 7.23211 4.95418C7.12756 4.80678 7.08498 4.62426 7.11353 4.44581L7.31519 3.24498C7.46186 2.36498 7.66352 1.14581 9.79936 1.14581H12.201C14.346 1.14581 14.5477 2.41081 14.6852 3.25415L14.8869 4.44581C14.951 4.82165 14.6944 5.17915 14.3277 5.23415C13.9519 5.29831 13.5944 5.04165 13.5394 4.67498L13.3377 3.48331C13.2094 2.68581 13.1819 2.52998 12.2102 2.52998H9.80852C8.83686 2.52998 8.81853 2.65831 8.68103 3.47415L8.47019 4.66581C8.44408 4.82693 8.3615 4.97349 8.23722 5.0793C8.11294 5.1851 7.95507 5.24324 7.79186 5.24331ZM13.9427 20.856H8.05769C4.85852 20.856 4.73019 19.0868 4.62936 17.6568L4.03353 8.42598C4.00603 8.05015 4.29936 7.72015 4.67519 7.69265C5.06019 7.67431 5.38103 7.95848 5.40853 8.33431L6.00436 17.5651C6.10519 18.9585 6.14186 19.481 8.05769 19.481H13.9427C15.8677 19.481 15.9044 18.9585 15.996 17.5651L16.5919 8.33431C16.6194 7.95848 16.9494 7.67431 17.3252 7.69265C17.701 7.72015 17.9944 8.04098 17.9669 8.42598L17.371 17.6568C17.2702 19.0868 17.1419 20.856 13.9427 20.856Z" fill="#EB6247"/>
                                            <path d="M12.5218 15.8125H9.46933C9.0935 15.8125 8.78183 15.5008 8.78183 15.125C8.78183 14.7491 9.0935 14.4375 9.46933 14.4375H12.5218C12.8977 14.4375 13.2093 14.7491 13.2093 15.125C13.2093 15.5008 12.8977 15.8125 12.5218 15.8125ZM13.2918 12.1458H8.7085C8.33266 12.1458 8.021 11.8341 8.021 11.4583C8.021 11.0825 8.33266 10.7708 8.7085 10.7708H13.2918C13.6677 10.7708 13.9793 11.0825 13.9793 11.4583C13.9793 11.8341 13.6677 12.1458 13.2918 12.1458Z" fill="#EB6247"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-4 position-relative">
                        <label for="" class="form-label">Witness Doctor</label>
                        <div class="d-flex align-items-center input-group me-2">
                            <!-- <input type="text" placeholder="Search" class="form-control" autocomplete="off" formControlName="WitnessDoctor1ID"
                                role="combobox"> -->
                            <input type="text" class="form-control px-2" placeholder="Search" aria-label="Search"
                                [matAutocomplete]="autoWitnessDoctor" formControlName="WitnessDoctor1Name"
                                (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchWitnessDoctor($event)">
                            <mat-autocomplete #autoWitnessDoctor="matAutocomplete">
                                <mat-option *ngFor="let item of witnessDoctorData"
                                    (onSelectionChange)="onWitnessDoctorSelected(item)"
                                    [value]="item.EmpNo + '-' + item.Fullname">
                                    {{item.EmpNo}}-{{item.Fullname}}
                                </mat-option>
                            </mat-autocomplete>
                            <button type="button" id="button-addon2" class="btn btn-secondary-fill btn-icon">
                                <img src="assets/images/icons/icon-search.svg" alt="">
                            </button>
                        </div>
                        <!-- <div class="validation_err" *ngIf="selectedView.PatientType != '1'">
                            <span class="text-danger"
                                *ngIf="isBloodRequestFormSubmitted && this.bloodRequestForm.get('WitnessDoctor1ID')?.value == ''">
                                <p class="m-0" *ngIf="this.bloodRequestForm.get('WitnessDoctor1ID')?.value == ''"
                                    translate>Witness Doctor is required</p>
                            </span>
                        </div> -->
                        <div class="row mx-0 g-2">
                            <div class="col-6">
                                <label for="" class="form-label">Date</label>
                                <mat-form-field appearance="fill">
                                    <mat-label translate>dd-MMM-yyyy</mat-label>
                                    <input matInput class="" formControlName="WitnessDoctorDate"
                                        [matDatepicker]="date3">
                                    <mat-datepicker-toggle matSuffix [for]="date3">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #date3></mat-datepicker>
                                </mat-form-field>
                            </div>
                            <div class="col-6">
                                <label for="" class="form-label">Time</label>
                                <input type="time" class="form-control" formControlName="WitnessDoctorTime">
                            </div>
                            <div class="col-12">
                                <div class="signature_box active text-end ms-auto">
                                    <div class="position-relative">
                                        <app-signature #Sign3Ref *ngIf="showSignature" (base64Signature)="base64Signature3($event)" [imageToDisplay]="base64StringSig3"></app-signature>
                                        <svg (click)="clearDoctorSignature()" class="delicon cursor-pointer" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M19.2499 6.16919H19.1765C14.3274 5.68335 9.48736 5.50002 4.6932 5.98585L2.82319 6.16919C2.73223 6.17868 2.64028 6.17004 2.55267 6.14378C2.46506 6.11752 2.38353 6.07416 2.31278 6.01619C2.24203 5.95823 2.18347 5.88682 2.14049 5.80609C2.09751 5.72536 2.07095 5.63691 2.06236 5.54585C2.02569 5.16085 2.3007 4.83085 2.67653 4.79419L4.54653 4.61085C9.4232 4.11585 14.364 4.30835 19.314 4.79419C19.6899 4.83085 19.9649 5.17002 19.9282 5.54585C19.9144 5.71606 19.8368 5.87478 19.7111 5.99033C19.5853 6.10588 19.4206 6.16975 19.2499 6.16919Z" fill="#EB6247"/>
                                            <path d="M7.79186 5.24331C7.75519 5.24331 7.71852 5.24331 7.67269 5.23415C7.49484 5.2021 7.33666 5.10158 7.23211 4.95418C7.12756 4.80678 7.08498 4.62426 7.11353 4.44581L7.31519 3.24498C7.46186 2.36498 7.66352 1.14581 9.79936 1.14581H12.201C14.346 1.14581 14.5477 2.41081 14.6852 3.25415L14.8869 4.44581C14.951 4.82165 14.6944 5.17915 14.3277 5.23415C13.9519 5.29831 13.5944 5.04165 13.5394 4.67498L13.3377 3.48331C13.2094 2.68581 13.1819 2.52998 12.2102 2.52998H9.80852C8.83686 2.52998 8.81853 2.65831 8.68103 3.47415L8.47019 4.66581C8.44408 4.82693 8.3615 4.97349 8.23722 5.0793C8.11294 5.1851 7.95507 5.24324 7.79186 5.24331ZM13.9427 20.856H8.05769C4.85852 20.856 4.73019 19.0868 4.62936 17.6568L4.03353 8.42598C4.00603 8.05015 4.29936 7.72015 4.67519 7.69265C5.06019 7.67431 5.38103 7.95848 5.40853 8.33431L6.00436 17.5651C6.10519 18.9585 6.14186 19.481 8.05769 19.481H13.9427C15.8677 19.481 15.9044 18.9585 15.996 17.5651L16.5919 8.33431C16.6194 7.95848 16.9494 7.67431 17.3252 7.69265C17.701 7.72015 17.9944 8.04098 17.9669 8.42598L17.371 17.6568C17.2702 19.0868 17.1419 20.856 13.9427 20.856Z" fill="#EB6247"/>
                                            <path d="M12.5218 15.8125H9.46933C9.0935 15.8125 8.78183 15.5008 8.78183 15.125C8.78183 14.7491 9.0935 14.4375 9.46933 14.4375H12.5218C12.8977 14.4375 13.2093 14.7491 13.2093 15.125C13.2093 15.5008 12.8977 15.8125 12.5218 15.8125ZM13.2918 12.1458H8.7085C8.33266 12.1458 8.021 11.8341 8.021 11.4583C8.021 11.0825 8.33266 10.7708 8.7085 10.7708H13.2918C13.6677 10.7708 13.9793 11.0825 13.9793 11.4583C13.9793 11.8341 13.6677 12.1458 13.2918 12.1458Z" fill="#EB6247"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col d-none">
                        <label for="" class="form-label">Holister Number</label>
                        <input type="text" class="form-control">
                    </div>
                    <div class="col d-none">
                        <label for="" class="form-label">Ward Phone Number</label>
                        <input type="text" class="form-control">
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal" id="bloodRequestSaveMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>Blood Request Saved Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">Ok</a>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="modal" data-bs-backdrop="static" tabindex="-1" id="viewBloodRequests" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-xl " style="max-width:85%">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>Blood Orders</h5>
                <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="viewBloodRequestsForm" (keydown.enter)="$event.preventDefault()">
                    <div class="d-flex w-100 align-items-center justify-content-between mb-3">
                        <div class="d-flex">
                            <div class="d-flex align-items-center">
                                <label for="" class="form-label mb-0 px-2 text-nowrap" translate>From Date</label>
                                <mat-form-field appearance="fill">
                                    <mat-label translate>dd-MMM-yyyy</mat-label>
                                    <input matInput class="" formControlName="fromdate" [matDatepicker]="fromdate"
                                        (click)="fromdate.open()">
                                    <mat-datepicker-toggle matSuffix [for]="fromdate"></mat-datepicker-toggle>
                                    <mat-datepicker #fromdate></mat-datepicker>
                                </mat-form-field>
                            </div>

                            <div class="d-flex align-items-center">
                                <label for="" class="form-label mb-0 px-2 text-nowrap" translate>To Date</label>
                                <mat-form-field appearance="fill">
                                    <mat-label translate>dd-MMM-yyyy</mat-label>
                                    <input matInput class="" formControlName="todate" [matDatepicker]="todate"
                                        (click)="todate.open()">
                                    <mat-datepicker-toggle matSuffix [for]="todate"></mat-datepicker-toggle>
                                    <mat-datepicker #todate></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class="">
                                <button type="button" class="btn btn-main-fill mx-2" translate
                                    (click)="FetchViewBloodRequests()">{{langData?.common?.Search}}</button>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="diagnosisTable_height horizontalScroll">
                    <table class="table">
                        <thead>
                            <tr>
                                <th translate>Blood OrderID</th>
                                <th translate>Blood Group</th>
                                <th translate>Doctor Name</th>
                                <th translate>Order SlNo</th>
                                <th translate>Request Datetime</th>
                                <th translate>Requested By Name</th>
                                <th translate>Total Quantity</th>
                                <th translate>Ward Name</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let view of viewBloodRequestsData;let i=index">
                                <td><span class="d-flex  rounded-2 px-3">
                                        <a class="nav_link cursor-pointer"
                                            (click)="fetchBloodRequestData(view)">{{view.BloodOrderID}}</a>
                                    </span>
                                </td>
                                <td>{{view.BloodGroup}}</td>
                                <td>{{view.DoctorName}}</td>
                                <td>{{view.OrderSlNo}}</td>
                                <td>{{view.RequestDatetime}}</td>
                                <td>{{view.RequestedByName}}</td>
                                <td>{{view.TotalQuantity}}</td>
                                <td>{{view.WardName}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">

            </div>
        </div>
    </div>
</div>
<div class="modal" id="noBloodComponentsSelected" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <!-- <div class="modal-body">
                <p>{{errorMessages}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">Ok</a>
                </div>
            </div> -->
            <div class="modal-body">
                <p *ngIf="errorMessages.length === 1">{{errorMessages[0]}}</p>
                <ul *ngIf="errorMessages.length > 1">
                    <li *ngFor="let error of errorMessages; let i = index"> {{error}}</li>
                </ul>
                <div class="modal-footer">
                    <a type="button" class="btn btn-main-outline"
                     data-bs-dismiss="modal">Ok</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="bloodRequestDeleteMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>Blood Request Deleted Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">Ok</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="deleteConfirmation" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>Are you sure you want to Delete Blood Order ?</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="deleteBloodOrder()">Yes</a>
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal">No</a>
                </div>
            </div>
        </div>
    </div>
</div>
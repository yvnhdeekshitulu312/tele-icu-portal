<app-header [InputHome]="true" [showAlert]="false" [IsSwitchWard]="true"></app-header>
<div class="page-header sticky-top justify-content-between">
    <div class="d-flex align-items-center justify-content-start gap-3 w-100">
        <h2 class="page-heading text-nowrap">Physiotherapy Referral Worklist</h2>
        <div class="d-flex align-items-center gap-2">
            <div class="filter_Date position-relative">
                <div class="d-flex align-items-center gap-2 fs-8">
                    Filter
                    <svg width="18" height="18" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg"
                        class="cursor-pointer">
                        <rect x="2.75" y="3.27435" width="18.5" height="18.5" rx="3.25" stroke="#368796"
                            stroke-width="1.5">
                        </rect>
                        <circle cx="7.85547" cy="8.32605" r="1.375" fill="#368796" stroke="#368796" stroke-width="1.25">
                        </circle>
                        <rect x="9.125" y="7.70105" width="7" height="1.25" rx="0.625" fill="#368796"></rect>
                        <circle cx="16.1445" cy="12.5243" r="1.375" fill="#4357BC" stroke="#4357BC" stroke-width="1.25">
                        </circle>
                        <rect x="8.12988" y="11.8993" width="7" height="1.25" rx="0.625" fill="#4357BC"></rect>
                        <circle cx="7.875" cy="16.7227" r="1.375" fill="#368796" stroke="#368796" stroke-width="1.25">
                        </circle>
                        <rect x="9.14453" y="16.0977" width="7" height="1.25" rx="0.625" fill="#368796"></rect>
                    </svg>
                </div>
                <div class="filter_dropdow">
                    <p class="m-0 p-2 cursor-pointer border-bottom" (click)="fetchPanicwithdates('T')">Today
                    </p>
                    <p class="m-0 p-2 cursor-pointer border-bottom" (click)="fetchPanicwithdates('Y')">Yesterday</p>
                    <p class="m-0 p-2 cursor-pointer border-bottom" (click)="fetchPanicwithdates('W')">This
                        week</p>
                    <p class="m-0 p-2 cursor-pointer border-bottom" (click)="fetchPanicwithdates('M')">This
                        Month</p>
                    <p class="m-0 p-2 cursor-pointer border-bottom" (click)="fetchPanicwithdates('3M')">
                        Three Months</p>
                    <p class="m-0 p-2 cursor-pointer border-bottom" (click)="fetchPanicwithdates('6M')">Six
                        Months</p>
                    <p class="m-0 p-2 cursor-pointer border-bottom" (click)="fetchPanicwithdates('1Y')">This
                        Year</p>
                </div>                
            </div>
            <div class="d-flex align-items-center gap-2">
                <label for="" class="form-label m-0 text-nowrap">From - To</label>
                <button class="date_range_calendar p-0 position-relative" style="width: 227px;">
                    <mat-date-range-input class="btn btn-main-outline" [formGroup]="tablePatientsForm"
                        [rangePicker]="picker">
                        <input matStartDate formControlName="FromDate">
                        <input matEndDate formControlName="ToDate" (dateChange)="onDateChange()">
                    </mat-date-range-input>
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-date-range-picker #picker></mat-date-range-picker>
                </button>
                <input class="CommonSearch__input form-control" type="text" id="NationalId" placeholder="SSN" (keydown.enter)="onSSNEnterPress($event)">
            </div>
            
            <div class="actions ms-auto d-flex align-items-center gap-2">
                <button class="btn btn-danger-outline" (click)="clearData()">Clear</button>
                <button class="btn btn-main-outline" (click)="FetchData()">Show</button>
            </div>
        </div>
        <div class="custom_check d-flex align-items-center gap-2 ms-auto">
            <button class="btn btn-secondary-outline fs-8 px-2" [class.active]="assignedToMe"
                (click)="assignedToMe = !assignedToMe;FetchData()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path opacity="0.4"
                        d="M10 18.3334C14.6025 18.3334 18.3334 14.6025 18.3334 10C18.3334 5.39752 14.6025 1.66669 10 1.66669C5.39752 1.66669 1.66669 5.39752 1.66669 10C1.66669 14.6025 5.39752 18.3334 10 18.3334Z"
                        fill="#B4DDE4"></path>
                    <path
                        d="M8.81668 12.985C8.65098 12.9849 8.49212 12.9189 8.37502 12.8017L6.01668 10.4433C5.90045 10.3257 5.83527 10.167 5.83527 10.0017C5.83527 9.83631 5.90045 9.67762 6.01668 9.56C6.25835 9.31833 6.65835 9.31833 6.90002 9.56L8.81668 11.4767L13.1 7.19333C13.3417 6.95167 13.7417 6.95167 13.9834 7.19333C14.225 7.435 14.225 7.835 13.9834 8.07667L9.25835 12.8017C9.14125 12.9189 8.98239 12.9849 8.81668 12.985Z"
                        fill="#8ECBD7"></path>
                </svg>
                Assigned to Me
            </button>
        </div>
    </div>
</div>

   <div class="row gx-2 pharmacist_token rad mx-0 mt-1">
        <div class="col cursor-pointer" (click)="filterStatus(0)">
            <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                <div class="count total_token d-flex align-items-center gap-2">
                    <h4 class="m-0 fw-bold" style="background-color: #e48bcc;">{{ getStatusCount(0) }}</h4>
                    <p class="m-0 fs-7 fw-bold">New Request</p>
                </div>
            </div>
        </div>
        <div class="col cursor-pointer" (click)="filterStatus(2)">
            <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                <div class="count total_token d-flex align-items-center gap-2">
                    <h4 class="m-0 fw-bold" style="background-color: #0cd220;">{{ getStatusCount(2) }}</h4>
                    <p class="m-0 fs-7 fw-bold">{{langData?.common?.Accepted}}</p>
                </div>
            </div>
        </div>
         <div class="col cursor-pointer" (click)="filterStatus(3)">
            <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                <div class="count total_token d-flex align-items-center gap-2">
                    <h4 class="m-0 fw-bold" style="background-color: #dd4b65;">{{ getStatusCount(3) }}</h4>
                    <p class="m-0 fs-7 fw-bold">{{langData?.common?.Rejectedd}}</p>
                </div>
            </div>
        </div>
        <div class="col cursor-pointer" (click)="filterStatus(4)">
            <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                <div class="count total_token d-flex align-items-center gap-2">
                    <h4 class="m-0 fw-bold" style="background-color: #EBBDAD;">{{ getStatusCount(4) }}</h4>
                    <p class="m-0 fs-7 fw-bold">All</p>
                </div>
            </div>
        </div>
        <!--<div class="col cursor-pointer">
            <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                <div class="count total_token d-flex align-items-center gap-2">
                    <h4 class="m-0 fw-bold" style="background-color: #c46669;">222</h4>
                    <p class="m-0 fs-7 fw-bold">{{langData?.common?.STAT}}</p>
                </div>
            </div>
        </div> -->
    </div>

    <div class="d-flex flex-column gap-2 p-2 overflow-auto" style="height: calc(100vh - 12rem);">
        <div class="doc_card rounded cursor-pointer" *ngFor="let item of referralsToMeData;let i=index">
            <div class="rounded">
                <div class="row gx-1 mx-0 align-items-center">
                    <div class="bg-primary-50 rounded-start cursor-pointer position-relative" style="width: 22rem;">
                        <div class="p-2 doctor_profile d-flex" (click)="showAcceptReject(item)">
                            <div class="text-center me-2">
                                <div class="profile_img position-relative">
                                    <img *ngIf="item.Genderid == 1" src="assets/images/icons/male.svg" alt=""
                                        class="position-relative">
                                    <img *ngIf="item.Genderid == 2" src="assets/images/icons/female.svg" alt=""
                                        class="position-relative">
                                    <!-- <p class="vip_label m-0 fw-bold d-flex align-items-center"
                                        *ngIf="itemIsvip   != 'Non-VIP'">
                                        <svg class="me-1" xmlns="http://www.w3.org/2000/svg" width="7" height="7"
                                            viewBox="0 0 7 7" fill="none">
                                            <path
                                                d="M4.1362 0.995956L4.66853 2.06062C4.74026 2.20786 4.93281 2.34755 5.09515 2.37775L6.05788 2.53632C6.67327 2.63825 6.81673 3.08375 6.37501 3.52925L5.62371 4.28055C5.49912 4.40514 5.42739 4.65054 5.46891 4.82798L5.68411 5.75673C5.85401 6.48916 5.46136 6.77609 4.81577 6.391L3.91345 5.85489C3.75111 5.75673 3.47928 5.75673 3.31694 5.85489L2.41462 6.391C1.76903 6.77231 1.37638 6.48916 1.54628 5.75673L1.76148 4.82798C1.79545 4.64676 1.72372 4.40136 1.59913 4.27678L0.847829 3.52547C0.406108 3.08375 0.549573 2.63825 1.16496 2.53254L2.12769 2.37398C2.29003 2.34755 2.48258 2.20408 2.55431 2.05684L3.08664 0.99218C3.37735 0.41832 3.84549 0.41832 4.1362 0.995956Z"
                                                fill="#286571" />
                                        </svg>
                                        VIP
                                        <svg class="ms-1" xmlns="http://www.w3.org/2000/svg" width="7" height="7"
                                            viewBox="0 0 7 7" fill="none">
                                            <path
                                                d="M4.1362 0.995956L4.66853 2.06062C4.74026 2.20786 4.93281 2.34755 5.09515 2.37775L6.05788 2.53632C6.67327 2.63825 6.81673 3.08375 6.37501 3.52925L5.62371 4.28055C5.49912 4.40514 5.42739 4.65054 5.46891 4.82798L5.68411 5.75673C5.85401 6.48916 5.46136 6.77609 4.81577 6.391L3.91345 5.85489C3.75111 5.75673 3.47928 5.75673 3.31694 5.85489L2.41462 6.391C1.76903 6.77231 1.37638 6.48916 1.54628 5.75673L1.76148 4.82798C1.79545 4.64676 1.72372 4.40136 1.59913 4.27678L0.847829 3.52547C0.406108 3.08375 0.549573 2.63825 1.16496 2.53254L2.12769 2.37398C2.29003 2.34755 2.48258 2.20408 2.55431 2.05684L3.08664 0.99218C3.37735 0.41832 3.84549 0.41832 4.1362 0.995956Z"
                                                fill="#286571" />
                                        </svg>
                                    </p> -->
                                </div>
                            </div>
                            <div class="d-flex w-100 align-items-center justify-content-between">
                                <div class="w-100 position-relative">
                                    <div class="custom_tooltip custom_tooltip_right">
                                        <p class="value fs-7 fw-bold">{{item.PatientName}}</p>
                                        <div class="tooltip">
                                            <p class="value fs-7 fw-bold">{{item.PatientName}}</p>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center gap-3">
                                        <div
                                            class="full_age_hover custom_tooltip custom_tooltip_right d-flex align-items-center gap-1">
                                            <p>{{item.Gender}} | {{item.FullAge}} </p>                                               
                                        </div>
                                        <p><b>SSN</b> : <span>{{item.SSN}}</span></p>
                                        
                                    </div>
                                    <div class="d-flex align-items-center gap-1">
                                        <p><b>DOB</b> :</p>
                                        <svg width="10" height="11" viewBox="0 0 10 11" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                fill="#368796" />
                                        </svg>
                                        <p class="m-0 fw-bold text-nowrap">
                                            {{item.DOB?.split('
                                            ')[0]}}</p>
                                    </div>
                                    <div>
                                        <p>{{item.Nationality}} | Mobile : {{item.MobileNo}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col doc_details lab_panic_design">
                        <div class="bg-white p-1 rounded" [class]="item.Class">
                            <div class="row gx-2">
                                <!-- <div class="col-3 d-flex flex-column" style="width: 10%;">
                                    <label for="" class="form-label m-0 clr-grey fw-bold">Type</label>
                                    <p class="fw-bold">{{item.PatientTypeName}}</p>
                                </div> -->
                                <div class="col-2 d-flex flex-column" style="width: 15%;">
                                    <label for="" class="form-label m-0 clr-grey fw-bold">Bed | Ward</label>
                                    <p class="fw-bold">{{item.BedName}} | {{item.Ward}}</p>
                                </div>
                                <div class="col-2 d-flex flex-column" style="width: 15%;">
                                    <label for="" class="form-label m-0 clr-grey fw-bold">Referred By</label>
                                    <p class="fw-bold">{{item.ReferralDoctorName}}</p>
                                </div>
                                <div class="col-2 d-flex flex-column" style="width: 20%;">
                                    <label for="" class="form-label m-0 clr-grey fw-bold">Referred on</label>
                                    <div class="d-flex align-items-center gap-1">
                                        <svg width="10" height="11" viewBox="0 0 10 11" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                fill="#368796" />
                                        </svg>
                                        <p class="m-0 fw-bold text-nowrap">
                                            {{item.ReferalDATE?.split('
                                            ')[0]}}</p>

                                        <svg class="" width="10" height="11" viewBox="0 0 10 11" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M5.00634 10.5C6.2848 10.5 7.56331 10.0066 8.538 9.03255C10.4873 7.08447 10.4873 3.90922 8.538 1.96108C6.58867 0.0129498 3.41139 0.0129949 1.46202 1.96108C-0.487361 3.90917 -0.487316 7.08442 1.46202 9.03255C2.44936 10.0066 3.72785 10.5 5.00634 10.5ZM2.09493 2.59362C2.89243 1.79663 3.9557 1.39187 5.00634 1.39187C6.05698 1.39187 7.10764 1.79672 7.91774 2.59362C9.52537 4.20022 9.52537 6.80614 7.91774 8.41271C6.31012 10.0193 3.70253 10.0193 2.09493 8.41271C0.487305 6.80612 0.487305 4.20019 2.09493 2.59362Z"
                                                fill="#368796" />
                                            <path
                                                d="M3.42405 7.96996C3.53796 7.96996 3.66458 7.91939 3.75315 7.8308L5.39875 6.0471C5.47468 5.97121 5.51265 5.85738 5.51265 5.74347V3.35258C5.51265 3.1122 5.3101 2.90978 5.06957 2.90978C4.82913 2.90978 4.62657 3.1122 4.62657 3.35258V5.57899L3.09496 7.22355C2.93038 7.40064 2.94309 7.67895 3.12031 7.84343C3.20887 7.93193 3.31014 7.96988 3.42406 7.96988L3.42405 7.96996Z"
                                                fill="#368796" />
                                        </svg>
                                        <p class="m-0 fw-bold text-nowrap">
                                            {{item.ReferalDATE?.split('
                                            ')[1]}}</p>

                                    </div>
                                </div>
                                <div class="col-2 d-flex flex-column" style="width: 15%;">
                                    <label for="" class="form-label m-0 clr-grey fw-bold">Priority</label>
                                    <p class="fw-bold" [class]="item.Priority != '1' ? 'ASAPRoutine' : ''">{{item.PriorityName}}</p>
                                </div>
                                <div class="d-flex flex-column justify-content-center" style="width: 7%;">
                                    <button class="btn btn-main-fill lh-1 fs-8" (click)="navigatetoPatientSummary(item, $event);">EHR</button>
                                </div>
                                <div class="col-2 ms-auto" style="width: 10%;">
                                    <div class="d-flex justify-content-end align-items-center gap-2 h-100">
                                        <div class="cursor-pointer w-auto custom_tooltip custom_tooltip_left"
                                            (click)="openProcedureOrder(item)">
                                            <svg width="30" height="30" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_12447_17273)">
                                                    <path
                                                        d="M14.1348 27.6256C21.6325 27.6256 27.7106 21.5476 27.7106 14.0499C27.7106 6.55219 21.6325 0.474121 14.1348 0.474121C6.63716 0.474121 0.559082 6.55219 0.559082 14.0499C0.559082 21.5476 6.63716 27.6256 14.1348 27.6256Z"
                                                        fill="#DAEEF1" />
                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                        d="M16.0094 7.38324C16.2396 7.38324 16.4261 7.56979 16.4261 7.79991V9.05024C16.4261 9.28036 16.6126 9.46691 16.8428 9.46691C17.0729 9.46691 17.2594 9.28036 17.2594 9.05024V8.21657H17.6761C18.3665 8.21657 18.9261 8.77622 18.9261 9.46657V19.4666C18.9261 20.1569 18.3665 20.7166 17.6761 20.7166H10.5928C9.9024 20.7166 9.34277 20.1569 9.34277 19.4666V9.46657C9.34277 8.77622 9.9024 8.21657 10.5928 8.21657H11.4261V7.79991C11.4261 7.56979 11.6126 7.38324 11.8428 7.38324C12.0729 7.38324 12.2594 7.56979 12.2594 7.79991V9.05024C12.2594 9.28036 12.446 9.46691 12.6761 9.46691C12.9062 9.46691 13.0928 9.28036 13.0928 9.05024V8.21657H15.5928V7.79991C15.5928 7.56979 15.7793 7.38324 16.0094 7.38324ZM11.4261 12.3832C11.196 12.3832 11.0094 12.5698 11.0094 12.7999C11.0094 13.03 11.196 13.2166 11.4261 13.2166H16.8428C17.0729 13.2166 17.2594 13.03 17.2594 12.7999C17.2594 12.5698 17.0729 12.3832 16.8428 12.3832H11.4261ZM11.0094 14.8832C11.0094 14.6531 11.196 14.4666 11.4261 14.4666H14.3428C14.5729 14.4666 14.7594 14.6531 14.7594 14.8832C14.7594 15.1134 14.5729 15.2999 14.3428 15.2999H11.4261C11.196 15.2999 11.0094 15.1134 11.0094 14.8832ZM11.4261 16.5499C11.196 16.5499 11.0094 16.7364 11.0094 16.9666C11.0094 17.1967 11.196 17.3832 11.4261 17.3832H16.0094C16.2396 17.3832 16.4261 17.1967 16.4261 16.9666C16.4261 16.7364 16.2396 16.5499 16.0094 16.5499H11.4261Z"
                                                        fill="#368796" />
                                                </g>
                                            </svg>
                                            <div class="tooltip" *ngIf="item.Status === '0'">
                                                <p>Please Accept first to order </p>
                                            </div>
                                            <div class="tooltip" *ngIf="item.Status != '0'">
                                                <p>Procedure Order </p>
                                            </div>
                                        </div>
                                        <div class="cursor-pointer w-auto custom_tooltip custom_tooltip_left"
                                            (click)="redirecttoProgressNotes(item)">
                                            <svg width="30" height="30" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <g clip-path="url(#clip0_12447_17273)">
                                                    <path
                                                        d="M14.1348 27.6256C21.6325 27.6256 27.7106 21.5476 27.7106 14.0499C27.7106 6.55219 21.6325 0.474121 14.1348 0.474121C6.63716 0.474121 0.559082 6.55219 0.559082 14.0499C0.559082 21.5476 6.63716 27.6256 14.1348 27.6256Z"
                                                        fill="#DAEEF1" />
                                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                                        d="M16.0094 7.38324C16.2396 7.38324 16.4261 7.56979 16.4261 7.79991V9.05024C16.4261 9.28036 16.6126 9.46691 16.8428 9.46691C17.0729 9.46691 17.2594 9.28036 17.2594 9.05024V8.21657H17.6761C18.3665 8.21657 18.9261 8.77622 18.9261 9.46657V19.4666C18.9261 20.1569 18.3665 20.7166 17.6761 20.7166H10.5928C9.9024 20.7166 9.34277 20.1569 9.34277 19.4666V9.46657C9.34277 8.77622 9.9024 8.21657 10.5928 8.21657H11.4261V7.79991C11.4261 7.56979 11.6126 7.38324 11.8428 7.38324C12.0729 7.38324 12.2594 7.56979 12.2594 7.79991V9.05024C12.2594 9.28036 12.446 9.46691 12.6761 9.46691C12.9062 9.46691 13.0928 9.28036 13.0928 9.05024V8.21657H15.5928V7.79991C15.5928 7.56979 15.7793 7.38324 16.0094 7.38324ZM11.4261 12.3832C11.196 12.3832 11.0094 12.5698 11.0094 12.7999C11.0094 13.03 11.196 13.2166 11.4261 13.2166H16.8428C17.0729 13.2166 17.2594 13.03 17.2594 12.7999C17.2594 12.5698 17.0729 12.3832 16.8428 12.3832H11.4261ZM11.0094 14.8832C11.0094 14.6531 11.196 14.4666 11.4261 14.4666H14.3428C14.5729 14.4666 14.7594 14.6531 14.7594 14.8832C14.7594 15.1134 14.5729 15.2999 14.3428 15.2999H11.4261C11.196 15.2999 11.0094 15.1134 11.0094 14.8832ZM11.4261 16.5499C11.196 16.5499 11.0094 16.7364 11.0094 16.9666C11.0094 17.1967 11.196 17.3832 11.4261 17.3832H16.0094C16.2396 17.3832 16.4261 17.1967 16.4261 16.9666C16.4261 16.7364 16.2396 16.5499 16.0094 16.5499H11.4261Z"
                                                        fill="#368796" />
                                                </g>
                                            </svg>
                                            <div class="tooltip" *ngIf="item.Status === '0'">
                                                <p>Please Accept first to Enter Progress Notes</p>
                                            </div>
                                            <div class="tooltip" *ngIf="item.Status != '0'">
                                                <p>Progress Notes </p>
                                            </div>
                                        </div>
                                        <div class="info_img w-auto cursor-pointer custom_tooltip custom_tooltip_left d-flex flex-column gap-1 align-items-center"
                                            data-bs-toggle="modal" data-bs-target="#walkthrough_info"
                                            (click)="fetchPatientWalkthroughInfoForReferrals(item)">
                                            <svg width="20" height="29" viewBox="0 0 28 29" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <rect y="0.422119" width="28" height="28" rx="14" fill="#69BAC9" />
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                    d="M14.9692 9.57595C16.1161 9.57595 17.0461 8.64597 17.0461 7.49904C17.0461 6.3521 16.1161 5.42212 14.9692 5.42212C13.8223 5.42212 12.8923 6.3521 12.8923 7.49904C12.8923 8.64597 13.8223 9.57595 14.9692 9.57595ZM10.5385 11.6529C10.5385 11.2706 10.8484 10.9606 11.2308 10.9606H15.6615C16.0862 10.9606 16.4107 11.3392 16.3458 11.7589L14.6923 21.2067C14.5616 22.2031 15.0205 22.4566 15.6615 22.4566C16.242 22.4566 16.6942 22.0035 16.9856 21.5535C17.0767 21.4249 17.2109 21.36 17.3716 21.4249C17.4683 21.4898 17.5001 21.6505 17.4012 21.7791C16.6644 23.0042 15.193 23.4221 14 23.4221C12.0705 23.4221 11.1152 22.4245 11.3692 20.6529L12.5922 12.3452H11.2308C10.8485 12.3452 10.5385 12.0352 10.5385 11.6529Z"
                                                    fill="#ECF6F8" />
                                            </svg>
                                            <div class="tooltip">
                                                <p>walk through</p>
                                            </div>
                                            <!-- <label for="" class="form-label m-0">walk through</label> -->

                                        </div>
                                    </div>
                                </div>
                                <div class="col-2 d-flex flex-column inline_legend pe-2" style="width: 15%;"
                                    [class.NewReferal]="item.Status === '0'" [class.ReferalRejected]="item.Status === '3'" [class.ReferalAccepted]="item.Status === '2'">
                                    <label for="" class="form-label m-0 clr-grey fw-bold">Order Status</label>
                                    <span class="legend fs-8">
                                        {{item.Status === '0' ? 'New Request' : item.Status === '3' ? 'Rejected' : item.Status === '2' ? 'Accepted' : item.StatusName }}
                                    </span>
                                </div>
                            </div>
                        </div>
                         <div class="col-12 p-2 bg-grey-50 d-flex align-items-center gap-3">
                            <div class="d-flex gap-2">
                                <p class="label fw-bold m-0 text-nowrap"> Referal Remarks: </p>
                                <p class="m-0">{{item.Remarks}}</p>
                            </div>
                            <div class="d-flex gap-2" *ngIf="item.DoctorName != ''">
                                <p class="label fw-bold m-0 text-nowrap"> {{ item.Status === '3' ? 'Rejected By:' : 'Accepted By:'}}  </p>
                                <p class="m-0 d-flex align-items-center gap-1">{{item.DoctorName}} on 
                                    <span class="d-flex align-items-center gap-1">
                                        <svg width="10" height="11" viewBox="0 0 10 11" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                fill="#368796" />
                                        </svg>
                                        <p class="m-0 fw-bold text-nowrap">
                                            {{item.AcceptRejectDate?.split('
                                            ')[0]}}</p>

                                        <svg class="" width="10" height="11" viewBox="0 0 10 11" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M5.00634 10.5C6.2848 10.5 7.56331 10.0066 8.538 9.03255C10.4873 7.08447 10.4873 3.90922 8.538 1.96108C6.58867 0.0129498 3.41139 0.0129949 1.46202 1.96108C-0.487361 3.90917 -0.487316 7.08442 1.46202 9.03255C2.44936 10.0066 3.72785 10.5 5.00634 10.5ZM2.09493 2.59362C2.89243 1.79663 3.9557 1.39187 5.00634 1.39187C6.05698 1.39187 7.10764 1.79672 7.91774 2.59362C9.52537 4.20022 9.52537 6.80614 7.91774 8.41271C6.31012 10.0193 3.70253 10.0193 2.09493 8.41271C0.487305 6.80612 0.487305 4.20019 2.09493 2.59362Z"
                                                fill="#368796" />
                                            <path
                                                d="M3.42405 7.96996C3.53796 7.96996 3.66458 7.91939 3.75315 7.8308L5.39875 6.0471C5.47468 5.97121 5.51265 5.85738 5.51265 5.74347V3.35258C5.51265 3.1122 5.3101 2.90978 5.06957 2.90978C4.82913 2.90978 4.62657 3.1122 4.62657 3.35258V5.57899L3.09496 7.22355C2.93038 7.40064 2.94309 7.67895 3.12031 7.84343C3.20887 7.93193 3.31014 7.96988 3.42406 7.96988L3.42405 7.96996Z"
                                                fill="#368796" />
                                        </svg>
                                        <p class="m-0 fw-bold text-nowrap">
                                            {{item.AcceptRejectDate?.split('
                                            ')[1]}}</p>

                                    </span>
                                </p>
                            </div>
                            <div class="d-flex gap-2" *ngIf="item.IsVisited == 'True'">
                                <p class="label fw-bold m-0 text-nowrap"> Visited by : </p>
                                <p class="m-0 d-flex align-items-center gap-1">{{ item.VisitedUpdatedByName}} on 
                                    <span class="d-flex align-items-center gap-1">
                                        <svg width="10" height="11" viewBox="0 0 10 11" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                fill="#368796" />
                                        </svg>
                                        <p class="m-0 fw-bold text-nowrap">
                                            {{item.VisitedDate?.split('
                                            ')[0]}}</p>

                                        <svg class="" width="10" height="11" viewBox="0 0 10 11" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M5.00634 10.5C6.2848 10.5 7.56331 10.0066 8.538 9.03255C10.4873 7.08447 10.4873 3.90922 8.538 1.96108C6.58867 0.0129498 3.41139 0.0129949 1.46202 1.96108C-0.487361 3.90917 -0.487316 7.08442 1.46202 9.03255C2.44936 10.0066 3.72785 10.5 5.00634 10.5ZM2.09493 2.59362C2.89243 1.79663 3.9557 1.39187 5.00634 1.39187C6.05698 1.39187 7.10764 1.79672 7.91774 2.59362C9.52537 4.20022 9.52537 6.80614 7.91774 8.41271C6.31012 10.0193 3.70253 10.0193 2.09493 8.41271C0.487305 6.80612 0.487305 4.20019 2.09493 2.59362Z"
                                                fill="#368796" />
                                            <path
                                                d="M3.42405 7.96996C3.53796 7.96996 3.66458 7.91939 3.75315 7.8308L5.39875 6.0471C5.47468 5.97121 5.51265 5.85738 5.51265 5.74347V3.35258C5.51265 3.1122 5.3101 2.90978 5.06957 2.90978C4.82913 2.90978 4.62657 3.1122 4.62657 3.35258V5.57899L3.09496 7.22355C2.93038 7.40064 2.94309 7.67895 3.12031 7.84343C3.20887 7.93193 3.31014 7.96988 3.42406 7.96988L3.42405 7.96996Z"
                                                fill="#368796" />
                                        </svg>
                                        <p class="m-0 fw-bold text-nowrap">
                                            {{item.VisitedDate?.split('
                                            ')[1]}}</p>

                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div [class]="item.showAcceptReject" *ngIf="(item.Status == '0'||item.Status == '3')">
                    <textarea name="" class="form-control resize-none" #referralRemarks id="referralRemarks" cols="30"
                        rows="2"></textarea>
                    <div class="d-flex align-items-center justify-content-end gap-2 ms-3">
                        <button class="btn btn-danger-outline"
                            (click)="rejectReferral(item, referralRemarks)">{{langData?.common?.Reject}}</button>
                        <button class="btn btn-main-outline"
                            (click)="acceptswReferral(item, referralRemarks)">{{langData?.common?.Accept}}</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
<div class="modal fade" id="acceptReferralMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>Referral Accepted Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" (click)="FetchData()"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="rejectReferralMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>Referral Rejected Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" (click)="FetchData()"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="validateRemarksForAcceptReject" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>Please Enter Remarks for Reject</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal quick_info walkthrough_info" data-bs-backdrop="static" id="walkthrough_info" tab-index="-1">
    <div class="modal-dialog modal-dialog-scrollabel">
        <div class="modal-content h-100 overflow-auto">
            <div class="modal-header ps-0">
                <label for="" class="ssn_label bg-primary clr-light" id="lblSSN">ID No.:
                    {{wtpinfo?.SSN}}</label>
                <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="clearPatientInfo()"
                    aria-label="Close"></button>
            </div>
            <div class="">
                <app-patient-quick-walkthrough-info *ngIf="wtpinfo"
                    [patientInfo]="wtpinfo"></app-patient-quick-walkthrough-info>
            </div>
        </div>
    </div>
</div>
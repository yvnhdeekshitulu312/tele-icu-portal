<app-generic-close *ngIf="readonly"></app-generic-close>

<div *ngIf="readonly" class="doctor_worklist worklist_patientcard rounded-0 d-flex">
        <!-- <div class="d-flex align-items-center w-100 "> -->
            <div class="row mx-0 align-items-center w-100 min_patient_card">
                <div class="col-xxl-3 col-xl-4 pb-2">
                    <div class="d-flex align-items-center gap-2">
                        <div class="patient-info d-flex align-items-center py-1">
                            <div class="patient-photo me-3">
    
                                <img *ngIf="selectedView.GenderID == 1" src="assets/images/icons/male.svg" alt=""
                                    style="height:2rem;" class="position-relative">
                                <img *ngIf="selectedView.GenderID == 2" src="assets/images/icons/female.svg" alt=""
                                    style="height:2rem;" class="position-relative">
                            </div>
                            <div class="">
                                <p class="value fs-7 fw-bold w-100">{{selectedView.PatientName}}</p>
                                <div class="d-flex align-items-center gap-2 mt-1 mb-1">
                                    <p>{{selectedView.Gender}} | <span>{{selectedView.PatientType == '2' ?
                                            selectedView.FullAge : selectedView.Age}}</span> </p>
                                    <p><b>SSN</b> : <span>{{selectedView.SSN}}</span></p>
                                </div>
                                <p class="m-0 fs-8 mt-1">{{selectedView.Nationality}} | Mobile
                                    :{{selectedView.MobileNo}}</p>
                            </div>
                        </div>
    
                    </div>
    
                </div>
    
                <div class="col-xxl-9 col-xl-8 pe-0">
                    <div class="row g-2 patient_card_details mb-0 row mx-0 border-bottom-primary-200"
                        style="background: #fff;">
                        <div class="col-1" style="width:8rem;" *ngIf="selectedView.PatientType != '3'">
                            <p class="label">{{selectedView.PatientType == '2' ? 'Bed No.' : 'Token No.'}}</p>
                            <p class="m-0 fw-bold alert_animate token">
                                {{selectedView.PatientType == '2' ? selectedView.Bed :
                                selectedView.TokenNumber}}
                            </p>
                        </div>
                        <div class="col-2" *ngIf="selectedView.PatientType != '1'">
                            <p class="label"> Ward </p>
                            <p>{{selectedView.PatientType == '3' ? 'Accident & Emergency' : selectedView.Ward}}
                            </p>
                        </div>
                        <div class="col-2">
                            <p class="label"> {{langData?.Ward?.DoctorName}} </p>
                            <p class="color-highlight my-2">{{this.selectedView.PrimaryDoctor}}</p>
                        </div>
                        <div class="col-1" *ngIf="selectedView.PatientType != '1'">
                            <p class="label">{{langData?.Ward?.Approval}}</p>
                            <p>{{selectedView.ApprovalDays}}</p>
                        </div>
                        <!-- <div class="detail twox" *ngIf="selectedView.PatientType == '1'">
                            
                                <p class="label">{{langData?.common?.mobilenumber}}</p>
                                <p>{{selectedView.MobileNo}}</p>
                            </div> -->
                        <div class="col-2" *ngIf="selectedView.PatientType == '1' ||selectedView.PatientType == '3'">
                            <!-- <p class="label">{{langData?.common?.PatientName}}</p>
                                <p>{{ lang == 'en' ? selectedView.PatientName : selectedView.PatientName2L}} </p> -->
                            <p class="label"> {{langData?.casesheet?.patient_type}} </p>
                            <p>{{selectedView.BillType == 'CR' ? 'Insured' : 'Self'}}</p>
                        </div>
                        <!-- <div class="detail" *ngIf="selectedView.PatientType == '1'">
                                <p class="label"> {{langData?.common?.Nationality}} </p>
                                <p>{{selectedView.Nationality}}</p>
                            </div> -->
                        <div class="col-2" *ngIf="selectedView.BillType!='Self'">
                            <!-- <p class="label">{{langData?.common?.ageLabel}}</p>
                                <div class="full_age_hover position-relative d-inline-block">
                                    <p>{{selectedView.Age}}</p>
                                    <div class="age_tooltip rounded-2 p-1">
                                        <p class="m-0 clr-grey my-1 text-nowrap fs-8">{{selectedView.FullAge_Gender}}</p>
                                    </div>
                                </div> -->
                            <p class="label"> {{langData?.casesheet?.insurance_name}} </p>
    
                            <p> {{selectedView.CompanyName}}</p>
                        </div>
                        <div class="col-2">
                            <p class="label"> PainScore </p>
                            <p class="color-highlight">{{selectedView.PainScore}}</p>
                        </div>
                        <div class="CTASSCore col-2" *ngIf="selectedView.PatientType == '3'">
                            <div class="w-max-content score" [class]="getCTASScoreClass()">
                                    <label for="" class="form-label m-0 fw-bold">CTAS</label>
                                    <p class=" text-truncate fs-7 text-center">                                               
                                        <span class="ctascore fw-bold text-center">{{selectedView.CTASScore}}</span>
                                    </p>
                            </div>
                        </div>
                    </div>
                </div>
    
            </div>
        <!-- </div> -->
</div>

<div class="mt-4 fallriskassessment_body">
    <h6 class="m-0 clr-primary-600">FALL RISK ASSESSMENT/ RE-ASSESSMENT TOOL</h6>
    <div class="">
        <table class="table m-0">
            <thead>
                <tr>
                    <th>Risk Factors</th>
                    <th>Criteria</th>
                    <th>Points</th>
                    <th>Score</th>  
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let risk of filteredFallRiskFactors; let i = index">
                    <td>{{risk.RiskFactor}}</td>
                    <td>
                       
                        <div [class]="factor.CriteriaClass" (click)="riskFactorToggle(i, factor)"
                            *ngFor="let factor of filterFunction(fallRiskFactors, risk.RiskFactorID); let i = index">
                            <svg width="14" height="14" viewBox="0 0 19 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g opacity="0.4">
                                    <circle cx="9.42578" cy="9.86621" r="9" fill="#43A9BC" />
                                    <path
                                        d="M12.5085 6.56469L8.0964 10.987L6.39945 9.29009C6.30725 9.18243 6.19379 9.09499 6.0662 9.03326C5.93861 8.97153 5.79963 8.93684 5.65799 8.93137C5.51635 8.9259 5.37511 8.94976 5.24314 9.00147C5.11116 9.05317 4.9913 9.1316 4.89107 9.23183C4.79084 9.33206 4.71242 9.45192 4.66071 9.5839C4.60901 9.71587 4.58514 9.85711 4.59061 9.99875C4.59608 10.1404 4.63077 10.2794 4.6925 10.407C4.75423 10.5346 4.84167 10.648 4.94933 10.7402L7.3662 13.1674C7.46229 13.2627 7.57626 13.3381 7.70157 13.3893C7.82687 13.4404 7.96105 13.4664 8.0964 13.4656C8.3662 13.4645 8.62476 13.3574 8.81631 13.1674L13.9586 8.02509C14.055 7.92949 14.1315 7.81574 14.1837 7.69041C14.2359 7.56509 14.2628 7.43066 14.2628 7.29489C14.2628 7.15913 14.2359 7.0247 14.1837 6.89937C14.1315 6.77405 14.055 6.6603 13.9586 6.56469C13.7659 6.37314 13.5052 6.26562 13.2335 6.26562C12.9618 6.26562 12.7012 6.37314 12.5085 6.56469Z"
                                        fill="#ECF6F8" />
                                </g>
                            </svg>
                            <label for="" class="form-label p-0 m-0">{{factor.RiskFactorValue}}</label>
                        </div>
                    </td>
                    <td>
                        <span class="d-block mb-2"
                            *ngFor="let score of filterFunction(fallRiskFactors, risk.RiskFactorID);">
                            {{score.AssessmentScore}}</span>
                    </td>
                    <td>{{risk.Score}}</td>
                </tr>
            </tbody>
            <tfoot>
                <tr class="bg-primary-50">
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>
                        <p class="fw-bold fs-7 score_highlight">Score:
                            <span>{{totalRiskFactorScore}}</span>
                        </p>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
    <h6 class="m-0 clr-primary-600 mt-3">Preventive actions and Interventions</h6>

    <div class="border rounded-2 mt-2 p-2 d-none">
        <h6 class="m-0 clr-primary-600">Additional Criteria</h6>
        <table class="table mb-0 mt-3">
            <thead>
                <tr>
                    <th style="width: 15%;">Parameters</th>
                    <th style="width: 40%;">DESCRIPTION</th>
                    <th>CRITERIA</th>
                    <th>Score</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let fac of filteredFallRiskFactorParameter; let i = index">
                    <td>{{fac.RiskFactor}}</td>
                    <td>{{fac.Description}}</td>
                    <td>
                        <!-- <div class="clinical_toggle toggle__switch switch-sm d-inline-flex" *ngFor="let factor of filterFunction(fallRiskFactorParameter, fac.RiskFactorID);">
                            <button [class]="factor.CriteriaClass">{{factor.RiskFactorValue}}</button>
                        </div> -->
                        <div [class]="factor.CriteriaClass"
                            (click)="riskFactorParameterToggle(i, factor)"
                            *ngFor="let factor of filterFunction(fallRiskFactorParameter, fac.RiskFactorID); let i = index">
                            <svg width="14" height="14" viewBox="0 0 19 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g opacity="0.4">
                                    <circle cx="9.42578" cy="9.86621" r="9" fill="#43A9BC" />
                                    <path
                                        d="M12.5085 6.56469L8.0964 10.987L6.39945 9.29009C6.30725 9.18243 6.19379 9.09499 6.0662 9.03326C5.93861 8.97153 5.79963 8.93684 5.65799 8.93137C5.51635 8.9259 5.37511 8.94976 5.24314 9.00147C5.11116 9.05317 4.9913 9.1316 4.89107 9.23183C4.79084 9.33206 4.71242 9.45192 4.66071 9.5839C4.60901 9.71587 4.58514 9.85711 4.59061 9.99875C4.59608 10.1404 4.63077 10.2794 4.6925 10.407C4.75423 10.5346 4.84167 10.648 4.94933 10.7402L7.3662 13.1674C7.46229 13.2627 7.57626 13.3381 7.70157 13.3893C7.82687 13.4404 7.96105 13.4664 8.0964 13.4656C8.3662 13.4645 8.62476 13.3574 8.81631 13.1674L13.9586 8.02509C14.055 7.92949 14.1315 7.81574 14.1837 7.69041C14.2359 7.56509 14.2628 7.43066 14.2628 7.29489C14.2628 7.15913 14.2359 7.0247 14.1837 6.89937C14.1315 6.77405 14.055 6.6603 13.9586 6.56469C13.7659 6.37314 13.5052 6.26562 13.2335 6.26562C12.9618 6.26562 12.7012 6.37314 12.5085 6.56469Z"
                                        fill="#ECF6F8" />
                                </g>
                            </svg>
                            <label for="" class="form-label p-0 m-0">{{factor.RiskFactorValue}}</label>
                        </div>
                    </td>
                    <td>{{fac.Score}}</td>
                </tr>
            </tbody>
            <tfoot>
                <tr class="bg-primary-50">
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>
                        <p class="fw-bold fs-7 score_highlight">Score:
                            <span>{{totalRiskFactorParameterScore}}</span>
                        </p>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>

    <div class="mt-3">
        <table class="table mb-0 mt-3">
            <thead>
                <tr>
                    <th style="width: 15%;">FALLS RISK SCORE</th>
                    <th style="width: 20%;">FALLS RISK CATEGORY</th>
                    <th> FREQUENCY OF RE-ASSESSMENT</th>                    
                </tr>
            </thead>
            <tbody>
                <tr [style.background-color]="scoreBgColor3">
                    <td>7 TO 11</td>
                    <td>LOW</td>
                    <td>when there is a change in Patient's conditions</td>                   
                </tr>
                <tr [style.background-color]="scoreBgColor4">
                    <td>12 and Above</td>
                    <td>HIGH</td>
                    <td> Once in Every Shift(Twice in 24 Hrs.)</td>                   
                </tr>
            </tbody>
        </table>
    </div>

    <div class="card card-style-1 mt-3 d-none">
        <div class="card-header py-2 justify-content-between">
            <h6 class="m-0 clr-primary-600">Preventive actions and Interventions</h6>
            <div class="d-flex align-items-center gap-2">
                <!-- <button class="btn btn-danger-outline">Clear</button>
                <button class="btn btn-main-fill">Save</button> -->
            </div>
        </div>
        <div class="p-2">
            <div class="border mb-3">
                <div class="bg-primary-100 p-2 d-flex align-items-center justify-content-between">
                    <h6 class="m-0 clr-primary-600">Environment</h6>
                </div>
                <div class="mt-3 row mx-0 gx-2">
                    <div class="col-3" *ngFor="let env of FetchFallRiskNursingEnvironmentDataList; let i = index">
                        <div [class]="env.Class" (click)="selectPreventiveActions(env)">
                            <svg width="14" height="14" viewBox="0 0 19 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g opacity="0.4">
                                    <circle cx="9.42578" cy="9.86621" r="9" fill="#43A9BC" />
                                    <path
                                        d="M12.5085 6.56469L8.0964 10.987L6.39945 9.29009C6.30725 9.18243 6.19379 9.09499 6.0662 9.03326C5.93861 8.97153 5.79963 8.93684 5.65799 8.93137C5.51635 8.9259 5.37511 8.94976 5.24314 9.00147C5.11116 9.05317 4.9913 9.1316 4.89107 9.23183C4.79084 9.33206 4.71242 9.45192 4.66071 9.5839C4.60901 9.71587 4.58514 9.85711 4.59061 9.99875C4.59608 10.1404 4.63077 10.2794 4.6925 10.407C4.75423 10.5346 4.84167 10.648 4.94933 10.7402L7.3662 13.1674C7.46229 13.2627 7.57626 13.3381 7.70157 13.3893C7.82687 13.4404 7.96105 13.4664 8.0964 13.4656C8.3662 13.4645 8.62476 13.3574 8.81631 13.1674L13.9586 8.02509C14.055 7.92949 14.1315 7.81574 14.1837 7.69041C14.2359 7.56509 14.2628 7.43066 14.2628 7.29489C14.2628 7.15913 14.2359 7.0247 14.1837 6.89937C14.1315 6.77405 14.055 6.6603 13.9586 6.56469C13.7659 6.37314 13.5052 6.26562 13.2335 6.26562C12.9618 6.26562 12.7012 6.37314 12.5085 6.56469Z"
                                        fill="#ECF6F8" />
                                </g>
                            </svg>
                            <label for="" class="form-label p-0 m-0">{{env.NursingIntervention}}</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border mb-3">
                <div class="bg-primary-100 p-2 d-flex align-items-center justify-content-between">
                    <h6 class="m-0 clr-primary-600">Nursing Intervention</h6>
                </div>
                <div class="mt-3 row mx-0 gx-2">
                    <div class="col-3" *ngFor="let nit of FetchFallRiskNursingInterventionsPDataList; let i = index">
                        <div [class]="nit.Class" (click)="selectPreventiveActions(nit)">
                            <svg width="14" height="14" viewBox="0 0 19 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g opacity="0.4">
                                    <circle cx="9.42578" cy="9.86621" r="9" fill="#43A9BC" />
                                    <path
                                        d="M12.5085 6.56469L8.0964 10.987L6.39945 9.29009C6.30725 9.18243 6.19379 9.09499 6.0662 9.03326C5.93861 8.97153 5.79963 8.93684 5.65799 8.93137C5.51635 8.9259 5.37511 8.94976 5.24314 9.00147C5.11116 9.05317 4.9913 9.1316 4.89107 9.23183C4.79084 9.33206 4.71242 9.45192 4.66071 9.5839C4.60901 9.71587 4.58514 9.85711 4.59061 9.99875C4.59608 10.1404 4.63077 10.2794 4.6925 10.407C4.75423 10.5346 4.84167 10.648 4.94933 10.7402L7.3662 13.1674C7.46229 13.2627 7.57626 13.3381 7.70157 13.3893C7.82687 13.4404 7.96105 13.4664 8.0964 13.4656C8.3662 13.4645 8.62476 13.3574 8.81631 13.1674L13.9586 8.02509C14.055 7.92949 14.1315 7.81574 14.1837 7.69041C14.2359 7.56509 14.2628 7.43066 14.2628 7.29489C14.2628 7.15913 14.2359 7.0247 14.1837 6.89937C14.1315 6.77405 14.055 6.6603 13.9586 6.56469C13.7659 6.37314 13.5052 6.26562 13.2335 6.26562C12.9618 6.26562 12.7012 6.37314 12.5085 6.56469Z"
                                        fill="#ECF6F8" />
                                </g>
                            </svg>
                            <label for="" class="form-label p-0 m-0">{{nit.NursingIntervention}}</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border mb-3">
                <div class="bg-primary-100 p-2 d-flex align-items-center justify-content-between">
                    <h6 class="m-0 clr-primary-600">Multidisciplinary</h6>
                </div>
                <div class="mt-3 row mx-0 gx-2">
                    <div class="col-3" *ngFor="let mul of FetchFallRiskNursingMultidisciplinaryDataList; let i = index">
                        <div [class]="mul.Class" (click)="selectPreventiveActions(mul)">
                            <svg width="14" height="14" viewBox="0 0 19 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g opacity="0.4">
                                    <circle cx="9.42578" cy="9.86621" r="9" fill="#43A9BC" />
                                    <path
                                        d="M12.5085 6.56469L8.0964 10.987L6.39945 9.29009C6.30725 9.18243 6.19379 9.09499 6.0662 9.03326C5.93861 8.97153 5.79963 8.93684 5.65799 8.93137C5.51635 8.9259 5.37511 8.94976 5.24314 9.00147C5.11116 9.05317 4.9913 9.1316 4.89107 9.23183C4.79084 9.33206 4.71242 9.45192 4.66071 9.5839C4.60901 9.71587 4.58514 9.85711 4.59061 9.99875C4.59608 10.1404 4.63077 10.2794 4.6925 10.407C4.75423 10.5346 4.84167 10.648 4.94933 10.7402L7.3662 13.1674C7.46229 13.2627 7.57626 13.3381 7.70157 13.3893C7.82687 13.4404 7.96105 13.4664 8.0964 13.4656C8.3662 13.4645 8.62476 13.3574 8.81631 13.1674L13.9586 8.02509C14.055 7.92949 14.1315 7.81574 14.1837 7.69041C14.2359 7.56509 14.2628 7.43066 14.2628 7.29489C14.2628 7.15913 14.2359 7.0247 14.1837 6.89937C14.1315 6.77405 14.055 6.6603 13.9586 6.56469C13.7659 6.37314 13.5052 6.26562 13.2335 6.26562C12.9618 6.26562 12.7012 6.37314 12.5085 6.56469Z"
                                        fill="#ECF6F8" />
                                </g>
                            </svg>
                            <label for="" class="form-label p-0 m-0">{{mul.NursingIntervention}}</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border d-none">
                <div class="bg-primary-100 p-2 d-flex align-items-center justify-content-between">
                    <h6 class="m-0 clr-primary-600">Patient Centered</h6>
                </div>
                <div class="mt-3 row mx-0 gx-2">
                    <div class="col-3" *ngFor="let pce of patientCentered; let i = index">
                        <div [class]="pce.Class" (click)="selectPreventiveActions(pce)">
                            <svg width="14" height="14" viewBox="0 0 19 19" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <g opacity="0.4">
                                    <circle cx="9.42578" cy="9.86621" r="9" fill="#43A9BC" />
                                    <path
                                        d="M12.5085 6.56469L8.0964 10.987L6.39945 9.29009C6.30725 9.18243 6.19379 9.09499 6.0662 9.03326C5.93861 8.97153 5.79963 8.93684 5.65799 8.93137C5.51635 8.9259 5.37511 8.94976 5.24314 9.00147C5.11116 9.05317 4.9913 9.1316 4.89107 9.23183C4.79084 9.33206 4.71242 9.45192 4.66071 9.5839C4.60901 9.71587 4.58514 9.85711 4.59061 9.99875C4.59608 10.1404 4.63077 10.2794 4.6925 10.407C4.75423 10.5346 4.84167 10.648 4.94933 10.7402L7.3662 13.1674C7.46229 13.2627 7.57626 13.3381 7.70157 13.3893C7.82687 13.4404 7.96105 13.4664 8.0964 13.4656C8.3662 13.4645 8.62476 13.3574 8.81631 13.1674L13.9586 8.02509C14.055 7.92949 14.1315 7.81574 14.1837 7.69041C14.2359 7.56509 14.2628 7.43066 14.2628 7.29489C14.2628 7.15913 14.2359 7.0247 14.1837 6.89937C14.1315 6.77405 14.055 6.6603 13.9586 6.56469C13.7659 6.37314 13.5052 6.26562 13.2335 6.26562C12.9618 6.26562 12.7012 6.37314 12.5085 6.56469Z"
                                        fill="#ECF6F8" />
                                </g>
                            </svg>
                            <label for="" class="form-label p-0 m-0">{{pce.NursingIntervention}}</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


<div class="modal fallRiskSaveMsg" id="fallRiskSaveMsg" tabindex="-1">
    <div class="modal-dialog modal-toast modal-dialog-centered modal-toast-success" style="max-width: 60rem !important;">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <!-- <div class="modal-body">
                <p>Fall Risk Assessment Saved Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.Ok}}</a>
                </div>
            </div> -->
            <div class="modal-body p-3">
                <p class="fs-6 clr-primary-600 m-0">Fall Risk Assessment Saved Successfully</p>
                <div>
                    <p class="fs-6 clr-primary-600">{{langData?.common?.NursingInterventions}}</p>
                </div>
               <div class="fallRiskSaveMsg_height w-100">
                <div class="table-cards_div m-0 d-flex p-2 flex-nowrap w-100 mt-2"
                    *ngFor="let ni of nursingFallRiskInterventions;let i=index">
                    <div class="row card_item_div mx-0 g-2 w-100">
                        <div class="col-md-12">
                            <p class="text-wrap text-start m-0 p-0">{{ni.NursingIntervention}}</p>
                        </div>
                    </div>
                </div>
               </div>
            </div>
            <div class="modal-footer">
                <a href="javascript:void(0)" type="button" (click)="fallriskclose()" class="btn btn-main-outline"
                    data-bs-dismiss="modal">{{langData?.common?.Ok}}</a>
            </div>
        </div>
    </div>
</div>
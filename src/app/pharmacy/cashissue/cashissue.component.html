<div class="" (click)="onBodyClick($event)">
   <div class="page-header sticky-top bg-primary-50 shadow-sm">
      <div class="d-flex align-items-center gap-2">
         <h2 class="page-heading"> OP Pharmacy </h2>
         <div class="d-flex align-items-center gap-2 ms-3">
            <!-- <div class="d-flex align-items-center gap-2">
               <label for="" class="form-label m-0 fw-bold clr-dark-600 text-nowrap">Token Number</label>
               <input type="text" class="form-control bg-transparent border-primary-300 clr-primary-600">
            </div> -->
            <div class="d-flex align-items-center gap-2">
               <label for="" class="form-label m-0 fw-bold clr-dark-600 text-nowrap">Counter</label>
               <select id="counter" class="form-select bg-transparent border-primary-300 clr-primary-600 pe-5"
                  (change)="onCounterChange($event)">
                  <option value="0" selected translate>Counter</option>
                  <!-- <option *ngFor="let counter of counterMaster" [value]="counter.id">
                     {{counter.code}}
                  </option> -->
                  <option value="172161717">01</option>
                  <option value="172161718">02</option>
                  <option value="172161719">03</option>
                  <option value="172161720">04</option>
                  <option value="172161721">05</option>
                  <option value="172161722">06</option>
                  <option value="172161723">07</option>
                  <option value="172161724">08</option>
                  <option value="172161725">09</option>
                  <option value="172161726">10</option>
                  <!-- As confirmed by Mr. Deepak commenting counters from 11-16 on 28-Oct-2025 -->
                  <!-- <option value="172161727">11</option>
                  <option value="172161728">12</option>
                  <option value="172161729">13</option>
                  <option value="172161730">14</option>
                  <option value="172161731">15</option>
                  <option value="172161732">16</option> -->
                  <option value="172161733">P01</option>
                  <option value="172161734">P02</option>
                  <option value="172161735">P03</option>
                  <option value="172161736">P04</option>
                  <option value="172161737">P05</option>
                  <option value="172161738">S01</option>
                  <option value="172161739">S02</option>
                  <option value="172161740">S03</option>
                  <option value="172161741">S04</option>

               </select>
            </div>
         </div>
      </div>
      <div class="d-flex align-items-center gap-2 ms-auto">
         <div class="d-flex align-items-center gap-2">
            <form [formGroup]="datesForm">
               <div class="form-check form-switch gap-2" *ngIf="showOtcOption">
                  <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked"
                     (change)="toggleOtcConfirmation()" [checked]="datesForm.get('StatFilter').value">
                  <label class="form-check-label" for="flexSwitchCheckChecked">OTC</label>
               </div>
            </form>
            <!-- <label for="" class="form-label fw-bold clr-primary-600 m-0">Issue:</label> -->
            <!-- <div class="clinical_toggle toggle__switch switch-sm d-inline-flex">
               <button class="btn selected">System</button>
               <button class="btn">Manual</button>
            </div> -->
         </div>
         <button [disabled]="IsDisabled" class="btn btn-main-outline" (click)="onBillConversionClick()">Bill
            Conversion</button>
         <button [disabled]="IsDisabled" class="btn btn-main-outline" (click)="onViewRxClick()">View Rx</button>
         <button [disabled]="IsDisabled" *ngIf="!isCash" class="btn btn-main-outline" (click)="viewApprovals()"
            translate>
            View Approvals
         </button>
         <button class="btn btn-main-outline" (click)="openPatientSummary($event);">EHR</button>
         <div [class.disabled]="IsDisabled" class="dropdown hoverServices">
            <button class="btn btn-main-outline d-flex align-items-center dropdown-toggle">Actions</button>
            <div class="dropdown-menu">
               <p class="dropdown-item border-0 py-2 cursor-pointer" (click)="onViewBillInfoClick()"> View Bills</p>
               <p class="dropdown-item border-0 py-2 cursor-pointer" (click)="showMedicationHistory()"> Medication
                  History</p>
               <p class="dropdown-item border-0 py-2 cursor-pointer" (click)="openCollectionReport()"> Collection Report
               </p>
               <!-- <p class="dropdown-item border-0 py-2 cursor-pointer" (click)="openPatientSummaryPopup()"> Summary</p> -->
            </div>
         </div>
         <button [disabled]="IsDisabled" class="btn btn-danger-outline" (click)="clearCashIssue()">Clear</button>
         <button [disabled]="IsDisabled" class="btn btn-main-outline" (click)="StickerprintPrescription()">Sticker
            Print</button>
         <button [disabled]="IsDisabled" class="btn btn-main-outline" (click)="billPrint()">Print</button>
         <button  class="btn btn-main-outline" (click)="prescPrint()">Presc. Print</button>
         <button [disabled]="IsDisabled" class="btn btn-main-outline" 
            (click)="billCashIssue()">Bill</button>
         <button [disabled]="IsDisabled" class="btn btn-main-outline" *ngIf="!billSummarybtn"
            (click)="billSummaryCashIssue()">Bill
            Summary</button>
         <div *ngIf="fromNotBilledOrders" class="" (click)="navigateBacktoNotBilledOrders()">
            <img class="back_img cursor-pointer" src="assets/images/back.svg" alt="" />
            <p class="m-0 fs-7 fw-bold text-nowrap clr-primary-600">Back</p>
         </div>


      </div>
   </div>

   <div class="p-2">
      <div class="rounded-3 border-primary-200">
         <div class="d-flex align-items-center justify-content-between border-bottom-primary-200 p-2">
            <div class="d-flex align-items-center gap-2 w-100">
               <form class="CommanSearch__form w-25">
                  <label for="" class="CommonSearch__label">
                     <img src="assets/images/icons/icon-search.svg" alt="">
                  </label>
                  <input [disabled]="IsDisabled" type="text" class="CommonSearch__input form-control" id="txtSsn"
                     autocomplete="disable" placeholder="Mobile Number, National ID, UHID"
                     (keydown.enter)="onEnterPress($event)">
                  <button type="reset" class="reset-btn">
                     <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z"
                           stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round"
                           stroke-linejoin="round"></path>
                     </svg>
                  </button>
               </form>
               <form class="CommanSearch__form" *ngIf="showTokenScan">
                  <label for="" class="CommonSearch__label">
                     <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                           d="M20.4312 14.6532C20.4312 14.2482 20.7596 13.9197 21.1647 13.9197C21.5696 13.9197 21.8982 14.2479 21.8982 14.6532V17.581C21.8982 18.0682 21.6998 18.5098 21.3801 18.8297C21.0603 19.1495 20.6186 19.3477 20.1315 19.3477H17.2033C16.7984 19.3477 16.4698 19.0193 16.4698 18.6143C16.4698 18.2093 16.7982 17.8808 17.2033 17.8808L20.1312 17.881C20.2132 17.881 20.2883 17.847 20.3427 17.7927C20.3973 17.738 20.431 17.6633 20.431 17.5811L20.4309 14.6532L20.4312 14.6532ZM5.45691 16.3655H5.87794L5.8781 12.7336H7.34472V16.3658H9.41429V12.7336H10.8809V16.3658H12.9505V12.7336H14.4171V16.3658H16.4866V12.7336H17.9533V16.3658H18.3928C18.6453 16.3658 18.8512 16.1599 18.8512 15.9074V12.7337H22.2665C22.6715 12.7337 23 12.4054 23 12.0002C23 11.5953 22.6716 11.2668 22.2665 11.2668H1.73345C1.32853 11.2668 1 11.5951 1 12.0002C1 12.4051 1.32838 12.7337 1.73345 12.7337H4.99797V15.9074C4.99845 16.1598 5.20421 16.3655 5.45687 16.3655H5.45691ZM5.87811 9.80026V7.63483H5.45708C5.20459 7.63483 4.99867 7.84076 4.99867 8.09324V9.80042L5.87811 9.80059V9.80026ZM9.41429 9.80026V7.63483H7.34473V9.80026H9.41429ZM12.9506 9.80026V7.63483H10.881V9.80026H12.9506ZM16.4868 9.80026V7.63483H14.4172V9.80026H16.4868ZM18.8514 9.80026V8.09307C18.8514 7.84058 18.6454 7.63467 18.3929 7.63467H17.9534V9.80009H18.8514L18.8514 9.80026ZM6.79789 17.8814C7.20281 17.8814 7.53134 18.2098 7.53134 18.6149C7.53134 19.0198 7.20296 19.3483 6.79789 19.3483L3.87001 19.3482C3.3829 19.3482 2.94124 19.1498 2.62139 18.8301C2.30155 18.5103 2.10334 18.0686 2.10334 17.5815V14.6533C2.10334 14.2484 2.43172 13.9198 2.8368 13.9198C3.24172 13.9198 3.57025 14.2481 3.57025 14.6533V17.5812C3.57025 17.6632 3.60425 17.7383 3.65855 17.7927C3.71317 17.8474 3.78793 17.881 3.87027 17.881H6.79786L6.79789 17.8814ZM3.66067 9.34734C3.66067 9.75226 3.33229 10.0808 2.92721 10.0808C2.52229 10.0808 2.19376 9.75258 2.19376 9.34734L2.19392 6.41947C2.19392 5.93235 2.39227 5.4907 2.71197 5.17085C3.03181 4.851 3.47347 4.6528 3.96059 4.6528H6.88847C7.29339 4.6528 7.62192 4.98118 7.62192 5.38625C7.62192 5.79117 7.29354 6.11971 6.88847 6.11971L3.96071 6.11955C3.8787 6.11955 3.80361 6.15354 3.74899 6.20784C3.69437 6.26247 3.66069 6.33723 3.66069 6.41957L3.66067 9.34734ZM17.2936 6.11925C16.8886 6.11925 16.5601 5.79087 16.5601 5.3858C16.5601 4.98088 16.8885 4.65234 17.2936 4.65234H20.2214C20.7086 4.65234 21.1502 4.8507 21.4701 5.17039C21.7899 5.49024 21.9881 5.9319 21.9881 6.41901V9.34689C21.9881 9.75181 21.6597 10.0803 21.2547 10.0803C20.8497 10.0803 20.5212 9.75212 20.5212 9.34689L20.5214 6.41947C20.5214 6.33745 20.4874 6.26236 20.4331 6.2079C20.3784 6.15328 20.3037 6.1196 20.2215 6.1196H17.2936L17.2936 6.11925Z"
                           fill="#368796" />
                     </svg>
                  </label>
                  <input type="text" class="CommonSearch__input form-control" id="txtToken" placeholder="Scan Token"
                     (change)="onTokenEnterPress($event)" (keydown.enter)="onTokenEnterPress($event)">
               </form>

               <!-- <form class="CommanSearch__form">
                  <label for="" class="CommonSearch__label">
                     <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                           d="M20.4312 14.6532C20.4312 14.2482 20.7596 13.9197 21.1647 13.9197C21.5696 13.9197 21.8982 14.2479 21.8982 14.6532V17.581C21.8982 18.0682 21.6998 18.5098 21.3801 18.8297C21.0603 19.1495 20.6186 19.3477 20.1315 19.3477H17.2033C16.7984 19.3477 16.4698 19.0193 16.4698 18.6143C16.4698 18.2093 16.7982 17.8808 17.2033 17.8808L20.1312 17.881C20.2132 17.881 20.2883 17.847 20.3427 17.7927C20.3973 17.738 20.431 17.6633 20.431 17.5811L20.4309 14.6532L20.4312 14.6532ZM5.45691 16.3655H5.87794L5.8781 12.7336H7.34472V16.3658H9.41429V12.7336H10.8809V16.3658H12.9505V12.7336H14.4171V16.3658H16.4866V12.7336H17.9533V16.3658H18.3928C18.6453 16.3658 18.8512 16.1599 18.8512 15.9074V12.7337H22.2665C22.6715 12.7337 23 12.4054 23 12.0002C23 11.5953 22.6716 11.2668 22.2665 11.2668H1.73345C1.32853 11.2668 1 11.5951 1 12.0002C1 12.4051 1.32838 12.7337 1.73345 12.7337H4.99797V15.9074C4.99845 16.1598 5.20421 16.3655 5.45687 16.3655H5.45691ZM5.87811 9.80026V7.63483H5.45708C5.20459 7.63483 4.99867 7.84076 4.99867 8.09324V9.80042L5.87811 9.80059V9.80026ZM9.41429 9.80026V7.63483H7.34473V9.80026H9.41429ZM12.9506 9.80026V7.63483H10.881V9.80026H12.9506ZM16.4868 9.80026V7.63483H14.4172V9.80026H16.4868ZM18.8514 9.80026V8.09307C18.8514 7.84058 18.6454 7.63467 18.3929 7.63467H17.9534V9.80009H18.8514L18.8514 9.80026ZM6.79789 17.8814C7.20281 17.8814 7.53134 18.2098 7.53134 18.6149C7.53134 19.0198 7.20296 19.3483 6.79789 19.3483L3.87001 19.3482C3.3829 19.3482 2.94124 19.1498 2.62139 18.8301C2.30155 18.5103 2.10334 18.0686 2.10334 17.5815V14.6533C2.10334 14.2484 2.43172 13.9198 2.8368 13.9198C3.24172 13.9198 3.57025 14.2481 3.57025 14.6533V17.5812C3.57025 17.6632 3.60425 17.7383 3.65855 17.7927C3.71317 17.8474 3.78793 17.881 3.87027 17.881H6.79786L6.79789 17.8814ZM3.66067 9.34734C3.66067 9.75226 3.33229 10.0808 2.92721 10.0808C2.52229 10.0808 2.19376 9.75258 2.19376 9.34734L2.19392 6.41947C2.19392 5.93235 2.39227 5.4907 2.71197 5.17085C3.03181 4.851 3.47347 4.6528 3.96059 4.6528H6.88847C7.29339 4.6528 7.62192 4.98118 7.62192 5.38625C7.62192 5.79117 7.29354 6.11971 6.88847 6.11971L3.96071 6.11955C3.8787 6.11955 3.80361 6.15354 3.74899 6.20784C3.69437 6.26247 3.66069 6.33723 3.66069 6.41957L3.66067 9.34734ZM17.2936 6.11925C16.8886 6.11925 16.5601 5.79087 16.5601 5.3858C16.5601 4.98088 16.8885 4.65234 17.2936 4.65234H20.2214C20.7086 4.65234 21.1502 4.8507 21.4701 5.17039C21.7899 5.49024 21.9881 5.9319 21.9881 6.41901V9.34689C21.9881 9.75181 21.6597 10.0803 21.2547 10.0803C20.8497 10.0803 20.5212 9.75212 20.5212 9.34689L20.5214 6.41947C20.5214 6.33745 20.4874 6.26236 20.4331 6.2079C20.3784 6.15328 20.3037 6.1196 20.2215 6.1196H17.2936L17.2936 6.11925Z"
                           fill="#368796" />
                     </svg>
                  </label>
                  <input type="text" class="CommonSearch__input form-control" placeholder="Token Number">
               </form> -->
            </div>
            <div class="d-flex align-items-center gap-2 ms-auto">
               <p class="alert_animate_CashIssue fw-bold m-0 token text-nowrap">
                  {{patientPrescriptionCompanyDetails?.CardExpireMsg}}
               </p>
            </div>

            <div [class.disabled]="IsDisabled"
               class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-center">
               <button [class]="isCash ? 'btn selected' : 'btn'" (click)="changeBillType(1)">Self Pay</button>
               <button [class]="!isCash ? 'btn selected' : 'btn'" (click)="changeBillType(2)">Insured</button>
            </div>
         </div>

         <div *ngIf="!showNoRecFound">
            <div class="sticky_patient_info">
               <div class="patient_card d-flex justify-content-between border-0 rounded-bottom-3">
                  <div class="d-flex align-items-center w-100">
                     <div class="row mx-0 w-100 min_patient_card">
                        <div class="w-max-content bg-primary-50">
                           <div class="d-flex align-items-center gap-2">
                              <div class="patient-info d-flex align-items-center py-1">
                                 <div class="patient-photo me-3">
                                    <!-- <img src="assets/images/icons/female.svg" alt="" class="position-relative" style="height: 1.5rem;"> -->
                                    <img *ngIf="patientDetails?.GenderID == 1" src="assets/images/icons/male.svg"
                                       style="width: 1.5rem;" alt="" class="position-relative">
                                    <img *ngIf="patientDetails?.GenderID == 2" src="assets/images/icons/female.svg"
                                       style="width: 1.5rem;" alt="" class="position-relative">
                                    <!-- <p class="vip_label m-0 fw-bold d-flex align-items-center d-none">
                                          <svg class="me-1" xmlns="http://www.w3.org/2000/svg" width="7" height="7"
                                             viewBox="0 0 7 7" fill="none">
                                             <path
                                                d="M4.1362 0.995956L4.66853 2.06062C4.74026 2.20786 4.93281 2.34755 5.09515 2.37775L6.05788 2.53632C6.67327 2.63825 6.81673 3.08375 6.37501 3.52925L5.62371 4.28055C5.49912 4.40514 5.42739 4.65054 5.46891 4.82798L5.68411 5.75673C5.85401 6.48916 5.46136 6.77609 4.81577 6.391L3.91345 5.85489C3.75111 5.75673 3.47928 5.75673 3.31694 5.85489L2.41462 6.391C1.76903 6.77231 1.37638 6.48916 1.54628 5.75673L1.76148 4.82798C1.79545 4.64676 1.72372 4.40136 1.59913 4.27678L0.847829 3.52547C0.406108 3.08375 0.549573 2.63825 1.16496 2.53254L2.12769 2.37398C2.29003 2.34755 2.48258 2.20408 2.55431 2.05684L3.08664 0.99218C3.37735 0.41832 3.84549 0.41832 4.1362 0.995956Z"
                                                fill="#286571" />
                                          </svg>
                                          VIP
                                          <svg class="ms-1" xmlns="http://www.w3.org/2000/svg" width="7" height="7"
                                             viewBox="0 0 7 7" fill="none">
                                             <path
                                                d="M4.1362 0.995956L4.66853 2.06062C4.74026 2.20786 4.93281 2.34755 5.09515 2.37775L6.05788 2.53632C6.67327 2.63825 6.81673 3.08375 6.37501 3.52925L5.62371 4.28055C5.49912 4.40514 5.42739 4.65054 5.46891 4.82798L5.68411 5.75673C5.85401 6.48916 5.46136 6.77609 4.81577 6.391L3.91345 5.85489C3.75111 5.75673 3.47928 5.75673 3.31694 5.85489L2.41462 6.391C1.76903 6.77231 1.37638 6.48916 1.54628 5.75673L1.76148 4.82798C1.79545 4.64676 1.72372 4.40136 1.59913 4.27678L0.847829 3.52547C0.406108 3.08375 0.549573 2.63825 1.16496 2.53254L2.12769 2.37398C2.29003 2.34755 2.48258 2.20408 2.55431 2.05684L3.08664 0.99218C3.37735 0.41832 3.84549 0.41832 4.1362 0.995956Z"
                                                fill="#286571" />
                                          </svg>
                                       </p> -->
                                 </div>
                                 <div>
                                    <p class="value fs-7 fw-bold w-100">{{patientDetails?.PatientName}}</p>
                                    <div class="d-flex align-items-center gap-2">
                                       <p>{{patientDetails?.Gender}} | <span>{{patientDetails?.FullAge}}</span></p>
                                       <p><b>SSN</b> : <span>{{patientDetails?.SSN}}</span></p>
                                    </div>
                                    <div class="d-flex align-items-center justify-content-between"
                                       style="line-height: 1;">
                                       <p class="m-0 fs-8">{{patientDetails?.Nationality}} | Mobile
                                          :{{patientDetails?.MobileNo}}</p>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col p-0">
                           <div
                              class="row gx-2 bg-white patient_card_details p-2 py-1 row align-items-center mx-0 border-bottom-primary-200 h-100">
                              <div class="col-4">
                                 <p class="label m-0"> Doctor Name </p>
                                 <p>{{selectedDoctor}} </p>
                              </div>
                              <div class="col-3">
                                 <p class="label m-0"> Company Name </p>
                                 <p>{{patientPrescriptionCompanyDetails?.AgreementId == '' ? '' : patientPrescriptionCompanyDetails?.CompanyName}} </p>
                              </div>
                              <div class="col-1">
                                 <p class="label m-0"> Grade </p>
                                 <p>{{patientPrescriptionCompanyDetails?.AgreementId == '' ? '' : patientPrescriptionCompanyDetails?.Grade}} </p>
                              </div>
                              <div class="col-2">
                                 <p class="label m-0">Prescribed Date </p>
                                 <p class="">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16"
                                       fill="none">
                                       <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M13.8552 1.56632H13.131V1.39789C13.131 0.623158 12.5079 0 11.7331 0C10.9584 0 10.3352 0.623158 10.3352 1.39789V1.56632H9.24049V1.39789C9.24049 0.623158 8.61733 0 7.84259 0C7.06785 0 6.4447 0.623158 6.4447 1.39789V1.56632H5.34996V1.39789C5.34996 0.623158 4.7268 0 3.95206 0C3.17733 0 2.55417 0.623158 2.55417 1.39789V1.56632H1.82996C0.886801 1.56632 0.128906 2.32421 0.128906 3.26737V14.2989C0.128906 15.2421 0.886801 16 1.82996 16H13.8215C14.7647 16 15.5226 15.2421 15.5226 14.2989V3.28421C15.5563 2.34105 14.7984 1.56632 13.8552 1.56632ZM11.2279 1.41474C11.2279 1.12842 11.4636 0.909474 11.7331 0.909474C12.0194 0.909474 12.2384 1.14526 12.2384 1.41474V2.62737C12.2384 2.91368 12.0026 3.13263 11.7331 3.13263C11.4468 3.13263 11.2279 2.89684 11.2279 2.62737V1.41474ZM7.35417 1.41474C7.35417 1.12842 7.58996 0.909474 7.85943 0.909474C8.14575 0.909474 8.3647 1.14526 8.3647 1.41474V2.62737C8.3647 2.91368 8.12891 3.13263 7.85943 3.13263C7.57312 3.13263 7.35417 2.89684 7.35417 2.62737V1.41474ZM3.46364 1.41474C3.46364 1.12842 3.69943 0.909474 3.96891 0.909474C4.25522 0.909474 4.47417 1.14526 4.47417 1.41474V2.62737C4.47417 2.91368 4.23838 3.13263 3.96891 3.13263C3.68259 3.13263 3.46364 2.89684 3.46364 2.62737V1.41474ZM14.6805 14.3158C14.6805 14.7705 14.31 15.1411 13.8552 15.1411H1.86364C1.40891 15.1411 1.03838 14.7705 1.03838 14.3158V5.38947H14.6636V14.3158H14.6805ZM10.9753 13.3221C11.0932 13.44 11.2279 13.4905 11.3795 13.4905C11.5311 13.4905 11.6658 13.44 11.7837 13.3221L13.3332 11.7726C13.5521 11.5537 13.5521 11.1832 13.3332 10.9642C13.1142 10.7453 12.7437 10.7453 12.5248 10.9642L11.3795 12.1095L10.9584 11.6884C10.7395 11.4695 10.369 11.4695 10.15 11.6884C9.93107 11.9074 9.93107 12.2779 10.15 12.4968L10.9753 13.3221ZM4.92888 9.7179H3.19414C2.95835 9.7179 2.75625 9.51579 2.75625 9.28V7.52842C2.75625 7.29263 2.95835 7.09053 3.19414 7.09053H4.92888C5.16467 7.09053 5.36678 7.29263 5.36678 7.52842V9.28C5.36678 9.51579 5.16467 9.7179 4.92888 9.7179ZM7.0006 9.7179H8.73533C8.97112 9.7179 9.17323 9.51579 9.17323 9.28V7.52842C9.17323 7.29263 8.97112 7.09053 8.73533 7.09053H7.0006C6.76481 7.09053 6.5627 7.29263 6.5627 7.52842V9.28C6.54586 9.51579 6.74796 9.7179 7.0006 9.7179ZM12.5247 9.7179H10.79C10.5542 9.7179 10.3521 9.51579 10.3521 9.28V7.52842C10.3521 7.29263 10.5542 7.09053 10.79 7.09053H12.5247C12.7605 7.09053 12.9626 7.29263 12.9626 7.52842V9.28C12.9626 9.51579 12.7605 9.7179 12.5247 9.7179ZM3.19414 13.4569H4.92888C5.16467 13.4569 5.36678 13.2548 5.36678 13.019V11.2674C5.36678 11.0316 5.16467 10.8295 4.92888 10.8295H3.19414C2.95835 10.8295 2.75625 11.0316 2.75625 11.2674V13.019C2.75625 13.2548 2.95835 13.4569 3.19414 13.4569ZM8.73533 13.4569H7.0006C6.74796 13.4569 6.54586 13.2548 6.5627 13.019V11.2674C6.5627 11.0316 6.76481 10.8295 7.0006 10.8295H8.73533C8.97112 10.8295 9.17323 11.0316 9.17323 11.2674V13.019C9.17323 13.2548 8.97112 13.4569 8.73533 13.4569Z"
                                          fill="#7C8283" />
                                    </svg>
                                    {{selectedPrescDate}}

                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 17 16"
                                       fill="none">
                                       <path
                                          d="M11.1608 9.78246H8.17179C7.67948 9.78246 7.29267 9.39565 7.29267 8.90334V4.33191C7.29267 3.83961 7.67948 3.45279 8.17179 3.45279C8.6641 3.45279 9.05091 3.83961 9.05091 4.33191V8.02422H11.1608C11.6531 8.02422 12.0399 8.41104 12.0399 8.90334C12.0399 9.39565 11.6531 9.78246 11.1608 9.78246Z"
                                          fill="#7C8283" />
                                       <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M16.5234 8C16.5234 12.4132 12.9366 16 8.52344 16C4.11025 16 0.523438 12.4132 0.523438 8C0.523438 3.58681 4.11025 0 8.52344 0C12.9366 0 16.5234 3.58681 16.5234 8ZM14.7652 8C14.7652 4.55385 11.9696 1.75824 8.52344 1.75824C5.07728 1.75824 2.28168 4.55385 2.28168 8C2.28168 11.4462 5.07728 14.2418 8.52344 14.2418C11.9696 14.2418 14.7652 11.4462 14.7652 8Z"
                                          fill="#7C8283" />
                                    </svg>

                                    {{selectedPrescDateTime}}
                                 </p>
                              </div>
                              <div class="col-1">
                                 <p class="label m-0">Bill No</p>
                                 <p>{{selectedPrescription?.BillNo}}</p>
                              </div>
                              <div class="col-1 d-flex justify-content-end">
                                 <div data-bs-toggle="modal" data-bs-target="#quick_info" class="col-1"
                                    *ngIf="!showOtcEntry" (click)="showPatientInfo(patientDetails)" class="">
                                    <div
                                       class="info_img cursor-pointer custom_tooltip custom_tooltip_left w-max-content">
                                       <svg width="20" height="29" viewBox="0 0 28 29" fill="none"
                                          xmlns="http://www.w3.org/2000/svg">
                                          <rect y="0.422119" width="28" height="28" rx="14" fill="#69BAC9"></rect>
                                          <path fill-rule="evenodd" clip-rule="evenodd"
                                             d="M14.9692 9.57595C16.1161 9.57595 17.0461 8.64597 17.0461 7.49904C17.0461 6.3521 16.1161 5.42212 14.9692 5.42212C13.8223 5.42212 12.8923 6.3521 12.8923 7.49904C12.8923 8.64597 13.8223 9.57595 14.9692 9.57595ZM10.5385 11.6529C10.5385 11.2706 10.8484 10.9606 11.2308 10.9606H15.6615C16.0862 10.9606 16.4107 11.3392 16.3458 11.7589L14.6923 21.2067C14.5616 22.2031 15.0205 22.4566 15.6615 22.4566C16.242 22.4566 16.6942 22.0035 16.9856 21.5535C17.0767 21.4249 17.2109 21.36 17.3716 21.4249C17.4683 21.4898 17.5001 21.6505 17.4012 21.7791C16.6644 23.0042 15.193 23.4221 14 23.4221C12.0705 23.4221 11.1152 22.4245 11.3692 20.6529L12.5922 12.3452H11.2308C10.8485 12.3452 10.5385 12.0352 10.5385 11.6529Z"
                                             fill="#ECF6F8"></path>
                                       </svg>
                                       <div class="tooltip">
                                          <p>Patient Info</p>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div
                           class="col-12 d-flex align-items-center justify-content-between p-0 bg-white border-bottom-primary-200">
                           <div class="py-1 bg-white p-1 row mx-0 vital_block align-items-center rounded-bottom-3">
                              <div class="w-max-content border-end px-2">
                                 <div class="d-flex align-items-center gap-2 bp-s">
                                    <svg width="32" height="32" viewBox="0 0 39 39" fill="none"
                                       xmlns="http://www.w3.org/2000/svg" class="vital_icon">
                                       <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                       <path
                                          d="M27.1542 20.7441C26.9619 20.8364 26.7522 20.8848 26.5397 20.8862C26.3263 20.8845 26.1158 20.8345 25.9233 20.74V24.3524C25.9233 24.6364 25.8129 24.9088 25.6164 25.1096C25.42 25.3104 25.1534 25.4232 24.8755 25.4232H22.3084C22.0306 25.4232 21.764 25.3104 21.5675 25.1096C21.3709 24.9088 21.2605 24.6364 21.2605 24.3524V21.3495C20.8808 21.736 20.4712 22.0907 20.0356 22.41V24.3564C20.0356 24.9728 20.275 25.5638 20.7011 26C21.1272 26.4362 21.7053 26.6817 22.3084 26.6828H24.8755C25.4795 26.6828 26.0589 26.4378 26.4861 26.0016C26.9134 25.5654 27.1536 24.9736 27.1542 24.3564V20.7441Z"
                                          fill="#368796"></path>
                                       <path
                                          d="M26.5389 15.2294C25.5883 15.2294 24.8169 16.6333 24.8169 17.9987C24.8169 19.364 25.5884 20.581 26.5389 20.581C27.4894 20.581 28.2628 19.3619 28.2628 17.9987C28.2629 16.6353 27.4913 15.2294 26.5389 15.2294Z"
                                          fill="#368796"></path>
                                       <path
                                          d="M17.0413 13.5555C17.0413 13.5555 15.7329 11.4221 13.6272 11.4221C13.0211 11.4333 12.4272 11.5988 11.8993 11.9037C9.62054 13.137 9.85315 16.6986 11.7959 19.6243C12.638 18.9922 13.673 18.6875 14.7152 18.7648C15.7574 18.8419 16.7384 19.2961 17.4826 20.0457C18.2265 20.7951 18.6849 21.7912 18.7752 22.8548C23.5297 20.2927 25.4702 13.6713 22.1815 11.9037C21.6533 11.6027 21.0602 11.4407 20.4555 11.4323C18.3497 11.4221 17.0414 13.5555 17.0414 13.5555H17.0413Z"
                                          fill="#368796"></path>
                                       <path
                                          d="M14.3936 19.0392C13.3056 19.0392 12.2622 19.4808 11.4929 20.2668C10.7237 21.0529 10.2915 22.119 10.2915 23.2306C10.2915 24.3423 10.7237 25.4083 11.4929 26.1945C12.2622 26.9805 13.3056 27.4221 14.3936 27.4221C15.4815 27.4221 16.5248 26.9805 17.2942 26.1945C18.0634 25.4083 18.4956 24.3423 18.4956 23.2306C18.4956 22.119 18.0634 21.0529 17.2942 20.2668C16.5248 19.4808 15.4815 19.0392 14.3936 19.0392ZM14.3936 26.3756C13.5773 26.375 12.7948 26.0432 12.2179 25.4532C11.6411 24.8631 11.3172 24.0631 11.3175 23.229C11.3179 22.3951 11.6423 21.5954 12.2197 21.0058C12.7971 20.4162 13.58 20.0852 14.3962 20.0853C15.2125 20.0855 15.9952 20.417 16.5723 21.0067C17.1494 21.5965 17.4736 22.3964 17.4736 23.2305C17.4726 24.0647 17.1476 24.8643 16.5702 25.454C15.9928 26.0435 15.21 26.375 14.3936 26.3756H14.3936Z"
                                          fill="#368796"></path>
                                       <path
                                          d="M17.1755 23.2302C17.1755 22.4758 16.8822 21.7523 16.3601 21.2188C15.8381 20.6854 15.13 20.3857 14.3917 20.3857C13.6534 20.3857 12.9454 20.6853 12.4233 21.2188C11.9012 21.7522 11.6079 22.4758 11.6079 23.2302C11.6079 23.9846 11.9013 24.708 12.4233 25.2415C12.9454 25.775 13.6534 26.0746 14.3917 26.0746C15.13 26.0746 15.838 25.775 16.3601 25.2415C16.8822 24.7081 17.1755 23.9846 17.1755 23.2302ZM14.3918 24.0428H14.3917C14.1076 24.0697 13.8311 23.9396 13.6661 23.7017C13.5014 23.4636 13.4732 23.1537 13.5926 22.8889C13.7119 22.624 13.9604 22.4443 14.2446 22.4175V21.3061C14.2441 21.2659 14.2594 21.227 14.287 21.1984C14.3147 21.1698 14.3524 21.1538 14.3917 21.1538C14.4316 21.1532 14.47 21.1689 14.4985 21.1975C14.5269 21.2262 14.5429 21.2653 14.5429 21.3061V22.4256C14.7388 22.4641 14.9133 22.5765 15.032 22.7405L15.5272 22.4946H15.5271C15.6007 22.458 15.6895 22.4888 15.726 22.5637C15.7603 22.6396 15.7296 22.7296 15.6563 22.7668L15.1652 23.0147C15.185 23.0849 15.1957 23.1573 15.1971 23.2301C15.1986 23.4481 15.1144 23.6577 14.9634 23.8116C14.8123 23.9657 14.6071 24.0511 14.3937 24.0489L14.3918 24.0428Z"
                                          fill="#368796"></path>
                                       <path
                                          d="M14.8973 23.2298C14.8973 23.5136 14.672 23.7438 14.3942 23.7438C14.1164 23.7438 13.8911 23.5136 13.8911 23.2298C13.8911 22.9459 14.1164 22.7157 14.3942 22.7157C14.672 22.7157 14.8973 22.9459 14.8973 23.2298Z"
                                          fill="#368796"></path>
                                    </svg>
                                    <div>
                                       <p class="m-0 fs-8 text-nowrap fw-bold">BP</p>
                                       <p class="m-0 fs-8 text-nowrap">-</p>
                                    </div>
                                 </div>
                              </div>
                              <div class="w-max-content border-end px-2">
                                 <div class="d-flex align-items-center gap-2 bp-s">
                                    <svg width="32" height="32" viewBox="0 0 39 39" fill="none"
                                       xmlns="http://www.w3.org/2000/svg" class="vital_icon">
                                       <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                       <path
                                          d="M22.0465 21.9345C21.7733 21.6706 21.5 21.4787 21.177 21.3109V12.2689C21.177 11.2616 20.3075 10.4221 19.2642 10.4221C18.2208 10.4221 17.3513 11.2616 17.3513 12.2689V21.3109C17.0533 21.4789 16.7551 21.6947 16.4818 21.9345C14.9416 23.4214 14.9416 25.8198 16.4818 27.3069C18.0219 28.7939 20.5061 28.7939 22.0463 27.3069C23.5868 25.8198 23.5868 23.4213 22.0464 21.9345H22.0465ZM19.1401 27.139C17.7737 27.139 16.6559 26.0598 16.6559 24.7406C16.6559 24.5726 16.8049 24.4528 16.954 24.4528C17.103 24.4528 17.252 24.5967 17.252 24.7406C17.252 25.724 18.0966 26.5394 19.1151 26.5394C19.2891 26.5394 19.4132 26.6833 19.4132 26.8272C19.4133 26.971 19.3141 27.139 19.1401 27.139H19.1401ZM20.4071 13.1563H19.2643V14.6433H20.4071V15.1229H19.2643V16.6099H20.4071V17.0895H19.2643V18.5765H20.4071V19.0561H19.2643V20.0873H18.2955V12.2206C18.2955 11.7168 18.7425 11.2852 19.2643 11.2852V12.6524H20.4071V13.1563Z"
                                          fill="#368796"></path>
                                    </svg>
                                    <div>
                                       <p class="m-0 fs-8 text-nowrap fw-bold">Temp</p>
                                       <p class="m-0 fs-8 text-nowrap">-</p>
                                    </div>
                                 </div>
                              </div>
                              <div class="w-max-content border-end px-2">
                                 <div class="d-flex align-items-center gap-2 allergy"
                                    *ngIf="patientDetails?.IsAllergy == 0">
                                    <div class="d-flex align-items-center gap-2 allergy"
                                       *ngIf="patientDetails?.IsAllergy == 0">
                                       <svg width="32" height="32" viewBox="0 0 39 39" fill="none"
                                          xmlns="http://www.w3.org/2000/svg">
                                          <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                          <path fill-rule="evenodd" clip-rule="evenodd"
                                             d="M28.2642 19.9221C28.2642 24.8927 24.2347 28.9221 19.2642 28.9221C14.2936 28.9221 10.2642 24.8927 10.2642 19.9221C10.2642 14.9516 14.2936 10.9221 19.2642 10.9221C24.2347 10.9221 28.2642 14.9516 28.2642 19.9221ZM24.8999 25.8535C23.4326 27.2481 21.4483 28.1039 19.2642 28.1039C14.7455 28.1039 11.0823 24.4408 11.0823 19.9221C11.0823 17.7903 11.8976 15.8489 13.2335 14.3928C13.252 14.457 13.2866 14.5176 13.3372 14.5682L16.963 18.194L15.4228 19.7455C15.3171 19.8521 15.2575 19.996 15.2568 20.1461V23.1164L13.7059 24.6674C13.6523 24.7206 13.6097 24.7839 13.5806 24.8536C13.5516 24.9233 13.5366 24.9981 13.5366 25.0737C13.5366 25.1492 13.5516 25.2241 13.5806 25.2938C13.6097 25.3635 13.6523 25.4268 13.7059 25.48C13.7591 25.5337 13.8224 25.5763 13.8921 25.6053C13.9619 25.6344 14.0367 25.6493 14.1122 25.6493C14.1878 25.6493 14.2626 25.6344 14.3323 25.6053C14.4021 25.5763 14.4654 25.5337 14.5186 25.48L16.0695 23.9291H19.0398C19.1899 23.9285 19.3338 23.8688 19.4404 23.7631L20.9919 22.2229L24.5141 25.7452C24.6187 25.8498 24.7659 25.8859 24.8999 25.8535ZM25.2011 25.552C25.2333 25.4181 25.1972 25.2711 25.0927 25.1666L21.5725 21.6465L24.1505 19.0874C24.417 18.8216 24.6284 18.5058 24.7726 18.1581C24.9169 17.8105 24.9912 17.4378 24.9912 17.0614C24.9912 16.685 24.9169 16.3123 24.7726 15.9647C24.6284 15.617 24.417 15.3013 24.1505 15.0355C23.8847 14.769 23.5689 14.5575 23.2212 14.4133C22.8736 14.269 22.5009 14.1948 22.1245 14.1948C21.7481 14.1948 21.3754 14.269 21.0278 14.4133C20.6801 14.5575 20.3644 14.769 20.0985 15.0355L17.5394 17.6134L13.9157 13.9897C13.8652 13.9392 13.8048 13.9046 13.7407 13.8861C15.1962 12.5534 17.1352 11.7403 19.2642 11.7403C23.7829 11.7403 27.446 15.4034 27.446 19.9221C27.446 22.1034 26.5924 24.0852 25.2011 25.552ZM16.4015 20.3808L17.7721 19.0032L18.5711 19.8021L17.712 20.6612C17.6584 20.7144 17.6158 20.7777 17.5868 20.8475C17.5577 20.9172 17.5427 20.992 17.5427 21.0676C17.5427 21.1431 17.5577 21.2179 17.5868 21.2877C17.6158 21.3574 17.6584 21.4207 17.712 21.4739C17.7652 21.5275 17.8285 21.5701 17.8983 21.5992C17.968 21.6282 18.0428 21.6432 18.1184 21.6432C18.1939 21.6432 18.2687 21.6282 18.3385 21.5992C18.4082 21.5701 18.4715 21.5275 18.5247 21.4739L19.3838 20.6148L20.1828 21.4138L18.8051 22.7845H16.4015V20.3808ZM18.3492 18.4232L19.1496 19.2236L21.7182 16.6551C21.8259 16.5473 21.9721 16.4868 22.1245 16.4868C22.2769 16.4868 22.4231 16.5473 22.5308 16.6551C22.6386 16.7628 22.6992 16.909 22.6992 17.0614C22.6992 17.2138 22.6386 17.36 22.5308 17.4678L19.9623 20.0363L20.7628 20.8367L23.3378 18.2747C23.6411 17.9492 23.8062 17.5188 23.7983 17.074C23.7905 16.6292 23.6103 16.2048 23.2957 15.8902C22.9812 15.5756 22.5568 15.3954 22.112 15.3876C21.6672 15.3797 21.2367 15.5449 20.9112 15.8481L18.3492 18.4232Z"
                                             fill="#368796"></path>
                                       </svg>
                                       <div>
                                          <p class="m-0 fs-8 text-nowrap fw-bold">Allergy</p>
                                          <p class="m-0 fs-8 text-nowrap">{{patientDetails?.IsAllergy === 1 ?
                                             'Yes' : 'NKA'}}</p>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="position-relative">
                                    <div class="PatientsList w-100 d-flex align-items-center gap-2 allergy"
                                       id="divAllergy" *ngIf="patientDetails?.IsAllergy == 1">
                                       <div class="pb-0 clr-main-2 hoverAllergyLab d-inline-block"
                                          id="divAllergyTooltip">
                                          <div class="d-flex align-items-center gap-2 allergy active">
                                             <svg width="32" height="32" viewBox="0 0 39 39" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1" />
                                                <path fill-rule="evenodd" clip-rule="evenodd"
                                                   d="M28.2642 19.9221C28.2642 24.8927 24.2347 28.9221 19.2642 28.9221C14.2936 28.9221 10.2642 24.8927 10.2642 19.9221C10.2642 14.9516 14.2936 10.9221 19.2642 10.9221C24.2347 10.9221 28.2642 14.9516 28.2642 19.9221ZM24.8999 25.8535C23.4326 27.2481 21.4483 28.1039 19.2642 28.1039C14.7455 28.1039 11.0823 24.4408 11.0823 19.9221C11.0823 17.7903 11.8976 15.8489 13.2335 14.3928C13.252 14.457 13.2866 14.5176 13.3372 14.5682L16.963 18.194L15.4228 19.7455C15.3171 19.8521 15.2575 19.996 15.2568 20.1461V23.1164L13.7059 24.6674C13.6523 24.7206 13.6097 24.7839 13.5806 24.8536C13.5516 24.9233 13.5366 24.9981 13.5366 25.0737C13.5366 25.1492 13.5516 25.2241 13.5806 25.2938C13.6097 25.3635 13.6523 25.4268 13.7059 25.48C13.7591 25.5337 13.8224 25.5763 13.8921 25.6053C13.9619 25.6344 14.0367 25.6493 14.1122 25.6493C14.1878 25.6493 14.2626 25.6344 14.3323 25.6053C14.4021 25.5763 14.4654 25.5337 14.5186 25.48L16.0695 23.9291H19.0398C19.1899 23.9285 19.3338 23.8688 19.4404 23.7631L20.9919 22.2229L24.5141 25.7452C24.6187 25.8498 24.7659 25.8859 24.8999 25.8535ZM25.2011 25.552C25.2333 25.4181 25.1972 25.2711 25.0927 25.1666L21.5725 21.6465L24.1505 19.0874C24.417 18.8216 24.6284 18.5058 24.7726 18.1581C24.9169 17.8105 24.9912 17.4378 24.9912 17.0614C24.9912 16.685 24.9169 16.3123 24.7726 15.9647C24.6284 15.617 24.417 15.3013 24.1505 15.0355C23.8847 14.769 23.5689 14.5575 23.2212 14.4133C22.8736 14.269 22.5009 14.1948 22.1245 14.1948C21.7481 14.1948 21.3754 14.269 21.0278 14.4133C20.6801 14.5575 20.3644 14.769 20.0985 15.0355L17.5394 17.6134L13.9157 13.9897C13.8652 13.9392 13.8048 13.9046 13.7407 13.8861C15.1962 12.5534 17.1352 11.7403 19.2642 11.7403C23.7829 11.7403 27.446 15.4034 27.446 19.9221C27.446 22.1034 26.5924 24.0852 25.2011 25.552ZM16.4015 20.3808L17.7721 19.0032L18.5711 19.8021L17.712 20.6612C17.6584 20.7144 17.6158 20.7777 17.5868 20.8475C17.5577 20.9172 17.5427 20.992 17.5427 21.0676C17.5427 21.1431 17.5577 21.2179 17.5868 21.2877C17.6158 21.3574 17.6584 21.4207 17.712 21.4739C17.7652 21.5275 17.8285 21.5701 17.8983 21.5992C17.968 21.6282 18.0428 21.6432 18.1184 21.6432C18.1939 21.6432 18.2687 21.6282 18.3385 21.5992C18.4082 21.5701 18.4715 21.5275 18.5247 21.4739L19.3838 20.6148L20.1828 21.4138L18.8051 22.7845H16.4015V20.3808ZM18.3492 18.4232L19.1496 19.2236L21.7182 16.6551C21.8259 16.5473 21.9721 16.4868 22.1245 16.4868C22.2769 16.4868 22.4231 16.5473 22.5308 16.6551C22.6386 16.7628 22.6992 16.909 22.6992 17.0614C22.6992 17.2138 22.6386 17.36 22.5308 17.4678L19.9623 20.0363L20.7628 20.8367L23.3378 18.2747C23.6411 17.9492 23.8062 17.5188 23.7983 17.074C23.7905 16.6292 23.6103 16.2048 23.2957 15.8902C22.9812 15.5756 22.5568 15.3954 22.112 15.3876C21.6672 15.3797 21.2367 15.5449 20.9112 15.8481L18.3492 18.4232Z"
                                                   fill="#368796" />
                                             </svg>
                                             <div class="">
                                                <p class="m-0 fs-8 text-nowrap fw-bold">Allergy</p>
                                                <p class="m-0 fs-8 text-nowrap">{{patientDetails?.IsAllergy
                                                   === 1 ? 'Yes' :
                                                   'NKA'}}</p>
                                             </div>
                                          </div>

                                          <div class="viewPatientsAllergiesModalLab" data-bs-backdrop="static"
                                             tabindex="-1" id="viewAllergies" tabindex="-1">
                                             <div class="modal-dialog modal-dialog-scrollable modal-l ">
                                                <div class="modal-content p-3">
                                                   <div class="modal-header">
                                                      <h6 class="modal-title" translate>Allergies</h6>
                                                   </div>
                                                   <div class="modal-body">
                                                      <div
                                                         class="d-flex w-100 align-items-center justify-content-between">
                                                         <div class="d-flex w-100 mt-2">
                                                            <div [innerHtml]="patientDetails?.AllergyData">
                                                            </div>
                                                         </div>
                                                         <div class="modal-footer">
                                                         </div>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>

                               
                              </div>
                              <div class="w-max-content border-end px-2">
                                 <div class="d-flex align-items-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 39 38"
                                       fill="none" class="vital_icon">
                                       <circle cx="19.5" cy="19" r="19" fill="#DAEEF1"></circle>
                                       <path
                                          d="M26.5002 28V10C26.5002 9.44883 26.0514 9 25.5002 9H13.5C12.9488 9 12.5 9.44883 12.5 10V28C12.5 28.5512 12.9488 29 13.5 29H25.5002C26.0514 29 26.5002 28.5512 26.5002 28ZM18.7954 26.7087L16.7954 24.7087C16.5985 24.5118 16.2442 23.8465 16.7954 23.2953C17.1851 22.9055 17.819 22.9055 18.2088 23.2953L18.5001 23.5866V14.4135L18.2048 14.7087C17.8151 15.0985 17.1812 15.0985 16.7914 14.7087C16.1694 14.0867 16.5946 13.4883 16.7914 13.2953L18.7914 11.2953C18.9804 11.1103 19.2324 11.004 19.5001 11.004C19.7639 11.004 20.0198 11.1103 20.2088 11.2953L22.2088 13.2953C22.5985 13.6851 22.5985 14.319 22.2088 14.7087C21.819 15.0985 21.1851 15.0985 20.7954 14.7087L20.504 14.4174V23.5866L20.7954 23.2952C21.1851 22.9055 21.819 22.9055 22.2088 23.2952C22.5985 23.685 22.5985 24.3189 22.2088 24.7086L20.2088 26.7086C19.8151 27.0984 19.1851 27.0984 18.7954 26.7087Z"
                                          fill="#368796"></path>
                                    </svg>
                                    <div>
                                       <p class="m-0 fs-8 text-nowrap fw-bold">Height</p>
                                       <p class="m-0 fs-8 text-nowrap">{{patientDetails?.Height}} Cm(s)</p>
                                    </div>
                                 </div>
                              </div>
                              <div class="w-max-content border-end px-2">
                                 <div class="d-flex align-items-center gap-2 cursor-pointer" (click)="getHight()">
                                    <svg width="32" height="32" viewBox="0 0 19 21" fill="none"
                                       xmlns="http://www.w3.org/2000/svg" class="vital_icon">
                                       <g clip-path="url(#clip0_9441_21695)">
                                          <path
                                             d="M9.18476 18.8205C14.0279 18.8205 17.954 14.8944 17.954 10.0513C17.954 5.20816 14.0279 1.28204 9.18476 1.28204C4.34165 1.28204 0.415527 5.20816 0.415527 10.0513C0.415527 14.8944 4.34165 18.8205 9.18476 18.8205Z"
                                             fill="#DAEEF1"></path>
                                          <path fill-rule="evenodd" clip-rule="evenodd"
                                             d="M5.9054 4.55127H12.4644C12.8993 4.55127 13.3164 4.72403 13.6238 5.03157C13.9314 5.33903 14.1041 5.7561 14.1041 6.19104V13.9115C14.1041 14.3464 13.9314 14.7635 13.6238 15.071C13.3164 15.3785 12.8993 15.5513 12.4644 15.5513H5.9054C5.47046 15.5513 5.05339 15.3785 4.74594 15.071C4.43838 14.7635 4.26562 14.3464 4.26562 13.9115V6.19104C4.26562 5.7561 4.43838 5.33903 4.74594 5.03157C5.05339 4.72403 5.47046 4.55127 5.9054 4.55127ZM10.759 9.67144L12.2922 8.57287C12.3667 8.51979 12.4212 8.44329 12.4472 8.35567C12.4732 8.26806 12.4692 8.17417 12.4357 8.08909C12.1196 7.18439 11.4408 6.45229 10.5624 6.06888C9.68406 5.68548 8.68576 5.68548 7.80741 6.06888C6.92906 6.45229 6.25019 7.18439 5.93416 8.08909C5.90066 8.17417 5.89659 8.26806 5.92261 8.35567C5.94857 8.44329 6.00313 8.51979 6.0776 8.57287L7.61892 9.67144L8.95118 10.6226C9.02065 10.672 9.10375 10.6985 9.189 10.6985C9.2742 10.6985 9.3573 10.672 9.42671 10.6226L10.759 9.67144ZM10.5787 8.79425L11.542 8.10146C11.2606 7.50103 10.7609 7.03061 10.1445 6.78619C9.52814 6.54177 8.84163 6.54177 8.2253 6.78619C7.60891 7.03056 7.10913 7.50097 6.82775 8.10146L7.79113 8.79425C8.06508 8.53608 8.40591 8.36002 8.77496 8.28593V7.83086C8.77496 7.6844 8.85312 7.54904 8.97995 7.47584C9.10672 7.40263 9.26303 7.40263 9.38986 7.47584C9.5167 7.54904 9.59485 7.68434 9.59485 7.83086V8.28593C9.96384 8.36002 10.3047 8.53608 10.5787 8.79425ZM9.18483 9.07013C8.93408 9.07013 8.68884 9.14388 8.47967 9.28204L9.18483 9.78628L9.88998 9.28204C9.68076 9.14383 9.43557 9.07013 9.18483 9.07013ZM12.9351 11.1235H12.2293V14.6935H12.9351V11.1235ZM8.37558 11.1235H9.36909L10.1198 13.5785H10.1288L10.8391 11.1235H11.8326V14.6935H11.1718V12.1635H11.1628L10.3761 14.6935H9.83213L9.04542 12.1885H9.03643V14.6935H8.37558V11.1235ZM6.85564 12.5685H6.14086V11.7335H6.8017C6.86463 11.7335 6.92457 11.7401 6.98152 11.7535C7.04146 11.7635 7.0939 11.7835 7.13886 11.8135C7.18382 11.8435 7.21978 11.8851 7.24675 11.9385C7.27373 11.9918 7.28721 12.0601 7.28721 12.1435C7.28721 12.2935 7.24675 12.4018 7.16583 12.4685C7.08491 12.5351 6.98152 12.5685 6.85564 12.5685ZM6.94555 11.1235H5.43506V14.6935H6.99051C7.13436 14.6935 7.27373 14.6735 7.40859 14.6335C7.54645 14.5935 7.66783 14.5318 7.77273 14.4485C7.88062 14.3651 7.96604 14.2585 8.02897 14.1285C8.09191 13.9951 8.12338 13.8385 8.12338 13.6585C8.12338 13.4351 8.07393 13.2451 7.97503 13.0885C7.87912 12.9285 7.73227 12.8168 7.53447 12.7535C7.67832 12.6768 7.78622 12.5785 7.85814 12.4585C7.93307 12.3385 7.97053 12.1885 7.97053 12.0085C7.97053 11.8418 7.94506 11.7018 7.89411 11.5885C7.84616 11.4751 7.77722 11.3851 7.68731 11.3185C7.5974 11.2485 7.48951 11.1985 7.36364 11.1685C7.23776 11.1385 7.0984 11.1235 6.94555 11.1235ZM6.8961 14.0835H6.14086V13.1035H6.90959C7.06244 13.1035 7.18531 13.1435 7.27822 13.2235C7.37113 13.3001 7.41758 13.4301 7.41758 13.6135C7.41758 13.7068 7.4026 13.7835 7.37263 13.8435C7.34565 13.9035 7.30819 13.9518 7.26024 13.9885C7.21229 14.0218 7.15684 14.0468 7.0939 14.0635C7.03097 14.0768 6.96503 14.0835 6.8961 14.0835Z"
                                             fill="#368796"></path>
                                       </g>
                                       <defs>
                                          <clipPath id="clip0_9441_21695">
                                             <rect width="18" height="20" fill="white"
                                                transform="translate(0.18457 0.0512695)"></rect>
                                          </clipPath>
                                       </defs>
                                    </svg>
                                    <div>
                                       <p class="m-0 fs-8 text-nowrap fw-bold">Weight</p>
                                       <p class="m-0 fs-8 text-nowrap">{{patientDetails?.Weight}} Kg(s)</p>
                                    </div>
                                 </div>
                              </div>
                              <div class="w-max-content border-end px-2">
                                 <div class="d-flex align-items-center gap-2">
                                    <svg width="32" height="32" viewBox="0 0 39 39" fill="none"
                                       xmlns="http://www.w3.org/2000/svg" class="vital_icon">
                                       <circle cx="19.2642" cy="19.9221" r="19" fill="#DAEEF1"></circle>
                                       <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M22.5058 26.604C25.432 26.604 27.8061 23.9133 27.8061 20.5934C27.8061 17.9453 24.4321 13.0697 23.0696 11.2088C22.7879 10.8266 22.2241 10.8266 21.9463 11.2088C21.2976 12.0928 20.1935 13.6561 19.2207 15.3432C20.7224 17.706 22.3013 20.6398 22.3013 22.57C22.3013 24.0021 21.8998 25.3339 21.2204 26.4264C21.6334 26.5422 22.0619 26.604 22.5058 26.604ZM15.7262 12.655C16.0206 12.253 16.6186 12.253 16.913 12.655H16.9136C18.3539 14.6217 21.9176 19.771 21.9176 22.5702C21.9176 26.0781 19.4114 28.922 16.3199 28.922C13.2283 28.922 10.7222 26.0782 10.7222 22.5702C10.7222 19.7711 14.2858 14.622 15.7262 12.655ZM12.073 22.5698C12.073 25.3276 13.9781 27.5709 16.3196 27.5709L16.3194 27.5707C16.4262 27.5707 16.5125 27.4844 16.5123 27.3776C16.5123 27.271 16.4261 27.1847 16.3193 27.1847C14.1906 27.1847 12.4589 25.1144 12.4589 22.5698C12.4589 22.4632 12.3727 22.3768 12.2659 22.3768C12.1593 22.3768 12.073 22.463 12.073 22.5698Z"
                                          fill="#368796"></path>
                                    </svg>
                                    <div>
                                       <p class="m-0 fs-8 text-nowrap fw-bold"> Blood Group</p>
                                       <p class="fs-8">{{patientDetails?.BloodGroup}}</p>
                                    </div>
                                 </div>
                              </div>
                              <div class="w-max-content border-end px-2" (click)="navigateToResults()">
                                 <div class="d-flex align-items-center gap-2 blood cursor-pointer">
                                    <svg width="38" height="38" viewBox="0 0 38 38" fill="none"
                                       xmlns="http://www.w3.org/2000/svg" class="vital_icon">
                                       <circle cx="19" cy="19" r="19" fill="#DAEEF1"></circle>
                                       <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M12.5 9C11.6716 9 11 9.67157 11 10.5V27.5C11 28.3284 11.6716 29 12.5 29H25.5C26.3284 29 27 28.3284 27 27.5V14C27 13.1716 26.3284 12.5 25.5 12.5H13.75C13.3358 12.5 13 12.1642 13 11.75C13 11.3358 13.3358 11 13.75 11H26L26.0283 10.9996C26.5675 10.9846 27 10.5428 27 10C27 9.45719 26.5675 9.01499 26.0283 9H12.5ZM19.1622 17.9603H19.5344L19.7304 17.7753C19.7723 17.7357 19.8318 17.7158 19.8912 17.7224C19.9507 17.7291 20.0014 17.7621 20.0344 17.8128L20.1357 17.9691L20.6181 17.1916C20.6577 17.1299 20.726 17.0925 20.8009 17.0991C20.8736 17.1035 20.9397 17.1498 20.9683 17.2158L21.411 18.2181L21.4859 18.0683C21.519 18.0022 21.5872 17.9603 21.6621 17.9603H22.3185C22.3207 17.9075 22.3207 17.8546 22.3185 17.8018C22.3163 17.7401 22.3097 17.6806 22.3009 17.6211C22.2921 17.5617 22.2811 17.5022 22.2657 17.4427C22.1864 17.1167 22.0212 16.8084 21.7679 16.5551C21.6996 16.4868 21.6247 16.4229 21.5498 16.3678C21.5396 16.361 21.5296 16.3538 21.5198 16.3467C21.5043 16.3355 21.4889 16.3244 21.4727 16.315C21.4509 16.3 21.4282 16.2866 21.4057 16.2734L21.4056 16.2734C21.3918 16.2653 21.3782 16.2572 21.3648 16.2489C21.3295 16.2291 21.2921 16.2092 21.2569 16.1916C20.6071 15.8789 19.8119 15.9559 19.2348 16.4251C19.2226 16.435 19.2105 16.4455 19.1984 16.4559C19.1863 16.4664 19.1741 16.4769 19.162 16.4868C19.1378 16.5088 19.1136 16.5308 19.0916 16.5529L19.0453 16.5991L18.9969 16.6432L18.9066 16.5529C18.5409 16.1872 18.0629 16.0044 17.5806 16H17.5673C17.0828 16 16.596 16.185 16.2281 16.5529C16.2061 16.5749 16.1819 16.5991 16.1621 16.6233C16.14 16.6476 16.1202 16.6718 16.1004 16.696C16.0409 16.7709 15.9859 16.848 15.9396 16.9295C15.9088 16.9824 15.8801 17.0374 15.8537 17.0947C15.737 17.3458 15.6797 17.6189 15.6797 17.8921V17.8943C15.6797 18.0088 15.6907 18.1255 15.7105 18.2401L15.7171 18.2709C15.7876 18.6234 15.9594 18.9604 16.2303 19.2313L18.9968 22L21.7655 19.2314C21.8337 19.1631 21.8976 19.0882 21.9527 19.0133C21.9901 18.9627 22.0254 18.9098 22.0562 18.8569C22.087 18.8041 22.1157 18.749 22.1421 18.6917C22.1928 18.5838 22.2302 18.4715 22.2589 18.3591H21.7787L21.5694 18.771C21.5364 18.8371 21.4681 18.8789 21.3932 18.8789H21.3888C21.3117 18.8767 21.2434 18.8305 21.2126 18.76L20.7522 17.7204L20.3029 18.445C20.2677 18.5023 20.2038 18.5375 20.1355 18.5397H20.1333C20.065 18.5397 20.0034 18.5045 19.9659 18.4494L19.8249 18.2291L19.7456 18.304C19.7082 18.3393 19.6597 18.3591 19.6091 18.3591H19.1575C19.0474 18.3591 18.9593 18.271 18.9593 18.1609C18.9593 18.0507 19.052 17.9603 19.1622 17.9603ZM13.7734 24.2773C13.7734 24.0012 13.9973 23.7773 14.2734 23.7773H23.7275C24.0037 23.7773 24.2275 24.0012 24.2275 24.2773C24.2275 24.5535 24.0037 24.7773 23.7275 24.7773H14.2734C13.9973 24.7773 13.7734 24.5535 13.7734 24.2773ZM14.2734 25.7891C13.9973 25.7891 13.7734 26.0129 13.7734 26.2891C13.7734 26.5652 13.9973 26.7891 14.2734 26.7891H20.8477C21.1238 26.7891 21.3477 26.5652 21.3477 26.2891C21.3477 26.0129 21.1238 25.7891 20.8477 25.7891H14.2734Z"
                                          fill="#3D8496"></path>
                                    </svg>
                                    <div>
                                       <p class="m-0 fs-8 text-nowrap fw-bold">Results</p>
                                       <p class="m-0 fs-8 text-nowrap"></p>
                                    </div>
                                 </div>
                              </div>
                              
                           </div>
                        </div>
                        <div class="p-1 d-flex justify-content-between">
                           <p class="m-0 fs-6 text-wrap"><span class="fs-6 fw-bold">Diagnosis:</span>
                              {{diagStr}}</p>

                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <div class="mt-2" *ngIf="!showNoRecFound">
         

         <div class="billsummary_height mt-2">
            <div class="row g-2">
               <div class="col">
                  <div class="prescribeditems border-primary-200 rounded-2">
                     <div
                        class="d-flex align-items-center justify-content-between stickhead rounded-top p-2 position-relative"
                        *ngIf="patientDetails != undefined && patientDetails != ''">
                        <h5 class="card-heading clr-primary-600 m-0">Prescribed Items</h5>

                        <div class="d-flex align-items-center gap-2 scandrug">
                           <div class="clinical_toggle toggle__switch switch-sm d-inline-flex">
                              <button class="btn selected">System</button>
                              <button class="btn">Manual</button>
                           </div>
                           <div>
                              <button class="btn btn-danger-outline" [disabled]="!anySelectedPrescriptions()" (click)="deleteAllItemFromPresc()">Bulk Delete</button>
                           </div>
                           <div>
                              <!-- <button class="btn btn-danger-outline" (click)="openScanBarcodesModal()">Scan Barcode</button> -->
                           </div>
                        </div>

                        <div class="d-flex align-items-center gap-2">
                           <!-- <label for="" class="form-label fw-bold clr-primary-600 m-0">Scan Drug </label>
                           <form class="CommanSearch__form px-3 height-unset" (click)="openScanBarcodesModal()" [class.scanicon_blink]="checkAllDrugBarcodesScanned()">
                              <label for="" class="CommonSearch__label">
                                 <svg width="30" height="30" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                       d="M20.4312 14.6532C20.4312 14.2482 20.7596 13.9197 21.1647 13.9197C21.5696 13.9197 21.8982 14.2479 21.8982 14.6532V17.581C21.8982 18.0682 21.6998 18.5098 21.3801 18.8297C21.0603 19.1495 20.6186 19.3477 20.1315 19.3477H17.2033C16.7984 19.3477 16.4698 19.0193 16.4698 18.6143C16.4698 18.2093 16.7982 17.8808 17.2033 17.8808L20.1312 17.881C20.2132 17.881 20.2883 17.847 20.3427 17.7927C20.3973 17.738 20.431 17.6633 20.431 17.5811L20.4309 14.6532L20.4312 14.6532ZM5.45691 16.3655H5.87794L5.8781 12.7336H7.34472V16.3658H9.41429V12.7336H10.8809V16.3658H12.9505V12.7336H14.4171V16.3658H16.4866V12.7336H17.9533V16.3658H18.3928C18.6453 16.3658 18.8512 16.1599 18.8512 15.9074V12.7337H22.2665C22.6715 12.7337 23 12.4054 23 12.0002C23 11.5953 22.6716 11.2668 22.2665 11.2668H1.73345C1.32853 11.2668 1 11.5951 1 12.0002C1 12.4051 1.32838 12.7337 1.73345 12.7337H4.99797V15.9074C4.99845 16.1598 5.20421 16.3655 5.45687 16.3655H5.45691ZM5.87811 9.80026V7.63483H5.45708C5.20459 7.63483 4.99867 7.84076 4.99867 8.09324V9.80042L5.87811 9.80059V9.80026ZM9.41429 9.80026V7.63483H7.34473V9.80026H9.41429ZM12.9506 9.80026V7.63483H10.881V9.80026H12.9506ZM16.4868 9.80026V7.63483H14.4172V9.80026H16.4868ZM18.8514 9.80026V8.09307C18.8514 7.84058 18.6454 7.63467 18.3929 7.63467H17.9534V9.80009H18.8514L18.8514 9.80026ZM6.79789 17.8814C7.20281 17.8814 7.53134 18.2098 7.53134 18.6149C7.53134 19.0198 7.20296 19.3483 6.79789 19.3483L3.87001 19.3482C3.3829 19.3482 2.94124 19.1498 2.62139 18.8301C2.30155 18.5103 2.10334 18.0686 2.10334 17.5815V14.6533C2.10334 14.2484 2.43172 13.9198 2.8368 13.9198C3.24172 13.9198 3.57025 14.2481 3.57025 14.6533V17.5812C3.57025 17.6632 3.60425 17.7383 3.65855 17.7927C3.71317 17.8474 3.78793 17.881 3.87027 17.881H6.79786L6.79789 17.8814ZM3.66067 9.34734C3.66067 9.75226 3.33229 10.0808 2.92721 10.0808C2.52229 10.0808 2.19376 9.75258 2.19376 9.34734L2.19392 6.41947C2.19392 5.93235 2.39227 5.4907 2.71197 5.17085C3.03181 4.851 3.47347 4.6528 3.96059 4.6528H6.88847C7.29339 4.6528 7.62192 4.98118 7.62192 5.38625C7.62192 5.79117 7.29354 6.11971 6.88847 6.11971L3.96071 6.11955C3.8787 6.11955 3.80361 6.15354 3.74899 6.20784C3.69437 6.26247 3.66069 6.33723 3.66069 6.41957L3.66067 9.34734ZM17.2936 6.11925C16.8886 6.11925 16.5601 5.79087 16.5601 5.3858C16.5601 4.98088 16.8885 4.65234 17.2936 4.65234H20.2214C20.7086 4.65234 21.1502 4.8507 21.4701 5.17039C21.7899 5.49024 21.9881 5.9319 21.9881 6.41901V9.34689C21.9881 9.75181 21.6597 10.0803 21.2547 10.0803C20.8497 10.0803 20.5212 9.75212 20.5212 9.34689L20.5214 6.41947C20.5214 6.33745 20.4874 6.26236 20.4331 6.2079C20.3784 6.15328 20.3037 6.1196 20.2215 6.1196H17.2936L17.2936 6.11925Z"
                                       fill="#368796" />
                                 </svg>
                              </label>
                           </form> -->
                           <!-- <input type="text" class="CommonSearch__input form-control fs-8" placeholder="Scan Drug"> -->
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">Total (SAR): </label>
                           <div class="bg-primary-100 text-center py-0 px-2 rounded-2" style="min-width: 7.5rem;">
                              <label for="" 
                                 class="form-label fw-bold clr-primary-600 m-0 fs-5">{{NetBillAmount | number:
                                 '1.2-2'}}</label>
                           </div>
                        </div>
                     </div>
                     <!-- OTC -->
                     <div>
                        <div class="prescribeditems_body_border shadow-sm mb-2" *ngIf="showOtcEntry">
                           <div class="p-2 d-flex align-items-center gap-2">
                              <form class="CommanSearch__form ps-2 col-3">
                                 <label for="" class="CommonSearch__label">
                                    <img src="assets/images/icons/icon-search.svg" alt="">
                                 </label>
                                 <input type="text" class="CommonSearch__input form-control ps-2 fw-bold"
                                    placeholder="DisplayName" id="DisplayName" aria-label="DisplayName"
                                    [matAutocomplete]="autoDisplayName"
                                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchDisplay($event)">
                                 <mat-autocomplete #autoDisplayName="matAutocomplete">
                                    <mat-option *ngFor="let dis of listOfItems"
                                       (onSelectionChange)="onViewItemDisplaySelected(dis)" [value]="dis.Name.trim()">
                                       {{dis.Name}}
                                    </mat-option>
                                 </mat-autocomplete>
                                 <!-- <button type="button" id="button-addon2" class="btn btn-secondary-fill btn-icon me-2 ps-2">
                                    <img src="assets/images/icons/icon-search.svg" alt="">
                                 </button> -->
                              </form>
                              <div class="d-flex align-items-center gap-2 col">
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Tax</label>
                                    <label for="" class="form-label fw-bold">{{selectedOtcItem?.Tax}}</label>
                                 </div>
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">UPrice</label>
                                    <label for="" class="form-label fw-bold">{{selectedOtcItem?.UPrice}}</label>
                                 </div>
                                 <div class="d-flex gap-1 align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Qty</label>
                                    <input type="text" (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
                                       id="OtcQty" maxlength="3"
                                       [value]="selectedOtcItem?.Qty == undefined ? '' : selectedOtcItem?.Qty"
                                       (change)="onOtcQtyChange(selectedOtcItem, $event)"
                                       class="form-control bg-transparent  clr-primary-600 border-primary-200">
                                 </div>
                                 <div class="d-flex gap-1 align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Units</label>
                                    <select style="width: 10rem;"
                                       (change)="substituteprescUomChange($event, itemForSubstitute)"
                                       class="form-select pe-4 bg-transparent border-primary-200 clr-primary-600">
                                       <option *ngFor="let uom of filterOtcItemUoms(selectedOtcItem)"
                                          [value]="uom.UoMId">
                                          {{uom.FullUoM}}
                                       </option>
                                    </select>
                                 </div>
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Amount</label>
                                    <label for="" class="form-label fw-bold">{{selectedOtcItem?.Amount}}</label>
                                 </div>
                                 <div class="d-flex flex-column align-items-center px-3">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">QOH</label>
                                    <label for="" class="form-label fw-bold">{{selectedOtcItem?.QOH}}</label>
                                 </div>
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">QUoM</label>
                                    <label for="" class="form-label fw-bold">{{selectedOtcItem?.UOM}}</label>
                                 </div>
                              </div>
                           </div>
                           <div class="mt-2 bg-primary-50 p-2">
                              <div class="d-flex align-items-center justify-content-between">
                                 <div class="d-flex align-items-center gap-4 w-50">
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Batch No.</label>
                                       <label for="" class="form-label fw-bold">{{selectedOtcItem?.BatchNo}}</label>
                                    </div>
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Expiry Date</label>
                                       <label for="" class="form-label fw-bold">{{selectedOtcItem?.ExpiryDate}}</label>
                                    </div>
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Issued Qty</label>
                                       <label for="" class="form-label fw-bold">{{selectedOtcItem?.IssuedQty}}</label>
                                    </div>
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">IssuedUOM</label>
                                       <label for="" class="form-label fw-bold">{{selectedOtcItem?.IssuedUOM}}</label>
                                    </div>
                                 </div>
                                 <div class="d-flex align-items-center gap-2">
                                    <button class="btn btn-main-outline"
                                       (click)="addSelectedOtcItemToTable()">Save</button>
                                    <button class="btn btn-danger-outline">Close</button>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="prescribeditems_body">
                        <div class="prescribeditems_body_border shadow-sm" *ngIf="showSubstiteEntry">
                           <div class="p-2 d-flex align-items-center gap-2">
                              <form class="CommanSearch__form ps-2 col-3">
                                 <!-- <label for="" class="CommonSearch__label">
                                    <img src="assets/images/icons/icon-search.svg" alt="">
                                 </label> -->
                                 <input type="text" class="CommonSearch__input form-control fw-bold fs-8 ps-1"
                                    [value]="itemForSubstitute?.ItemName" placeholder="Item">
                                 <div data-bs-toggle="modal" data-bs-target="#substitute_Modal">
                                    <div class="s_icon" (click)="getSub(itemForSubstitute)">
                                       <svg class="cursor-pointer" width="28" height="29" viewBox="0 0 28 29"
                                          fill="none" xmlns="http://www.w3.org/2000/svg">
                                          <rect y="0.5" width="28" height="28" rx="14" fill="#DAEEF1" />
                                          <path
                                             d="M14.2939 21.4989C13.358 21.4989 12.5194 21.347 11.7779 21.0431C11.0365 20.7393 10.441 20.2896 9.99128 19.694C9.55373 19.0985 8.90972 17.9771 9.06182 16.6517H12.4548C12.5034 17.1257 12.8293 18.3814 13.1088 18.6366C13.3884 18.8797 13.753 19.0012 14.2027 19.0012C14.6646 19.0012 15.0292 18.8979 15.2966 18.6913C15.564 18.4725 15.6977 18.1748 15.6977 17.798C15.6977 17.482 15.5883 17.2207 15.3695 17.014C15.1629 16.8074 14.9016 16.6372 14.5856 16.5036C14.2817 16.3699 13.8442 16.2179 13.2729 16.0478C12.4464 15.7925 11.7719 15.5373 11.2492 15.2821C10.7266 15.0268 10.2769 14.65 9.90012 14.1517C9.52334 13.6534 9.33495 13.0031 9.33495 12.201C9.33495 11.0099 9.76643 10.0801 10.6294 9.41158C11.4923 8.73094 12.6166 8.39062 14.0022 8.39062C15.4121 8.39062 17.1477 8.68382 18.0107 9.36446C18.6717 9.96246 18.8344 10.6797 18.797 12.2192H15.4242C15.3999 11.806 15.248 11.4839 14.9684 11.2529C14.6889 11.0099 14.3303 10.8883 13.8928 10.8883C13.516 10.8883 13.2121 10.9916 12.9812 11.1982C12.7503 11.3927 12.6348 11.6783 12.6348 12.0551C12.6348 12.4684 12.8293 12.7904 13.2182 13.0214C13.6072 13.2523 14.2149 13.5015 15.0413 13.7689C15.8678 14.0484 16.5363 14.3158 17.0468 14.571C17.5694 14.8263 18.0191 15.197 18.3959 15.6831C18.7727 16.1693 18.9611 16.7953 18.9611 17.561C18.9611 18.2902 18.7727 18.9526 18.3959 19.5482C18.0313 20.1437 17.4965 20.6178 16.7916 20.9702C16.0866 21.3227 15.2541 21.4989 14.2939 21.4989Z"
                                             fill="#286571" />
                                          <path
                                             d="M14.2756 20.6083C13.3398 20.6083 12.5011 20.4564 11.7597 20.1525C11.0183 19.8487 10.4228 19.399 9.97306 18.8034C9.53551 18.2078 9.30458 17.4908 9.28027 16.6521H12.5984C12.647 17.1261 12.8111 17.4908 13.0906 17.746C13.3702 17.9891 13.7348 18.1106 14.1845 18.1106C14.6464 18.1106 15.011 18.0073 15.2784 17.8007C15.5458 17.5819 15.6795 17.2841 15.6795 16.9073C15.6795 16.5913 15.5701 16.33 15.3513 16.1234C15.1447 15.9168 14.8834 15.7466 14.5674 15.6129C14.2635 15.4792 13.8259 15.3273 13.2547 15.1571C12.4282 14.9019 11.7537 14.6467 11.231 14.3914C10.7084 14.1362 10.2587 13.7594 9.88191 13.2611C9.50513 12.7628 9.31674 12.1125 9.31674 11.3103C9.31674 10.1192 9.74821 9.18943 10.6112 8.52095C11.4741 7.84032 12.5984 7.5 13.9839 7.5C15.3938 7.5 16.5303 7.84032 17.3932 8.52095C18.2562 9.18943 18.718 10.1253 18.7788 11.3286H15.406C15.3817 10.9153 15.2298 10.5932 14.9502 10.3623C14.6707 10.1192 14.3121 9.99769 13.8746 9.99769C13.4978 9.99769 13.1939 10.101 12.963 10.3076C12.7321 10.5021 12.6166 10.7877 12.6166 11.1645C12.6166 11.5777 12.8111 11.8998 13.2 12.1307C13.5889 12.3617 14.1966 12.6108 15.0231 12.8782C15.8496 13.1578 16.5181 13.4252 17.0286 13.6804C17.5512 13.9356 18.0009 14.3064 18.3777 14.7925C18.7545 15.2787 18.9429 15.9046 18.9429 16.6703C18.9429 17.3996 18.7545 18.062 18.3777 18.6576C18.0131 19.2531 17.4783 19.7271 16.7733 20.0796C16.0684 20.4321 15.2358 20.6083 14.2756 20.6083Z"
                                             fill="#43A9BC" />
                                       </svg>
                                    </div>
                                 </div>
                              </form>
                              <div class="d-flex align-items-center gap-2 col">
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Tax</label>
                                    <label for="" class="form-label fw-bold">{{itemForSubstitute?.Tax}}</label>
                                 </div>
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">UPrice</label>
                                    <label for="" class="form-label fw-bold">{{itemForSubstitute?.UPrice}}</label>
                                 </div>
                                 <div class="d-flex gap-1 align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Qty</label>
                                    <input type="text" (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
                                       maxlength="3" [value]="itemForSubstitute?.Qty"
                                       (change)="onSubstituteQtyChange(itemForSubstitute, $event)"
                                       class="form-control bg-transparent  clr-primary-600 border-primary-200">
                                 </div>
                                 <div class="d-flex gap-1 align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Units</label>
                                    <select style="width: 10rem;"
                                       (change)="substituteprescUomChange($event, itemForSubstitute)"
                                       class="form-select pe-4 bg-transparent border-primary-200 clr-primary-600">
                                       <option *ngFor="let uom of filterSubstituteItemUoms(itemForSubstitute)"
                                       [selected]="uom.UoMId == itemForSubstitute.UID" [value]="uom.UoMId">
                                          {{uom.FullUoM}}
                                       </option>
                                    </select>
                                 </div>
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">Amount</label>
                                    <label for="" class="form-label fw-bold">{{itemForSubstitute?.Amount}}</label>
                                 </div>
                                 <div class="d-flex flex-column align-items-center px-3">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">QOH</label>
                                    <label for="" class="form-label fw-bold">{{itemForSubstitute?.QOH}} </label>
                                 </div>
                                 <div class="d-flex flex-column align-items-center col">
                                    <label for="" class="form-label fw-bold clr-primary-600 m-0">QUoM</label>
                                    <label for="" class="form-label fw-bold">{{itemForSubstitute?.UOM}}</label>
                                 </div>
                              </div>
                           </div>
                           <div class="mt-2 bg-primary-50 p-2">
                              <div class="d-flex align-items-center justify-content-between">
                                 <div class="d-flex align-items-center gap-4 w-50">
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Batch No.</label>
                                       <label for="" class="form-label fw-bold">{{itemForSubstitute?.BatchNo}}</label>
                                    </div>
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Expiry Date</label>
                                       <label for=""
                                          class="form-label fw-bold">{{itemForSubstitute?.ExpiryDate}}</label>
                                    </div>
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Issued Qty</label>
                                       <label for="" class="form-label fw-bold">{{itemForSubstitute?.IssuedQty}}</label>
                                    </div>
                                    <div class="d-flex flex-column col">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">IssuedUOM</label>
                                       <label for="" class="form-label fw-bold">{{itemForSubstitute?.IssuedUOM}}</label>
                                    </div>
                                 </div>
                                 <div class="d-flex align-items-center gap-2">
                                    <button class="btn btn-main-outline"
                                       (click)="updateSubstituteToItemPrescibed()">Save</button>
                                    <button class="btn btn-danger-outline" (click)="closeSubstitute()">Close</button>
                                 </div>
                              </div>
                           </div>
                        </div>

                        <!-- ITEMS LIST -->
                        <form [formGroup]="prescriptionForm">
                           <div class="" formArrayName="items">
                              <div class=" Pharmacy_list" *ngIf="patientPrescriptionsDetails?.length != 0">
                                 <div class="Pharmacy_list_header p-2 bg-primary-50">
                                    <div class="d-flex gap-1 p-1">
                                       <div (click)="selectAllPrescription()" class="w-max-content d-flex justify-content-center">
                                          <div [class.active]="selectall" class="custom_check d-flex align-items-center justify-content-center">
                                              <svg style="min-width:1rem;" width="16" height="16" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg" class="check_svg"><circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle><path d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z" fill="white" stroke="white" stroke-width="0.25"></path></svg>                          
                                           </div>
                                      </div>
                                       <div class="d-flex align-items-center" style="width: 3%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Sl.No.</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 24%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Item Name</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 8%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Category</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 8%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Route</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 10%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Dose | Frequency</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 8%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Duration</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 22%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Start - End
                                             Date</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 5%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Qty</label>
                                       </div>
                                       <div class="d-flex align-items-center" style="width: 10%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">Units</label>
                                       </div>
                                       <div class="d-flex align-items-center justify-content-center"
                                          style="width: 11%;">
                                          <label for="" class="form-label fw-bold clr-primary-600 m-0">QOH</label>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="itemslist p-2">
                                    <div
                                       [class]="item.substituteSelected == 'true' ? 'itemBlock mb-2 border-primary-200 rounded-3 active' : 'itemBlock mb-2 border-primary-200 rounded-3'"
                                       *ngFor="let item of patientPrescriptionsDetails; let i = index"
                                       [formGroupName]="i">
                                       <div class="d-flex gap-1 p-1 align-items-center">
                                          <div (click)="item.selectedPrescription = !item.selectedPrescription" class="w-max-content d-flex justify-content-center">
                                             <div [class.active]="item.selectedPrescription" class="custom_check d-flex align-items-center justify-content-center">
                                                 <svg style="min-width:1rem;" width="16" height="16" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg" class="check_svg"><circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle><path d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z" fill="white" stroke="white" stroke-width="0.25"></path></svg>                          
                                              </div>
                                         </div>
                                          <div class="d-flex align-items-center" style="width: 3%;">
                                             <p class="text-break">{{item.SlNo}}</p>
                                          </div>
                                          <div class="d-flex align-items-center" style="width: 24%;">
                                             <div class="d-flex align-items-center justify-content-between gap-1 w-100">
                                                <p><b>{{item.ItemCode}}-{{item.ItemName}}</b></p>
                                                <div class="custom_tooltip">
                                                   <svg (click)="prescribeSubstitute(item)"
                                                      style="min-width: 1.5rem;width: 1.5rem;" class="cursor-pointer"
                                                      width="28" height="29" viewBox="0 0 28 29" fill="none"
                                                      xmlns="http://www.w3.org/2000/svg">
                                                      <rect y="0.5" width="28" height="28" rx="14" fill="#DAEEF1" />
                                                      <path
                                                         d="M14.2939 21.4989C13.358 21.4989 12.5194 21.347 11.7779 21.0431C11.0365 20.7393 10.441 20.2896 9.99128 19.694C9.55373 19.0985 8.90972 17.9771 9.06182 16.6517H12.4548C12.5034 17.1257 12.8293 18.3814 13.1088 18.6366C13.3884 18.8797 13.753 19.0012 14.2027 19.0012C14.6646 19.0012 15.0292 18.8979 15.2966 18.6913C15.564 18.4725 15.6977 18.1748 15.6977 17.798C15.6977 17.482 15.5883 17.2207 15.3695 17.014C15.1629 16.8074 14.9016 16.6372 14.5856 16.5036C14.2817 16.3699 13.8442 16.2179 13.2729 16.0478C12.4464 15.7925 11.7719 15.5373 11.2492 15.2821C10.7266 15.0268 10.2769 14.65 9.90012 14.1517C9.52334 13.6534 9.33495 13.0031 9.33495 12.201C9.33495 11.0099 9.76643 10.0801 10.6294 9.41158C11.4923 8.73094 12.6166 8.39062 14.0022 8.39062C15.4121 8.39062 17.1477 8.68382 18.0107 9.36446C18.6717 9.96246 18.8344 10.6797 18.797 12.2192H15.4242C15.3999 11.806 15.248 11.4839 14.9684 11.2529C14.6889 11.0099 14.3303 10.8883 13.8928 10.8883C13.516 10.8883 13.2121 10.9916 12.9812 11.1982C12.7503 11.3927 12.6348 11.6783 12.6348 12.0551C12.6348 12.4684 12.8293 12.7904 13.2182 13.0214C13.6072 13.2523 14.2149 13.5015 15.0413 13.7689C15.8678 14.0484 16.5363 14.3158 17.0468 14.571C17.5694 14.8263 18.0191 15.197 18.3959 15.6831C18.7727 16.1693 18.9611 16.7953 18.9611 17.561C18.9611 18.2902 18.7727 18.9526 18.3959 19.5482C18.0313 20.1437 17.4965 20.6178 16.7916 20.9702C16.0866 21.3227 15.2541 21.4989 14.2939 21.4989Z"
                                                         fill="#286571" />
                                                      <path
                                                         d="M14.2756 20.6083C13.3398 20.6083 12.5011 20.4564 11.7597 20.1525C11.0183 19.8487 10.4228 19.399 9.97306 18.8034C9.53551 18.2078 9.30458 17.4908 9.28027 16.6521H12.5984C12.647 17.1261 12.8111 17.4908 13.0906 17.746C13.3702 17.9891 13.7348 18.1106 14.1845 18.1106C14.6464 18.1106 15.011 18.0073 15.2784 17.8007C15.5458 17.5819 15.6795 17.2841 15.6795 16.9073C15.6795 16.5913 15.5701 16.33 15.3513 16.1234C15.1447 15.9168 14.8834 15.7466 14.5674 15.6129C14.2635 15.4792 13.8259 15.3273 13.2547 15.1571C12.4282 14.9019 11.7537 14.6467 11.231 14.3914C10.7084 14.1362 10.2587 13.7594 9.88191 13.2611C9.50513 12.7628 9.31674 12.1125 9.31674 11.3103C9.31674 10.1192 9.74821 9.18943 10.6112 8.52095C11.4741 7.84032 12.5984 7.5 13.9839 7.5C15.3938 7.5 16.5303 7.84032 17.3932 8.52095C18.2562 9.18943 18.718 10.1253 18.7788 11.3286H15.406C15.3817 10.9153 15.2298 10.5932 14.9502 10.3623C14.6707 10.1192 14.3121 9.99769 13.8746 9.99769C13.4978 9.99769 13.1939 10.101 12.963 10.3076C12.7321 10.5021 12.6166 10.7877 12.6166 11.1645C12.6166 11.5777 12.8111 11.8998 13.2 12.1307C13.5889 12.3617 14.1966 12.6108 15.0231 12.8782C15.8496 13.1578 16.5181 13.4252 17.0286 13.6804C17.5512 13.9356 18.0009 14.3064 18.3777 14.7925C18.7545 15.2787 18.9429 15.9046 18.9429 16.6703C18.9429 17.3996 18.7545 18.062 18.3777 18.6576C18.0131 19.2531 17.4783 19.7271 16.7733 20.0796C16.0684 20.4321 15.2358 20.6083 14.2756 20.6083Z"
                                                         fill="#43A9BC" />
                                                   </svg>
                                                   <div class="tooltip">
                                                      <p>Substitute</p>
                                                   </div>
                                                </div>

                                                <div class="position-relative" *ngIf="item.CD != ''">
                                                   <div class="cursor-pointer custom_tooltip"
                                                      (click)="openTaperingPopup(item)">
                                                      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="29"
                                                         viewBox="0 0 28 29" fill="none">
                                                         <rect y="0.200012" width="28" height="28" rx="14"
                                                            fill="#DAEEF1" />
                                                         <rect x="14" y="0.200012" width="14" height="14" rx="7"
                                                            fill="#DAEEF1" />
                                                         <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M23.1732 3.34654C23.6346 2.88449 24.3859 2.88449 24.8473 3.34654C25.0711 3.57055 25.1925 3.86951 25.1927 4.18383C25.1952 4.49995 25.0703 4.79904 24.8474 5.02236L24.0102 5.86065L22.3364 4.18451L23.1732 3.34654ZM22.1124 4.40882L23.7862 6.08496L19.4018 10.4756L17.728 8.79942L22.1124 4.40882ZM17.5754 9.09542L19.1085 10.6307L16.8071 11.4L17.5754 9.09542Z"
                                                            fill="#368796" />
                                                         <path
                                                            d="M6.06216 15.0881L9.13167 18.1538L9.93183 17.3546L6.72886 14.1556C5.91957 13.3031 5.74412 11.6925 6.59425 10.8245C6.73317 10.6818 6.99065 10.6801 7.13169 10.8209C7.27271 10.9618 7.27098 11.2189 7.12808 11.3577C6.6312 11.9041 6.7124 13.0439 7.2623 13.6229L10.4653 16.8218L14.4661 12.826L11.3966 9.76031C9.66163 8.02751 7.12742 8.15934 5.80999 9.47517C4.36155 10.9365 4.32763 13.3232 6.06216 15.0881ZM9.66549 18.6869L13.0019 22.0192C14.6034 23.6187 17.0047 23.353 18.3299 22.0294C19.6719 20.6891 19.9378 18.2909 18.3364 16.6914L14.9999 13.3591L10.9991 17.355L14.469 20.8205C14.9138 21.2648 15.2441 21.2262 15.5489 21.1248C15.7377 21.0628 15.9661 21.1779 16.0284 21.3665C16.0907 21.5551 15.9756 21.7832 15.7868 21.8453C15.2911 22.0101 14.5583 21.9753 13.9355 21.3534L10.4656 17.8878L9.66549 18.6869Z"
                                                            fill="#368796" />
                                                      </svg>
                                                      <div class="tooltip">
                                                         <p>Dose Info</p>
                                                      </div>
                                                   </div>

                                                   <div
                                                      class="taperingPopup flex-column rounded-2 border-primary-200 p-0 d-none"
                                                      id="divTapering">
                                                      <div
                                                         class="bg-primary-50 d-flex align-items-center justify-content-between rounded-top p-2">
                                                         <h5 class="fs-7 clr-primary-600 m-0" translate>Tapering</h5>
                                                         <div class="ms-auto d-flex align-items-center gap-2">
                                                            <button type="button" (click)="closeTapering()" class="btn-close"
                                                               data-bs-dismiss="modal" aria-label="Close"></button>
                                                         </div>
                                                      </div>
                                                      <div class="p-2">

                                                         <div>
                                                            <div class="row mx-0 align-items-start">
                                                               <table class="table m-0">
                                                                  <thead class="trans_head">
                                                                     <tr>
                                                                        <th>Dose</th>
                                                                        <th>Schedule Time</th>
                                                                     </tr>
                                                                  </thead>
                                                                  <tbody>
                                                                     <tr
                                                                        *ngFor="let cd of medicationScheduleitems;let i=index">
                                                                        <td style="width: 30%;">
                                                                           <input type="text" [value]="cd.Dose"
                                                                              class="form-control">
                                                                        </td>
                                                                        <td style="width: 40%;">
                                                                           <input type="text" [value]="cd.ScheduleTime"
                                                                              class="form-control">
                                                                        </td>

                                                                     </tr>
                                                                  </tbody>
                                                               </table>
                                                            </div>

                                                         </div>

                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                          <div class="d-flex align-items-center" style="width: 8%;">
                                             <p class="text-break">{{item.ItemGroupTypeName}}</p>
                                          </div>
                                          <div class="d-flex align-items-center" style="width: 8%;">
                                             <p class="text-break">{{item.AdmRoute}}</p>
                                          </div>
                                          <div class="d-flex align-items-center" style="width: 10%;">
                                             <p class="text-break">{{item?.Dose}}-{{item?.DoseUoM}} | {{item?.Frequency}}</p>
                                          </div>
                                          <div class="d-flex align-items-center" style="width: 8%;">
                                             <p class="text-break">{{item?.Duration}} {{item.DurationUOM}}</p>
                                          </div>
                                          <div class="d-flex align-items-center gap-2" style="width: 22%;">
                                             <p class="">{{item?.StartFromD}}</p>
                                             <svg width="12" height="6" viewBox="0 0 12 6" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M0 4.86032H9.30057L5.58038 1.14014" stroke="#357D83"
                                                   stroke-width="1.5" />
                                             </svg>
                                             <p class="">{{item?.EndDatetime}}</p>
                                          </div>
                                          <div class="d-flex align-items-center" style="width: 5%;">
                                             <input type="text"
                                                (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
                                                maxlength="3" [value]="item.Qty" [id]="item.SlNo+'-'+item.ItemID"
                                                (change)="validateReqQty(item,$event)"
                                                maxlength="3"
                                                class="form-control bg-transparent fs-8 clr-primary-600 border-primary-200">
                                          </div>
                                          <div class="d-flex align-items-center" style="width: 10%;">
                                             <select id="presUnits"
                                                (change)="prescUomChange($event, item)"
                                                class="form-select fs-8 pe-4 bg-transparent border-primary-200 clr-primary-600">
                                                <option *ngFor="let uom of filterItemUoms(item)" [selected]="uom.UoMId === item.UID" [value]="uom.UoMId">
                                                   {{uom.FullUoM}}
                                                </option>
                                             </select>
                                          </div>
                                          <div class="d-flex align-items-center gap-2 justify-content-center"
                                             style="width: 11%;">
                                             <!-- <svg style="min-width: 1.5rem;" width="26" height="24" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <mask id="path-1-inside-1_12507_8011" fill="white">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M15.972 2.02111C14.7847 -0.0353917 11.8163 -0.0353909 10.629 2.02111L1.17583 18.3945C-0.0114945 20.451 1.47266 23.0217 3.8473 23.0217H22.7537C25.1283 23.0217 26.6125 20.451 25.4252 18.3945L15.972 2.02111ZM11.8164 19.5574C11.8164 20.4079 12.4975 21.089 13.3479 21.089C14.1984 21.089 14.8795 20.4511 14.8795 19.5574C14.8795 18.7069 14.1984 18.0259 13.3479 18.0259C12.4975 18.0259 11.8164 18.7069 11.8164 19.5574ZM13.3479 16.878C14.0705 16.878 14.6652 16.368 14.7084 15.6455L15.1751 7.56596C15.2615 6.50286 14.3678 5.56768 13.3047 5.56768C12.2416 5.56768 11.3497 6.50286 11.4344 7.56596L11.9875 15.6455C12.0722 16.3248 12.6254 16.878 13.3479 16.878Z"/>
                                                </mask>
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M15.972 2.02111C14.7847 -0.0353917 11.8163 -0.0353909 10.629 2.02111L1.17583 18.3945C-0.0114945 20.451 1.47266 23.0217 3.8473 23.0217H22.7537C25.1283 23.0217 26.6125 20.451 25.4252 18.3945L15.972 2.02111ZM11.8164 19.5574C11.8164 20.4079 12.4975 21.089 13.3479 21.089C14.1984 21.089 14.8795 20.4511 14.8795 19.5574C14.8795 18.7069 14.1984 18.0259 13.3479 18.0259C12.4975 18.0259 11.8164 18.7069 11.8164 19.5574ZM13.3479 16.878C14.0705 16.878 14.6652 16.368 14.7084 15.6455L15.1751 7.56596C15.2615 6.50286 14.3678 5.56768 13.3047 5.56768C12.2416 5.56768 11.3497 6.50286 11.4344 7.56596L11.9875 15.6455C12.0722 16.3248 12.6254 16.878 13.3479 16.878Z" fill="#EB6247"/>
                                                <path d="M10.629 2.02111L12.1374 2.89194V2.89194L10.629 2.02111ZM15.972 2.02111L17.4803 1.15027L17.4803 1.15027L15.972 2.02111ZM1.17583 18.3945L2.68416 19.2654H2.68416L1.17583 18.3945ZM25.4252 18.3945L23.9168 19.2654L25.4252 18.3945ZM14.7084 15.6455L16.4469 15.7494L16.4471 15.7459L14.7084 15.6455ZM15.1751 7.56596L13.4392 7.42486L13.4375 7.44517L13.4363 7.46551L15.1751 7.56596ZM11.4344 7.56596L13.172 7.447L13.1713 7.4373L13.1705 7.42761L11.4344 7.56596ZM11.9875 15.6455L10.2499 15.7644L10.2532 15.8128L10.2592 15.861L11.9875 15.6455ZM12.1374 2.89194C12.6543 1.99656 13.9467 1.99656 14.4636 2.89194L17.4803 1.15027C15.6226 -2.06734 10.9784 -2.06734 9.1207 1.15027L12.1374 2.89194ZM2.68416 19.2654L12.1374 2.89194L9.1207 1.15027L-0.332505 17.5237L2.68416 19.2654ZM3.8473 21.28C2.8134 21.28 2.16721 20.1608 2.68416 19.2654L-0.332505 17.5237C-2.1902 20.7413 0.131917 24.7633 3.8473 24.7633V21.28ZM22.7537 21.28H3.8473V24.7633H22.7537V21.28ZM23.9168 19.2654C24.4338 20.1608 23.7876 21.28 22.7537 21.28V24.7633C26.4691 24.7633 28.7912 20.7413 26.9335 17.5237L23.9168 19.2654ZM14.4636 2.89194L23.9168 19.2654L26.9335 17.5237L17.4803 1.15027L14.4636 2.89194ZM13.3479 19.3473C13.4594 19.3473 13.5581 19.446 13.5581 19.5574H10.0747C10.0747 21.3698 11.5356 22.8306 13.3479 22.8306V19.3473ZM13.1378 19.5574C13.1378 19.5582 13.1378 19.5532 13.1397 19.5432C13.1417 19.5332 13.1453 19.5201 13.1516 19.5049C13.1647 19.4735 13.1856 19.4418 13.2133 19.4147C13.272 19.3571 13.331 19.3473 13.3479 19.3473V22.8306C15.1278 22.8306 16.6212 21.4452 16.6212 19.5574H13.1378ZM13.3479 19.7676C13.2365 19.7676 13.1378 19.6688 13.1378 19.5574H16.6212C16.6212 17.745 15.1603 16.2842 13.3479 16.2842V19.7676ZM13.5581 19.5574C13.5581 19.6688 13.4594 19.7676 13.3479 19.7676V16.2842C11.5356 16.2842 10.0747 17.745 10.0747 19.5574H13.5581ZM12.9698 15.5416C12.9762 15.4336 13.0318 15.3147 13.1241 15.2325C13.21 15.1559 13.2972 15.1363 13.3479 15.1363V18.6197C14.9027 18.6197 16.3436 17.4784 16.4469 15.7494L12.9698 15.5416ZM13.4363 7.46551L12.9696 15.545L16.4471 15.7459L16.9139 7.6664L13.4363 7.46551ZM13.3047 7.30935C13.3191 7.30935 13.3605 7.31707 13.4034 7.36256C13.4225 7.38284 13.4323 7.40146 13.4365 7.41257C13.4398 7.42162 13.4392 7.42435 13.4392 7.42486L16.9111 7.70706C17.0829 5.59299 15.3481 3.82601 13.3047 3.82601V7.30935ZM13.1705 7.42761C13.1704 7.42627 13.1699 7.42273 13.1736 7.41305C13.1779 7.40135 13.188 7.38248 13.2071 7.36217C13.2498 7.31679 13.2907 7.30935 13.3047 7.30935V3.82601C11.2586 3.82601 9.53011 5.59494 9.6982 7.70431L13.1705 7.42761ZM13.7251 15.5265L13.172 7.447L9.69677 7.68492L10.2499 15.7644L13.7251 15.5265ZM13.3479 15.1363C13.448 15.1363 13.5486 15.1795 13.6168 15.2431C13.6778 15.3 13.708 15.3671 13.7158 15.43L10.2592 15.861C10.442 17.3264 11.6631 18.6197 13.3479 18.6197V15.1363Z" fill="#EB6247" mask="url(#path-1-inside-1_12507_8011)"/>
                                             </svg>
                                             <p class="text-truncate">Allergy info</p>-->
                                             <div class="custom_tooltip custom_tooltip_left w-max-content qoh_tooltip">
                                                <!-- <label for="" class="form-label fw-bold qoh_count rounded-4 px-2 w-max-content">{{item.QOH}} </label> -->
                                                <label for="" class="form-label text-nowrap"><span
                                                      [class]="item.QOH == '0' ? 'qoh_animate d-inline-flex' : 'form-label fw-bold qoh_count rounded-4 px-1 fs-9 w-max-content'">{{
                                                      item.QOH}} {{item.UOM}}</span>
                                                </label>
                                                <div class="tooltip">
                                                   <div [innerHtml]="item.ItemLocationWiseStock"
                                                      class="d-flex align-items-center justify-content-between gap-2 py-1">

                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                       <div class="bg-primary-50 p-2 endblock">
                                          <div class="row g-2 align-items-center">
                                             <div class="d-flex col-3">
                                                <label for=""
                                                   class="form-label fw-bold clr-primary-600 m-0">Instructions :</label>
                                                <p>{{item.PatientInstructions == 'select' ? '' :
                                                   item.PatientInstructions}}</p>
                                             </div>
                                             <div class="d-flex col-3">
                                                <label for="" class="form-label fw-bold clr-primary-600 m-0">Remarks
                                                   :</label>
                                                <p>{{item.Remarks}}</p>
                                             </div>
                                             <div class="col d-flex align-items-center justify-content-end">
                                                <div class="d-flex align-items-center gap-3">
                                                   <div class="d-flex align-items-center gap-1">
                                                      <label for=""
                                                         class="form-label text-nowrap fw-bold clr-primary-600 m-0">Batch
                                                         No.</label>
                                                      <p class="fw-bold text-nowrap">{{item.BatchNo}}</p>
                                                   </div>
                                                   <div class="d-flex align-items-center gap-1">
                                                      <label for=""
                                                         class="form-label text-nowrap fw-bold clr-primary-600 m-0">Expiry
                                                         Date</label>
                                                      <p class="fw-bold text-nowrap"
                                                         [class.reject]="isDateWithinNext3Months(item.ExpiryDate)">
                                                         {{item.ExpiryDate}}</p>
                                                   </div>
                                                   <div class="d-flex align-items-center gap-1">
                                                      <label for=""
                                                         class="form-label text-nowrap fw-bold clr-primary-600 m-0">UPrice</label>
                                                      <p class="fw-bold text-nowrap">{{item.UPrice}}</p>
                                                   </div>
                                                   <div class="d-flex align-items-center gap-1">
                                                      <label for=""
                                                         class="form-label text-nowrap fw-bold clr-primary-600 m-0">Tax</label>
                                                      <p class="fw-bold text-nowrap">{{item.Tax}}</p>
                                                   </div>
                                                   <div class="d-flex align-items-center gap-1">
                                                      <label for=""
                                                         class="form-label text-nowrap fw-bold clr-primary-600 m-0">Amount</label>
                                                      <p class="fw-bold text-nowrap">{{item.Amount}}</p>
                                                   </div>
                                                   <div class="d-flex align-items-center gap-1 status">
                                                      <label for=""
                                                         class="form-label text-nowrap fw-bold clr-primary-600 m-0">Status</label>
                                                      <p *ngIf="getApprovalStatus(item) !== '-'" class="reject">{{
                                                         getApprovalStatus(item) }}</p>
                                                      <label *ngIf="getApprovalStatus(item) === '-'">-</label>
                                                   </div>
                                                   <div
                                                      class="custom_tooltip custom_tooltip_left text-end issued_tooltip">
                                                      <svg class="cursor-pointer" width="24" height="24"
                                                         viewBox="0 0 24 24" fill="none"
                                                         xmlns="http://www.w3.org/2000/svg">
                                                         <circle cx="12" cy="6" r="2" fill="#43A9BC" />
                                                         <circle cx="12" cy="12" r="2" fill="#43A9BC" />
                                                         <circle cx="12" cy="18" r="2" fill="#43A9BC" />
                                                      </svg>
                                                      <div class="tooltip">
                                                         <div class="row">
                                                            <div class="col-9">
                                                               <div class="bg-primary-50 p-2 pb-0 rounded-2">
                                                                  <div class="row mx-0">
                                                                     <div class="col-6">
                                                                        <div class="d-flex flex-column">
                                                                           <label for=""
                                                                              class="form-label fw-bold clr-primary-600 m-0">Issued
                                                                              Qty</label>
                                                                           <label for=""
                                                                              class="form-label fw-bold m-0">{{item.IssuedQty}}</label>
                                                                        </div>
                                                                     </div>
                                                                     <div class="col-6">
                                                                        <div class="d-flex flex-column">
                                                                           <label for=""
                                                                              class="form-label fw-bold clr-primary-600 m-0">QUoM</label>
                                                                           <label for=""
                                                                              class="form-label fw-bold m-0">{{item.IssuedUOM}}</label>
                                                                        </div>
                                                                     </div>
                                                                     <div class="col-6">
                                                                        <div class="d-flex flex-column">
                                                                           <label for=""
                                                                              class="form-label fw-bold clr-primary-600 m-0">IssuedUOM</label>
                                                                           <label for=""
                                                                              class="form-label fw-bold m-0">{{item.IssuedUOM}}</label>
                                                                        </div>
                                                                     </div>
                                                                     <div class="col-6">
                                                                        <div class="d-flex flex-column">
                                                                           <label for=""
                                                                              class="form-label fw-bold clr-primary-600 m-0">Type</label>
                                                                           <label for=""
                                                                              class="form-label fw-bold m-0">-</label>
                                                                        </div>
                                                                     </div>
                                                                  </div>
                                                               </div>
                                                            </div>
                                                            <div class="col-3 ps-0">
                                                               <div
                                                                  class="cursor-pointer py-2 px-1 d-flex align-items-center gap-2 border-bottom">
                                                                  <!-- Yellow hand -->
                                                                  <svg *ngIf="item.HoldStatus == '2'"
                                                                     data-bs-toggle="modal"
                                                                     data-bs-target="#hold_remarks"
                                                                     (click)="selectedHoldItem(item)" width="24"
                                                                     height="24" viewBox="0 0 24 24" fill="none"
                                                                     xmlns="http://www.w3.org/2000/svg">
                                                                     <rect x="2" y="2" width="20" height="20" rx="4"
                                                                        fill="#F7BF08" />
                                                                     <path
                                                                        d="M16.6615 15.1204C16.6615 17.491 14.8831 19.5124 12.6118 19.7229C11.3435 19.841 10.1265 19.4422 9.19029 18.6035C8.48339 17.9719 7.97162 17.1931 7.42732 16.3681C7.30751 16.185 7.18427 16.0001 7.06104 15.8153C6.48593 14.968 5.88516 14.0575 5.40077 13.0955C5.29978 12.8953 5.25186 12.7378 5.25186 12.6111C5.25186 12.4297 5.33059 12.2568 5.46752 12.1422C5.72598 11.9265 6.11622 11.9607 6.33189 12.2175L8.60663 14.9304C8.71617 15.0622 8.8976 15.1101 9.05849 15.0519C9.21938 14.9937 9.32722 14.8397 9.32722 14.6685V6.5486C9.32722 6.24051 9.5172 5.97007 9.77908 5.90674C9.97592 5.85882 10.1642 5.8999 10.3148 6.018C10.4637 6.13439 10.5493 6.30897 10.5493 6.49896V11.1854C10.5493 11.4096 10.7325 11.5927 10.9567 11.5927C11.1809 11.5927 11.364 11.4096 11.364 11.1854V4.91743C11.364 4.60934 11.554 4.34062 11.8176 4.27557C12.0127 4.22936 12.2027 4.26873 12.3534 4.38683C12.5006 4.50493 12.5861 4.67952 12.5861 4.86779V11.1854C12.5861 11.4096 12.7693 11.5927 12.9935 11.5927C13.2177 11.5927 13.4026 11.4096 13.4026 11.1854V5.68423C13.4026 5.49425 13.4864 5.31966 13.6354 5.20327C13.786 5.08346 13.976 5.04409 14.1711 5.09202C14.433 5.15535 14.6247 5.42407 14.6247 5.73216V11.5927C14.6247 11.817 14.8061 12.0001 15.032 12.0001C15.258 12.0001 15.4394 11.817 15.4394 11.5927V8.12842C15.4394 7.96411 15.5027 7.81006 15.6174 7.69538C15.7646 7.54818 15.9768 7.48828 16.1874 7.53107C16.427 7.58242 16.6615 7.90249 16.6615 8.17635V15.1204Z"
                                                                        fill="white" />
                                                                     <path fill-rule="evenodd" clip-rule="evenodd"
                                                                        d="M8.60663 14.9304C8.71617 15.0622 8.8976 15.1101 9.05849 15.0519C9.21938 14.9937 9.32722 14.8397 9.32722 14.6685V6.5486C9.32722 6.24051 9.5172 5.97007 9.77908 5.90674C9.97592 5.85882 10.1642 5.8999 10.3148 6.018C10.4637 6.13439 10.5493 6.30897 10.5493 6.49896V11.1854C10.5493 11.4096 10.7325 11.5927 10.9567 11.5927C11.1809 11.5927 11.364 11.4096 11.364 11.1854V4.91743C11.364 4.60934 11.554 4.34062 11.8176 4.27557C12.0127 4.22936 12.2027 4.26873 12.3534 4.38683C12.5006 4.50493 12.5861 4.67952 12.5861 4.86779V11.1854C12.5861 11.4096 12.7693 11.5927 12.9935 11.5927C13.2177 11.5927 13.4026 11.4096 13.4026 11.1854V5.68423C13.4026 5.49425 13.4864 5.31966 13.6354 5.20327C13.786 5.08346 13.976 5.04409 14.1711 5.09202C14.433 5.15535 14.6247 5.42407 14.6247 5.73216V11.5927C14.6247 11.817 14.8061 12.0001 15.032 12.0001C15.258 12.0001 15.4394 11.817 15.4394 11.5927V8.12842C15.4394 7.96411 15.5027 7.81006 15.6174 7.69538C15.7646 7.54818 15.9768 7.48828 16.1874 7.53107C16.427 7.58242 16.6615 7.90249 16.6615 8.17635V15.1204C16.6615 17.491 14.8831 19.5124 12.6118 19.7229C11.3435 19.841 10.1265 19.4422 9.19029 18.6035C8.48827 17.9763 7.9787 17.2039 7.4386 16.3852L7.42732 16.3681C7.30755 16.1851 7.18435 16.0003 7.06115 15.8155L7.06104 15.8153C6.48593 14.968 5.88516 14.0575 5.40077 13.0955C5.29978 12.8953 5.25186 12.7378 5.25186 12.6111C5.25186 12.4297 5.33059 12.2568 5.46752 12.1422C5.72598 11.9265 6.11622 11.9607 6.33189 12.2175L8.60663 14.9304ZM5.17146 13.211C5.06393 12.9977 4.99512 12.7974 4.99512 12.6111C4.99512 12.3563 5.10555 12.1104 5.30268 11.9453L5.30303 11.945C5.66963 11.6391 6.22142 11.6868 6.52848 12.0523L6.52862 12.0525L8.80407 14.7663C8.84348 14.8137 8.91055 14.8324 8.97116 14.8105C9.0301 14.7892 9.07047 14.7318 9.07047 14.6685V6.5486C9.07047 6.14616 9.31964 5.75378 9.7186 5.65723C9.98969 5.5913 10.2591 5.64803 10.4732 5.81596C10.6841 5.98089 10.8061 6.2299 10.8061 6.49896V11.1854C10.8061 11.2678 10.8742 11.336 10.9567 11.336C11.0391 11.336 11.1073 11.2678 11.1073 11.1854V4.91743C11.1073 4.51329 11.3578 4.1246 11.7561 4.02631L11.7584 4.02573C12.0253 3.96254 12.2963 4.0158 12.5118 4.18479L12.5129 4.18568L12.514 4.18658C12.7205 4.35227 12.8429 4.59985 12.8429 4.86779V11.1854C12.8429 11.2678 12.9111 11.336 12.9935 11.336C13.0773 11.336 13.1458 11.2664 13.1458 11.1854V5.68423C13.1458 5.41701 13.2647 5.16758 13.4764 5.00166C13.6922 4.83043 13.9641 4.77694 14.2319 4.84257C14.629 4.93885 14.8814 5.32784 14.8814 5.73216V11.5927C14.8814 11.6759 14.9486 11.7434 15.032 11.7434C15.1155 11.7434 15.1827 11.6759 15.1827 11.5927V8.12842C15.1827 7.89701 15.2723 7.67736 15.4359 7.51384C15.6476 7.30214 15.9487 7.22056 16.2385 7.27947L16.2398 7.27974L16.2412 7.28002C16.4441 7.32351 16.6111 7.46824 16.7213 7.61834C16.8334 7.77114 16.9182 7.97163 16.9182 8.17635V15.1204C16.9182 17.6153 15.0469 19.755 12.6355 19.9786C11.2971 20.1031 10.0094 19.6818 9.01923 18.795C8.29218 18.1454 7.76681 17.349 7.23289 16.5396L7.21247 16.5087C7.09357 16.3269 6.97118 16.1433 6.84804 15.9586C6.27277 15.1111 5.66386 14.1888 5.17146 13.211Z"
                                                                        fill="white" />
                                                                  </svg>
                                                                  <!-- Green hand -->
                                                                  <svg
                                                                     *ngIf="item.HoldStatus == null||item.HoldStatus == 0"
                                                                     data-bs-toggle="modal"
                                                                     data-bs-target="#hold_remarks"
                                                                     (click)="selectedHoldItem(item)" width="25"
                                                                     height="24" viewBox="0 0 25 24" fill="none"
                                                                     xmlns="http://www.w3.org/2000/svg">
                                                                     <rect x="2.11816" y="2" width="20" height="20"
                                                                        rx="4" fill="#43BC94" />
                                                                     <path
                                                                        d="M16.7797 15.1204C16.7797 17.491 15.0013 19.5124 12.73 19.7229C11.4617 19.841 10.2447 19.4422 9.30845 18.6035C8.60155 17.9719 8.08978 17.1931 7.54549 16.3681C7.42567 16.185 7.30244 16.0001 7.1792 15.8153C6.6041 14.968 6.00332 14.0575 5.51893 13.0955C5.41795 12.8953 5.37002 12.7378 5.37002 12.6111C5.37002 12.4297 5.44876 12.2568 5.58569 12.1422C5.84414 11.9265 6.23439 11.9607 6.45005 12.2175L8.72479 14.9304C8.83433 15.0622 9.01576 15.1101 9.17666 15.0519C9.33755 14.9937 9.44538 14.8397 9.44538 14.6685V6.5486C9.44538 6.24051 9.63537 5.97007 9.89725 5.90674C10.0941 5.85882 10.2824 5.8999 10.433 6.018C10.5819 6.13439 10.6675 6.30897 10.6675 6.49896V11.1854C10.6675 11.4096 10.8506 11.5927 11.0748 11.5927C11.2991 11.5927 11.4822 11.4096 11.4822 11.1854V4.91743C11.4822 4.60934 11.6722 4.34062 11.9358 4.27557C12.1309 4.22936 12.3209 4.26873 12.4715 4.38683C12.6187 4.50493 12.7043 4.67952 12.7043 4.86779V11.1854C12.7043 11.4096 12.8874 11.5927 13.1117 11.5927C13.3359 11.5927 13.5207 11.4096 13.5207 11.1854V5.68423C13.5207 5.49425 13.6046 5.31966 13.7535 5.20327C13.9041 5.08346 14.0941 5.04409 14.2893 5.09202C14.5511 5.15535 14.7428 5.42407 14.7428 5.73216V11.5927C14.7428 11.817 14.9243 12.0001 15.1502 12.0001C15.3761 12.0001 15.5576 11.817 15.5576 11.5927V8.12842C15.5576 7.96411 15.6209 7.81006 15.7356 7.69538C15.8828 7.54818 16.095 7.48828 16.3055 7.53107C16.5452 7.58242 16.7797 7.90249 16.7797 8.17635V15.1204Z"
                                                                        fill="white" />
                                                                     <path fill-rule="evenodd" clip-rule="evenodd"
                                                                        d="M8.72479 14.9304C8.83433 15.0622 9.01576 15.1101 9.17666 15.0519C9.33755 14.9937 9.44538 14.8397 9.44538 14.6685V6.5486C9.44538 6.24051 9.63537 5.97007 9.89725 5.90674C10.0941 5.85882 10.2824 5.8999 10.433 6.018C10.5819 6.13439 10.6675 6.30897 10.6675 6.49896V11.1854C10.6675 11.4096 10.8506 11.5927 11.0748 11.5927C11.2991 11.5927 11.4822 11.4096 11.4822 11.1854V4.91743C11.4822 4.60934 11.6722 4.34062 11.9358 4.27557C12.1309 4.22936 12.3209 4.26873 12.4715 4.38683C12.6187 4.50493 12.7043 4.67952 12.7043 4.86779V11.1854C12.7043 11.4096 12.8874 11.5927 13.1117 11.5927C13.3359 11.5927 13.5207 11.4096 13.5207 11.1854V5.68423C13.5207 5.49425 13.6046 5.31966 13.7535 5.20327C13.9041 5.08346 14.0941 5.04409 14.2893 5.09202C14.5511 5.15535 14.7428 5.42407 14.7428 5.73216V11.5927C14.7428 11.817 14.9243 12.0001 15.1502 12.0001C15.3761 12.0001 15.5576 11.817 15.5576 11.5927V8.12842C15.5576 7.96411 15.6209 7.81006 15.7356 7.69538C15.8828 7.54818 16.095 7.48828 16.3055 7.53107C16.5452 7.58242 16.7797 7.90249 16.7797 8.17635V15.1204C16.7797 17.491 15.0013 19.5124 12.73 19.7229C11.4617 19.841 10.2447 19.4422 9.30845 18.6035C8.60644 17.9763 8.09686 17.2039 7.55677 16.3852L7.54549 16.3681C7.42571 16.1851 7.30251 16.0003 7.17932 15.8155L7.1792 15.8153C6.6041 14.968 6.00332 14.0575 5.51893 13.0955C5.41795 12.8953 5.37002 12.7378 5.37002 12.6111C5.37002 12.4297 5.44876 12.2568 5.58569 12.1422C5.84414 11.9265 6.23439 11.9607 6.45005 12.2175L8.72479 14.9304ZM5.28962 13.211C5.1821 12.9977 5.11328 12.7974 5.11328 12.6111C5.11328 12.3563 5.22372 12.1104 5.42084 11.9453L5.4212 11.945C5.78779 11.6391 6.33959 11.6868 6.64664 12.0523L6.64679 12.0525L8.92224 14.7663C8.96164 14.8137 9.02871 14.8324 9.08933 14.8105C9.14826 14.7892 9.18864 14.7318 9.18864 14.6685V6.5486C9.18864 6.14616 9.43781 5.75378 9.83677 5.65723C10.1079 5.5913 10.3772 5.64803 10.5914 5.81596C10.8022 5.98089 10.9242 6.2299 10.9242 6.49896V11.1854C10.9242 11.2678 10.9924 11.336 11.0748 11.336C11.1573 11.336 11.2255 11.2678 11.2255 11.1854V4.91743C11.2255 4.51329 11.4759 4.1246 11.8743 4.02631L11.8766 4.02573C12.1434 3.96254 12.4144 4.0158 12.6299 4.18479L12.6311 4.18568L12.6322 4.18658C12.8387 4.35227 12.961 4.59985 12.961 4.86779V11.1854C12.961 11.2678 13.0292 11.336 13.1117 11.336C13.1955 11.336 13.264 11.2664 13.264 11.1854V5.68423C13.264 5.41701 13.3828 5.16758 13.5945 5.00166C13.8104 4.83043 14.0823 4.77694 14.35 4.84257C14.7471 4.93885 14.9996 5.32784 14.9996 5.73216V11.5927C14.9996 11.6759 15.0668 11.7434 15.1502 11.7434C15.2336 11.7434 15.3008 11.6759 15.3008 11.5927V8.12842C15.3008 7.89701 15.3905 7.67736 15.554 7.51384C15.7657 7.30214 16.0669 7.22056 16.3567 7.27947L16.358 7.27974L16.3593 7.28002C16.5622 7.32351 16.7292 7.46824 16.8394 7.61834C16.9516 7.77114 17.0364 7.97163 17.0364 8.17635V15.1204C17.0364 17.6153 15.1651 19.755 12.7537 19.9786C11.4153 20.1031 10.1275 19.6818 9.13739 18.795C8.41035 18.1454 7.88498 17.349 7.35105 16.5396L7.33063 16.5087C7.21174 16.3269 7.08934 16.1433 6.9662 15.9586C6.39093 15.1111 5.78202 14.1888 5.28962 13.211Z"
                                                                        fill="white" />
                                                                  </svg>

                                                                  <!-- Red hand -->
                                                                  <svg *ngIf="item.HoldStatus == '1'"
                                                                     (click)="selectedHoldItem(item)"
                                                                     data-bs-toggle="modal"
                                                                     data-bs-target="#hold_remarks" width="24"
                                                                     height="24" viewBox="0 0 24 24" fill="none"
                                                                     xmlns="http://www.w3.org/2000/svg">
                                                                     <rect x="2" y="2" width="20" height="20" rx="4"
                                                                        fill="#EB6247" />
                                                                     <path
                                                                        d="M16.6615 15.1204C16.6615 17.491 14.8831 19.5124 12.6118 19.7229C11.3435 19.841 10.1265 19.4422 9.19029 18.6035C8.48339 17.9719 7.97162 17.1931 7.42732 16.3681C7.30751 16.185 7.18427 16.0001 7.06104 15.8153C6.48593 14.968 5.88516 14.0575 5.40077 13.0955C5.29978 12.8953 5.25186 12.7378 5.25186 12.6111C5.25186 12.4297 5.33059 12.2568 5.46752 12.1422C5.72598 11.9265 6.11622 11.9607 6.33189 12.2175L8.60663 14.9304C8.71617 15.0622 8.8976 15.1101 9.05849 15.0519C9.21938 14.9937 9.32722 14.8397 9.32722 14.6685V6.5486C9.32722 6.24051 9.5172 5.97007 9.77908 5.90674C9.97592 5.85882 10.1642 5.8999 10.3148 6.018C10.4637 6.13439 10.5493 6.30897 10.5493 6.49896V11.1854C10.5493 11.4096 10.7325 11.5927 10.9567 11.5927C11.1809 11.5927 11.364 11.4096 11.364 11.1854V4.91743C11.364 4.60934 11.554 4.34062 11.8176 4.27557C12.0127 4.22936 12.2027 4.26873 12.3534 4.38683C12.5006 4.50493 12.5861 4.67952 12.5861 4.86779V11.1854C12.5861 11.4096 12.7693 11.5927 12.9935 11.5927C13.2177 11.5927 13.4026 11.4096 13.4026 11.1854V5.68423C13.4026 5.49425 13.4864 5.31966 13.6354 5.20327C13.786 5.08346 13.976 5.04409 14.1711 5.09202C14.433 5.15535 14.6247 5.42407 14.6247 5.73216V11.5927C14.6247 11.817 14.8061 12.0001 15.032 12.0001C15.258 12.0001 15.4394 11.817 15.4394 11.5927V8.12842C15.4394 7.96411 15.5027 7.81006 15.6174 7.69538C15.7646 7.54818 15.9768 7.48828 16.1874 7.53107C16.427 7.58242 16.6615 7.90249 16.6615 8.17635V15.1204Z"
                                                                        fill="white" />
                                                                     <path fill-rule="evenodd" clip-rule="evenodd"
                                                                        d="M8.60663 14.9304C8.71617 15.0622 8.8976 15.1101 9.05849 15.0519C9.21938 14.9937 9.32722 14.8397 9.32722 14.6685V6.5486C9.32722 6.24051 9.5172 5.97007 9.77908 5.90674C9.97592 5.85882 10.1642 5.8999 10.3148 6.018C10.4637 6.13439 10.5493 6.30897 10.5493 6.49896V11.1854C10.5493 11.4096 10.7325 11.5927 10.9567 11.5927C11.1809 11.5927 11.364 11.4096 11.364 11.1854V4.91743C11.364 4.60934 11.554 4.34062 11.8176 4.27557C12.0127 4.22936 12.2027 4.26873 12.3534 4.38683C12.5006 4.50493 12.5861 4.67952 12.5861 4.86779V11.1854C12.5861 11.4096 12.7693 11.5927 12.9935 11.5927C13.2177 11.5927 13.4026 11.4096 13.4026 11.1854V5.68423C13.4026 5.49425 13.4864 5.31966 13.6354 5.20327C13.786 5.08346 13.976 5.04409 14.1711 5.09202C14.433 5.15535 14.6247 5.42407 14.6247 5.73216V11.5927C14.6247 11.817 14.8061 12.0001 15.032 12.0001C15.258 12.0001 15.4394 11.817 15.4394 11.5927V8.12842C15.4394 7.96411 15.5027 7.81006 15.6174 7.69538C15.7646 7.54818 15.9768 7.48828 16.1874 7.53107C16.427 7.58242 16.6615 7.90249 16.6615 8.17635V15.1204C16.6615 17.491 14.8831 19.5124 12.6118 19.7229C11.3435 19.841 10.1265 19.4422 9.19029 18.6035C8.48827 17.9763 7.9787 17.2039 7.4386 16.3852L7.42732 16.3681C7.30755 16.1851 7.18435 16.0003 7.06115 15.8155L7.06104 15.8153C6.48593 14.968 5.88516 14.0575 5.40077 13.0955C5.29978 12.8953 5.25186 12.7378 5.25186 12.6111C5.25186 12.4297 5.33059 12.2568 5.46752 12.1422C5.72598 11.9265 6.11622 11.9607 6.33189 12.2175L8.60663 14.9304ZM5.17146 13.211C5.06393 12.9977 4.99512 12.7974 4.99512 12.6111C4.99512 12.3563 5.10555 12.1104 5.30268 11.9453L5.30303 11.945C5.66963 11.6391 6.22142 11.6868 6.52848 12.0523L6.52862 12.0525L8.80407 14.7663C8.84348 14.8137 8.91055 14.8324 8.97116 14.8105C9.0301 14.7892 9.07047 14.7318 9.07047 14.6685V6.5486C9.07047 6.14616 9.31964 5.75378 9.7186 5.65723C9.98969 5.5913 10.2591 5.64803 10.4732 5.81596C10.6841 5.98089 10.8061 6.2299 10.8061 6.49896V11.1854C10.8061 11.2678 10.8742 11.336 10.9567 11.336C11.0391 11.336 11.1073 11.2678 11.1073 11.1854V4.91743C11.1073 4.51329 11.3578 4.1246 11.7561 4.02631L11.7584 4.02573C12.0253 3.96254 12.2963 4.0158 12.5118 4.18479L12.5129 4.18568L12.514 4.18658C12.7205 4.35227 12.8429 4.59985 12.8429 4.86779V11.1854C12.8429 11.2678 12.9111 11.336 12.9935 11.336C13.0773 11.336 13.1458 11.2664 13.1458 11.1854V5.68423C13.1458 5.41701 13.2647 5.16758 13.4764 5.00166C13.6922 4.83043 13.9641 4.77694 14.2319 4.84257C14.629 4.93885 14.8814 5.32784 14.8814 5.73216V11.5927C14.8814 11.6759 14.9486 11.7434 15.032 11.7434C15.1155 11.7434 15.1827 11.6759 15.1827 11.5927V8.12842C15.1827 7.89701 15.2723 7.67736 15.4359 7.51384C15.6476 7.30214 15.9487 7.22056 16.2385 7.27947L16.2398 7.27974L16.2412 7.28002C16.4441 7.32351 16.6111 7.46824 16.7213 7.61834C16.8334 7.77114 16.9182 7.97163 16.9182 8.17635V15.1204C16.9182 17.6153 15.0469 19.755 12.6355 19.9786C11.2971 20.1031 10.0094 19.6818 9.01923 18.795C8.29218 18.1454 7.76681 17.349 7.23289 16.5396L7.21247 16.5087C7.09357 16.3269 6.97118 16.1433 6.84804 15.9586C6.27277 15.1111 5.66386 14.1888 5.17146 13.211Z"
                                                                        fill="white" />
                                                                  </svg>
                                                                  <p class="clr-primary-600 m-0 fs-7">Hold</p>
                                                               </div>
                                                               <div
                                                                  class="cursor-pointer py-2 px-1 d-flex align-items-center gap-2"
                                                                  (click)="deleteItemFromPresc(item)">
                                                                  <svg width="23" height="22" viewBox="0 0 23 22"
                                                                     fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                     <path
                                                                        d="M19.7504 6.16992H19.677C14.8279 5.68408 9.98785 5.50075 5.19368 5.98658L3.32368 6.16992C3.23272 6.17941 3.14077 6.17077 3.05316 6.14451C2.96555 6.11825 2.88402 6.07489 2.81327 6.01693C2.74252 5.95896 2.68396 5.88755 2.64098 5.80682C2.598 5.72609 2.57144 5.63764 2.56285 5.54658C2.52618 5.16158 2.80118 4.83158 3.17702 4.79492L5.04702 4.61158C9.92368 4.11658 14.8645 4.30908 19.8145 4.79492C20.1904 4.83158 20.4654 5.17075 20.4287 5.54658C20.4148 5.71679 20.3373 5.87552 20.2116 5.99106C20.0858 6.10661 19.9211 6.17048 19.7504 6.16992Z"
                                                                        fill="#EB6247" />
                                                                     <path
                                                                        d="M8.29137 5.24398C8.2547 5.24398 8.21804 5.24398 8.1722 5.23482C7.99436 5.20277 7.83617 5.10225 7.73162 4.95485C7.62707 4.80745 7.58449 4.62493 7.61304 4.44648L7.8147 3.24565C7.96137 2.36565 8.16304 1.14648 10.2989 1.14648H12.7005C14.8455 1.14648 15.0472 2.41148 15.1847 3.25482L15.3864 4.44648C15.4505 4.82232 15.1939 5.17982 14.8272 5.23482C14.4514 5.29898 14.0939 5.04232 14.0389 4.67565L13.8372 3.48398C13.7089 2.68648 13.6814 2.53065 12.7097 2.53065H10.308C9.33637 2.53065 9.31804 2.65898 9.18054 3.47482L8.9697 4.66648C8.94359 4.8276 8.86101 4.97416 8.73673 5.07997C8.61245 5.18577 8.45459 5.24391 8.29137 5.24398ZM14.4422 20.8567H8.5572C5.35804 20.8567 5.2297 19.0875 5.12887 17.6575L4.53304 8.42665C4.50554 8.05082 4.79887 7.72082 5.1747 7.69332C5.5597 7.67498 5.88054 7.95915 5.90804 8.33498L6.50387 17.5658C6.6047 18.9592 6.64137 19.4817 8.5572 19.4817H14.4422C16.3672 19.4817 16.4039 18.9592 16.4955 17.5658L17.0914 8.33498C17.1189 7.95915 17.4489 7.67498 17.8247 7.69332C18.2005 7.72082 18.4939 8.04165 18.4664 8.42665L17.8705 17.6575C17.7697 19.0875 17.6414 20.8567 14.4422 20.8567Z"
                                                                        fill="#EB6247" />
                                                                     <path
                                                                        d="M13.0213 15.8132H9.96884C9.59301 15.8132 9.28134 15.5015 9.28134 15.1257C9.28134 14.7498 9.59301 14.4382 9.96884 14.4382H13.0213C13.3972 14.4382 13.7088 14.7498 13.7088 15.1257C13.7088 15.5015 13.3972 15.8132 13.0213 15.8132ZM13.7913 12.1465H9.20801C8.83217 12.1465 8.52051 11.8348 8.52051 11.459C8.52051 11.0832 8.83217 10.7715 9.20801 10.7715H13.7913C14.1672 10.7715 14.4788 11.0832 14.4788 11.459C14.4788 11.8348 14.1672 12.1465 13.7913 12.1465Z"
                                                                        fill="#EB6247" />
                                                                  </svg>
                                                                  <p class="clr-primary-600 m-0 fs-7">Delete</p>
                                                               </div>
                                                            </div>
                                                         </div>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>

                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </form>
                     </div>

                  </div>
               </div>
               <div class="col-4" style="width: 28%;" *ngIf="showBillSummary">
                  <!-- BILL SUMMARY -->
                  <div class="border-primary-200 rounded-2">
                     <div class="d-flex align-items-center justify-content-between p-2 border-bottom-primary-200">
                        <h5 class="card-heading clr-primary-600 m-0">Bill Summary</h5>
                        <div class="d-flex align-items-center gap-2">
                           <button class="btn btn-main-outline"  
                              (click)="saveCashIssue()">Save</button>
                           <button class="btn btn-danger-outline" (click)="closeBillSummary()">Cancel</button>
                        </div>
                     </div>
                     <div class="">
                        <form [formGroup]="billSummaryform">
                           <div class="bill_amnt_row d-flex justify-content-between gap-2 p-2">
                              <div class="col d-flex flex-column border-end-primary-200">
                                 <label for="" class="form-label clr-primary-600 m-0 mb-1 fw-bold fs-8">Total Bill
                                    Amount</label>
                                 <label for="" 
                                    class="form-label fw-500 clr-primary-600 m-0 fs-6 lh-1">{{NetBillAmount | number:
                                    '1.2-2'}}</label>
                              </div>
                              <div class="col d-flex flex-column border-end-primary-200">
                                 <label for="" class="form-label clr-primary-600 m-0 mb-1 fw-bold fs-8">Net Bill
                                    Amt</label>
                                 <label for="" 
                                    class="form-label fw-500 clr-primary-600 m-0 fs-6 lh-1">{{BillAmountWithVAT |
                                    number: '1.2-2'}}</label>
                              </div>
                              <!-- <div class="d-flex flex-column">
                                 <label for="" class="form-label clr-primary-600 m-0 mb-1 fw-bold fs-8">Bill Amt (WithVAT)</label>
                                 <label for="" formControlName="NetBillAmount" class="form-label fw-500 clr-primary-600 m-0 fs-6 lh-1">{{NetBillAmount | number: '1.2-2'}}</label>
                              </div> -->
                           </div>
                           <div class="row gx-2 align-items-center border-bottom mx-0">
                              <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                 <label for=""
                                    class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">Payer
                                    Amount</label>
                                 <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{this.billSummary?.totalPayerAmount |
                                    number: '1.2-2'}}</p>
                              </div>
                              <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                 <label for=""
                                    class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">Discount
                                    Amount</label>
                                 <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{DiscountAmount | number: '1.2-2'}}
                                 </p>
                              </div>
                              <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                 <label for="" class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">VAT
                                    Amount</label>
                                 <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{VATAmount | number: '1.2-2'}}</p>
                              </div>
                              <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                 <label for=""
                                    class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">Deposit
                                    Amount</label>
                                 <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">0.00</p>
                              </div>
                              <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                 <label for=""
                                    class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">Refund
                                    Amount</label>
                                 <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">0.00</p>
                              </div>
                              <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                 <label for=""
                                    class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">Receipt
                                    Amount</label>
                                 <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{receiptAmount | number: '1.2-2'}}
                                 </p>
                              </div>
                              <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                 <label for=""
                                    class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">Balance
                                    Amount</label>
                                 <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">0.00</p>
                              </div>
                              <div class="py-1 pb-0 d-flex align-items-center justify-content-between">
                                 <div class="d-flex align-items-center split_pay w-100 pe-2">
                                    <div class="d-flex align-items-center p-1 gap-1 availDiscount" [class.active]="splitPay" (click)="enableSplitPay()">
                                       <svg class="cursor-pointer" width="22" height="22" viewBox="0 0 33 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                          <g opacity="0.5">
                                             <rect x="0.425781" width="32" height="32" rx="10" fill="#368796"/>
                                             <path d="M24.9949 18.2967C25.2038 17.5154 26.4258 16.8449 26.4258 16C26.4258 15.155 25.2038 14.4834 24.9949 13.7032C24.786 12.922 25.4952 11.7031 25.0889 10.9971C24.6826 10.2911 23.2789 10.3099 22.6825 9.73019C22.0861 9.14947 22.1289 7.75202 21.4156 7.33737C20.7001 6.92272 19.5272 7.64758 18.722 7.4439C17.9167 7.24023 17.2702 6.00049 16.4253 6.00049C15.5803 6.00049 14.9087 7.22249 14.1285 7.4439C13.3473 7.66532 12.1284 6.94361 11.4224 7.3499C10.7164 7.75618 10.7352 9.15992 10.1555 9.7563C9.57478 10.3527 8.17733 10.3099 7.76268 11.0232C7.34803 11.7376 8.07289 12.9241 7.85668 13.7294C7.63944 14.5346 6.42578 15.155 6.42578 16C6.42578 16.8449 7.64778 17.5165 7.85668 18.2967C8.06557 19.078 7.35639 20.2968 7.76268 21.0028C8.16896 21.7089 9.5727 21.6901 10.1691 22.2698C10.7655 22.8505 10.7226 24.2479 11.436 24.6762C12.1504 25.1044 13.3369 24.3659 14.1421 24.5822C14.9464 24.7994 15.5803 25.9995 16.4253 25.9995C17.2703 25.9995 17.9418 24.7775 18.722 24.5686C19.5033 24.3597 20.7221 25.0689 21.4282 24.6626C22.1342 24.2563 22.1154 22.8526 22.6951 22.2562C23.2758 21.6598 24.6732 21.7026 25.1015 20.9893C25.5297 20.2748 24.7776 19.1019 24.9949 18.2967ZM12.3236 11.8983C12.7988 11.4221 13.5142 11.279 14.1367 11.5369C14.7582 11.7939 15.1634 12.4007 15.1634 13.0733C15.1634 13.7459 14.7582 14.3528 14.1367 14.6097C13.5142 14.8677 12.7988 14.7246 12.3236 14.2483C11.6771 13.5987 11.6771 12.548 12.3236 11.8983ZM13.2803 20.0878C13.156 20.2142 12.9857 20.2852 12.8072 20.2863C12.6306 20.2863 12.4604 20.2142 12.3372 20.0878C12.2118 19.9636 12.1408 19.7933 12.1408 19.6158C12.1408 19.4393 12.2118 19.269 12.3372 19.1447L19.57 11.9255C19.6922 11.7877 19.8656 11.7072 20.0494 11.702C20.2332 11.6968 20.4108 11.7678 20.5403 11.8984C20.6708 12.0279 20.7408 12.2054 20.7356 12.3892C20.7314 12.5731 20.65 12.7464 20.5131 12.8687L13.2803 20.0878ZM20.5268 20.0878C20.0515 20.5641 19.3361 20.7072 18.7136 20.4492C18.0922 20.1923 17.6869 19.5855 17.6869 18.9129C17.6869 18.2402 18.0922 17.6334 18.7136 17.3765C19.3361 17.1185 20.0515 17.2616 20.5268 17.7379C20.8411 18.0502 21.0187 18.4763 21.0187 18.9202C21.0187 19.363 20.8411 19.7892 20.5268 20.1015V20.0878Z" fill="white"/>
                                          </g>
                                       </svg>
                                       <label class="clr-primary-600 m-0 fw-500 text-nowrap fs-7">Split Pay</label>
                                    </div>
                                    <label for=""
                                       class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">Collectable</label>
                                 </div>
                                  <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{this.isCash ? '' :
                                       this.billSummary?.collectableAmount | number: '1.2-2'}}</p>
                              </div>
                           </div>

                           <div class="border bg-primary-20 rounded m-2 p-2 pt-1">
                              <div class="row g-2">
                                 <div class="col-4">
                                    <label for="" class="form-label m-0  clr-dark-600">Receipt Amount</label>
                                    <input type="text" readonly formControlName="ReceiptAmount" class="form-control">
                                 </div>
                                 <div class="col-4">
                                    <div class="d-flex align-items-center gap-2">
                                       <label for="" class="form-label m-0  clr-dark-600">Collected</label>
                                       <div
                                          class="info_img cursor-pointer custom_tooltip custom_tooltip_top_left w-max-content">
                                          <svg width="15" height="15" viewBox="0 0 28 29" fill="none"
                                             xmlns="http://www.w3.org/2000/svg">
                                             <rect y="0.422119" width="28" height="28" rx="14" fill="#69BAC9"></rect>
                                             <path fill-rule="evenodd" clip-rule="evenodd"
                                                d="M14.9692 9.57595C16.1161 9.57595 17.0461 8.64597 17.0461 7.49904C17.0461 6.3521 16.1161 5.42212 14.9692 5.42212C13.8223 5.42212 12.8923 6.3521 12.8923 7.49904C12.8923 8.64597 13.8223 9.57595 14.9692 9.57595ZM10.5385 11.6529C10.5385 11.2706 10.8484 10.9606 11.2308 10.9606H15.6615C16.0862 10.9606 16.4107 11.3392 16.3458 11.7589L14.6923 21.2067C14.5616 22.2031 15.0205 22.4566 15.6615 22.4566C16.242 22.4566 16.6942 22.0035 16.9856 21.5535C17.0767 21.4249 17.2109 21.36 17.3716 21.4249C17.4683 21.4898 17.5001 21.6505 17.4012 21.7791C16.6644 23.0042 15.193 23.4221 14 23.4221C12.0705 23.4221 11.1152 22.4245 11.3692 20.6529L12.5922 12.3452H11.2308C10.8485 12.3452 10.5385 12.0352 10.5385 11.6529Z"
                                                fill="#ECF6F8"></path>
                                          </svg>
                                          <div class="tooltip p-2" style="width: 30rem;bottom: 2rem !important;">
                                             <div class="border rounded">
                                                <div class="row gx-2 mx-0 pb-2 border-bottom">
                                                   <div class="col-3">
                                                      <label for="" class="form-label mb-0">OP Limit</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.limit }}</p>
                                                   </div>
                                                   <div class="col-3">
                                                      <label for="" class="form-label mb-0">Balance</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.limit - collectableInfo?.utilization }}</p>
                                                   </div>
                                                   <div class="col-3">
                                                      <label for="" class="form-label mb-0">Pharmacy Limit</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.pharmacyLimit }}</p>
                                                   </div>
                                                   <div class="col-3">
                                                      <label for="" class="form-label mb-0">Pharmacy Balance</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.pharmacyLimit - collectableInfo?.pharmacyUtilization }}</p>
                                                   </div>
                                                </div>
                                                <div class="row gx-2 mx-0 p-2">
                                                   <div class="col d-flex align-items-center gap-2">
                                                      <label for="" class="form-label mb-0">MaxColl.</label>
                                                      <p class="clr-primary-600 m-0 fs-6 m-0 fw-bold">{{ collectableInfo?.opMaxCollectable }}</p>
                                                   </div>
                                                   <div class="col d-flex align-items-center gap-2">
                                                      <label for="" class="form-label mb-0">Collected</label>
                                                      <p class="clr-primary-600 m-0 fs-6 m-0 fw-bold">{{ collectableInfo?.opCollectedAmount }}</p>
                                                   </div>
                                                </div>
                                             </div>
                                             <div class="row g-2 mt-2">
                                                <div class="col-6">
                                                   <div class="bg-primary-20 p-1 px-2 h-100 rounded">
                                                      <label for="" class="form-label mb-0">Brand Group Max Collectable</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.maxBrandCollectable }} ( {{collectableInfo?.brandCollectablePerc }}%)</p>
                                                   </div>
                                                </div>
                                                <div class="col-6">
                                                   <div class="bg-primary-20 p-1 px-2 h-100 rounded">
                                                      <label for="" class="form-label mb-0">Brand Group Collected</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.brandCollectedAmount }}</p>
                                                   </div>
                                                </div>
                                                <div class="col-6">
                                                   <div class="bg-primary-20 p-1 px-2 h-100 rounded">
                                                      <label for="" class="form-label mb-0">Generic Group Max Collectable</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.maxGenericCollectable }} ({{ collectableInfo?.genericCollectablePerc }}%)</p>
                                                   </div>
                                                </div>
                                                <div class="col-6">
                                                   <div class="bg-primary-20 p-1 px-2 h-100 rounded">
                                                      <label for="" class="form-label mb-0">Generic Group Collected</label>
                                                      <p class="clr-primary-600 m-0 fs-6 fw-bold">{{ collectableInfo?.genericCollectedAmount }}</p>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                    <input type="text" formControlName="CollectedAmount"
                                       (change)="calculateChangeRendered()" class="form-control">
                                 </div>
                                 <div class="col-4">
                                    <label for="" class="form-label m-0  clr-dark-600">Rendered Change</label>
                                    <input type="text" formControlName="ChangeToBeRendered" class="form-control"
                                       [disabled]="true">
                                 </div>
                              </div>

                              <div class="row g-2 align-items-end" *ngIf="splitPay">
                                 <div class="col-4">
                                    <label for="" class="form-label m-0  clr-dark-600">Cash Collected</label>
                                    <input type="text"  formControlName="cashCollectedAmount" maxlength="6" (keyup)="splitPayCashCollected($event)" class="form-control">
                                 </div>
                                 <div class="col-4">
                                    <label for="" class="form-label m-0  clr-dark-600">Card Collected</label>
                                    <input type="text" readonly formControlName="cardCollectedAmount" class="form-control">
                                 </div>
                                 <div class="col-4">
                                   <button class="btn btn-main-outline" (click)="initiateCardPayment()">Apply</button>
                                 </div>
                              </div>
                           </div>

                           <div class="border rounded m-2 p-2 pt-1">
                              <div class="row g-2">
                                 <div class="col-12 d-flex align-items-center gap-2">
                                    <label for="" 
                                       class="form-label fw-bold m-0 clr-dark-600 text-nowrap">Mode of Payment</label>
                                    <div
                                       class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-center">
                                       <button class="btn"
                                          [ngClass]="billSummaryform.get('ModeofPayment')?.value == 1 ? 'selected' : ''"
                                          (click)="onSelectmodeOfPayment(1)" translate>
                                          Cash
                                       </button>
                                       <button class="btn"
                                          [ngClass]="billSummaryform.get('ModeofPayment')?.value == 2 ? 'selected' : ''"
                                          (click)="onSelectmodeOfPayment(2)" translate>
                                          Card
                                       </button>
                                    </div>
                                 </div>
                                 
                                 <!-- <div class="col-12" *ngIf="!isCash">
                                    <div class="row gx-2 align-items-center border-bottom mx-0">
                                       <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                          <label for=""
                                             class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">
                                             Max Collectable</label>
                                          <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{collectableInfo?.opMaxCollectable}}</p>
                                       </div>
                                       <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                          <label for=""
                                             class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">
                                             Collected</label>
                                          <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{collectableInfo?.opCollectedAmount}}
                                          </p>
                                       </div>
                                       <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                          <label for="" class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">
                                             Brand Max Collectable</label>
                                          <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{collectableInfo?.maxBrandCollectable}}( {{ collectableInfo?.brandCollectablePerc }} )</p>
                                       </div>
                                       <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                          <label for=""
                                             class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">
                                             Generic Max Collectable</label>
                                          <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{collectableInfo?.maxGenericCollectable}}( {{ collectableInfo?.genericCollectablePerc }} )</p>
                                       </div>
                                       <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                          <label for=""
                                             class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">
                                             Brand Group Collected</label>
                                          <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{collectableInfo?.brandCollectedAmount}}</p>
                                       </div>
                                       <div class="border-bottom py-1 d-flex align-items-center justify-content-between">
                                          <label for=""
                                             class=" fs-8 fw-bold pe-2 form-label m-0 col-9 clr-dark-600 text-end">
                                             Generic Group Collected</label>
                                          <p class=" fs-6 fw-bold col-3 clr-dark-600 ps-2">{{collectableInfo?.genericCollectedAmount}}</p>
                                       </div>
                                    </div>
                                 </div> -->
 
                              </div>
                           </div>

                        </form>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <!-- No Bulk Process -->
      <div class="nobulkprocess d-flex flex-column align-items-center justify-content-center" *ngIf="showNoRecFound">
         <img src="assets/images/nomedicine.png" alt="" class="mb-2">
         <p class="m-0 fs-6">No Orders to View</p>
      </div>      
   </div>

</div>

<div class="modal quick_info" data-bs-backdrop="static" id="quick_info" tab-index="-1" *ngIf="!showNoRecFound">
   <div class="modal-dialog modal-dialog-scrollabel">
      <div class="modal-content h-100 overflow-auto">
         <div class="modal-header ps-0">
            <label for="" class="ssn_label bg-primary clr-light" id="lblSSN">SSN:
               {{pinfo?.SSN}}</label>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
               (click)="clearPatientInfo()"></button>
         </div>
         <app-patient-quick-information *ngIf="pinfo" [patientInfo]="pinfo"></app-patient-quick-information>
      </div>
   </div>
</div>



<div class="substitute_Modal modal" data-bs-backdrop="static" tabindex="-1" id="divMultiplePrescriptions" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 80%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Prescriptions</h5>

            <div class="d-flex align-items-center gap-2 ms-auto">
               <button class="btn btn-main-outline"
                  (click)="loadSelectedPrescriptionDetails(selectedPrescriptionToLoad)">Select</button>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body" style="height: calc(100vh - 18rem); overflow: auto;">
            <div>
               <p *ngIf="showSubstituteValidation" class="text-danger">Please select any Prescription to continue</p>
            </div>
            <div class="" *ngFor="let pres of multiplePrescriptions; let i = index">
               <div class="border rounded-2 mt-2 p-2">
                  <div class="row mx-0 g-2 w-100">
                     <div class="col-md-2">
                        <div class="d-flex align-items-center gap-2">
                           <div class="custom_check d-flex align-items-center" [class.active]="pres.selected"
                              (click)="selectPrescription(pres)">
                              <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                 xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                 <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                 <path
                                    d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                    fill="white" stroke="white" stroke-width="0.25"></path>
                              </svg>
                           </div>
                           <div>
                              <p class="clr-primary-600 text-nowrap">{{langData?.prescriptions?.PrescNo}}</p>
                              <p class="text-break">{{pres.ORDERSLNO}}</p>
                           </div>
                        </div>
                     </div>
                     <div class="d-flex align-items-start justify-content-between gap-1 col-6">
                        <div class="col-2">
                           <p class="clr-primary-600 text-nowrap">SSN</p>
                           <p class="text-break">{{pres.SSN}}</p>
                        </div>
                        <div class="col-6">
                           <p class="clr-primary-600 text-nowrap">Patient</p>
                           <p class="text-break">{{pres.PatientName}} | {{pres.Gender}} | {{pres.Age}}</p>
                        </div>
                        <div class="col-6">
                           <p class="clr-primary-600 text-nowrap">{{langData?.Ward?.DoctorName}}</p>
                           <p class="text-break">{{pres.Doctorname}} | {{pres.Specialisation}}</p>
                        </div>
                        <div class="col-4">
                           <p class="clr-primary-600 text-nowrap">{{langData?.prescriptions?.PrescriptionDateTime}}</p>
                           <!-- <p class="text-break">{{pres.OrderDate}}</p> -->
                           <p>
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"
                                 fill="none">
                                 <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M13.8552 1.56632H13.131V1.39789C13.131 0.623158 12.5079 0 11.7331 0C10.9584 0 10.3352 0.623158 10.3352 1.39789V1.56632H9.24049V1.39789C9.24049 0.623158 8.61733 0 7.84259 0C7.06785 0 6.4447 0.623158 6.4447 1.39789V1.56632H5.34996V1.39789C5.34996 0.623158 4.7268 0 3.95206 0C3.17733 0 2.55417 0.623158 2.55417 1.39789V1.56632H1.82996C0.886801 1.56632 0.128906 2.32421 0.128906 3.26737V14.2989C0.128906 15.2421 0.886801 16 1.82996 16H13.8215C14.7647 16 15.5226 15.2421 15.5226 14.2989V3.28421C15.5563 2.34105 14.7984 1.56632 13.8552 1.56632ZM11.2279 1.41474C11.2279 1.12842 11.4636 0.909474 11.7331 0.909474C12.0194 0.909474 12.2384 1.14526 12.2384 1.41474V2.62737C12.2384 2.91368 12.0026 3.13263 11.7331 3.13263C11.4468 3.13263 11.2279 2.89684 11.2279 2.62737V1.41474ZM7.35417 1.41474C7.35417 1.12842 7.58996 0.909474 7.85943 0.909474C8.14575 0.909474 8.3647 1.14526 8.3647 1.41474V2.62737C8.3647 2.91368 8.12891 3.13263 7.85943 3.13263C7.57312 3.13263 7.35417 2.89684 7.35417 2.62737V1.41474ZM3.46364 1.41474C3.46364 1.12842 3.69943 0.909474 3.96891 0.909474C4.25522 0.909474 4.47417 1.14526 4.47417 1.41474V2.62737C4.47417 2.91368 4.23838 3.13263 3.96891 3.13263C3.68259 3.13263 3.46364 2.89684 3.46364 2.62737V1.41474ZM14.6805 14.3158C14.6805 14.7705 14.31 15.1411 13.8552 15.1411H1.86364C1.40891 15.1411 1.03838 14.7705 1.03838 14.3158V5.38947H14.6636V14.3158H14.6805ZM10.9753 13.3221C11.0932 13.44 11.2279 13.4905 11.3795 13.4905C11.5311 13.4905 11.6658 13.44 11.7837 13.3221L13.3332 11.7726C13.5521 11.5537 13.5521 11.1832 13.3332 10.9642C13.1142 10.7453 12.7437 10.7453 12.5248 10.9642L11.3795 12.1095L10.9584 11.6884C10.7395 11.4695 10.369 11.4695 10.15 11.6884C9.93107 11.9074 9.93107 12.2779 10.15 12.4968L10.9753 13.3221ZM4.92888 9.7179H3.19414C2.95835 9.7179 2.75625 9.51579 2.75625 9.28V7.52842C2.75625 7.29263 2.95835 7.09053 3.19414 7.09053H4.92888C5.16467 7.09053 5.36678 7.29263 5.36678 7.52842V9.28C5.36678 9.51579 5.16467 9.7179 4.92888 9.7179ZM7.0006 9.7179H8.73533C8.97112 9.7179 9.17323 9.51579 9.17323 9.28V7.52842C9.17323 7.29263 8.97112 7.09053 8.73533 7.09053H7.0006C6.76481 7.09053 6.5627 7.29263 6.5627 7.52842V9.28C6.54586 9.51579 6.74796 9.7179 7.0006 9.7179ZM12.5247 9.7179H10.79C10.5542 9.7179 10.3521 9.51579 10.3521 9.28V7.52842C10.3521 7.29263 10.5542 7.09053 10.79 7.09053H12.5247C12.7605 7.09053 12.9626 7.29263 12.9626 7.52842V9.28C12.9626 9.51579 12.7605 9.7179 12.5247 9.7179ZM3.19414 13.4569H4.92888C5.16467 13.4569 5.36678 13.2548 5.36678 13.019V11.2674C5.36678 11.0316 5.16467 10.8295 4.92888 10.8295H3.19414C2.95835 10.8295 2.75625 11.0316 2.75625 11.2674V13.019C2.75625 13.2548 2.95835 13.4569 3.19414 13.4569ZM8.73533 13.4569H7.0006C6.74796 13.4569 6.54586 13.2548 6.5627 13.019V11.2674C6.5627 11.0316 6.76481 10.8295 7.0006 10.8295H8.73533C8.97112 10.8295 9.17323 11.0316 9.17323 11.2674V13.019C9.17323 13.2548 8.97112 13.4569 8.73533 13.4569Z"
                                    fill="#7C8283" />
                              </svg>
                              {{pres.OrderDate}}

                              <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16"
                                 fill="none">
                                 <path
                                    d="M11.1608 9.78246H8.17179C7.67948 9.78246 7.29267 9.39565 7.29267 8.90334V4.33191C7.29267 3.83961 7.67948 3.45279 8.17179 3.45279C8.6641 3.45279 9.05091 3.83961 9.05091 4.33191V8.02422H11.1608C11.6531 8.02422 12.0399 8.41104 12.0399 8.90334C12.0399 9.39565 11.6531 9.78246 11.1608 9.78246Z"
                                    fill="#7C8283" />
                                 <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M16.5234 8C16.5234 12.4132 12.9366 16 8.52344 16C4.11025 16 0.523438 12.4132 0.523438 8C0.523438 3.58681 4.11025 0 8.52344 0C12.9366 0 16.5234 3.58681 16.5234 8ZM14.7652 8C14.7652 4.55385 11.9696 1.75824 8.52344 1.75824C5.07728 1.75824 2.28168 4.55385 2.28168 8C2.28168 11.4462 5.07728 14.2418 8.52344 14.2418C11.9696 14.2418 14.7652 11.4462 14.7652 8Z"
                                    fill="#7C8283" />
                              </svg>

                              {{pres.OrderDateTime}}
                           </p>
                        </div>
                        <!-- <div class="col-5">
                           <p class="clr-primary-600 text-nowrap">Specialisation</p>
                           <p class="text-break">{{pres.Specialisation}}</p>
                        </div> -->
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<div class="substitute_Modal modal" data-bs-backdrop="static" tabindex="-1" id="divMultiplePatients1" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 60%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Patients Information</h5>

            <div class="d-flex align-items-center gap-2 ms-auto">
               <button class="btn btn-main-outline"
                  (click)="fetchSelectedPatientPrescription(selectedPatientId)">Select</button>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body" style="height: calc(100vh - 18rem); overflow: auto;">
            <div>
               <p *ngIf="showSubstituteValidation" class="text-danger">Please select any Patient to continue</p>
            </div>
            <div class="" *ngFor="let pat of multiplePatients; let i = index">
               <div class="border rounded-2 mt-2 p-2">
                  <div class="row mx-0 g-2 w-100">
                     <div class="col-md-5">
                        <div class="d-flex align-items-center gap-2">
                           <div class="custom_check d-flex align-items-center" [class.active]="pat.selected"
                              (click)="selectPatient(pat)">
                              <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                 xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                 <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                 <path
                                    d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                    fill="white" stroke="white" stroke-width="0.25"></path>
                              </svg>
                           </div>
                           <div>
                              <p class="clr-primary-600 text-nowrap">Name</p>
                              <p class="text-break">{{pat.PatientName}}</p>
                           </div>
                        </div>
                     </div>
                     <div class="d-flex align-items-start justify-content-between gap-1 col-6">
                        <div class="col-3">
                           <p class="clr-primary-600 text-nowrap">SSN</p>
                           <p class="text-break">{{pat.SSN}}</p>
                        </div>
                        <div class="col-4">
                           <p class="clr-primary-600 text-nowrap">Age | Gender</p>
                           <p class="text-break">{{pat.FullAge}} | {{pat.Gender}}</p>
                        </div>
                        <div class="col-3">
                           <p class="clr-primary-600 text-nowrap">MobileNo</p>
                           <p class="text-break">{{pat.MobileNo}}</p>
                        </div>
                        <div class="col-3">
                           <p class="clr-primary-600 text-nowrap">Nationality</p>
                           <p class="text-break">{{pat.Nationality}}</p>
                        </div>

                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<div class="modal" id="counterValidation" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
      <div class="modal-content">
         <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
         <div class="modal-body">
            <p>Please select Counter</p>
            <div class="modal-footer">
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                  data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
            </div>
         </div>
      </div>
   </div>
</div>


<div class="modal" id="errorMsg" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
      <div class="modal-content">
         <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
         <div class="modal-body">
            <!-- <p>{{errorMessage.split(':')[0]}}</p>
               <p>{{errorMessage.split(':')[1]}}</p> -->
            <!-- <div class="">
                  <h6 class="clr-danger-200 text-center">No stock exist for the Items:</h6>
                  <div class="d-flex flex-column gap-2">
                     <p class="p-2 text-start border rounded-2 m-0">AZITHROMYCIN (ZETRON) 200 MG/5ML SUSP 15 ML (A)</p>
                     <p class="p-2 text-start border rounded-2 m-0">AZITHROMYCIN (ZETRON) 200 MG/5ML SUSP 15 ML (A)</p>
                  </div>
               </div> -->
            <div class="errormsg" [innerHtml]="errorMessage"></div>
            <div class="modal-footer">
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                  data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
            </div>
         </div>
      </div>
   </div>
</div>
<div class="modal" id="validationMsgs" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
      <div class="modal-content">
         <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
         <div class="modal-body">
            <p>{{errorMessage}}</p>
            <div class="modal-footer">
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                  data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
            </div>
         </div>
      </div>
   </div>
</div>
<div class="substitute_Modal modal" data-bs-backdrop="static" tabindex="-1" id="substitute_Modal" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 60%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">{{langData?.prescriptions?.SubstituteItems}}</h5>

            <div class="d-flex align-items-center gap-2 ms-auto">
               <button class="btn btn-main-outline" (click)="issueSubstitute()">Select</button>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body" style="height: calc(100vh - 18rem); overflow: auto;">
            <div>
               <p *ngIf="showSubstituteValidation" class="text-danger">Please select any substitue item to continue</p>
            </div>
            <div class="" *ngFor="let item of FetchSubstituteItemsDList; let i = index">
               <div class="border rounded-2 mt-2 p-2">
                  <div class="row mx-0 g-2 w-100">
                     <div class="col-md-7">
                        <div class="d-flex align-items-center gap-2">
                           <div class="custom_check active d-flex align-items-center" [class.active]="item.selected"
                              (click)="substitute(item)">
                              <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                 xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                 <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                 <path
                                    d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                    fill="white" stroke="white" stroke-width="0.25"></path>
                              </svg>
                           </div>
                           <div>
                              <p class="clr-primary-600 text-nowrap">Substitute</p>
                              <p class="text-break">{{item.ItemName}}</p>
                           </div>
                        </div>
                     </div>
                     <div class="d-flex align-items-start justify-content-between gap-1 col-4">
                        <div class="col-5">
                           <p class="clr-primary-600 text-nowrap">Generic</p>
                           <p class="text-break">{{item.GenericName}}</p>
                        </div>
                        <div class="col-4">
                           <p class="clr-primary-600 text-nowrap">QOH</p>
                           <p class="text-break">{{item.QoH}} {{item.QUoM}}</p>
                        </div>
                        <div class="col-5">
                           <p class="clr-primary-600 text-nowrap">Pack</p>
                           <p class="text-break">{{item.QOHPackName}}</p>
                        </div>

                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- <div class="modal-body d-none">
            <div class="">
               <table class="table m-0" style="min-height: 10rem;max-height: 10rem;">
                  <thead>
                     <tr>
                        <th>Substitute</th>
                        <th>QOH</th>
                        <th>Dose</th>
                        <th>UoM</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr *ngFor="let item of FetchSubstituteItemsDList">
                        <td class="fs-7 fw-bold cursor-pointer" (click)="substitute(item)">{{ item.ItemName }}
                        </td>
                        <td>{{ item.QoH }}</td>
                        <td>{{ item.QoDoseH }}</td>
                        <td>{{ item.QUoM }}</td>
                     </tr>
                  </tbody>
               </table>
            </div>

         </div> -->
      </div>
   </div>
</div>



<div class="modal fade" id="hold_remarks" tabindex="-1" aria-labelledby="holdRemarksLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" style="width: 40%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="discontinueRemarksLabel">
               Hold reason for
               {{remarksForSelectedHoldItemName}}</h5>
            <div class="d-flex gap-2 align-items-center justify-content-end">
               <button class="btn btn-danger-outline"
                  (click)="clearHoldReason(holdRem)">{{langData?.common?.Clear}}</button>
               <button class="btn btn-main-outline" data-bs-dismiss="modal"
                  (click)="holdPrescriptionItem(remarksForSelectedHoldItemId, holdRem,holdBtnName)">{{holdBtnName}}</button>
               <button type="button" class="btn-close ms-3" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body">
            <!-- <label for="" class="form-label">Remarks</label> -->
            <select class="form-select pe-5 my-2" (change)="selectedHoldReasonEvent($event)">
               <option value="0" [selected]="selectedHoldReason == '0'" translate>
                  {{langData?.prescriptions?.SelectHoldReason}}
               </option>
               <option *ngFor="let hold of holdMasterList" [value]="hold.Id" [selected]="hold.Id == selectedHoldReason">
                  {{hold.Names}}
               </option>
            </select>
            <textarea name="" placeholder="" #holdRem class="form-control resize-none mb-2" id="holdRem" cols="30"
               rows="3"></textarea>
         </div>
         <div class="validation_err" *ngIf="holdReasonValidation">
            <p class="m-0 mb-3 text-center fs-7">
               {{langData?.prescriptions?.Pleaseselectholdreasonandenterremarks}}
            </p>
         </div>
      </div>
   </div>
</div>
<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="deletePresItemConfirmationmodal"
   tabindex="-1">
   <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
      <div class="modal-content">
         <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
         <div class="modal-body">
            <p> Are you sure you want to Delete {{itemForDelete?.ItemName}} ? </p>
            <div class="modal-footer">
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                  (click)="deleteItemFromPrescription('Yes')">{{langData?.common?.yes}}</a>
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                  data-bs-dismiss="modal">{{langData?.common?.no}}</a>
            </div>
         </div>
      </div>
   </div>
</div>

<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="deletePresItemAllConfirmationmodal"
   tabindex="-1">
   <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
      <div class="modal-content">
         <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
         <div class="modal-body">
            <p> Are you sure you want to delete all selected items? </p>
            <div class="modal-footer">
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                  (click)="deleteBulkPrescriptions('Yes')">{{langData?.common?.yes}}</a>
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                  data-bs-dismiss="modal">{{langData?.common?.no}}</a>
            </div>
         </div>
      </div>
   </div>
</div>
<div class="modal" data-bs-abackdrop="static" data-bs-keyboard="false" id="OtcConfirmation" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
      <div class="modal-content">
         <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
         <div class="modal-body">
            <p> Are you sure you want to clear existing Prescription ? </p>
            <div class="modal-footer">
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                  (click)="toggleOtc()">{{langData?.common?.yes}}</a>
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline" (click)="UntoggleOtc()"
                  data-bs-dismiss="modal">{{langData?.common?.no}}</a>
            </div>
         </div>
      </div>
   </div>
</div>



<div class="modal" data-bs-backdrop="static" tabindex="-1" id="viewMoreMedicationsDataModal" tabindex="-1">
   <div class="modal-dialog modal-dialog-scrollable modal-xl ">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" translate>{{langData?.SHO?.MedicationHistory}}</h5>
            <div class="d-flex align-items-center gap-2">
               <form [formGroup]="viewMoreMedicationsForm" (keydown.enter)="$event.preventDefault()">
                  <div class="d-flex w-100 align-items-center justify-content-between">
                     <div class="d-flex align-items-center gap-2 justify-content-end">
                        <button class="date_range_calendar p-0 position-relative" style="width: 227px;">
                           <mat-date-range-input class="btn btn-main-outline" [formGroup]="viewMoreMedicationsForm"
                              [rangePicker]="medpicker">
                              <input matStartDate formControlName="medfromdate">
                              <input matEndDate formControlName="medtodate"
                                 (dateChange)="FetchViewMoreMedicationsData('search')">
                           </mat-date-range-input>
                           <mat-datepicker-toggle matIconSuffix [for]="medpicker"></mat-datepicker-toggle>
                           <mat-date-range-picker #medpicker></mat-date-range-picker>
                        </button>
                     </div>
                     <div class="d-flex">
                     </div>
                  </div>
               </form>
               <!-- <div class="toggle__location d-inline-block">
                       <div class="clinical_toggle toggle__switch switch-sm d-inline-flex align-self-start">
                           <button [class]="btnActive" (click)="changeMedicationStatus('active')">{{langData?.common?.Active}}</button>
                           <button [class]="btnInactive" (click)="changeMedicationStatus('inactive')">{{langData?.common?.InActive}}</button>
                       </div>
                   </div> -->
               <button type="button" #closebutton class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <!-- <div class="actions">
               
            </div> -->
         <div class="modal-body">

            <div class="medicationtable horizontalScroll">
               <div class="card-3d p-2 m-0 mb-3 d-flex flex-nowrap medication_table_div"
                  *ngFor="let med of IndMedicationHistoryDataList;let i=index">
                  <div [class]="med.Class">
                     <div class="col-md-12 d-flex align-items-center gap-2" *ngIf="med">
                        <span class="cursor-pointer d-block">
                           <svg width="25" height="24" viewBox="0 0 25 24" fill="none"
                              xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd"
                                 d="M15.4806 18.4818C15.1552 18.8072 14.6275 18.8072 14.3021 18.4818L8.70415 12.8839C8.21599 12.3957 8.21599 11.6043 8.70415 11.1161L14.3021 5.51819C14.6275 5.19275 15.1552 5.19275 15.4806 5.51819C15.806 5.84363 15.806 6.37126 15.4806 6.6967L10.1773 12L15.4806 17.3033C15.806 17.6287 15.806 18.1564 15.4806 18.4818Z"
                                 fill="#368796" />
                           </svg>
                        </span>
                        <div class="d-flex gap-2 w-100 flex-nowrap overflow-auto cal_card_overflow">
                           <div class="status_calendar pt-2" *ngFor="let date of med.DatesArray;let i=index">
                              <div class="cal_card p-2 px-1 green_card" *ngIf="date.value === 1">
                                 <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="7" cy="7" r="7" fill="#43BC94" />
                                    <path
                                       d="M9.64517 4.4328L5.85858 7.87241L4.40219 6.55256C4.32307 6.46882 4.22569 6.40081 4.11619 6.3528C4.00668 6.30479 3.8874 6.27781 3.76585 6.27355C3.64429 6.2693 3.52307 6.28786 3.4098 6.32807C3.29654 6.36829 3.19366 6.42929 3.10765 6.50724C3.02163 6.5852 2.95432 6.67843 2.90994 6.78107C2.86557 6.88372 2.84508 6.99357 2.84978 7.10374C2.85447 7.2139 2.88425 7.32199 2.93723 7.42123C2.99021 7.52047 3.06525 7.60872 3.15765 7.68043L5.23189 9.56821C5.31437 9.64234 5.41218 9.701 5.51972 9.7408C5.62726 9.78061 5.74241 9.80079 5.85858 9.80018C6.09013 9.7993 6.31203 9.71599 6.47644 9.56821L10.8897 5.56867C10.9724 5.49431 11.0381 5.40584 11.0829 5.30836C11.1277 5.21089 11.1508 5.10633 11.1508 5.00074C11.1508 4.89514 11.1277 4.79059 11.0829 4.69311C11.0381 4.59564 10.9724 4.50716 10.8897 4.4328C10.7243 4.28382 10.5006 4.2002 10.2674 4.2002C10.0343 4.2002 9.81055 4.28382 9.64517 4.4328Z"
                                       fill="white" />
                                 </svg>
                                 <h6 class="m-0">{{date.date.split('-')[0]}}</h6>
                                 <p class="m-0">{{date.date.split('-')[1]}} {{date.date.split('-')[2]}}</p>
                              </div>
                              <div class="cal_card p-2 px-1 yellow_card" *ngIf="date.value === 2">
                                 <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="7" cy="7" r="7" fill="#FAC12D" />
                                    <path
                                       d="M7.00003 5.49794C6.73482 5.49794 6.48046 5.6033 6.29293 5.79084C6.10539 5.97837 6.00003 6.23273 6.00003 6.49794V10.4979C6.00003 10.7632 6.10539 11.0175 6.29293 11.2051C6.48046 11.3926 6.73482 11.4979 7.00003 11.4979C7.26525 11.4979 7.5196 11.3926 7.70714 11.2051C7.89468 11.0175 8.00003 10.7632 8.00003 10.4979V6.49794C8.00003 6.23273 7.89468 5.97837 7.70714 5.79084C7.5196 5.6033 7.26525 5.49794 7.00003 5.49794ZM7.38003 2.57794C7.13657 2.47793 6.8635 2.47793 6.62003 2.57794C6.49728 2.62554 6.38514 2.6969 6.29003 2.78794C6.2017 2.88514 6.13068 2.99676 6.08003 3.11794C6.02405 3.23662 5.99665 3.36677 6.00003 3.49794C5.99927 3.62955 6.0245 3.76001 6.07426 3.88185C6.12403 4.00369 6.19735 4.1145 6.29003 4.20794C6.38724 4.29627 6.49885 4.3673 6.62003 4.41794C6.77153 4.48018 6.936 4.50426 7.09898 4.48806C7.26196 4.47185 7.41847 4.41586 7.55475 4.32501C7.69102 4.23416 7.8029 4.11123 7.88054 3.96701C7.95819 3.8228 7.99922 3.66173 8.00003 3.49794C7.99635 3.23318 7.89277 2.97958 7.71003 2.78794C7.61493 2.6969 7.50279 2.62554 7.38003 2.57794Z"
                                       fill="white" />
                                 </svg>
                                 <h6 class="m-0">{{date.date.split('-')[0]}}</h6>
                                 <p class="m-0">{{date.date.split('-')[1]}} {{date.date.split('-')[2]}}</p>
                              </div>
                              <div class="cal_card p-2 px-1 disable_card" *ngIf="date.value === 3">
                                 <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="7" cy="7" r="7" fill="#EFF2F1" />
                                 </svg>
                                 <h6 class="m-0">{{date.date.split('-')[0]}}</h6>
                                 <p class="m-0">{{date.date.split('-')[1]}} {{date.date.split('-')[2]}}</p>
                              </div>

                           </div>
                        </div>
                       
                        <span class="cursor-pointer d-block">
                           <svg width="25" height="24" viewBox="0 0 25 24" fill="none"
                              xmlns="http://www.w3.org/2000/svg">
                              <!-- <rect x="0.391113" width="24" height="24" rx="6" fill="#B4DDE4"/> -->
                              <path fill-rule="evenodd" clip-rule="evenodd"
                                 d="M9.30164 5.51819C9.62707 5.19275 10.1547 5.19275 10.4801 5.51819L16.0781 11.1161C16.5662 11.6043 16.5662 12.3957 16.0781 12.8839L10.4801 18.4818C10.1547 18.8072 9.62707 18.8072 9.30164 18.4818C8.9762 18.1564 8.9762 17.6287 9.30164 17.3033L14.6049 12L9.30164 6.6967C8.9762 6.37126 8.9762 5.84363 9.30164 5.51819Z"
                                 fill="#368796" />
                           </svg>
                        </span>
                     </div>
                     <div class="bg-primary-20 rounded-2 my-2 py-2 row g-2 align-items-start position-relative">
                        <div class="col-md-3">
                           <p class="label text-nowrap">{{langData?.SHO?.DrugName}}</p>
                           <p class="text-break">{{med.ITEMName}}</p>
                        </div>
                        <div class="col-md-1">
                           <p class="label text-nowrap">{{langData?.SHO?.Frequency}}</p>
                           <p class="text-break">{{med.Frequency}}</p>
                        </div>
                        <div class="col-md-1">
                           <p class="label text-nowrap">Duration</p>
                           <p class="text-break">{{med.Duration}} {{med.DurationUOM}}</p>
                        </div>
                        <div class="col-md-2">
                           <p class="label text-nowrap">{{langData?.SHO?.StartEndDate}}</p>
                           <p class="text-break">{{med.StartFrom}}-{{med.EndDatetime}}</p>
                        </div>
                        <div class="col-md-3">
                           <p class="label text-nowrap">{{langData?.SHO?.Doctor}}</p>
                           <p class="text-break">{{med.DoctorName}}</p>
                        </div>
                        <div class="col-md-2">
                           <p class="label text-nowrap">{{langData?.SHO?.PrescribedDate}}</p>
                           <p class="text-break">{{med.PrescriptionDate}}</p>
                        </div>
                       
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="modal-footer">

         </div>
      </div>
   </div>
</div>
<div class="modal" id="reviewAndPayment">
   <div class="modal-dialog  modal-xl">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">{{langData?.common?.radReport}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="trustedUrl = ''"></button>
         </div>
         <div class="modal-body">
            <iframe *ngIf="trustedUrl" height="600" width="100%" [src]="(trustedUrl ? trustedUrl :'')| safeUrl" frameborder="0"></iframe>
         </div>
      </div>
   </div>
</div>
<div class="substitute_Modal modal" data-bs-backdrop="static" tabindex="-1" id="divViewRx" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 98%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Prescriptions</h5>

            <div class="d-flex align-items-center gap-2 ms-auto">
               <form action="" class="CommanSearch__form" style="width: 14rem;">
                  <input class="CommonSearch__input form-control px-0" type="text" id="viewRxSSN" placeholder="ID No." 
                  (keypress)="($event.charCode >= 48 && $event.charCode < 58)" (keydown.enter)="onViewRxSSNSearch($event)" (change)="onViewRxSSNSearch($event)">
              </form>
               <button class="date_range_calendar p-0 position-relative" style="width: 227px !important;">
                  <mat-date-range-input class="btn btn-main-outline" [formGroup]="tablePatientsForm"
                     [rangePicker]="picker">
                     <input matStartDate formControlName="FromDate">
                     <input matEndDate formControlName="ToDate" (dateChange)="onViewRxClick()">
                  </mat-date-range-input>
                  <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-date-range-picker #picker></mat-date-range-picker>
               </button>
               <!-- <button class="btn btn-main-outline"
                  (click)="onViewRxClick()">Search</button> -->
               <button class="btn btn-main-outline"
                  (click)="loadSelectedViewRxPrescriptionDetails(selectedPrescriptionToLoad)">Select</button>
               <button class="btn btn-danger-outline" (click)="clearViewRx()">Clear</button>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body">
            
            <div class="row gx-2 pharmacist_token rad mx-0 mt-1">
               <div class="col cursor-pointer" (click)="filterViewRxPresOrders(1)">
                   <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                       <div class="count total_token d-flex align-items-center gap-2">
                           <h4 class="m-0 fw-bold" style="background-color: #13B9DD;">{{ getPresOrderCount(1) }}</h4>
                           <p class="m-0 fs-7 fw-bold">New Order</p>
                       </div>
                   </div>
               </div>
               <div class="col cursor-pointer" (click)="filterViewRxPresOrders(2)">
                   <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                       <div class="count total_token d-flex align-items-center gap-2">
                           <h4 class="m-0 fw-bold" style="background-color: #75A47F;">{{ getPresOrderCount(2) }}</h4>
                           <p class="m-0 fs-7 fw-bold">Partially Issued</p>
                       </div>
                   </div>
               </div>
               <div class="col cursor-pointer" (click)="filterViewRxPresOrders(3)">
                   <div class="walkin_cards p-2 border shadow-sm green d-flex align-items-center">
                       <div class="count total_token d-flex align-items-center gap-2">
                           <h4 class="m-0 fw-bold" style="background-color: #d8cd82;">{{ getPresOrderCount(3) }}</h4>
                           <p class="m-0 fs-7 fw-bold">Fully Issued</p>
                       </div>
                   </div>
               </div>
            </div>

            <div>
               <p *ngIf="showSubstituteValidation" class="text-danger">Please select any Prescription to continue</p>
            </div>
            <div class="">
               <div class="fixed_alter_list mt-2 viewRxPrescriptions_table border-primary-200 rounded">
                  <div class="fixed_alter_header bg-primary-50 rounded-top">
                     <div class="row gx-2 p-2 py-1 mx-0">
                        <div class="col-2" style="width: 13%;">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">{{langData?.prescriptions?.PrescNo}}</label>
                        </div>
                        <div class="col-2">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">Patient Name</label>
                        </div>
                        <div class="col-1">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">SSN</label>
                        </div>
                        <div class="col-1">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">Gender | Age</label>
                        </div>
                        <div class="col-1" style="width: 16%;">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">{{langData?.Ward?.DoctorName}}</label>
                        </div>
                        <div class="col-2" style="width: 10%;">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">Specialisation</label>
                        </div>  
                        <div class="col-2">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">{{langData?.prescriptions?.PrescriptionDateTime}}</label>
                        </div>        
                        <div class="" style="width: 10%;">
                           <label for="" class="form-label fw-bold clr-primary-600 m-0">Status</label>
                        </div>                        
                     </div>
                  </div>
                  <div class="fixed_alter_body">
                     <div class="row gx-2 p-2 mx-0 alter_div" *ngFor="let pres of viewRxPrescriptions; let i = index">
                        <div class="col-2" style="width: 13%;">
                           <div class="d-flex align-items-center gap-2">
                              <div class="custom_check d-flex align-items-center" [class.active]="pres.selected"
                                 (click)="selectViewRxPrescription(pres)">
                                 <svg width="16" height="16" viewBox="0 0 20 21" fill="none"
                                    xmlns="http://www.w3.org/2000/svg" class="check_svg">
                                    <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                    <path
                                       d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                       fill="white" stroke="white" stroke-width="0.25"></path>
                                 </svg>
                              </div>
                              <p class="">{{pres.ORDERSLNO}}</p>
                           </div>
                        </div>
                        <div class="col-2">
                           <p class="m-0">{{pres.PatientName}}</p>
                        </div>
                        <div class="col-1">
                           <p class="m-0">{{pres.SSN}}</p>
                        </div>
                        <div class="col-1">
                           <p class="m-0">{{pres.Gender}} | {{pres.Age}}</p>
                        </div>
                        <div class="col-1" style="width: 16%;">
                           <p class="m-0">{{pres.Doctorname}}</p>
                        </div>
                        <div class="col-2" style="width: 10%;">
                           <p class="m-0">{{pres.Specialisation}}</p>
                        </div>
                        <div class="col-2">
                           <p>
                              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 16 16"
                                 fill="none">
                                 <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M13.8552 1.56632H13.131V1.39789C13.131 0.623158 12.5079 0 11.7331 0C10.9584 0 10.3352 0.623158 10.3352 1.39789V1.56632H9.24049V1.39789C9.24049 0.623158 8.61733 0 7.84259 0C7.06785 0 6.4447 0.623158 6.4447 1.39789V1.56632H5.34996V1.39789C5.34996 0.623158 4.7268 0 3.95206 0C3.17733 0 2.55417 0.623158 2.55417 1.39789V1.56632H1.82996C0.886801 1.56632 0.128906 2.32421 0.128906 3.26737V14.2989C0.128906 15.2421 0.886801 16 1.82996 16H13.8215C14.7647 16 15.5226 15.2421 15.5226 14.2989V3.28421C15.5563 2.34105 14.7984 1.56632 13.8552 1.56632ZM11.2279 1.41474C11.2279 1.12842 11.4636 0.909474 11.7331 0.909474C12.0194 0.909474 12.2384 1.14526 12.2384 1.41474V2.62737C12.2384 2.91368 12.0026 3.13263 11.7331 3.13263C11.4468 3.13263 11.2279 2.89684 11.2279 2.62737V1.41474ZM7.35417 1.41474C7.35417 1.12842 7.58996 0.909474 7.85943 0.909474C8.14575 0.909474 8.3647 1.14526 8.3647 1.41474V2.62737C8.3647 2.91368 8.12891 3.13263 7.85943 3.13263C7.57312 3.13263 7.35417 2.89684 7.35417 2.62737V1.41474ZM3.46364 1.41474C3.46364 1.12842 3.69943 0.909474 3.96891 0.909474C4.25522 0.909474 4.47417 1.14526 4.47417 1.41474V2.62737C4.47417 2.91368 4.23838 3.13263 3.96891 3.13263C3.68259 3.13263 3.46364 2.89684 3.46364 2.62737V1.41474ZM14.6805 14.3158C14.6805 14.7705 14.31 15.1411 13.8552 15.1411H1.86364C1.40891 15.1411 1.03838 14.7705 1.03838 14.3158V5.38947H14.6636V14.3158H14.6805ZM10.9753 13.3221C11.0932 13.44 11.2279 13.4905 11.3795 13.4905C11.5311 13.4905 11.6658 13.44 11.7837 13.3221L13.3332 11.7726C13.5521 11.5537 13.5521 11.1832 13.3332 10.9642C13.1142 10.7453 12.7437 10.7453 12.5248 10.9642L11.3795 12.1095L10.9584 11.6884C10.7395 11.4695 10.369 11.4695 10.15 11.6884C9.93107 11.9074 9.93107 12.2779 10.15 12.4968L10.9753 13.3221ZM4.92888 9.7179H3.19414C2.95835 9.7179 2.75625 9.51579 2.75625 9.28V7.52842C2.75625 7.29263 2.95835 7.09053 3.19414 7.09053H4.92888C5.16467 7.09053 5.36678 7.29263 5.36678 7.52842V9.28C5.36678 9.51579 5.16467 9.7179 4.92888 9.7179ZM7.0006 9.7179H8.73533C8.97112 9.7179 9.17323 9.51579 9.17323 9.28V7.52842C9.17323 7.29263 8.97112 7.09053 8.73533 7.09053H7.0006C6.76481 7.09053 6.5627 7.29263 6.5627 7.52842V9.28C6.54586 9.51579 6.74796 9.7179 7.0006 9.7179ZM12.5247 9.7179H10.79C10.5542 9.7179 10.3521 9.51579 10.3521 9.28V7.52842C10.3521 7.29263 10.5542 7.09053 10.79 7.09053H12.5247C12.7605 7.09053 12.9626 7.29263 12.9626 7.52842V9.28C12.9626 9.51579 12.7605 9.7179 12.5247 9.7179ZM3.19414 13.4569H4.92888C5.16467 13.4569 5.36678 13.2548 5.36678 13.019V11.2674C5.36678 11.0316 5.16467 10.8295 4.92888 10.8295H3.19414C2.95835 10.8295 2.75625 11.0316 2.75625 11.2674V13.019C2.75625 13.2548 2.95835 13.4569 3.19414 13.4569ZM8.73533 13.4569H7.0006C6.74796 13.4569 6.54586 13.2548 6.5627 13.019V11.2674C6.5627 11.0316 6.76481 10.8295 7.0006 10.8295H8.73533C8.97112 10.8295 9.17323 11.0316 9.17323 11.2674V13.019C9.17323 13.2548 8.97112 13.4569 8.73533 13.4569Z"
                                    fill="#7C8283" />
                              </svg>
                              {{pres.OrderDate}}
   
                              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 17 16"
                                 fill="none">
                                 <path
                                    d="M11.1608 9.78246H8.17179C7.67948 9.78246 7.29267 9.39565 7.29267 8.90334V4.33191C7.29267 3.83961 7.67948 3.45279 8.17179 3.45279C8.6641 3.45279 9.05091 3.83961 9.05091 4.33191V8.02422H11.1608C11.6531 8.02422 12.0399 8.41104 12.0399 8.90334C12.0399 9.39565 11.6531 9.78246 11.1608 9.78246Z"
                                    fill="#7C8283" />
                                 <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M16.5234 8C16.5234 12.4132 12.9366 16 8.52344 16C4.11025 16 0.523438 12.4132 0.523438 8C0.523438 3.58681 4.11025 0 8.52344 0C12.9366 0 16.5234 3.58681 16.5234 8ZM14.7652 8C14.7652 4.55385 11.9696 1.75824 8.52344 1.75824C5.07728 1.75824 2.28168 4.55385 2.28168 8C2.28168 11.4462 5.07728 14.2418 8.52344 14.2418C11.9696 14.2418 14.7652 11.4462 14.7652 8Z"
                                    fill="#7C8283" />
                              </svg>
   
                              {{pres.OrderDateTime}}
                           </p>

                        </div>                        
                        <div class="col-2" style="width: 10%;">
                           <div class="inline_legend" [class.newOrder]="pres.OrderStatus == '1'" [class.partialIssued]="pres.OrderStatus == '2'" [class.fullyIssued]="pres.OrderStatus == '3'">
                              <span>{{ pres.OrderStatus == '1' ? 'New Order' : pres.OrderStatus == '2' ? 'Partially Issued' : pres.OrderStatus == '3' ? 'Fully Issued' : '' }}</span>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

            </div>
         </div>
      </div>
   </div>
</div>

<div class="divViewBillInfo_Modal modal" data-bs-backdrop="static" tabindex="-1" id="divViewBillInfo" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 98%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">View Bills</h5>

            <div class="d-flex align-items-center gap-2 ms-auto">
               <form action="" class="CommanSearch__form" style="width: 14rem;">
                  <input class="CommonSearch__input form-control px-0" type="text" id="viewBillSSN" placeholder="SSN"  (input)="onViewBillsSSNSearch($event)"
                  (keydown.enter)="onEnterPressSSN($event)" 
                                    (keypress)="($event.charCode >= 48 && $event.charCode < 58)">
              </form>
               <button class="date_range_calendar p-0 position-relative" style="width: 227px !important;">
                  <mat-date-range-input class="btn btn-main-outline" [formGroup]="viewBillInfoForm"
                     [rangePicker]="picker1">
                     <input matStartDate formControlName="FromDate">
                     <input matEndDate formControlName="ToDate" (dateChange)="viewBillInfo()">
                  </mat-date-range-input>
                  <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                  <mat-date-range-picker #picker1></mat-date-range-picker>
               </button>
               <button class="btn btn-main-outline" (click)="viewBillInfo()">Search</button>
               <button class="btn btn-main-outline" (click)="loadSelectedbill(selectedBillToLoad)">Select</button>
               <button class="btn btn-danger-outline" (click)="clearBillInfo()">Clear</button>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body p-2">
               
           


            <div>
               <p *ngIf="showSubstituteValidation" class="text-danger">Please select any Prescription to continue</p>
            </div>
            <div class="">
               


               <div class="fixed_alter_list mt-2 viewPharmacyBills_table border-primary-200 rounded">
                  <div class="fixed_alter_header bg-primary-50 rounded-top">
                     <div class="row gx-2 py-2 py-1 mx-0">
                        <div class="col-11">
                           <div class="row gx-2 mx-0">
                              <div class="col-2">
                                 <label for="" class="form-label fw-bold clr-primary-600 m-0">Bill No.</label>
                              </div>
                              <div class="col-3">
                                 <label for="" class="form-label fw-bold clr-primary-600 m-0">Patient Name</label>
                              </div>
                              <div class="col-3">
                                 <label for="" class="form-label fw-bold clr-primary-600 m-0">{{langData?.Ward?.DoctorName}}</label>
                              </div>
                              <div class="col-2">
                                 <label for="" class="form-label fw-bold clr-primary-600 m-0">Bill Date</label>
                              </div>
                              <div class="col-1">
                                 <label for="" class="form-label fw-bold clr-primary-600 m-0">User</label>
                              </div>
                              <div class="col-1">
                                 <label for="" class="form-label fw-bold clr-primary-600 m-0">Bill Type</label>
                              </div>
                           </div>
                        </div>
                        <div class="col"></div>
                     </div>
                  </div>
                  <div class="fixed_alter_body">
                     <div class="row gx-2 py-2 mx-0 alter_div" *ngFor="let pres of viewPharmacyBills; let i = index">
                        <div class="col-11 cursor-pointer" (click)="selectBill(pres)">
                           <div class="row gx-2 mx-0">
                              <div class="col-2">
                                 <p class="m-0">{{pres.OrderSlNo}}</p>
                              </div>
                              <div class="col-3">
                                 <p class="m-0">{{pres.SSN}} | {{pres.FullName}}</p>
                              </div>
                              <div class="col-3">
                                 <p class="m-0">{{pres.DoctorName}}</p>
                              </div>
                              <div class="col-2">
                                 <p>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 16 16"
                                       fill="none">
                                       <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M13.8552 1.56632H13.131V1.39789C13.131 0.623158 12.5079 0 11.7331 0C10.9584 0 10.3352 0.623158 10.3352 1.39789V1.56632H9.24049V1.39789C9.24049 0.623158 8.61733 0 7.84259 0C7.06785 0 6.4447 0.623158 6.4447 1.39789V1.56632H5.34996V1.39789C5.34996 0.623158 4.7268 0 3.95206 0C3.17733 0 2.55417 0.623158 2.55417 1.39789V1.56632H1.82996C0.886801 1.56632 0.128906 2.32421 0.128906 3.26737V14.2989C0.128906 15.2421 0.886801 16 1.82996 16H13.8215C14.7647 16 15.5226 15.2421 15.5226 14.2989V3.28421C15.5563 2.34105 14.7984 1.56632 13.8552 1.56632ZM11.2279 1.41474C11.2279 1.12842 11.4636 0.909474 11.7331 0.909474C12.0194 0.909474 12.2384 1.14526 12.2384 1.41474V2.62737C12.2384 2.91368 12.0026 3.13263 11.7331 3.13263C11.4468 3.13263 11.2279 2.89684 11.2279 2.62737V1.41474ZM7.35417 1.41474C7.35417 1.12842 7.58996 0.909474 7.85943 0.909474C8.14575 0.909474 8.3647 1.14526 8.3647 1.41474V2.62737C8.3647 2.91368 8.12891 3.13263 7.85943 3.13263C7.57312 3.13263 7.35417 2.89684 7.35417 2.62737V1.41474ZM3.46364 1.41474C3.46364 1.12842 3.69943 0.909474 3.96891 0.909474C4.25522 0.909474 4.47417 1.14526 4.47417 1.41474V2.62737C4.47417 2.91368 4.23838 3.13263 3.96891 3.13263C3.68259 3.13263 3.46364 2.89684 3.46364 2.62737V1.41474ZM14.6805 14.3158C14.6805 14.7705 14.31 15.1411 13.8552 15.1411H1.86364C1.40891 15.1411 1.03838 14.7705 1.03838 14.3158V5.38947H14.6636V14.3158H14.6805ZM10.9753 13.3221C11.0932 13.44 11.2279 13.4905 11.3795 13.4905C11.5311 13.4905 11.6658 13.44 11.7837 13.3221L13.3332 11.7726C13.5521 11.5537 13.5521 11.1832 13.3332 10.9642C13.1142 10.7453 12.7437 10.7453 12.5248 10.9642L11.3795 12.1095L10.9584 11.6884C10.7395 11.4695 10.369 11.4695 10.15 11.6884C9.93107 11.9074 9.93107 12.2779 10.15 12.4968L10.9753 13.3221ZM4.92888 9.7179H3.19414C2.95835 9.7179 2.75625 9.51579 2.75625 9.28V7.52842C2.75625 7.29263 2.95835 7.09053 3.19414 7.09053H4.92888C5.16467 7.09053 5.36678 7.29263 5.36678 7.52842V9.28C5.36678 9.51579 5.16467 9.7179 4.92888 9.7179ZM7.0006 9.7179H8.73533C8.97112 9.7179 9.17323 9.51579 9.17323 9.28V7.52842C9.17323 7.29263 8.97112 7.09053 8.73533 7.09053H7.0006C6.76481 7.09053 6.5627 7.29263 6.5627 7.52842V9.28C6.54586 9.51579 6.74796 9.7179 7.0006 9.7179ZM12.5247 9.7179H10.79C10.5542 9.7179 10.3521 9.51579 10.3521 9.28V7.52842C10.3521 7.29263 10.5542 7.09053 10.79 7.09053H12.5247C12.7605 7.09053 12.9626 7.29263 12.9626 7.52842V9.28C12.9626 9.51579 12.7605 9.7179 12.5247 9.7179ZM3.19414 13.4569H4.92888C5.16467 13.4569 5.36678 13.2548 5.36678 13.019V11.2674C5.36678 11.0316 5.16467 10.8295 4.92888 10.8295H3.19414C2.95835 10.8295 2.75625 11.0316 2.75625 11.2674V13.019C2.75625 13.2548 2.95835 13.4569 3.19414 13.4569ZM8.73533 13.4569H7.0006C6.74796 13.4569 6.54586 13.2548 6.5627 13.019V11.2674C6.5627 11.0316 6.76481 10.8295 7.0006 10.8295H8.73533C8.97112 10.8295 9.17323 11.0316 9.17323 11.2674V13.019C9.17323 13.2548 8.97112 13.4569 8.73533 13.4569Z"
                                          fill="#7C8283" />
                                    </svg>
                                    {{pres.SalesDate}}
   
                                 </p>
                              </div>
                              <div class="col-1">
                                 <p class="m-0">{{pres.UserName}}</p>
                              </div>
                              <div class="col-1">
                                 <p class="m-0">{{ pres.SalesType == 'CR' ? 'Insured' : 'Self' }}</p>
                                 <!-- <div class="inline_legend newOrder">
                                    <span>New Order</span>
                                 </div> -->
                              </div>
                           </div>
                        </div>
                        <div class="col text-end">
                           <svg (click)="billPrintinView(pres.OrderSlNo)" class="cursor-pointer" width="28" height="28" viewBox="0 0 28 28" fill="none"
                              xmlns="http://www.w3.org/2000/svg">
                              <path
                                 d="M14.1348 27.389C21.6325 27.389 27.7106 21.3109 27.7106 13.8132C27.7106 6.31556 21.6325 0.237488 14.1348 0.237488C6.63716 0.237488 0.559082 6.31556 0.559082 13.8132C0.559082 21.3109 6.63716 27.389 14.1348 27.389Z"
                                 fill="#DAEEF1" />
                              <path
                                 d="M18.479 11.4964H18.1894V7.7313C18.1894 7.6545 18.1589 7.5808 18.1046 7.5265C18.0502 7.4722 17.9766 7.44165 17.8998 7.44165H10.3697C10.2098 7.44165 10.0802 7.5714 10.0802 7.7313V11.4964H9.79051C9.25282 11.4964 8.73723 11.7099 8.35702 12.0901C7.97682 12.4703 7.76318 12.986 7.76318 13.5236V17.2886C7.76318 17.3654 7.79373 17.4391 7.84803 17.4934C7.90233 17.5477 7.97603 17.5783 8.05283 17.5783H10.0802V19.8952C10.0802 19.972 10.1106 20.0457 10.1649 20.1C10.2193 20.1543 10.2929 20.1848 10.3697 20.1848H17.8998C17.9766 20.1848 18.0502 20.1543 18.1046 20.1C18.1589 20.0457 18.1894 19.972 18.1894 19.8952V17.5783H20.2167C20.2935 17.5783 20.3672 17.5477 20.4215 17.4934C20.4758 17.4391 20.5063 17.3654 20.5063 17.2886V13.5236C20.5063 12.986 20.2927 12.4703 19.9125 12.0901C19.5323 11.7099 19.0167 11.4964 18.479 11.4964ZM10.6595 8.02099H17.6102V11.4964H10.6595V8.02099ZM17.6102 19.6054H10.6595V15.2612H17.6102V19.6054ZM18.479 13.5235C18.3619 13.5235 18.2563 13.453 18.2115 13.3448C18.1666 13.2366 18.1914 13.112 18.2742 13.0291C18.357 12.9463 18.4816 12.9215 18.5899 12.9663C18.6981 13.0112 18.7687 13.1168 18.7687 13.2339C18.7687 13.3107 18.7381 13.3843 18.6838 13.4387C18.6295 13.493 18.5558 13.5235 18.479 13.5235Z"
                                 fill="#368796" stroke="#368796" stroke-width="0.15929" />
                           </svg>
                        </div>

                        <div class="mt-2" [class.d-none]="!pres.selected">
                           <div class="fixed_alter_list">
                              <div class="fixed_alter_header bg-primary-50">
                                 <div class="row gx-2 p-2 py-1 mx-0">
                                    <div class="" style="width: 3%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Sl.No.</label>
                                    </div>
                                    <div class="" style="width: 30%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Item Name</label>
                                    </div>
                                    <div class="" style="width: 7%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Qty/Units</label>
                                    </div>
                                    <!--<div class="" style="width: 10%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Units</label>
                                    </div>   
                                     <div class="" style="width: 10%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Instructions</label>
                                    </div>    -->
                                    <div class="" style="width: 8%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Batch No</label>
                                    </div>
                                    <div class="" style="width: 8%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Expiry Date</label>
                                    </div>
                                    <div class="" style="width: 10%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">UPrice</label>
                                    </div>
                                    <div class="" style="width: 10%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Tax</label>
                                    </div>
                                    <!-- <div class="" style="width: 10%;">
                                       <label for="" class="form-label fw-bold clr-primary-600 m-0">Amount</label>
                                    </div>   -->
                                 </div>
                              </div>
                              <div class="fixed_alter_body height-unset">
                                 <div class="row gx-2 p-2 mx-0 alter_div"
                                    *ngFor="let item of billCashIssues?.PatientCashIssuesTable2DataList; let i = index">
                                    <div class="" style="width: 3%;">
                                       <p>{{i + 1}}</p>
                                    </div>
                                    <div class="" style="width: 30%;">
                                       <p><b>{{item.ItemCode}}-{{item.ItemName}}</b></p>
                                    </div>
                                    <div class="" style="width: 7%;">
                                       <p>{{item.Quantity}}-{{item.UOM}}</p>
                                    </div>
                                    <!--<div class="" style="width: 10%;">
                                       <p>BOX=20TABLET</p>
                                    </div>   
                                     <div class="" style="width: 10%;">
                                       <p></p>
                                    </div>  -->
                                    <div class="" style="width: 8%;">
                                       <p>{{item.BatchNO}}</p>
                                    </div>
                                    <div class="" style="width: 8%;">
                                       <p>{{item.Expirydate | date: 'dd-MMM-yyyy'}}</p>
                                    </div>
                                    <div class="" style="width: 10%;">
                                       <p>{{item.UPrice}}</p>
                                    </div>
                                    <div class="" style="width: 10%;">
                                       <p>{{item.Tax}}</p>
                                    </div>
                                    <!-- <div class="" style="width: 10%;">
                                       <p>{{item.UserName}}</p>
                                    </div>    -->
      
                                 </div>
                              </div>
                           </div>
                        </div>

                     </div>
                  </div>
               </div>


            </div>
         </div>
      </div>
   </div>
</div>

<div class="substitute_Modal modal" data-bs-backdrop="static" tabindex="-1" id="divPatientSummary" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 98%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel"></h5>

            <div class="d-flex align-items-center gap-2 ms-auto">

               <button type="button" class="btn-close" (click)="closePatientSummary()" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body" style="height: calc(100vh - 10rem); overflow: auto;">
            <app-summary *ngIf="patientSummary"></app-summary>
         </div>
      </div>
   </div>
</div>
<div class="modal" id="cashissueSaveMsg" tabindex="-1">
   <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
      <div class="modal-content">
         <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
         <div class="modal-body">
            <p>Bill Successfully generated {{billNumber}}</p>
            <div class="modal-footer">
               <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                  data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
            </div>
         </div>
      </div>
   </div>
</div>

<div class="modal fade hw_modal" id="bmiChart" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 90%;">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">{{langData?.casesheet?.height_weight_bmi}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
         </div>
         <div class="modal-body">
            <div class="row g-2 mx-0">
               <div class="col-md-5">
                  <div class="card  bg-white p-2 h-100">
                     <div id="chart-hw-line"></div>
                  </div>
               </div>
               <div class="col-md-7">
                  <div class="hw_table px-3 hw-legend">
                     <table class="table w-100">
                        <thead>
                           <tr>
                              <!-- <th>BodyMassID</th> -->
                              <th>{{langData?.common?.Height}}</th>
                              <th>{{langData?.common?.Weight}}</th>
                              <th>{{langData?.common?.BMI}}</th>
                              <th>{{langData?.common?.ageLabel}}</th>
                              <th>{{langData?.casesheet?.created_date}}</th>
                              <!-- <th>IsPregnant</th> -->
                           </tr>
                        </thead>
                        <tbody>
                           <tr *ngFor="let data of smartDataList">
                              <!-- <td>{{ data.BodyMassID }}</td> -->
                              <td>{{ data.Height }}</td>
                              <td>{{ data.Weight }}</td>
                              <td [class]="data.BMI.split('-')[1]">{{ data.BMI }}</td>
                              <td>{{ data.Age }}</td>
                              <td>{{ data.Createdate }}</td>
                              <!-- <td>{{ data.IsPregnent === 1 ? 'Yes' : 'No' }}</td> -->
                           </tr>
                        </tbody>
                     </table>
                  </div>
               </div>
               <div class="col-md-12">
                  <div class="border-primary-200 p-3 hw-legend rounded-2 gap-3 d-flex align-items-center">
                     <div class="d-flex align-items-center gap-2">
                        <span class="Underweight"></span>
                        <label for="" class="form-label m-0">{{langData?.casesheet?.under_weight}}</label>
                     </div>
                     <div class="d-flex align-items-center gap-2">
                        <span class="Normal"></span>
                        <label for="" class="form-label m-0">{{langData?.casesheet?.normal_weight}}</label>
                     </div>
                     <div class="d-flex align-items-center gap-2">
                        <span class="Overweight"></span>
                        <label for="" class="form-label m-0">{{langData?.casesheet?.over_weight}}</label>
                     </div>
                     <div class="d-flex align-items-center gap-2">
                        <span class="Obese"></span>
                        <label for="" class="form-label m-0">{{langData?.casesheet?.obesity}}</label>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<div class="modal fade viewVitals" id="viewResults" tabindex="-1" aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 80%;">
      <div class="modal-content">
         <div class="modal-header justify-content-between">
            <div class="d-flex align-items-center gap-3">
               <h5 class="modal-title" id="">View Results</h5>
               <div class="clinical_toggle toggle__switch vital_toggle d-inline-flex align-self-center ms-3">
               </div>
            </div>
            <div class="d-flex align-items-center gap-2">
               <button type="button" class="btn-close" (click)="showResultsinPopUp = false" data-bs-dismiss="modal"
                  aria-label="Close"></button>
            </div>

         </div>
         <div class="modal-body p-0">
            <app-others-results *ngIf="showResultsinPopUp"></app-others-results>

         </div>
      </div>
   </div>
</div>

<div class="modal packageDoctor_modal" id="viewApprovalsModal">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 100%">
      <div class="modal-content">
         <div class="modal-header justify-content-between">
            <h5 class="modal-title m-0">View Approvals</h5>
            <div class="d-flex align-items-center gap-2">
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body">
            <table class="table table_alter mb-0">
               <thead>
                  <tr>
                     <th>Service Name </th>
                     <th>Item Name </th>
                     <th>Quantity </th>
                     <th>Price </th>
                     <th>Status</th>
                     <th>Requested Date </th>
                     <th>Nphies Status </th>
                     <th>Approved Quantity</th>
                     <th>Approved Amount </th>
                     <th>More info</th>
                  </tr>
               </thead>
               <tbody>
                  <tr *ngFor="let req of aprrovalRequestDetails;let i=index">
                     <td>{{req.ServiceName}}</td>
                     <td>{{req.ItemName}}</td>
                     <td>{{req.Quantity}}</td>
                     <td>{{req.Price}}</td>
                     <td>{{req.StatusName}}</td>                     
                     <td>
                        <div class="col">
                           <div class="d-flex align-items-center gap-2">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"
                                 fill="none">
                                 <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M13.8552 1.56632H13.131V1.39789C13.131 0.623158 12.5079 0 11.7331 0C10.9584 0 10.3352 0.623158 10.3352 1.39789V1.56632H9.24049V1.39789C9.24049 0.623158 8.61733 0 7.84259 0C7.06785 0 6.4447 0.623158 6.4447 1.39789V1.56632H5.34996V1.39789C5.34996 0.623158 4.7268 0 3.95206 0C3.17733 0 2.55417 0.623158 2.55417 1.39789V1.56632H1.82996C0.886801 1.56632 0.128906 2.32421 0.128906 3.26737V14.2989C0.128906 15.2421 0.886801 16 1.82996 16H13.8215C14.7647 16 15.5226 15.2421 15.5226 14.2989V3.28421C15.5563 2.34105 14.7984 1.56632 13.8552 1.56632ZM11.2279 1.41474C11.2279 1.12842 11.4636 0.909474 11.7331 0.909474C12.0194 0.909474 12.2384 1.14526 12.2384 1.41474V2.62737C12.2384 2.91368 12.0026 3.13263 11.7331 3.13263C11.4468 3.13263 11.2279 2.89684 11.2279 2.62737V1.41474ZM7.35417 1.41474C7.35417 1.12842 7.58996 0.909474 7.85943 0.909474C8.14575 0.909474 8.3647 1.14526 8.3647 1.41474V2.62737C8.3647 2.91368 8.12891 3.13263 7.85943 3.13263C7.57312 3.13263 7.35417 2.89684 7.35417 2.62737V1.41474ZM3.46364 1.41474C3.46364 1.12842 3.69943 0.909474 3.96891 0.909474C4.25522 0.909474 4.47417 1.14526 4.47417 1.41474V2.62737C4.47417 2.91368 4.23838 3.13263 3.96891 3.13263C3.68259 3.13263 3.46364 2.89684 3.46364 2.62737V1.41474ZM14.6805 14.3158C14.6805 14.7705 14.31 15.1411 13.8552 15.1411H1.86364C1.40891 15.1411 1.03838 14.7705 1.03838 14.3158V5.38947H14.6636V14.3158H14.6805ZM10.9753 13.3221C11.0932 13.44 11.2279 13.4905 11.3795 13.4905C11.5311 13.4905 11.6658 13.44 11.7837 13.3221L13.3332 11.7726C13.5521 11.5537 13.5521 11.1832 13.3332 10.9642C13.1142 10.7453 12.7437 10.7453 12.5248 10.9642L11.3795 12.1095L10.9584 11.6884C10.7395 11.4695 10.369 11.4695 10.15 11.6884C9.93107 11.9074 9.93107 12.2779 10.15 12.4968L10.9753 13.3221ZM4.92888 9.7179H3.19414C2.95835 9.7179 2.75625 9.51579 2.75625 9.28V7.52842C2.75625 7.29263 2.95835 7.09053 3.19414 7.09053H4.92888C5.16467 7.09053 5.36678 7.29263 5.36678 7.52842V9.28C5.36678 9.51579 5.16467 9.7179 4.92888 9.7179ZM7.0006 9.7179H8.73533C8.97112 9.7179 9.17323 9.51579 9.17323 9.28V7.52842C9.17323 7.29263 8.97112 7.09053 8.73533 7.09053H7.0006C6.76481 7.09053 6.5627 7.29263 6.5627 7.52842V9.28C6.54586 9.51579 6.74796 9.7179 7.0006 9.7179ZM12.5247 9.7179H10.79C10.5542 9.7179 10.3521 9.51579 10.3521 9.28V7.52842C10.3521 7.29263 10.5542 7.09053 10.79 7.09053H12.5247C12.7605 7.09053 12.9626 7.29263 12.9626 7.52842V9.28C12.9626 9.51579 12.7605 9.7179 12.5247 9.7179ZM3.19414 13.4569H4.92888C5.16467 13.4569 5.36678 13.2548 5.36678 13.019V11.2674C5.36678 11.0316 5.16467 10.8295 4.92888 10.8295H3.19414C2.95835 10.8295 2.75625 11.0316 2.75625 11.2674V13.019C2.75625 13.2548 2.95835 13.4569 3.19414 13.4569ZM8.73533 13.4569H7.0006C6.74796 13.4569 6.54586 13.2548 6.5627 13.019V11.2674C6.5627 11.0316 6.76481 10.8295 7.0006 10.8295H8.73533C8.97112 10.8295 9.17323 11.0316 9.17323 11.2674V13.019C9.17323 13.2548 8.97112 13.4569 8.73533 13.4569Z"
                                    fill="#7C8283" />
                              </svg>
                              <p>{{req?.CREATEDATE}} </p>

                              <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16"
                                 fill="none">
                                 <path
                                    d="M11.1608 9.78246H8.17179C7.67948 9.78246 7.29267 9.39565 7.29267 8.90334V4.33191C7.29267 3.83961 7.67948 3.45279 8.17179 3.45279C8.6641 3.45279 9.05091 3.83961 9.05091 4.33191V8.02422H11.1608C11.6531 8.02422 12.0399 8.41104 12.0399 8.90334C12.0399 9.39565 11.6531 9.78246 11.1608 9.78246Z"
                                    fill="#7C8283" />
                                 <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M16.5234 8C16.5234 12.4132 12.9366 16 8.52344 16C4.11025 16 0.523438 12.4132 0.523438 8C0.523438 3.58681 4.11025 0 8.52344 0C12.9366 0 16.5234 3.58681 16.5234 8ZM14.7652 8C14.7652 4.55385 11.9696 1.75824 8.52344 1.75824C5.07728 1.75824 2.28168 4.55385 2.28168 8C2.28168 11.4462 5.07728 14.2418 8.52344 14.2418C11.9696 14.2418 14.7652 11.4462 14.7652 8Z"
                                    fill="#7C8283" />
                              </svg>
                              <p> {{req?.CREATEDATETIME}}</p>
                           </div>
                        </div>
                     </td>
                     <td>
                        <div [class]="req.class">
                           <p class="m-0">{{req.StatusName}}</p>
                        </div>
                     </td>
                     <td>{{req.ApprovedQuantity}}</td>
                     <td>{{req.LimitApprovalAmount}}</td>
                     <td>
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
      </div>
   </div>
</div>

<div class="modal" id="opPharmacyBillPrint">
   <div class="modal-dialog  modal-xl">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">{{langData?.common?.radReport}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="trustedUrl = ''"></button>
         </div>
         <div class="modal-body">
            <iframe *ngIf="trustedUrl" height="600" width="100%" [src]="(trustedUrl ? trustedUrl :'')| safeUrl" frameborder="0"></iframe>
         </div>
      </div>
   </div>
</div>

<div class="modal displayCollectionReport" data-bs-backdrop="static" tabindex="-1" id="displayCollectionReport"
   tabindex="-1">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 99%;">
      <div class="modal-content">
         <div class="modal-header py-2 gap-2">
            <h5 class="modal-title m-0" translate>Collection Report</h5>
            <div class="d-flex align-items-center gap-2">
               <p class="m-0 fs-6 clr-primary-600 fw-bold text-nowrap">Collected Amount : {{ totalCollected }}</p>
               <button class="date_range_calendar p-0 position-relative" style="width: 227px;">
                  <mat-date-range-input class="btn btn-main-outline" [formGroup]="collectionReportForm"
                     [rangePicker]="picker2">
                     <input matStartDate formControlName="FromDate">
                     <input matEndDate formControlName="ToDate" (dateChange)="openCollectionReport()">
                  </mat-date-range-input>
                  <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
                  <mat-date-range-picker #picker2></mat-date-range-picker>
               </button>
               <button class="btn btn-main-outline" (click)="printDailyCollectionReport()">Print</button>
               <button type="button" #closebutton class="btn-close" (click)="closedailyCollReportModal()"
                  aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body p-2">
            <div class="fixed_alter_list border-primary-200 rounded ConveringLetterData_list">
               <div class="fixed_alter_header bg-primary-50 rounded-top">
                  <div class="row gx-2 p-2 mx-0">
                     <div class="" style="width:4%;">
                        <p class="clr-primary-600 m-0">Sl.No</p>
                     </div>
                     <div class="" style="width:10%;">
                        <p class="clr-primary-600 m-0">Bill No</p>
                     </div>
                     <div class="" style="width:28%;">
                        <p class="clr-primary-600 m-0">Patient</p>
                     </div>
                     <div class="" style="width:13%;">
                        <p class="clr-primary-600 m-0">Cashier</p>
                     </div>
                     <div class="" style="width:10%;">
                        <p class="clr-primary-600 m-0">Bill Date</p>
                     </div>
                     <div class="" style="width:8%;">
                        <p class="clr-primary-600 m-0">Payment Type</p>
                     </div>
                     <div class="" style="width:9%;">
                        <p class="clr-primary-600 m-0">Receipt Amount</p>
                     </div>
                     <div class="" style="width:9%;">
                        <p class="clr-primary-600 m-0">Deposit Amount</p>
                     </div>
                     <div class="" style="width:9%;">
                        <p class="clr-primary-600 m-0">Refund Amount</p>
                     </div>
                  </div>
               </div>
               <div class="fixed_alter_body">
                  <div class="row gx-2 p-2 mx-0 alter_div" *ngFor="let al of cashierResponse;let i=index">
                     <div class="" style="width:4%;">
                        <p class="m-0">{{ i + 1 }}</p>
                     </div>
                     <div class="" style="width:10%;">
                        <p class="m-0">{{ al?.BillNO }}</p>
                     </div>
                     <div class="" style="width:28%;">
                        <p class="m-0">{{ al?.SSN }} | {{ al?.PatientName }} <br> {{al?.FullAge}} | {{al?.Gender}}</p>
                     </div>
                     <div class="" style="width:13%;">
                        <p class="m-0">{{ al?.CashierName }}</p>
                     </div>
                     <div class="" style="width:10%;">
                        <p class="m-0">{{ al?.BillDate | date : 'dd-MMM-yyyy HH:mm' }}</p>
                     </div>
                     <div class="" style="width:8%;">
                        <p class="m-0">{{ al?.PaymentName }}</p>
                     </div>
                     <div class="" style="width:9%;">
                        <p class="m-0">{{ al?.ReceiptAmount }}</p>
                     </div>
                     <div class="" style="width:9%;">
                        <p class="m-0">{{ al?.AvailedDeposits }}</p>
                     </div>
                     <div class="" style="width:9%;">
                        <p class="m-0">{{ al?.TotalRefund }}</p>
                     </div>
                  </div>
               </div>
            </div>

         </div>
      </div>
   </div>
</div>

<div class="modal" id="dailyCollectionReportPrint">
   <div class="modal-dialog modal-xl">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">Print</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="trustedUrl = ''"></button>
         </div>
         <div class="modal-body">
            <iframe *ngIf="trustedUrl" height="600" width="100%" [src]="(trustedUrl ? trustedUrl : '') | safeUrl" frameborder="0"></iframe>
         </div>
      </div>
   </div>
</div>

<div class="modal packageDoctor_modal" id="viewApprovalsModal">
   <div class="modal-dialog modal-dialog-centered" style="max-width: 100%">
      <div class="modal-content">
         <div class="modal-header justify-content-between">
            <h5 class="modal-title m-0">Card Collectable</h5>
            <div class="d-flex align-items-center gap-2">
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
         </div>
         <div class="modal-body">
            <table class="table">
               <thead>
               <tr>
                  <th translate>Service Name</th>
                  <th translate>Dept Name</th>
                  <th translate>Specialization</th>
                  <th translate>Name</th>
                  <th translate>Limit</th>
                  <th translate>Is(%)</th>
                  <th translate>Action</th>
               </tr>
               </thead>
               <tbody>
               <tr>
                  <td>Consultation</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td>
                     <div class="input-group col">
                     <input type="text" class="form-control" placeholder="Limit" [(ngModel)]="limitVal" />
                     </div>
                  </td>
                  <td>
                     <input
                     type="checkbox"
                     name="trades"
                     [(ngModel)]="isPercentage"
                     />
                  </td>
                  <td>
                     <button class="btn btn-main-outline" translate type="button">
                     Delete
                     </button>
                  </td>
               </tr>
               </tbody>
            </table>
         </div>
      </div>
   </div>
</div>

<div class="modal mapDiagnosisMedicationdiv" data-bs-backdrop="static" data-bs-keyboard="false"
    id="scanBarcodesModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="max-width:80%">
        <div class="modal-content">
            <div class="modal-header">
                <div class="d-flex justify-content-center w-100">
                    <!-- <h5 class="modal-title text-nowrap" translate>Scan Barcode</h5> -->
                    <p class="text-danger fs-6 fw-bold">Please scan barcodes for the following items</p>                    
                </div>
                <div class="ms-auto d-flex align-items-center gap-2">
                     <button class="btn btn-danger-outline" (click)="clearBarcodeDetails()">Clear</button>
                     <button [disabled]="IsDisabled" class="btn btn-main-outline" 
                         (click)="billCashIssueFromBarCodeScan()">Bill</button>
                    <!--<button class="btn btn-main-outline" >Save</button> -->
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="modal-body px-0">
                  <div class="mapDiagnosisMedicationdiv_table px-3">
                     <div>
                        <!-- <textarea #scanBox
                           class="form-control"
                           rows="8"
                           (input)="handleScan(scanBox)"
                           autofocus>
                     </textarea> -->
                     <textarea #scanBox
                        class="form-control"
                        rows="8"
                        (keyup.enter)="handleScan(scanBox)"
                        autofocus></textarea>
                     </div>
                     <div class="table-cards_div m-0 d-flex p-2 flex-nowrap medication_table_div mt-2 d-none"
                           *ngFor="let item of filterSFDADrugs();let i=index">
                        <div class="row card_item_div mx-0 g-2 w-100 align-items-center">
                           <div class="col-md-5">
                              <!-- <p class="label">Item</p> -->
                              <p class="text-wrap">{{item.ItemCode}}-{{item.ItemName}}</p>
                           </div>
                           <div class="col-md-7">
                              <!-- <p class="label">Barcode</p> -->
                              <div class="d-flex align-items-center gap-2 position-relative">
                                
                                 <!-- <input #barcodeInput type="text" class="form-control pe-5" [class.bg-grey-50]="(item.Barcode != '' && item.Barcode != null && item.Barcode != undefined)" placeholder="Scan Barcode"
                                    [(ngModel)]="item.Barcode" (input)="onBarcodeInput(item, i)" name="barcode{{i}}" />  -->
                                    <textarea #scanBox [(ngModel)]="item.Barcode"
                                       class="form-control"rows="4" (input)="onBarcodeInput(item, i)" name="barcode{{i}}"
                                       placeholder="Scan Barcode"
                                       autofocus>
                                 </textarea>
                                 <div class="position-absolute cursor-pointer p-1 d-flex" (click)="clearBarcodeInput(i, item)" style="right: 1.8rem;">
                                    <svg width="18" height="21" viewBox="0 0 18 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.647 10.0809V8.97505C16.647 8.195 16.3371 7.4469 15.7856 6.89532C15.234 6.34375 14.4859 6.03387 13.7058 6.03387H10.7647V1.91623C10.7647 1.4482 10.5787 0.999337 10.2478 0.66839C9.91685 0.337443 9.46799 0.15152 8.99996 0.15152C8.53193 0.15152 8.08307 0.337443 7.75213 0.66839C7.42118 0.999337 7.23526 1.4482 7.23526 1.91623V6.03387H4.29408C3.51403 6.03387 2.76593 6.34375 2.21435 6.89532C1.66278 7.4469 1.3529 8.195 1.3529 8.97505V10.0809L0.176433 19.4927C0.163041 19.6581 0.213567 19.8223 0.317609 19.9515C0.374196 20.014 0.443158 20.0641 0.520119 20.0985C0.59708 20.1329 0.680359 20.151 0.764668 20.1515H17.2353C17.3196 20.151 17.4028 20.1329 17.4798 20.0985C17.5568 20.0641 17.6257 20.014 17.6823 19.9515C17.7864 19.8223 17.8369 19.6581 17.8235 19.4927L16.647 10.0809ZM15.7858 18.975L15.4623 17.1103C15.4492 17.0342 15.4212 16.9613 15.3799 16.896C15.3386 16.8307 15.2849 16.7741 15.2217 16.7295C15.1586 16.6849 15.0873 16.6532 15.0119 16.6362C14.9365 16.6192 14.8585 16.6172 14.7823 16.6303C14.6285 16.6569 14.4915 16.7434 14.4015 16.8709C14.3569 16.9341 14.3252 17.0054 14.3082 17.0808C14.2912 17.1562 14.2892 17.2342 14.3023 17.3103L14.5917 18.975H12.7482L11.9341 13.5927C11.9057 13.4431 11.8204 13.3103 11.6962 13.2223C11.5719 13.1343 11.4184 13.0979 11.2679 13.1208C11.1173 13.1436 10.9815 13.224 10.889 13.3449C10.7965 13.4658 10.7544 13.6179 10.7717 13.7692L11.5588 18.975H4.61761L4.88232 16.088C4.88942 16.0107 4.88124 15.9329 4.85825 15.8588C4.83525 15.7847 4.79789 15.7158 4.74829 15.6562C4.6987 15.5965 4.63783 15.5473 4.56919 15.5111C4.50054 15.475 4.42545 15.4527 4.3482 15.4456C4.27095 15.4385 4.19306 15.4467 4.11897 15.4697C4.04488 15.4927 3.97605 15.5301 3.9164 15.5797C3.85675 15.6293 3.80746 15.6901 3.77133 15.7588C3.7352 15.8274 3.71295 15.9025 3.70584 15.9798L3.43055 18.975H1.43526L2.47055 10.7398H15.5411L16.5647 18.975H15.7858Z" fill="#EB6247"></path></svg>
                                 </div>
                                  <div class="custom_check d-flex align-items-center justify-content-center" 
                                    [class.active]="(item.Barcode != '' && item.Barcode != null && item.Barcode != undefined)"
                                    *ngIf="(item.Barcode != '' && item.Barcode != null && item.Barcode != undefined)">
                                    <svg style="min-width:1rem;" width="16" height="16" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg" class="check_svg"><circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle><path d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z" fill="white" stroke="white" stroke-width="0.25"></path></svg>                          
                                 </div>
                              </div>                                   
                           </div>
                        </div>
                     </div>
                  </div>
            </div>
        </div>
    </div>
</div>
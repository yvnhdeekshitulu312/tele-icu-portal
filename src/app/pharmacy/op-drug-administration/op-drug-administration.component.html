<div class="container__wrapper bg-white">
    <div class="page-header sticky-top shadow-sm">
        <h2 class="page-heading">OP Drug Administration</h2>
        <div class="actions ms-auto d-flex align-items-center gap-2">

        </div>
    </div>

    <div class="d-flex align-items-center justify-content-between p-2 border-bottom">
        <div class="d-flex align-items-center gap-2">
            <label for="" class="form-label clr-primary-600 text-nowrap m-0">ID No. :</label>
            <div class="CommanSearch__form">
                <label for="" class="CommonSearch__label">
                    <img src="assets/images/icons/icon-search.svg" alt="">
                </label>
                <input autofocus class="CommonSearch__input form-control" type="text" id="txtSsn" placeholder="ID No."
                    (keydown.enter)="onSSNEnterPress($event)" [(ngModel)]="ssn">
                <button type="reset" class="reset-btn">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z"
                            stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round"
                            stroke-linejoin="round"></path>
                    </svg>
                </button>
            </div>

            <button class="btn btn-main-outline" (click)="searchDrugAdministration()">Search</button>
            <button class="btn btn-danger-outline" (click)="clearForm()">Clear</button>
        </div>
        <div class="admission_legends d-flex align-items-center gap-3">
            <div class="clinical_toggle toggle__switch switch-sm d-inline-flex">
                <button class="btn position-relative" [class.selected]="administeredType === '0'"
                    (click)="selectType('0')">Not Administered</button>
                <button class="btn position-relative" [class.selected]="administeredType === '1'"
                    (click)="selectType('1')">Administered
                    <span class="count">{{Count}}</span>
                </button>
            </div>
            <div class="d-flex align-items-center gap-1 newReq">
                <span class=""></span>
                <label for="" class="form-label m-0">Not Administrated</label>
            </div>
            <div class="d-flex align-items-center gap-1 admitted">
                <span class=""></span>
                <label for="" class="form-label m-0">Administrated</label>
            </div>
        </div>
    </div>


    <div class="p-2 pb-0">

        <!-- No Bulk Process -->
        <div class="nobulkprocess d-flex flex-column align-items-center justify-content-center" *ngIf="showNoRecFound">
            <img src="assets/images/icon-no-appointments.svg" alt="" class="mb-2">
            <p class="m-0 fs-6">No Records Found</p>
        </div>

        <div class="adm_req_doctors" *ngIf="!showNoRecFound">
            <div *ngFor="let data of sortedGroupedByScheduleDate">

                <div class="card card-style-1 rounded group-date p-0 border-0 mt-1">
                    <div class="card-header rounded-top justify-content-start p-0 min-height-unset p-0">
                        <span class="d-block grp_date">{{ data.scheduleDate }}</span>
                    </div>

                    <div [class]="item.ScheduleCompletedBy == '' ? 'doctor_worklist my-1 cursor-pointer newReq worklist_patientcard rounded-2' : 'doctor_worklist my-1 cursor-pointer admitted worklist_patientcard rounded-2 my-1'"
                        *ngFor="let item of data.items; let i=index">
                        <div class="row mx-0">
                            <div class="col-md-12 p-0">
                                <div class="row mx-0 gx-2 p-1">
                                    <div class="" style="width: 23rem;">
                                        <div class="d-flex align-items-center h-100">
                                            <div class="patient-photo me-3">
                                                <img *ngIf="item.GenderID == 1" src="assets/images/icons/male.svg"
                                                    alt="" class="position-relative">
                                                <img *ngIf="item.GenderID == 2" src="assets/images/icons/female.svg"
                                                    alt="" class="position-relative">
                                            </div>
                                            <div class="mt-1">
                                                <p class="value fs-7 fw-bold w-100">{{item.PatientName}}</p>
                                                <div class="d-flex align-items-center gap-2">
                                                    <p>{{item.Gender}} | {{item.FullAge}} </p>
                                                    <p><b>ID No.</b> : {{ item.SSN }}</p>
                                                </div>
                                                <div class="d-flex align-items-center gap-1">
                                                    <p><b>DOB</b> :</p>
                                                    <svg width="10" height="11" viewBox="0 0 10 11" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                            fill="#368796" />
                                                    </svg>
                                                    <p class="m-0 fw-bold text-nowrap">
                                                        {{item.DOB?.split('
                                                        ')[0]}}</p>
                                                </div>
                                                <p>{{item.Nationality}} | Mobile : {{item.MobileNo}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col pe-0">
                                        <div class="bg-white h-100 rounded-2">
                                            <div class="row mx-0 gx-2 w-100">
                                                <div class="col-4">
                                                    <label for="" class="form-label m-0 fw-bold">Item Name</label>
                                                    <p class="text-wrap fs-8">{{item.ItemName}}</p>
                                                </div>
                                                <div class="col-1">
                                                    <label for="" class="form-label m-0 fw-bold">Dose</label>
                                                    <p class="text-truncate fs-8">{{item.Dose}}</p>
                                                </div>
                                                <div class="col-1">
                                                    <label for="" class="form-label m-0 fw-bold">Dose UoM</label>
                                                    <p class="text-truncate fs-8">{{item.DoceUom}}</p>
                                                </div>
                                                <div class="col-2">
                                                    <label for="" class="form-label m-0 fw-bold">Frequency</label>
                                                    <p class="text-truncate fs-8">{{item.Frequency}}</p>
                                                </div>
                                                <div class="col-2">
                                                    <label for="" class="form-label m-0 fw-bold">Frequency Date</label>
                                                    <p class="fs-8 d-flex align-items-center gap-1">
                                                        <svg width="14" height="14" viewBox="0 0 10 11" fill="none"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M8.26322 1.3606H7.69641V0.965985C7.69641 0.799562 7.6061 0.645704 7.45953 0.562492C7.31306 0.479173 7.13244 0.479173 6.98598 0.562492C6.8394 0.645704 6.7491 0.799559 6.7491 0.965985V1.36049L3.25071 1.3606V0.965983C3.25071 0.799559 3.16041 0.645701 3.01383 0.56249C2.86736 0.47917 2.68674 0.47917 2.54028 0.56249C2.3937 0.645701 2.3034 0.799557 2.3034 0.965983V1.36049L1.73659 1.3606C1.27604 1.3606 0.834325 1.54056 0.508675 1.86095C0.182912 2.18145 0 2.61604 0 3.06915V8.79133C0 9.24445 0.18292 9.67904 0.508675 9.99954C0.834325 10.3199 1.27604 10.5 1.73659 10.5H8.26341C8.72396 10.5 9.16568 10.3199 9.49133 9.99954C9.81709 9.67904 10 9.24445 10 8.79133V3.06915C10 2.61604 9.81708 2.18145 9.49133 1.86095C9.16568 1.54056 8.72396 1.3606 8.26341 1.3606L8.26322 1.3606ZM1.73809 2.29263H2.3049V2.99787L2.30479 2.99776C2.30479 3.16419 2.39509 3.31805 2.54167 3.40126C2.68825 3.48458 2.86876 3.48458 3.01533 3.40126C3.1618 3.31805 3.2521 3.16419 3.2521 2.99776V2.29252H6.74908V2.99776C6.74908 3.16419 6.83939 3.31805 6.98596 3.40126C7.13243 3.48458 7.31305 3.48458 7.45951 3.40126C7.60609 3.31805 7.69639 3.16419 7.69639 2.99776V2.29252H8.2632C8.47255 2.29252 8.67331 2.37432 8.82132 2.52005C8.96933 2.66567 9.05259 2.86319 9.05259 3.06916V4.48268H0.947001V3.06916C0.947001 2.86319 1.03026 2.66567 1.17827 2.52005C1.32628 2.37432 1.52703 2.29252 1.73639 2.29252L1.73809 2.29263ZM8.26322 9.56809H1.7364C1.52705 9.56809 1.32629 9.48629 1.17828 9.34067C1.03027 9.19494 0.947012 8.99742 0.947012 8.79144V5.41472H9.0526V8.79144C9.0526 8.99742 8.96934 9.19494 8.82133 9.34067C8.67332 9.48629 8.47257 9.56809 8.26321 9.56809H8.26322Z"
                                                                fill="#368796" />
                                                        </svg>{{item.ScheduleDate.split(' ')[0]}}
                                                    </p>
                                                </div>
                                                <div class="col-2">
                                                    <label for="" class="form-label m-0 fw-bold">Frequency Time</label>
                                                    <p class="fs-8 d-flex align-items-center gap-1">
                                                        <svg class="" width="14" height="14" viewBox="0 0 10 11"
                                                            fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M5.00634 10.5C6.2848 10.5 7.56331 10.0066 8.538 9.03255C10.4873 7.08447 10.4873 3.90922 8.538 1.96108C6.58867 0.0129498 3.41139 0.0129949 1.46202 1.96108C-0.487361 3.90917 -0.487316 7.08442 1.46202 9.03255C2.44936 10.0066 3.72785 10.5 5.00634 10.5ZM2.09493 2.59362C2.89243 1.79663 3.9557 1.39187 5.00634 1.39187C6.05698 1.39187 7.10764 1.79672 7.91774 2.59362C9.52537 4.20022 9.52537 6.80614 7.91774 8.41271C6.31012 10.0193 3.70253 10.0193 2.09493 8.41271C0.487305 6.80612 0.487305 4.20019 2.09493 2.59362Z"
                                                                fill="#368796" />
                                                            <path
                                                                d="M3.42405 7.96996C3.53796 7.96996 3.66458 7.91939 3.75315 7.8308L5.39875 6.0471C5.47468 5.97121 5.51265 5.85738 5.51265 5.74347V3.35258C5.51265 3.1122 5.3101 2.90978 5.06957 2.90978C4.82913 2.90978 4.62657 3.1122 4.62657 3.35258V5.57899L3.09496 7.22355C2.93038 7.40064 2.94309 7.67895 3.12031 7.84343C3.20887 7.93193 3.31014 7.96988 3.42406 7.96988L3.42405 7.96996Z"
                                                                fill="#368796" />
                                                        </svg>
                                                        {{item.ScheduleDate.split(' ')[1]}}
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="p-1 d-flex align-items-center gap-3 mt-1 rounded-bottom"
                                                style="background-color: #ebebeb;">
                                                <div class="d-flex align-items-center gap-1">
                                                    <label for=""
                                                        class="form-label m-0 fw-bold clr-primary-600 text-nowrap">Doctor
                                                        Name:</label>
                                                    <p>{{item.DoctorFullName}}</p>
                                                </div>
                                                <div class="d-flex align-items-center gap-1">
                                                    <label for=""
                                                        class="form-label m-0 fw-bold clr-primary-600 text-nowrap">Specialisation:</label>
                                                    <p>{{item.DoctorSpecialty}}</p>
                                                </div>
                                                <div class="d-flex align-items-center gap-1">
                                                    <label for=""
                                                        class="form-label m-0 fw-bold clr-primary-600 text-nowrap">Request
                                                        Date:</label>
                                                    <p>{{item.PrescriptionCreateDate}}</p>
                                                </div>
                                                <div class="d-flex align-items-center gap-1">
                                                    <label for=""
                                                        class="form-label m-0 fw-bold clr-primary-600 text-nowrap">Visit
                                                        Date:</label>
                                                    <p>{{item.VisitDate}}</p>
                                                </div>
                                                <div class="d-flex align-items-center gap-1">
                                                    <label for=""
                                                        class="form-label m-0 fw-bold clr-primary-600 text-nowrap color-highlight">Seha
                                                        VaccineID
                                                        :</label>
                                                    <p class="color-highlight fs-7">{{item.SehaClientVaccineID}}</p>
                                                </div>
                                                <div class="inline_legend pe-2">
                                                    <span class="legend fs-8 text-nowrap" (click)="SaveRetrySeha(item)"
                                                        *ngIf="item.IsScheduleCompleted === 'True' && item.IsVaccine=='True'&&item.SehaClientID==''">Retry
                                                        Seha</span>


                                                </div>
                                                <div class="custom_tooltip custom_tooltip_left" style="width: 1.8rem"
                                                    (click)="FetchPatientVaccinationDetailSeha(item)"
                                                    *ngIf="item.IsScheduleCompleted === 'True' && item.IsVaccine=='True'">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="17"
                                                        viewBox="0 0 33 17" fill="none">
                                                        <path
                                                            d="M29.8223 5.08352C22.587 -1.67628 11.332 -1.67628 4.09666 5.08352L0.96167 8.01367L4.10173 10.9438C11.3371 17.7036 22.592 17.7036 29.8274 10.9438L32.9624 8.01367L29.8223 5.08352ZM16.9621 14.0137C13.6471 14.0137 10.9619 11.3287 10.9619 8.01349C10.9619 4.69824 13.6469 2.0133 16.9621 2.0133C20.2774 2.0133 22.9623 4.69824 22.9623 8.01349C22.9623 11.3287 20.2774 14.0137 16.9621 14.0137Z"
                                                            fill="#43A9BC" />
                                                        <path
                                                            d="M16.9621 4.01336C16.4021 4.01336 15.8671 4.12846 15.3821 4.33839C15.7323 4.61348 15.9622 5.03335 15.9622 5.51333C15.9622 6.33834 15.2873 7.01326 14.4623 7.01326C13.9823 7.01326 13.5623 6.7833 13.2874 6.43317C13.0772 6.91842 12.9621 7.45336 12.9621 8.01343C12.9621 10.2184 14.7571 12.0135 16.9622 12.0135C18.2522 12.0135 19.3923 11.3984 20.1273 10.4535C19.7422 10.3135 19.4623 9.94842 19.4623 9.51336C19.4623 8.96343 19.9123 8.51338 20.4623 8.51338C20.6223 8.51338 20.7772 8.55344 20.9123 8.62342C20.9422 8.42338 20.9623 8.2185 20.9623 8.01338C20.9623 5.80835 19.1672 4.01336 16.9621 4.01336Z"
                                                            fill="#43A9BC" />
                                                    </svg>
                                                    <div class="tooltip">
                                                        <p class="label m-0 text-nowrap lh-1">Seha Vaccination View</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div
                                    class="p-1 rounded-bottom doctor_worklist_ChiefComplaints d-flex align-items-center gap-2 justify-content-between">
                                    <!-- <p><b class="fs-8">Doctor Name : </b>{{item.DoctorFullName}}</p>
                                    <p><b class="fs-8">Specialisation : </b>{{item.DoctorSpecialty}}</p>
                                    <p><b class="fs-8">Request Date : </b>{{item.PrescriptionCreateDate}}</p>
                                    <p><b class="fs-8">Visit Date : </b>{{item.VisitDate}}</p> -->
                                    <p><b class="fs-8">Insurance Name : </b>{{item.InsuranceCompanyName}}</p>
                                    <p><b class="fs-8" *ngIf="item.ScheduleCompletedBy!=''">Administrated By :
                                        </b>{{item.ScheduleCompletedByName}}</p>
                                    <p><b class="fs-8" *ngIf="item.ScheduleCompletedBy!=''">Administrated Date :
                                        </b>{{item.ScheduleCompletedDate}}</p>
                                    <p><b class="fs-8" *ngIf="item.ScheduleCompletedBy!=''">Witness Nurse :
                                        </b>{{item.WitnessUserName}}</p>
                                    <div class="inline_legend pe-2">
                                        <span class="legend fs-8 text-nowrap" (click)="openAdministerPopup(item)"
                                            *ngIf="item.IsScheduleCompleted === 'False'">Administer</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade administered_modal" data-bs-keyboard="false" data-bs-backdrop="static" id="administered_modal"
    tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" style="max-width:50rem">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <h5 class="modal-title">Drug Administration</h5>
                </div>
                <div class="actions ms-auto d-flex gap-2 align-items-center">
                    <button class="btn btn-main-outline" [disabled]="!selectedNurse"
                        (click)="saveAdminister()">Save</button>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        (click)="showAdministerPopup = false;"></button>
                </div>
            </div>
            <div class="modal-body p-2 pb-3">
                <div class="row mx-0 g-2 justify-content-between align-items-end" *ngIf="showAdministerPopup">
                    <div class="col-md-6">
                        <label for="" class="form-label m-0">Item Name</label>
                        <label for="" class="form-label fw-bold clr-danger-200">{{selectedRecord.ItemName}}</label>
                    </div>
                    <div class="col-md-6">
                        <label for="" class="form-label m-0">Issued Item Name</label>
                        <label for="" class="form-label">{{selectedRecord.ItemName}}</label>
                    </div>
                    <div class="col-md-6">
                        <label for="" class="form-label pe-2">Batch Number</label>
                        <input type="text" id="" class="form-control" placeholder="" aria-label=""
                            [ngModel]="selectedRecord.BatchNo" disabled>
                    </div>
                    <div class="col-md-6">
                        <label for="" class="form-label pe-2">Administer Date</label>
                        <input type="text" id="" class="form-control" placeholder="" aria-label=""
                            [ngModel]="currentDate" disabled>
                    </div>
                    <div class="col-md-6">
                        <label for="" class="form-label pe-2">Frequency Date</label>
                        <div class="d-flex gap-2">
                            <input type="text" id="" class="form-control" style="width: 50%" placeholder=""
                                aria-label="" [ngModel]="selectedRecord.ScheduleDate.split(' ')[0]" disabled>
                            <input type="text" id="" class="form-control" style="width: 50%" placeholder=""
                                aria-label="" [ngModel]="selectedRecord.ScheduleDate.split(' ')[1]" disabled>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="" class="form-label pe-2">Administered Dose</label>
                        <div class="d-flex gap-2">
                            <input type="text" id="" class="form-control" style="width: 50%" placeholder=""
                                aria-label="" [ngModel]="selectedRecord.Dose" disabled>
                            <input type="text" id="" class="form-control" style="width: 50%" placeholder=""
                                aria-label="" [ngModel]="selectedRecord.DoceUom" disabled>
                        </div>

                    </div>
                    <div class="col-md-6">
                        <label for="" class="form-label pe-2">Admin Route</label>
                        <input type="text" id="" class="form-control" placeholder="" aria-label=""
                            [ngModel]="selectedRecord.AdmRoute" disabled>
                    </div>
                    <div class="col-md-6">
                        <div class="">
                            <label for="" required="" class="form-label">Witness Nurse</label>
                            <div class="d-flex align-items-center input-group">
                                <input id="txtwitnessNurse" type="text" class="form-control pe-2" placeholder="Search"
                                    aria-label="Search" [matAutocomplete]="autoWitnessNurse"
                                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchWitnessNurse($event)">
                                <mat-autocomplete #autoWitnessNurse="matAutocomplete">
                                    <mat-option *ngFor="let item of witnessNurseData"
                                        (onSelectionChange)="onWitnessNurseSelected(item)" [value]="item.Fullname">
                                        {{item.Fullname}}
                                    </mat-option>
                                </mat-autocomplete>
                                <button type="button" id="button-addon2" class="btn btn-secondary-fill btn-icon">
                                    <img src="assets/images/icons/icon-search.svg" alt="">
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6" *ngIf="selectedRecord.IsVaccine == 'True'">
                        <label for="" class="form-label pe-2">Vaccines</label>
                        <div class="d-flex gap-2">
                            <select name="" class="form-select pe-4" id="" [(ngModel)]="selectedRecord.VaccinationID">
                                <option value="0">Select</option>
                                <option [value]="option.VaccinationID" *ngFor="let option of vaccinationsList">
                                    {{option.VaccinationName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6" *ngIf="selectedRecord?.IsVaccine=='True'">
                        <label for="" class="form-label pe-2">Dose Order</label>
                        <div class="d-flex gap-2">
                            <select name="" class="form-select pe-4" [(ngModel)]="selectedRecord.VaccinationDoseCount"
                                id="">
                                <option value="0">Select</option>
                                <option [value]="option.DoseOrderID" *ngFor="let option of doseOrderList">
                                    {{option.DoseOrderName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6" *ngIf="selectedRecord?.IsVaccine=='True'">
                        <label for="" class="form-label pe-2">Reason for Vaccination</label>
                        <div class="d-flex gap-2">
                            <select name="" class="form-select pe-4" id=""
                                [(ngModel)]="selectedRecord.VaccinationReasonID">
                                <option value="0">Select</option>
                                <option [value]="option.VaccinationReasonID" *ngFor="let option of reasonsList">
                                    {{option.VaccinationReasonName}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6"
                        *ngIf="selectedRecord?.VaccinationReasonID == 34 && selectedRecord?.IsVaccine=='True'">
                        <label for="" class="form-label pe-2">Other Reasons</label>
                        <input type="text" id="" class="form-control" placeholder=""
                            [(ngModel)]="selectedRecord.VaccinationReasonOther">
                    </div>
                    <div class="col-md-6" *ngIf="selectedRecord?.IsVaccine=='True'">
                        <label for="" class="form-label">Vaccine Type</label>
                        <div class="clinical_toggle toggle__switch switch-sm custom-inline-flex">
                            <button class="btn" [class.selected]="selectedRecord.VaccinationType === 1"
                                (click)="selectedRecord.VaccinationType = 1">Primary</button>
                            <button class="btn" [class.selected]="selectedRecord.VaccinationType === 2"
                                (click)="selectedRecord.VaccinationType = 2">Secondary</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="saveMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>Updated Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">Ok</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="modalValidationMessage" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>{{errorMsg}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="errorMessagesModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p *ngIf="errorMessages.length === 1">{{errorMessages[0]}}</p>
                <ul *ngIf="errorMessages.length > 1">
                    <li *ngFor="let error of errorMessages; let i = index"> {{error}}</li>
                </ul>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="panaceaResultsModal modal" data-bs-backdrop="static" tabindex="-1" id="SehaVaccResultsModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered my-2" style="max-width: 80%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Patient Vaccination Details</h5>
                <div class="d-flex align-items-center gap-2 ms-auto">
                    <!-- <button class="btn btn-main-outline" (click)="onRefreshClick()">Refresh</button> -->
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="p-1">


                <div class="doctor_worklist worklist_patientcard rounded-0 d-flex">
                    <div class="d-flex align-items-center w-100 ">
                        <div class="row mx-0 w-100 min_patient_card">
                            <div class="" style="width: 24%;">
                                <div class="d-flex align-items-center gap-2">
                                    <div class="patient-info d-flex align-items-center py-1">
                                        <div class="patient-photo me-2">
                                            <img *ngIf="BloodselectedView.GenderID == 1" src="assets/images/icons/male.svg"
                                                alt="" style="height:2rem;" class="position-relative">
                                            <img *ngIf="BloodselectedView.GenderID == 2" src="assets/images/icons/female.svg"
                                                alt="" style="height:2rem;" class="position-relative">
                                        </div>
                                        <div class="">
                                            <p class="value fs-7 fw-bold w-100">{{BloodselectedView.PatientName}}</p>
                                            <div class="d-flex align-items-center gap-2">
                                                <p>{{BloodselectedView.Gender}} | <span>{{BloodselectedView.PatientType == '2' ?
                                                        BloodselectedView.FullAge : BloodselectedView.Age}}</span> </p>
                                                <p><b>ID No.</b> : <span>{{BloodselectedView.SSN}}</span></p>
                                            </div>
                                            <p class="m-0 fs-8">{{BloodselectedView.Nationality}} | Mobile
                                                :{{BloodselectedView.MobileNo}}</p>
                                            <p>DOB : {{BloodselectedView?.DOB?.split(' ')[0]}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col pe-0">
                                <div class="row gx-2 align-items-center patient_card_details mb-0 h-100 row mx-0 border-bottom-primary-200"
                                    style="background: #fff;">
                                    
                                    <div class="col-3">
                                        <p class="label"> {{langData?.Ward?.DoctorName}} </p>
                                        <p class="color-highlight">{{BloodselectedView.DoctorFullName}}</p>
                                    </div>
                                  
                                    <div class="col-3" *ngIf="BloodselectedView.BillType!='Self'">
                                        <p class="label"> {{langData?.casesheet?.insurance_name}} </p>
                                        <p> {{BloodselectedView.CompanyName}}</p>
                                    </div>
                                </div>
                            </div>

                           
                        </div>
                    </div>
                </div>



            </div>
            <div class="modal-body p-2">


                <div class="fixed_alter_list rounded border-primary-200">
                    <div class="fixed_alter_header bg-primary-50 rounded-top">
                        <div class="row gx-1 p-2 mx-0">
                            <div class="col-1">
                                <p class="label m-0">Sl.No.</p>
                            </div>
                            <div class="col-3">
                                <p class="label m-0">Vaccination </p>
                            </div>
                            <div class="col-3">
                                <p class="label m-0">Vaccination Date</p>
                            </div>
                            <div class="col-2">
                                <p class="label m-0">Dose Order</p>
                            </div>
                            <div class="col-3">
                                <p class="label m-0">Hospital</p>
                            </div>

                        </div>
                    </div>
                    <div class="fixed_alter_body height-unset" style="max-height: calc(100vh - 9rem);">
                        <div class="row gx-1 p-2 mx-0 alter_div rounded-0"
                            *ngFor="let item of patientvaccinationsList; let i = index">
                            <div class="col-1">
                                <p class="m-0 text-break">{{i + 1}}</p>
                            </div>
                            <div class="col-3">
                                <p class="m-0 text-break">{{item.agentNameEn}}</p>
                            </div>
                            <div class="col-3">
                                <p class="m-0 text-break">{{item.vaccinationDate}}</p>
                            </div>
                            <div class="col-2">
                                <p class="m-0 text-break">{{item.doseOrder}}</p>
                            </div>
                            <div class="col-3">
                                <p class="m-0 text-break">{{item.organizationNameEn}}</p>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
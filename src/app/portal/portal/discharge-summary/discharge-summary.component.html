<form class="discharge_sumary" #myForm="ngForm" (dblclick)="handleFormClick($event)">
    <div class="content_discharge_sumary p-2" #contentDiv>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Diagnosis:</h6>
            <div #divDiagnosis class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true" [innerHTML]="Diagnosis">
            </div>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">History of Present Illness:</h6>
            <span>
                <div #divHistory class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="textareaHistoryofPresentIllnessContent">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Reason for Admission:</h6>
            <span>
                <div #divResAdmission class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="ReasonforAdmission">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Treatment and Procedures:</h6>
            <span>
                <div #divTreatment class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="TreatmentandProcedures">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Medications: <i>(Medications during admission)</i>:</h6>
            <span>
                <div class="table-responsive" [innerHTML]="MedicationDuringAdmission">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Allergies and Adverse Reactions:</h6>
            <span>
                <div class="table-responsive" [innerHTML]="AllergyDataHTML">

                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Hospital Course:</h6>
            <span>
                <div #divHospital class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true" [innerHTML]="HospitalCourse">

                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Complications:</h6>
            <span>
                <div #divComplications class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="Complications">
                </div>
           </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Laboratory and Diagnostic Results:</h6>
            <span>
                <div class="table-responsive" [innerHTML]="LabTests">
               
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Consultations:</h6>
            <span>
                <div #divConsultations class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="Consultations">

                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Recommendations and Follow-Up Care:</h6>
            <span>
                <div #divRecommendations class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="RecommendationsFollowUpCare">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Discharge Medications:</h6>
            <span>
                <div class="table-responsive" [innerHTML]="DischargeMedication">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Functional Status:</h6>
            <span>
                <div #divFunctional class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="FunctionalStatus">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Advance Directives: <i>(if applicable)</i>:</h6>
           <span>
            <div #divAdvance class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true" [innerHTML]="AdvanceDirectives">
            </div>
           </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Discharge Status:</h6>
            <span>
                <div #divDischargeStatus class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="DischargeStatus">
                </div>
           </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Patient Education:</h6>
            <span>
                <div #divPatientEducation class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="PatientEducation">
                </div>
            </span>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Discharge Instructions:</h6>
            <div>
                <div #divDischargeInstructions class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="DischargeInstructions">
                </div>
            </div>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Follow-Up Appointments:</h6>
            <div>
                <div #divAppointments class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="FollowUpAppointments">
                </div>
            </div>
        </div>
        <div class="">
            <h6 class="m-0 fs-7 p-2 px-3 bg-primary-50 clr-primary-600">Patient and Family Acknowledgment:</h6>
            <span>
                <div #divFamilyAcknowledgment class="textarea_box p-2 rounded-2 border bg-transparent h-100 m-2" contenteditable="true"
                    [innerHTML]="PatientandFamilyAcknowledgment">
                </div>
            </span>
        </div>

        <div class="p-3">
            <h5 class="m-0 clr-primary-600 fs-6">{{DoctorName}}</h5>
            <label for="" class="form-label">{{DoctorSpecialisation}}, {{DocEmpNo}}</label>
            <!-- <div>
                <canvas #signatureCanvas width="400" height="200" style="border: 1px solid #000;"
                        (mousedown)="startDrawing($event)" (mousemove)="draw($event)" (mouseup)="endDrawing()"></canvas>
              </div> -->
              <div class="col-3" style="width: 23%;">
                <div class="signature_box text-end ms-auto">
                    <div class="d-inline-flex align-items-center justify-content-end gap-2 label_line" (click)="fetchDoctorSignature()">
                        <p class="m-0">Add Signature / إضافة التوقيع</p>
                        <svg width="15" height="15" viewBox="0 0 10 10" fill="none"
                            xmlns="http://www.w3.org/2000/svg" class="cursor-pointer">
                            <rect x="0.747803" y="0.0947266" width="9" height="9" rx="4.5" fill="#DAEEF1">
                            </rect>
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M5.24789 2.09473C5.05065 2.09473 4.89075 2.25463 4.89075 2.45187V4.23747H3.10495C2.9077 4.23747 2.7478 4.39737 2.7478 4.59461C2.7478 4.79185 2.9077 4.95175 3.10495 4.95175H4.89075V6.73758C4.89075 6.93483 5.05065 7.09473 5.24789 7.09473C5.44513 7.09473 5.60503 6.93483 5.60503 6.73758V4.95175H7.39066C7.5879 4.95175 7.7478 4.79185 7.7478 4.59461C7.7478 4.39737 7.5879 4.23747 7.39066 4.23747H5.60503V2.45187C5.60503 2.25462 5.44513 2.09473 5.24789 2.09473Z"
                                fill="#368796"></path>
                        </svg>
                    </div>                 
                    <div class="position-relative">
                        <app-signature #Sign3Ref *ngIf="showSignature" (base64Signature)="base64DoctorSignature($event)"
                        [imageToDisplay]="base64StringSig2"></app-signature>

                        <svg (click)="clearR3Signature()" class="delicon cursor-pointer" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19.2499 6.16919H19.1765C14.3274 5.68335 9.48736 5.50002 4.6932 5.98585L2.82319 6.16919C2.73223 6.17868 2.64028 6.17004 2.55267 6.14378C2.46506 6.11752 2.38353 6.07416 2.31278 6.01619C2.24203 5.95823 2.18347 5.88682 2.14049 5.80609C2.09751 5.72536 2.07095 5.63691 2.06236 5.54585C2.02569 5.16085 2.3007 4.83085 2.67653 4.79419L4.54653 4.61085C9.4232 4.11585 14.364 4.30835 19.314 4.79419C19.6899 4.83085 19.9649 5.17002 19.9282 5.54585C19.9144 5.71606 19.8368 5.87478 19.7111 5.99033C19.5853 6.10588 19.4206 6.16975 19.2499 6.16919Z" fill="#EB6247"/>
                            <path d="M7.79186 5.24331C7.75519 5.24331 7.71852 5.24331 7.67269 5.23415C7.49484 5.2021 7.33666 5.10158 7.23211 4.95418C7.12756 4.80678 7.08498 4.62426 7.11353 4.44581L7.31519 3.24498C7.46186 2.36498 7.66352 1.14581 9.79936 1.14581H12.201C14.346 1.14581 14.5477 2.41081 14.6852 3.25415L14.8869 4.44581C14.951 4.82165 14.6944 5.17915 14.3277 5.23415C13.9519 5.29831 13.5944 5.04165 13.5394 4.67498L13.3377 3.48331C13.2094 2.68581 13.1819 2.52998 12.2102 2.52998H9.80852C8.83686 2.52998 8.81853 2.65831 8.68103 3.47415L8.47019 4.66581C8.44408 4.82693 8.3615 4.97349 8.23722 5.0793C8.11294 5.1851 7.95507 5.24324 7.79186 5.24331ZM13.9427 20.856H8.05769C4.85852 20.856 4.73019 19.0868 4.62936 17.6568L4.03353 8.42598C4.00603 8.05015 4.29936 7.72015 4.67519 7.69265C5.06019 7.67431 5.38103 7.95848 5.40853 8.33431L6.00436 17.5651C6.10519 18.9585 6.14186 19.481 8.05769 19.481H13.9427C15.8677 19.481 15.9044 18.9585 15.996 17.5651L16.5919 8.33431C16.6194 7.95848 16.9494 7.67431 17.3252 7.69265C17.701 7.72015 17.9944 8.04098 17.9669 8.42598L17.371 17.6568C17.2702 19.0868 17.1419 20.856 13.9427 20.856Z" fill="#EB6247"/>
                            <path d="M12.5218 15.8125H9.46933C9.0935 15.8125 8.78183 15.5008 8.78183 15.125C8.78183 14.7491 9.0935 14.4375 9.46933 14.4375H12.5218C12.8977 14.4375 13.2093 14.7491 13.2093 15.125C13.2093 15.5008 12.8977 15.8125 12.5218 15.8125ZM13.2918 12.1458H8.7085C8.33266 12.1458 8.021 11.8341 8.021 11.4583C8.021 11.0825 8.33266 10.7708 8.7085 10.7708H13.2918C13.6677 10.7708 13.9793 11.0825 13.9793 11.4583C13.9793 11.8341 13.6677 12.1458 13.2918 12.1458Z" fill="#EB6247"/>
                        </svg> 
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>


<div class="modal idcSearch" id="modalDynamic" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width:27%">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>{{inputDynamicValue}}</h5>
                <div class="ms-auto d-flex align-items-center">
                    <button class="btn btn-main-outline" (click)="Update()">Update</button>
                    <button type="button" class="btn-close ms-4" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="modal-body py-5">
                <app-dynamic *ngIf="inputDynamicType" [inputValue]="inputDynamicType"
                    [inputDynamicValue]="inputDynamicValue" (receivedData)="receivedData($event)"></app-dynamic>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="showLabReportsModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Report</h5>
                <div class="ms-auto">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="trustedUrl = ''"></button>
                </div>
            </div>
            <div class="modal-body">
                <iframe *ngIf="trustedUrl" height="600" width="100%" [src]="(trustedUrl ? trustedUrl : '') | safeUrl"
                    frameborder="0"></iframe>

            </div>
        </div>
    </div>
</div>

<div class="modal" id="saveMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>Data Saved Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="SaveData()">Ok</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="errorMessageModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>Please select the below Mandatory fields</p>
                <ul *ngIf="spanErrorList.length > 0">
                    <li *ngFor="let error of spanErrorList; let i = index"> {{error}}</li>
                </ul>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                     data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div [formGroup]="diagnosis" class="h-100">
    <div class="" formArrayName="items">
        <div class="bg-primary-50 p-2 d-flex align-items-center justify-content-between" style="height: 2.5rem;">
            <div class="actions ms-auto d-flex align-items-center gap-2" *ngIf="!IsReadOnly">
                <div class="diag_type d-flex align-items-center gap-1">
                    <p class="clr-primary-600 m-0 fs-8 fw-bold">{{langData?.common?.Diagnosis}} :</p>
                    <button class="btn btn-main-outline" (click)="openPrevModal()">Previous</button>
                    <button class="btn btn-main-outline"(click)="openModal()">Doctor's Frequent Diagnosis</button>
                    <!-- <button class="btn btn-main-outline d-none" data-bs-toggle="modal" data-bs-target="#exampleModal">{{langData?.Diagnosis?.PreviousVisits}}</button> -->
                </div>
                <div class="textblink fs-7" *ngIf="showReferralDiagMsg"> Diagnosis need to be saved</div>
                <button class="btn btn-danger-outline d-none" (click)="clearDiagnosis()">{{langData?.common?.Clear}} </button>
                <!-- <button class="btn btn-main-outline"  *ngIf="!endofEpisode" (click)="saveDiagnosisData()">{{langData?.common?.Save}} </button> -->
            </div>
        </div>
        <div class="casesheet_diagnosis">
            <div class="p-2">
                <div class="CommanSearch__form bg-white ps-2" *ngIf="!IsReadOnly">
                    <svg (click)="openIDCSearch()" class="search cursor-pointer" width="20" height="20"
                        viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_9239_2779)"><path d="M11 2.51953C15.968 2.51953 20 6.55153 20 11.5195C20 16.4875 15.968 20.5195 11 20.5195C6.032 20.5195 2 16.4875 2 11.5195C2 6.55153 6.032 2.51953 11 2.51953ZM11 18.5195C14.867 18.5195 18 15.3865 18 11.5195C18 7.65153 14.867 4.51953 11 4.51953C7.132 4.51953 4 7.65153 4 11.5195C4 15.3865 7.132 18.5195 11 18.5195ZM19.485 18.5905L22.314 21.4185L20.899 22.8335L18.071 20.0045L19.485 18.5905Z" fill="#368796" /></g>
                    </svg>
                    <input type="text" class="form-control" #myDiag
                        placeholder="{{langData?.common?.Diagnosis}}" aria-label="Country Name"
                        [matAutocomplete]="autoMed"
                        (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : fetchDiagnosisSearch($event)">
                    <mat-autocomplete #autoMed="matAutocomplete">
                        <mat-option *ngFor="let item of listOfItems" (onSelectionChange)="selectItem(item)">
                            {{item.Name}}
                        </mat-option>
                    </mat-autocomplete>
                    <button type="reset" class="reset-btn">
                        <svg class="clear cursor-pointer" width="14" height="14" viewBox="0 0 15 16" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M0.564453 0.928909C0.173828 1.31941 0.173828 1.95259 0.564453 2.34309L6.22168 8.0002L0.564941 13.6568C0.174316 14.0474 0.174316 14.6805 0.564941 15.0711C0.955566 15.4616 1.58838 15.4616 1.979 15.0711L7.63574 9.41432L13.2925 15.0711C13.6831 15.4616 14.3159 15.4616 14.7065 15.0711C15.0972 14.6805 15.0972 14.0473 14.7065 13.6568L9.0498 8.0002L14.707 2.34309C15.0977 1.95259 15.0977 1.31941 14.707 0.928909C14.3164 0.538406 13.6831 0.538406 13.293 0.928909L7.63574 6.58607L1.97852 0.928909C1.58838 0.538345 0.955078 0.538345 0.564453 0.928909Z"
                                fill="#368796" />
                        </svg>
                    </button>
                </div>
                <div class="diagnosis_wrapper mt-2">
                    <div class="card-header rounded-0 py-2"  style="min-height: 2rem;">
                        <div class="row g-2 w-100">
                            <div class="col-md-1">
                                <p class="label m-0">{{langData?.Diagnosis?.ICD}}</p>
                            </div>
                            <div class="col">
                                <p class="label m-0">{{langData?.common?.Diagnosis}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="diag_table">
                        <div class="diag_td " *ngFor="let item of items.controls; let i = index" [formGroupName]="i">
                            <div class="border" [style.borderColor]="item.get('ShowCoverageStatus')?.value ? '#e84646 !important' : ''" *ngIf="item.get('BLK')?.value === 0">  
                                <!-- <svg width="20" height="25" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
                                    <path d="M22.23,13l4.58-6.42A1,1,0,0,0,26,5H7V4A1,1,0,0,0,5,4V28a1,1,0,0,0,2,0V21H26a1,1,0,0,0,.81-1.58ZM7,19V7H24.06l-3.87,5.42a1,1,0,0,0,0,1.16L24.06,19Z" data-name="flag"/>
                                </svg> -->

                                <svg *ngIf="item.get('ShowCoverageStatus')?.value" class="flag_icon" width="17" height="20" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 32 32" viewBox="0 0 32 32" id="flag">
                                    <path d="M7.62,31.5c0.83002,0,1.5-0.67004,1.5-1.5V17.5h15.25c0.56,0,1.07001-0.31,1.33002-0.79004c0.26001-0.48999,0.22998-1.08997-0.08002-1.54999L22.19,10.07001L25.62,4.97998c0.31-0.46002,0.34003-1.06,0.08002-1.53998C25.44,2.95001,24.92999,2.64001,24.37,2.64001H9.12V2c0-0.83002-0.66998-1.5-1.5-1.5c-0.82001,0-1.5,0.66998-1.5,1.5v28C6.12,30.82996,6.79999,31.5,7.62,31.5z" fill="#f10101" class="color000000 svgShape"/>
                                </svg>

                                <div class="row mx-0 gx-2 p-2 align-items-center">
                                    <div class="col-md-1">
                                        <p>{{item.get('ItemCode')?.value}}</p>
                                    </div>
                                    <div class="col-5">
                                        <p class="fs-7">{{item.get('ItemName')?.value}}</p>
                                    </div>
                                    <div class="col-6">
                                        <div class="d-flex align-items-center gap-2 justify-content-end">
                                            <div class="clinical_toggle toggle__switch switch-sm d-inline-flex">
                                                <button (click)="selectDiagnosisType(item, 1, i)" [class]="item.get('DiagnosisType')?.value == 1 ? 'btn selected' : 'btn'" style="height: 1.15rem !important;">
                                                    <div class="custom_tooltip custom_tooltip_left">
                                                        Prov.
                                                        <div class="tooltip">
                                                            <p>Provisional</p>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button (click)="selectDiagnosisType(item, 2, i)" [class]="item.get('DiagnosisType')?.value == 2 ? 'btn selected' : 'btn'" style="height: 1.15rem !important;">
                                                    <div class="custom_tooltip custom_tooltip_left">
                                                        Fin.
                                                        <div class="tooltip">
                                                            <p>Final</p>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                            <div class="clinical_toggle toggle__switch switch-sm d-inline-flex">
                                                <button (click)="selectType(item, 1, i)" [class]="item.get('Type')?.value == 1 ? 'btn selected' : 'btn'" style="height: 1.15rem !important;">
                                                    <div class="custom_tooltip custom_tooltip_left">
                                                        Pri
                                                        <div class="tooltip">
                                                            <p>Primary</p>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button (click)="selectType(item, 2, i)" [class]="item.get('Type')?.value == 2 ? 'btn selected' : 'btn'" style="height: 1.15rem !important;">
                                                    <div class="custom_tooltip custom_tooltip_left">
                                                        Sec
                                                        <div class="tooltip">
                                                            <p>Secondary</p>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                            <div class="d-flex flex-nowrap gap-1 justify-content-end">
                                                <div [class]="(item.get('Remarks')?.value == '' || item.get('Remarks')?.value == 'undefined') ? 'remark_svg cursor-pointer custom_tooltip custom_tooltip_left' : 'remark_svg cursor-pointer custom_tooltip custom_tooltip_left active'"
                                                    (click)="openRemarks(i)">
                                                    <svg width="20" height="25" viewBox="0 0 24 25" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M11.3035 13.0436L13.6501 17.1209H15.6449L13.122 12.897C13.9237 12.7014 14.5155 12.3347 14.8968 11.7969C15.288 11.2494 15.4835 10.6432 15.4835 9.97823C15.4835 9.41114 15.3465 8.8979 15.0729 8.43822C14.8088 7.9787 14.403 7.61212 13.8554 7.33834C13.3177 7.06457 12.6577 6.9276 11.8753 6.9276H8.35541V17.1209H10.0273V13.0436H11.3035ZM11.8753 11.7089H10.0273V8.29156H11.8753C12.5109 8.29156 12.9853 8.44315 13.298 8.74631C13.611 9.03964 13.7674 9.45023 13.7674 9.97823C13.7674 10.5062 13.606 10.9267 13.2834 11.2395C12.9704 11.5526 12.5013 11.7089 11.8753 11.7089Z"
                                                            fill="#B0B4B5" />
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M23 12.0243C23 18.0995 18.075 23.0243 12 23.0243C5.92499 23.0243 1 18.0995 1 12.0243C1 5.94917 5.92499 1.02432 12 1.02432C18.075 1.02432 23 5.94917 23 12.0243ZM21.7778 12.0243C21.7778 17.4245 17.4 21.8021 12 21.8021C6.59996 21.8021 2.22222 17.4245 2.22222 12.0243C2.22222 6.62414 6.59996 2.24654 12 2.24654C17.4 2.24654 21.7778 6.62414 21.7778 12.0243Z"
                                                            fill="#B0B4B5" />
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M11.3035 13.0436L13.6501 17.1209H15.6449L13.122 12.897C13.9237 12.7014 14.5155 12.3347 14.8968 11.7969C15.288 11.2494 15.4835 10.6432 15.4835 9.97823C15.4835 9.41114 15.3465 8.8979 15.0729 8.43822C14.8088 7.9787 14.403 7.61212 13.8554 7.33834C13.3177 7.06457 12.6577 6.9276 11.8753 6.9276H8.35541V17.1209H10.0273V13.0436H11.3035ZM11.8753 11.7089H10.0273V8.29156H11.8753C12.5109 8.29156 12.9853 8.44315 13.298 8.74631C13.611 9.03964 13.7674 9.45023 13.7674 9.97823C13.7674 10.5062 13.606 10.9267 13.2834 11.2395C12.9704 11.5526 12.5013 11.7089 11.8753 11.7089Z"
                                                            stroke="#B0B4B5" stroke-width="0.5" />
                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M23 12.0243C23 18.0995 18.075 23.0243 12 23.0243C5.92499 23.0243 1 18.0995 1 12.0243C1 5.94917 5.92499 1.02432 12 1.02432C18.075 1.02432 23 5.94917 23 12.0243ZM21.7778 12.0243C21.7778 17.4245 17.4 21.8021 12 21.8021C6.59996 21.8021 2.22222 17.4245 2.22222 12.0243C2.22222 6.62414 6.59996 2.24654 12 2.24654C17.4 2.24654 21.7778 6.62414 21.7778 12.0243Z"
                                                            stroke="#B0B4B5" stroke-width="0.5" />
                                                    </svg>
                                                    <div class="tooltip end-0">
                                                        <p>{{langData?.Diagnosis?.Remarks}}</p>
                                                    </div>
                                                </div>
                                                <div [class]="item.get('IsFav')?.value == 1 ? 'fav_svg cursor-pointer custom_tooltip custom_tooltip_left active' : 'fav_svg cursor-pointer custom_tooltip custom_tooltip_left'"
                                                    (click)="saveFavouriteDiagnosis(item)">
                                                    <svg width="18" height="21" viewBox="0 0 21 21" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <g opacity="0.6">
                                                            <path
                                                                d="M8.86291 0.995268C9.50183 -0.299327 11.3479 -0.299325 11.9868 0.99527L13.8589 4.78852C14.1126 5.30261 14.603 5.65893 15.1704 5.74137L19.3565 6.34964C20.7851 6.55724 21.3556 8.31294 20.3218 9.32064L17.2927 12.2733C16.8822 12.6734 16.6949 13.25 16.7918 13.815L17.5068 17.9842C17.7509 19.4071 16.2574 20.4922 14.9796 19.8204L11.2354 17.852C10.728 17.5852 10.1217 17.5852 9.61431 17.852L5.87015 19.8204C4.59231 20.4922 3.09882 19.4071 3.34287 17.9842L4.05794 13.815C4.15485 13.25 3.96752 12.6734 3.557 12.2733L0.527911 9.32064C-0.505885 8.31294 0.0645748 6.55724 1.49325 6.34964L5.67934 5.74137C6.24667 5.65893 6.73711 5.30261 6.99082 4.78852L8.86291 0.995268Z"
                                                                fill="#B0B4B5" />
                                                        </g>
                                                    </svg>
                                                    <div class="tooltip end-0">
                                                        <p>{{langData?.Diagnosis?.Favourite}}</p>
                                                    </div>
                                                </div>
                                                <div class="cursor-pointer custom_tooltip custom_tooltip_left" *ngIf="!IsReadOnly && !(item.get('ItemCode')?.value == 'Z38.0' && selectedView?.PatientType == '2')" (click)="deleteItem(item)">
                                                    <svg width="23" height="22" viewBox="0 0 23 22" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <path
                                                            d="M20.0995 6.16917H20.0261C15.177 5.68334 10.337 5.5 5.5428 5.98584L3.6728 6.16917C3.58184 6.17866 3.48989 6.17003 3.40228 6.14377C3.31467 6.11751 3.23314 6.07414 3.16239 6.01618C3.09164 5.95822 3.03308 5.8868 2.9901 5.80607C2.94712 5.72534 2.92056 5.63689 2.91197 5.54584C2.8753 5.16084 3.1503 4.83084 3.52614 4.79417L5.39614 4.61084C10.2728 4.11584 15.2136 4.30834 20.1636 4.79417C20.5395 4.83084 20.8145 5.17 20.7778 5.54584C20.764 5.71605 20.6864 5.87477 20.5607 5.99032C20.4349 6.10586 20.2702 6.16973 20.0995 6.16917Z"
                                                            fill="#EB6247" />
                                                        <path
                                                            d="M8.64147 5.24333C8.6048 5.24333 8.56813 5.24333 8.5223 5.23416C8.34445 5.20211 8.18627 5.10159 8.08172 4.95419C7.97717 4.80679 7.93459 4.62427 7.96313 4.44583L8.1648 3.24499C8.31147 2.36499 8.51313 1.14583 10.649 1.14583H13.0506C15.1956 1.14583 15.3973 2.41083 15.5348 3.25416L15.7365 4.44583C15.8006 4.82166 15.544 5.17916 15.1773 5.23416C14.8015 5.29833 14.444 5.04166 14.389 4.67499L14.1873 3.48333C14.059 2.68583 14.0315 2.52999 13.0598 2.52999H10.6581C9.68647 2.52999 9.66813 2.65833 9.53063 3.47416L9.3198 4.66583C9.29369 4.82694 9.2111 4.97351 9.08683 5.07931C8.96255 5.18512 8.80468 5.24325 8.64147 5.24333ZM14.7923 20.856H8.9073C5.70813 20.856 5.5798 19.0868 5.47897 17.6568L4.88313 8.42599C4.85563 8.05016 5.14897 7.72016 5.5248 7.69266C5.9098 7.67433 6.23063 7.95849 6.25813 8.33433L6.85397 17.5652C6.9548 18.9585 6.99147 19.481 8.9073 19.481H14.7923C16.7173 19.481 16.754 18.9585 16.8456 17.5652L17.4415 8.33433C17.469 7.95849 17.799 7.67433 18.1748 7.69266C18.5506 7.72016 18.844 8.041 18.8165 8.42599L18.2206 17.6568C18.1198 19.0868 17.9915 20.856 14.7923 20.856Z"
                                                            fill="#EB6247" />
                                                        <path
                                                            d="M13.3714 15.8125H10.3189C9.94311 15.8125 9.63144 15.5008 9.63144 15.125C9.63144 14.7492 9.94311 14.4375 10.3189 14.4375H13.3714C13.7473 14.4375 14.0589 14.7492 14.0589 15.125C14.0589 15.5008 13.7473 15.8125 13.3714 15.8125ZM14.1414 12.1458H9.55811C9.18227 12.1458 8.87061 11.8342 8.87061 11.4583C8.87061 11.0825 9.18227 10.7708 9.55811 10.7708H14.1414C14.5173 10.7708 14.8289 11.0825 14.8289 11.4583C14.8289 11.8342 14.5173 12.1458 14.1414 12.1458Z"
                                                            fill="#EB6247" />
                                                    </svg>
                                                    <div class="tooltip end-0">
                                                        <p>{{langData?.Diagnosis?.Delete}}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 mt-2" *ngIf="item.get('Remarks')?.value != ''">
                                        <div class="remarks_ellipsis position-relative bg-primary-50 rounded-4 p-2">
                                            <div class="d-flex align-items-center gap-2" >
                                                <p class="label text-nowrap m-0">{{langData?.Diagnosis?.Remarks}} :</p>
                                                <div *ngIf="item.get('Remarks')?.value != '' ">
                                                    <p class="ellipsis">{{item.get('Remarks')?.value}}</p>
                                                    <div class="tooltip rounded-3">
                                                        <div class="overflow_height">
                                                            <p>{{item.get('Remarks')?.value}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tooltip ShowCoverageStatus" *ngIf="item.get('ShowCoverageStatus')?.value">
                                <p>{{item.get('CoverageStatus')?.value}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>            

        </div>
    </div>
</div>

<div class="modal fade" id="diagnosisComments" tabindex="-1" aria-labelledby="diagnosisCommentsLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="width: 35%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="diagnosisCommentsLabel">{{langData?.Diagnosis?.Remarks}}</h5>
                <div class="d-flex gap-2 align-items-center justify-content-end">
                    <button class="btn btn-danger-outline">{{langData?.common?.Clear}}</button>
                    <button class="btn btn-main-outline" *ngIf="!endofEpisode"
                        (click)="SaveRemarks()">{{langData?.common?.Save}}</button>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="modal-body" [formGroup]="remarkForm">
                <!-- <label for="" class="form-label">Remarks</label> -->
                <textarea name="" placeholder="Enter Remarks" class="form-control resize-none mb-2"
                    formControlName="Remarks" id="" cols="30" rows="3"></textarea>
                <span class="position-absolute bottom-0"
                    *ngIf="(isSubmitted && this.remarkForm.get('Remarks')?.errors) || (!this.remarkForm.get('Remarks')?.pristine && this.remarkForm.get('Remarks')?.invalid)">
                    <div class="text-danger" *ngIf="this.remarkForm.get('Remarks')?.errors?.['required']">
                        {{langData?.messages?.remarksisrequired}}</div>
                </span>
            </div>
        </div>
    </div>
</div>

<div class="modal idcSearch" id="modalIDCSearch" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width:65%">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" translate>{{langData?.Diagnosis?.ICDDiagnosis}}</h5>
                <div class="ms-auto d-flex align-items-center">
                    <button type="button" class="btn-close ms-4" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
            </div>
            <div class="modal-body" *ngIf="showChildComponent">
                <app-idc-search (idcSearch)="onIDCSelect($event)"></app-idc-search>
            </div>
        </div>
    </div>
</div>

<div class="modal frequently_used_modal" id="otpMessage" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" style="max-width:37rem;">
        <div class="modal-content">
            <div class="modal-header border-bottom">
                <h5 translate="" class="modal-title">{{langData?.Diagnosis?.FrequentlyUsedDiagnosis}}</h5>
                <div class="ms-auto d-flex align-items-center">
                    <div class="d-flex align-items-center justify-content-end gap-2">
                        <button class="btn btn-danger-outline"
                            (click)="closeToastr()">{{langData?.common?.Clear}}</button>
                        <button class="btn btn-main-outline" (click)="postData()">{{langData?.common?.Select}}</button>
                    </div>
                    <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"></button>
                </div>
            </div>
            <div class="modal-body p-0">
                <div class="validation_err" *ngIf="showFavValidation">
                    <p class="m-0 fs-7">{{langData?.messages?.selectonediagnosis}}</p>
                </div>
                <!-- <div class="table-cards_div p-2 cursor-pointer" [class.active]="view.selected"
                    *ngFor="let view of favDetailsList let i = index;" (click)="selectedRow(view.DiseaseID)">
                    <div class="row align-items-center mx-0">
                        <div class="col-md-10">
                            <p class="label">{{langData?.common?.Name}}</p>
                            <div class="custom_check d-flex align-items-center">
                                <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                    xmlns="http://www.w3.org/2000/svg" class="check_svg me-1">
                                    <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                    <path
                                        d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                        fill="white" stroke="white" stroke-width="0.25"></path>
                                </svg>
                                <p class="value">{{view.DiseaseName}}</p>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <p translate class="label">{{langData?.Diagnosis?.Code}}</p>
                            <p translate class="value">{{view.DiseaseCode}}</p>
                        </div>
                    </div>
                </div> -->


                <div class="fixed_alter_list frequently_used_table">
                    <div class="fixed_alter_header bg-primary-50">
                        <div class="row gx-2 p-2 mx-0">
                            <div class="col-9">
                                <p class="label m-0">{{langData?.common?.Name}}</p>
                            </div>
                            <div class="col-3">
                                <p class="label m-0">{{langData?.Diagnosis?.Code}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="fixed_alter_body">
                        <div class="p-2">
                            <input type="text" class="CommonSearch__input form-control ps-1"
                            [(ngModel)]="searchText" [ngModelOptions]="{ standalone: true }"
                            placeholder="Search">
                        </div>
                        <div class="row gx-2 p-2 mx-0 alter_div align-items-center" 
                        *ngFor="let view of filteredList(); let i = index;" >
                            <div class="col-9">
                                <div class="custom_check d-flex align-items-center" [class.active]="view.selected" (click)="selectedRow(view.DiseaseID)">
                                    <!-- <img src="assets/images/icons/toast-success.svg" alt="" class="me-1 check_img"> -->
                                    <svg width="18" height="18" viewBox="0 0 20 21" fill="none"
                                        xmlns="http://www.w3.org/2000/svg" class="check_svg me-1">
                                        <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                        <path
                                            d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                            fill="white" stroke="white" stroke-width="0.25"></path>
                                    </svg>
                                    <p class="m-0">{{view.DiseaseName}}</p>
                                </div>
                            </div>
                            <div class="col-3">
                                <p class="m-0">{{view.DiseaseCode}}</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<div class="modal prev_used_modal" id="previousDiagnosis" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" style="max-width:90%">
        <div class="modal-content">
            <div class="modal-header border-bottom">
                <h5 translate="" class="modal-title">{{langData?.Diagnosis?.PreviousVisitsDiagnosis}}</h5>
                <div class="ms-auto d-flex align-items-center">
                    <div class="d-flex align-items-center justify-content-end gap-2">
                        <div class="">
                            <input type="text" class="CommonSearch__input form-control ps-1" style="width: 18rem;"
                            [(ngModel)]="searchVisitText" [ngModelOptions]="{ standalone: true }"
                            placeholder="Search">
                        </div>
                        <button class="btn btn-danger-outline"
                            (click)="clearPreviousDiagnosis()">{{langData?.common?.Clear}}</button>
                        <button class="btn btn-main-outline"
                            (click)="selectPreviousDiagnosis()">{{langData?.common?.Select}}</button>
                    </div>
                    <button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"></button>
                </div>
            </div>
            <div class="modal-body p-0">
                <div class="w-100" *ngIf="isClear">
                    <div class="validation_err position-relative" *ngIf="showPreValidation">
                        <p class="m-0 fs-7">{{langData?.messages?.selectonediagnosis}}</p>
                    </div>
                    

                    <div class="fixed_alter_list previousDiagnosis_table">
                        <div class="fixed_alter_header bg-primary-50">
                            <div class="row gx-2 p-2 mx-0">
                                <div class="" style="width: 5%;"> </div>
                                <div class="" style="width: 20%;">
                                    <p class="label m-0">{{langData?.common?.Diagnosis}}</p>
                                </div>
                                <div class="" style="width: 10%;">
                                    <p class="label m-0">{{langData?.Diagnosis?.ICD}}</p>
                                </div>
                                <div class="" style="width: 15%;">
                                    <p class="label m-0">{{langData?.Diagnosis?.Remarks}}</p>
                                </div>
                                <div class="" style="width: 7%;">
                                    <p class="label m-0">{{langData?.Diagnosis?.DiagnosisType}}</p>
                                </div>
                                <div class="" style="width: 20%;">
                                    <p class="label m-0">{{langData?.Ward?.DoctorName}}</p>
                                </div>
                                 <div class="" style="width: 10%;">
                                    <p class="label m-0">Specialisation</p>
                                </div>
                                <div class="" style="width: 10%;">
                                    <p class="label m-0">{{langData?.common?.VisitDate}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="fixed_alter_body">
                            <div class="row gx-2 p-2 mx-0 alter_div align-items-center" [class.active]="item.active" *ngFor="let item of filteredVisitedList(); let i = index">
                                <div class="" style="width: 5%;">
                                    <div class="custom_check d-flex align-items-center justify-content-center" [class.active]="item.active">
                                        <!-- <img src="assets/images/icons/toast-success.svg" alt="" class="me-1 check_img" (click)="selectedPreviousDiagnosis(item)"> -->
                                        <svg (click)="selectedPreviousDiagnosis(item)" width="18" height="18"
                                            viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"
                                            class="check_svg me-1">
                                            <circle cx="10" cy="10.5" r="10" fill="#43BC94"></circle>
                                            <path
                                                d="M9.85969 13.8389C10.1922 13.8374 10.5109 13.7054 10.747 13.4712L10.747 13.4713L10.7496 13.4685L18.7068 5.08439C18.825 4.96682 18.9188 4.8271 18.9829 4.67321C19.0473 4.51873 19.0804 4.35303 19.0804 4.18568C19.0804 4.01832 19.0473 3.85262 18.9829 3.69814C18.9186 3.5437 18.8243 3.40352 18.7055 3.28569C18.468 3.04958 18.1467 2.91704 17.8118 2.91704C17.4769 2.91704 17.1556 3.04958 16.918 3.28569L16.918 3.28564L16.9152 3.28862L9.85639 10.7804L8.06528 8.98932C7.95221 8.85834 7.81352 8.75187 7.65773 8.67649C7.50045 8.6004 7.32913 8.55764 7.15455 8.5509C6.97996 8.54416 6.80586 8.57357 6.64318 8.63731C6.4805 8.70104 6.33274 8.79771 6.2092 8.92126C6.08565 9.04481 5.98898 9.19256 5.92524 9.35524C5.86151 9.51792 5.83209 9.69202 5.83884 9.86661C5.84558 10.0412 5.88834 10.2125 5.96443 10.3698C6.03979 10.5255 6.14622 10.6642 6.27716 10.7773L8.95915 13.4707L8.9597 13.4712C9.07816 13.5887 9.21864 13.6817 9.3731 13.7447C9.52752 13.8078 9.69288 13.8398 9.85969 13.8389ZM9.85969 13.8389C9.85965 13.8389 9.85962 13.8389 9.85959 13.8389L9.85906 13.7139L9.85978 13.8389C9.85975 13.8389 9.85972 13.8389 9.85969 13.8389Z"
                                                fill="white" stroke="white" stroke-width="0.25"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="" style="width: 20%;">
                                    <p class="m-0">{{item.DiseaseName}}</p>
                                </div>
                                <div class="" style="width: 10%;">
                                    <p class="m-0">{{item.Codes}}</p>
                                </div>
                                <div class="" style="width: 15%;">
                                    <p class="m-0">{{item.Remarks}}</p>
                                </div>
                                <div class="" style="width: 7%;">
                                    <p class="m-0">{{item.DiagnosisType ? 'Provisional' : 'Final'}}</p>
                                </div>
                                <div class="" style="width: 20%;">
                                    <p class="m-0">{{item.DoctorName}}</p>
                                </div>
                                 <div class="" style="width: 10%;">
                                    <p class="m-0">{{item.Specialisation}}</p>
                                </div>
                                <div class="" style="width: 10%;">
                                    <p class="m-0">{{item.VisitDate | date:'dd-MMM-YYYY'}}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="saveDiagnosisMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>Data Saved Successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="SaveData()">Ok</a>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal" id="errorDiagnosisMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>{{errorMessage}}</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" data-bs-abackdrop="static" data-bs-keyboard="false" id="errorChiefComplaintsMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>No Chief Complaints saved for the patient</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="RedirectToAssessments()">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" data-bs-abackdrop="static" data-bs-keyboard="false" id="divDefaultDiagnosisMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p>Please add at least one diagnosis before saving</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline" data-bs-dismiss="modal"
                        (click)="RedirectToAssessments()">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>
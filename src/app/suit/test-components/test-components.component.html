<app-suit-header [IsSwitchWard]="true"></app-suit-header>
<div class="page-header sticky-top shadow-sm justify-content-between">
    <h2 class="page-heading">Test Components</h2>
    <div class="d-flex align-items-center gap-2">
        <!-- <button class="btn btn-main-outline">Modify</button> -->
        <button class="btn btn-danger-outline" (click)="clearForm()">Clear</button>
        <button class="btn btn-main-outline" (click)="saveTestComponents()" [disabled]="testComponentsCollection.length === 0">Save</button>
    </div>
</div>

<div class="p-2">
    <div class="row g-2 align-items-end">
        <div class="col-3">
            <label for="" class="form-label">Test Name</label>
            <div class="d-flex input-group">
                <input id="textbox_test_name" type="text" class="form-control" placeholder="Search" aria-label="Search"
                    [matAutocomplete]="testName"
                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchTestName($event)"
                    (keydown.enter)="searchTestName($event)">
                <mat-autocomplete #testName="matAutocomplete">
                    <mat-option *ngFor="let item of testsCollection" [value]="item.Name"
                        (onSelectionChange)="onTestNameSelection(item)">
                        {{item.Name}}
                    </mat-option>
                </mat-autocomplete>
                <button type="button" class="btn btn-secondary-fill btn-icon">
                    <img src="assets/images/icons/icon-search.svg" alt="">
                </button>
            </div>
        </div>
        <div class="col-3">
            <label for="" class="form-label">Components</label>
            <div class="d-flex input-group">
                <input id="textbox_component_name" type="text" class="form-control" placeholder="Search"
                    aria-label="Search" [matAutocomplete]="componentName"
                    (keyup)="($event.key === 'ArrowUp' || $event.key === 'ArrowDown') ? $event.preventDefault() : searchComponentName($event)"
                    (keydown.enter)="searchTestName($event)">
                <mat-autocomplete #componentName="matAutocomplete">
                    <mat-option *ngFor="let item of componentsCollection" [value]="item.Name"
                        (onSelectionChange)="onComponentNameSelection(item)">
                        {{item.Name}}
                    </mat-option>
                </mat-autocomplete>
                <button type="button" class="btn btn-secondary-fill btn-icon">
                    <img src="assets/images/icons/icon-search.svg" alt="">
                </button>
            </div>
        </div>
    </div>
    <div class="mt-2">
        <div class="fixed_alter_list testComponents_table testRejected rounded rounded-bottom-0 border-primary-200">
            <div class="fixed_alter_header bg-primary-50 rounded-top">
                <div class="row gx-2 p-2 mx-0">
                    <div class="" style="width: 5%;">
                        <p class="label m-0">Sl.No</p>
                    </div>
                    <div class="" style="width: 55%;">
                        <p class="label m-0">Name</p>
                    </div>
                    <div class="" style="width: 20%;">
                        <p class="label m-0">Component Type</p>
                    </div>
                    <div class="" style="width: 20%;">
                        <p class="label m-0">Actions</p>
                    </div>
                </div>
            </div>
            <div class="fixed_alter_body">
                <div class="row gx-2 p-2 mx-0 alter_div rounded-0"
                    *ngFor="let item of testComponentsCollection; let i = index;">
                    <div class="" style="width: 5%;">
                        <p class="m-0">{{i + 1}}</p>
                    </div>
                    <div class="" style="width: 55%;">
                        <p class="m-0">{{item.ParameterName || item.Name}}</p>
                    </div>
                    <div class="" style="width: 20%;">
                        <p class="m-0">{{item.ControlType}}</p>
                    </div>
                    <div class="" style="width: 20%;">
                        <div class="d-flex align-items-center gap-2">
                            <svg class="cursor-pointer" width="16" height="16" viewBox="0 0 12 8" fill="none"
                                xmlns="http://www.w3.org/2000/svg" [class.disabled]="i === 0" (click)="moveUp(i)">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M5.78003 3.99317L2.00879 7.76441L0.123175 5.87879L5.78003 0.221936L11.4369 5.87879L9.55127 7.76441L5.78003 3.99317Z"
                                    fill="#368796" />
                            </svg>
                            <svg class="cursor-pointer" width="16" height="16" viewBox="0 0 13 9" fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                                [class.disabled]="i === testComponentsCollection.length - 1" (click)="moveDown(i)">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M6.39014 4.31029L10.1614 0.539059L12.047 2.42468L6.39014 8.08153L0.733282 2.42468L2.6189 0.539058L6.39014 4.31029Z"
                                    fill="#368796" />
                            </svg>
                            <div class="del_svg cursor-pointer custom_tooltip custom_tooltip_left text-end"
                                (click)="deleteTestComponent(i)">
                                <svg width="23" height="22" viewBox="0 0 23 22" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M20.0995 6.16917H20.0261C15.177 5.68334 10.337 5.5 5.5428 5.98584L3.6728 6.16917C3.58184 6.17866 3.48989 6.17003 3.40228 6.14377C3.31467 6.11751 3.23314 6.07414 3.16239 6.01618C3.09164 5.95822 3.03308 5.8868 2.9901 5.80607C2.94712 5.72534 2.92056 5.63689 2.91197 5.54584C2.8753 5.16084 3.1503 4.83084 3.52614 4.79417L5.39614 4.61084C10.2728 4.11584 15.2136 4.30834 20.1636 4.79417C20.5395 4.83084 20.8145 5.17 20.7778 5.54584C20.764 5.71605 20.6864 5.87477 20.5607 5.99032C20.4349 6.10586 20.2702 6.16973 20.0995 6.16917Z"
                                        fill="#EB6247"></path>
                                    <path
                                        d="M8.64147 5.24333C8.6048 5.24333 8.56813 5.24333 8.5223 5.23416C8.34445 5.20211 8.18627 5.10159 8.08172 4.95419C7.97717 4.80679 7.93459 4.62427 7.96313 4.44583L8.1648 3.24499C8.31147 2.36499 8.51313 1.14583 10.649 1.14583H13.0506C15.1956 1.14583 15.3973 2.41083 15.5348 3.25416L15.7365 4.44583C15.8006 4.82166 15.544 5.17916 15.1773 5.23416C14.8015 5.29833 14.444 5.04166 14.389 4.67499L14.1873 3.48333C14.059 2.68583 14.0315 2.52999 13.0598 2.52999H10.6581C9.68647 2.52999 9.66813 2.65833 9.53063 3.47416L9.3198 4.66583C9.29369 4.82694 9.2111 4.97351 9.08683 5.07931C8.96255 5.18512 8.80468 5.24325 8.64147 5.24333ZM14.7923 20.856H8.9073C5.70813 20.856 5.5798 19.0868 5.47897 17.6568L4.88313 8.42599C4.85563 8.05016 5.14897 7.72016 5.5248 7.69266C5.9098 7.67433 6.23063 7.95849 6.25813 8.33433L6.85397 17.5652C6.9548 18.9585 6.99147 19.481 8.9073 19.481H14.7923C16.7173 19.481 16.754 18.9585 16.8456 17.5652L17.4415 8.33433C17.469 7.95849 17.799 7.67433 18.1748 7.69266C18.5506 7.72016 18.844 8.041 18.8165 8.42599L18.2206 17.6568C18.1198 19.0868 17.9915 20.856 14.7923 20.856Z"
                                        fill="#EB6247"></path>
                                    <path
                                        d="M13.3714 15.8125H10.3189C9.94311 15.8125 9.63144 15.5008 9.63144 15.125C9.63144 14.7492 9.94311 14.4375 10.3189 14.4375H13.3714C13.7473 14.4375 14.0589 14.7492 14.0589 15.125C14.0589 15.5008 13.7473 15.8125 13.3714 15.8125ZM14.1414 12.1458H9.55811C9.18227 12.1458 8.87061 11.8342 8.87061 11.4583C8.87061 11.0825 9.18227 10.7708 9.55811 10.7708H14.1414C14.5173 10.7708 14.8289 11.0825 14.8289 11.4583C14.8289 11.8342 14.5173 12.1458 14.1414 12.1458Z"
                                        fill="#EB6247"></path>
                                </svg>
                                <div class="tooltip">
                                    <p>Delete</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="savemsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-success.svg" alt="">
            <div class="modal-body">
                <p>Saved successfully</p>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">Ok</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="errorMsg" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-toast modal-toast-success">
        <div class="modal-content">
            <img class="modal-header-icon" src="assets/images/icons/toast-info.svg" alt="">
            <div class="modal-body">
                <p *ngIf="errorMessages.length === 1">{{errorMessages[0]}}</p>
                <ul *ngIf="errorMessages.length > 1">
                    <li *ngFor="let error of errorMessages; let i = index"> {{error}}</li>
                </ul>
                <div class="modal-footer">
                    <a href="javascript:void(0)" type="button" class="btn btn-main-outline"
                        data-bs-dismiss="modal">{{langData?.common?.ok}}</a>
                </div>
            </div>
        </div>
    </div>
</div>